!function(){"use strict";function ew(){var n=[];return function t(i,r){return n.push(i+" ")>w.cacheLength&&delete t[n.shift()],t[i+" "]=r}}function di(n){return n[st]=!0,n}function urt(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||-2147483648)-(~n.sourceIndex||-2147483648);if(r)return r;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return n?1:-1}function rnt(n){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===n}}function unt(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function yf(n){return di(function(t){return t=+t,di(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ow(n){return n&&typeof n.getElementsByTagName!==ol&&n}function frt(){}function cl(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function sw(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=lgt++;return t.first?function(t,i,f){for(;t=t[r];)if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,e){var o,s,h=[er,f];if(e){for(;t=t[r];)if((1===t.nodeType||u)&&n(t,i,e))return!0}else for(;t=t[r];)if(1===t.nodeType||u){if((o=(s=t[st]||(t[st]={}))[r])&&o[0]===er&&o[1]===f)return h[2]=o[2];if((s[r]=h)[2]=n(t,i,e))return!0}}}function hw(n){return 1<n.length?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function ll(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;f<s;f++)(e=n[f])&&(i&&!i(e,r,u)||(o.push(e),h&&t.push(f)));return o}function cw(n,t,i,r,u,f){return r&&!r[st]&&(r=cw(r)),u&&!u[st]&&(u=cw(u,f)),di(function(f,e,o,s){var l,c,a,w=[],y=[],b=e.length,k=f||function(n,t,i){for(var r=0,u=t.length;r<u;r++)p(n,t[r],i);return i}(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?k:ll(k,w,n,o,s),h=i?u||(f?n:b||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=ll(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&-1<(l=u?af.call(f,a):w[c])&&(f[l]=!(e[l]=a))}}else h=ll(h===e?h.splice(b,h.length):h),u?u(null,e,h,s):eu.apply(e,h)})}function lw(n){for(var e,r,i,f=n.length,o=w.relative[n[0].type],s=o||w.relative[" "],t=o?1:0,h=sw(function(n){return n===e},s,!0),c=sw(function(n){return-1<af.call(e,n)},s,!0),u=[function(n,t,i){return!o&&(i||t!==il)||((e=t).nodeType?h(n,t,i):c(n,t,i))}];t<f;t++)if(r=w.relative[n[t].type])u=[sw(hw(u),r)];else{if((r=w.filter[n[t].type].apply(null,n[t].matches))[st]){for(i=++t;i<f&&!w.relative[n[i].type];i++);return cw(1<t&&hw(u),1<t&&cl(n.slice(0,t-1).concat({value:" "===n[t-2].type?"*":""})).replace(sl,"$1"),r,t<i&&lw(n.slice(t,i)),i<f&&lw(n=n.slice(i)),i<f&&cl(n))}u.push(r)}return hw(u)}function ht(n,t){var i=n,r=function(n,i,r,u){var e,f;if(n){if(!u&&n[i])return n[i];if(n!==t){if(e=n[r])return e;for(f=n.parentNode;f&&f!==t;f=f.parentNode)if(e=f[r])return e}}};this.current=function(){return i};this.next=function(n){return i=r(i,"firstChild","nextSibling",n)};this.prev=function(n){return i=r(i,"lastChild","previousSibling",n)};this.prev2=function(n){return i=function(n,i,r,u){var e,o,f;if(n){if(e=n[r],t&&e===t)return;if(e){if(!u)for(f=e[i];f;f=f[i])if(!f[i])return f;return e}if((o=n.parentNode)&&o!==t)return o}}(i,"lastChild","previousSibling",n)}}function yu(n){var v,y,o,p,w,s,b,k,u,h,d,c,g,t={},i={},f=[],nt={},tt={},r=function(t,i,r){var u=n[t];return u?u=ke(u,/[, ]/,ke(u.toUpperCase(),/[, ]/)):(u=vu[t])||(u=ke(i," ",ke(i.toUpperCase()," ")),u=sb(u,r),vu[t]=u),u};o=aii((n=n||{}).schema);!1===n.verify_html&&(n.valid_elements="*[*]");v=hb(n.valid_styles);y=hb(n.invalid_styles,"map");k=hb(n.valid_classes,"map");p=r("whitespace_elements","pre script noscript style textarea video audio iframe object code");w=r("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");s=r("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");b=r("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");h=r("non_empty_elements","td th iframe video audio object script pre code",s);d=r("move_caret_before_on_enter_elements","table",h);c=r("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");u=r("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",c);g=r("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");at((n.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(n){tt[n]=new RegExp("<\/"+n+"[^>]*>","gi")});var it=function(n){return new RegExp("^"+n.replace(/([?+*])/g,".$1")+"$")},e=function(n){var y,g,p,nt,r,i,e,v,h,u,w,c,s,o,b,l,k,d,a,tt=/[*?+]/;if(n)for(n=ut(n,","),t["@"]&&(l=t["@"].attributes,k=t["@"].attributesOrder),y=0,g=n.length;y<g;y++)if(r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/.exec(n[y])){if(o=r[1],h=r[2],b=r[3],v=r[5],i={attributes:c={},attributesOrder:s=[]},"#"===o&&(i.paddEmpty=!0),"-"===o&&(i.removeEmpty=!0),"!"===r[4]&&(i.removeEmptyAttrs=!0),l){for(d in l)c[d]=l[d];s.push.apply(s,k)}if(v)for(p=0,nt=(v=ut(v,"|")).length;p<nt;p++)if(r=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/.exec(v[p])){if(e={},w=r[1],u=r[2].replace(/[\\:]:/g,":"),o=r[3],a=r[4],"!"===w&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(u),e.required=!0),"-"===w){delete c[u];s.splice(lii(s,u),1);continue}o&&("="===o&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:u,value:a}),e.defaultValue=a),":"===o&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:u,value:a}),e.forcedValue=a),"<"===o&&(e.validValues=ke(a,"?")));tt.test(u)?(i.attributePatterns=i.attributePatterns||[],e.pattern=it(u),i.attributePatterns.push(e)):(c[u]||s.push(u),c[u]=e)}l||"@"!==h||(l=c,k=s);b&&(i.outputName=h,t[b]=i);tt.test(h)?(i.pattern=it(h),f.push(i)):t[h]=i}},rt=function(n){t={};f=[];e(n);at(o,function(n,t){i[t]=n.children})},ft=function(n){var r=/^(~)?(.+)$/;n&&(vu.text_block_elements=vu.block_elements=null,at(ut(n,","),function(n){var s=r.exec(n),h="~"===s[1],e=h?"span":"div",f=s[2],o;(i[f]=i[e],nt[f]=e,h||(u[f.toUpperCase()]={},u[f]={}),t[f])||(o=t[e],delete(o=sb({},o)).removeEmptyAttrs,delete o.removeEmpty,t[f]=o);at(i,function(n,t){n[e]&&(i[t]=n=sb({},i[t]),n[f]=n[e])})}))},l=function(t){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;vu[n.schema]=null;t&&at(ut(t,","),function(n){var u,f,t=r.exec(n);t&&(f=t[1],u=f?i[t[2]]:i[t[2]]={"#comment":{}},u=i[t[2]],at(ut(t[3],"|"),function(n){"-"===f?delete u[n]:u[n]={}}))})},a=function(n){var r,i=t[n];if(i)return i;for(r=f.length;r--;)if((i=f[r]).pattern.test(n))return i};return n.valid_elements?rt(n.valid_elements):(at(o,function(n,r){t[r]={attributes:n.attributes,attributesOrder:n.attributesOrder};i[r]=n.children}),"html5"!==n.schema&&at(ut("strong/b em/i"),function(n){n=ut(n,"/");t[n[1]].outputName=n[0]}),at(ut("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(n){t[n]&&(t[n].removeEmpty=!0)}),at(ut("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(n){t[n].paddEmpty=!0}),at(ut("span"),function(n){t[n].removeEmptyAttrs=!0})),ft(n.custom_elements),l(n.valid_children),e(n.extended_valid_elements),l("+ol[ul|ol],+ul[ul|ol]"),at({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(n,i){t[i]&&(t[i].parentsRequired=ut(n))}),n.invalid_elements&&at(net(n.invalid_elements),function(n){t[n]&&delete t[n]}),a("span")||e("span[!data-mce-type|*]"),{children:i,elements:t,getValidStyles:function(){return v},getValidClasses:function(){return k},getBlockElements:function(){return u},getInvalidStyles:function(){return y},getShortEndedElements:function(){return s},getTextBlockElements:function(){return c},getTextInlineElements:function(){return g},getBoolAttrs:function(){return b},getElementRule:a,getSelfClosingElements:function(){return w},getNonEmptyElements:function(){return h},getMoveCaretBeforeOnEnterElements:function(){return d},getWhiteSpaceElements:function(){return p},getSpecialElements:function(){return tt},isValidChild:function(n,t){var r=i[n.toLowerCase()];return!(!r||!r[t.toLowerCase()])},isValid:function(n,t){var i,r,u=a(n);if(u){if(!t||u.attributes[t])return!0;if(i=u.attributePatterns)for(r=i.length;r--;)if(i[r].pattern.test(n))return!0}return!1},getCustomElements:function(){return nt},addValidElements:e,setValidElements:rt,addCustomElements:ft,addValidChildren:l}}function lb(n,t){var i,r,o,u,s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,h=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,f={},e="﻿";for(n=n||{},t&&(o=t.getValidStyles(),u=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+e).split(" "),i=0;i<r.length;i++)f[r[i]]=e+i,f[e+i]=r[i];return{toHex:function(n){return n.replace(s,cb)},parse:function(t){var v,o,u,w,g,b,y,p,r={},nt=n.url_converter,rt=n.url_converter_scope||this,a=function(n,t,u){var e,o,s,h,f;if((e=r[n+"-top"+t])&&(o=r[n+"-right"+t])&&(s=r[n+"-bottom"+t])&&(h=r[n+"-left"+t])){for(f=[e,o,s,h],i=f.length-1;i--&&f[i]===f[i+1];);-1<i&&u||(r[n+t]=-1===i?f[0]:f.join(" "),delete r[n+"-top"+t],delete r[n+"-right"+t],delete r[n+"-bottom"+t],delete r[n+"-left"+t])}},k=function(n){var i,t=r[n];if(t){for(i=(t=t.split(" ")).length;i--;)if(t[i]!==t[0])return!1;return r[n]=t[0],!0}},tt=function(n){return w=!0,f[n]},d=function(n,t){return w&&(n=n.replace(/\uFEFF[0-9]/g,function(n){return f[n]})),t||(n=n.replace(/\\([\'\";:])/g,"$1")),n},ut=function(n){return String.fromCharCode(parseInt(n.slice(1),16))},it=function(n){return n.replace(/\\[0-9a-f]+/gi,ut)},ft=function(t,i,r,u,f,e){if(f=f||e)return"'"+(f=d(f)).replace(/\'/g,"\\'")+"'";if(i=d(i||r||u),!n.allow_script_urls){var o=i.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(o)||!n.allow_svg_data_urls&&/^data:image\/svg/i.test(o))return""}return nt&&(i=nt.call(rt,i,"style")),"url('"+i.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,tt).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(n){return n.replace(/[;:]/g,tt)});v=h.exec(t);)if(h.lastIndex=v.index+v[0].length,o=v[1].replace(c,"").toLowerCase(),u=v[2].replace(c,""),o&&u){if(o=it(o),u=it(u),-1!==o.indexOf(e)||-1!==o.indexOf('"'))continue;if(!n.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(u)))continue;"font-weight"===o&&"700"===u?u="bold":"color"!==o&&"background-color"!==o||(u=u.toLowerCase());u=(u=u.replace(s,cb)).replace(l,ft);r[o]=w?d(u,!0):u}a("border","",!0);a("border","-width");a("border","-color");a("border","-style");a("padding","");a("margin","");g="border";y="border-style";p="border-color";k(b="border-width")&&k(y)&&k(p)&&(r[g]=r[b]+" "+r[y]+" "+r[p],delete r[b],delete r[y],delete r[p]);"medium none"===r.border&&delete r.border;"none"===r["border-image"]&&delete r["border-image"]}return r},serialize:function(n,t){var f,s,e,h,i,r="",c=function(t){var u,i,f,e;if(u=o[t])for(i=0,f=u.length;i<f;i++)t=u[i],(e=n[t])&&(r+=(0<r.length?" ":"")+t+": "+e+";")};if(t&&o)c("*"),c(t);else for(f in n)(s=n[f])&&(!u||!(e=f,h=t,i=void 0,(i=u["*"])&&i[e]||(i=u[h])&&i[e]))&&(r+=(0<r.length?" ":"")+f+": "+s+";");return r}}}function no(n,r){var g,fi=this;void 0===r&&(r={});var ot={},w=window,nt={},ei=0,oi=function(n,i){var u,h=0,r={};u=(i=i||{}).maxLoadTime||5e3;var f=function(t){n.getElementsByTagName("head")[0].appendChild(t)},e=function(i,e,o){var c,l,p,s,a=function(){for(var n=s.passed,t=n.length;t--;)n[t]();s.status=2;s.passed=[];s.failed=[]},v=function(){for(var n=s.failed,t=n.length;t--;)n[t]();s.status=3;s.passed=[];s.failed=[]},w=function(n,t){n()||((new Date).getTime()-p<u?gt.setTimeout(t):v())},y=function(){w(function(){for(var t,i,r=n.styleSheets,u=r.length;u--;)if((i=(t=r[u]).ownerNode?t.ownerNode:t.owningElement)&&i.id===c.id)return a(),!0},y)},b=function(){w(function(){try{var n=l.sheet.cssRules;return a(),!!n}catch(t){}},b)},k;if(i=t._addCacheSuffix(i),r[i]?s=r[i]:(s={passed:[],failed:[]},r[i]=s),e&&s.passed.push(e),o&&s.failed.push(o),1!==s.status)if(2!==s.status)if(3!==s.status){if(s.status=1,(c=n.createElement("link")).rel="stylesheet",c.type="text/css",c.id="u"+h++,c.async=!1,c.defer=!1,p=(new Date).getTime(),"onload"in c&&!((k=navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(k[1],10)<536))c.onload=y,c.onerror=v;else{if(0<navigator.userAgent.indexOf("Firefox"))return(l=n.createElement("style")).textContent='@import "'+i+'"',b(),void f(l);y()}f(c);c.href=i}else v();else a()},c=function(n){return sft.nu(function(t){e(n,gr(t,o(hft.value(n))),gr(t,o(hft.error(n))))})},s=function(n){return n.fold(bi,bi)};return{load:e,loadAll:function(n,t,i){bti(lt(n,c)).get(function(n){var r=lit(n,function(n){return n.isValue()});0<r.fail.length?i(r.fail.map(s)):t(r.pass.map(s))})}}}(n),h=[],a=r.schema?r.schema:yu({}),l=lb({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),v=r.ownEvents?new vr(r.proxy):vr.Event,st=a.getBlockElements(),ct=e.overrideDefaults(function(){return{context:n,element:c.getRoot()}}),f=function(t){if(t&&n&&"string"==typeof t){var i=n.getElementById(t);return i&&i.id!==t?n.getElementsByName(t)[1]:i}return t},u=function(n){return"string"==typeof n&&(n=f(n)),ct(n)},tt=function(n,t,i){var f,r,e=u(n);return e.length&&(r=(f=g[t])&&f.get?f.get(e,t):e.attr(t)),void 0===r&&(r=i||""),r},b=function(n){var t=f(n);return t?t.attributes:[]},k=function(n,t,i){var o,e,f;""===i&&(i=null);f=u(n);o=f.attr(t);f.length&&((e=g[t])&&e.set?e.set(f,i,t):f.attr(t,i),o!==i&&r.onSetAttrib&&r.onSetAttrib({attrElm:f,attrName:t,attrValue:i}))},d=function(){return r.root_element||n.body},at=function(t,i){return yti.getPos(n.body,f(t),i)},it=function(n,t,i){var r=u(n);return i?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(n,t){return t.toUpperCase()}))&&(t=s.ie&&s.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:undefined)},vt=function(n){var t,i;return n=f(n),t=it(n,"width"),i=it(n,"height"),-1===t.indexOf("px")&&(t=0),-1===i.indexOf("px")&&(i=0),{w:parseInt(t,10)||n.offsetWidth||n.clientWidth,h:parseInt(i,10)||n.offsetHeight||n.clientHeight}},rt=function(n,t){var i,u,f,r;if(!n)return!1;if(!Array.isArray(n)){if("*"===t)return 1===n.nodeType;if(yii.test(t)){for(u=t.toLowerCase().split(/,/),f=n.nodeName.toLowerCase(),i=u.length-1;0<=i;i--)if(u[i]===f)return!0;return!1}if(n.nodeType&&1!==n.nodeType)return!1}return r=Array.isArray(n)?n:[n],0<p(t,r[0].ownerDocument||r[0],null,r).length},yt=function(n,i,r,u){var o,s=[],e=f(n);for(u=u===undefined,r=r||("BODY"!==d().nodeName?d().parentNode:null),t.is(i,"string")&&(i="*"===(o=i)?function(n){return 1===n.nodeType}:function(n){return rt(n,o)});e&&e!==r&&e.nodeType&&9!==e.nodeType;){if(!i||"function"==typeof i&&i(e)){if(!u)return[e];s.push(e)}e=e.parentNode}return u?s:null},pt=function(n,t,i){var r=t;if(n)for("string"==typeof t&&(r=function(n){return rt(n,t)}),n=n[i];n;n=n[i])if("function"==typeof r&&r(n))return n;return null},y=function(n,i,r){var e,u="string"==typeof n?f(n):n,o;return u?t.isArray(u)&&(u.length||0===u.length)?(e=[],de(u,function(n,t){n&&("string"==typeof n&&(n=f(n)),e.push(i.call(r,n,t)))}),e):(o=r||fi,i.call(o,u)):!1},wt=function(n,t){u(n).each(function(n,i){de(t,function(n,t){k(i,t,n)})})},bt=function(n,t){var i=u(n);tet?i.each(function(n,i){if(!1!==i.canHaveHTML){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+t;i.removeChild(i.firstChild)}catch(r){e("<div><\/div>").html("<br>"+t).contents().slice(1).appendTo(i)}return t}}):i.html(t)},kt=function(t,i,r,u,f){return y(t,function(t){var e="string"==typeof i?n.createElement(i):i;return wt(e,r),u&&("string"!=typeof u&&u.nodeType?e.appendChild(u):"string"==typeof u&&bt(e,u)),f?e:t.appendChild(e)})},ut=function(t,i,r){return kt(n.createElement(t),t,i,r,!0)},si=wf.decode,dt=wf.encodeAllRaw,ft=function(n,t){var i=u(n);return t?i.each(function(){for(var n;n=this.firstChild;)3===n.nodeType&&0===n.data.length?this.removeChild(n):this.parentNode.insertBefore(n,this)}).remove():i.remove(),1<i.length?i.toArray():i[0]},ni=function(n,t,i){u(n).toggleClass(t,i).each(function(){""===this.className&&e(this).attr("class",null)})},ti=function(n,i,r){return y(i,function(i){return t.is(i,"array")&&(n=n.cloneNode(!0)),r&&de(vii(i.childNodes),function(t){n.appendChild(t)}),i.parentNode.replaceChild(n,i)})},et=function(){return n.createRange()},ii=function(i,u,f,e){if(t.isArray(i)){for(var o=i.length;o--;)i[o]=ii(i[o],u,f,e);return i}return!r.collect||i!==n&&i!==w||h.push([i,u,f,e]),v.bind(i,u,f,e||c)},ri=function(i,r,u){var f,e;if(t.isArray(i)){for(f=i.length;f--;)i[f]=ri(i[f],r,u);return i}if(h&&(i===n||i===w))for(f=h.length;f--;)e=h[f],i!==e[0]||r&&r!==e[1]||u&&u!==e[2]||v.unbind(e[0],e[1],e[2]);return v.unbind(i,r,u)},ui=function(n){if(n&&i.isElement(n)){var t=n.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==n.contentEditable?n.contentEditable:null}return null},c={doc:n,settings:r,win:w,files:nt,stdMode:!0,boxModel:!0,styleSheetLoader:oi,boundEvents:h,styles:l,schema:a,events:v,isBlock:function(n){if("string"==typeof n)return!!st[n];if(n){var t=n.nodeType;if(t)return!(1!==t||!st[n.nodeName])}return!1},$:ct,$$:u,root:null,clone:function(t,i){if(!tet||1!==t.nodeType||i)return t.cloneNode(i);if(!i){var r=n.createElement(t.nodeName);return de(b(t),function(n){k(r,n.nodeName,tt(t,n.nodeName))}),r}return null},getRoot:d,getViewPort:function(n){var t=n||w,r=t.document,i=r.documentElement;return{x:t.pageXOffset||i.scrollLeft,y:t.pageYOffset||i.scrollTop,w:t.innerWidth||i.clientWidth,h:t.innerHeight||i.clientHeight}},getRect:function(n){var t,i;return n=f(n),t=at(n),i=vt(n),{x:t.x,y:t.y,w:i.w,h:i.h}},getSize:vt,getParent:function(n,t,i){var r=yt(n,t,i,!1);return r&&0<r.length?r[0]:null},getParents:yt,get:f,getNext:function(n,t){return pt(n,t,"nextSibling")},getPrev:function(n,t){return pt(n,t,"previousSibling")},select:function(t,i){return p(t,f(i)||r.root_element||n,[])},is:rt,add:kt,create:ut,createHTML:function(n,t,i){var r,u="";for(r in u+="<"+n,t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(u+=" "+r+'="'+dt(t[r])+'"');return void 0!==i?u+">"+i+"<\/"+n+">":u+" />"},createFragment:function(t){var i,r=n.createElement("div"),u=n.createDocumentFragment();for(t&&(r.innerHTML=t);i=r.firstChild;)u.appendChild(i);return u},remove:ft,setStyle:function(n,t,i){var f=u(n).css(t,i);r.update_styles&&ret(l,f)},getStyle:it,setStyles:function(n,t){var i=u(n).css(t);r.update_styles&&ret(l,i)},removeAllAttribs:function(n){return y(n,function(n){for(var i=n.attributes,t=i.length-1;0<=t;t--)n.removeAttributeNode(i.item(t))})},setAttrib:k,setAttribs:wt,getAttrib:tt,getPos:at,parseStyle:function(n){return l.parse(n)},serializeStyle:function(n,t){return l.serialize(n,t)},addStyle:function(t){var r,i;if(c!==no.DOM&&n===document){if(ot[t])return;ot[t]=!0}(i=n.getElementById("mceDefaultStyles"))||((i=n.createElement("style")).id="mceDefaultStyles",i.type="text/css",(r=n.getElementsByTagName("head")[0]).firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i));i.styleSheet?i.styleSheet.cssText+=t:i.appendChild(n.createTextNode(t))},loadCSS:function(i){var r;c===no.DOM||n!==document?(i||(i=""),r=n.getElementsByTagName("head")[0],de(i.split(","),function(n){var i;n=t._addCacheSuffix(n);nt[n]||(nt[n]=!0,i=ut("link",{rel:"stylesheet",href:n}),r.appendChild(i))})):no.DOM.loadCSS(i)},addClass:function(n,t){u(n).addClass(t)},removeClass:function(n,t){ni(n,t,!1)},hasClass:function(n,t){return u(n).hasClass(t)},toggleClass:ni,show:function(n){u(n).show()},hide:function(n){u(n).hide()},isHidden:function(n){return"none"===u(n).css("display")},uniqueId:function(n){return(n||"mce_")+ei++},setHTML:bt,getOuterHTML:function(n){var t="string"==typeof n?f(n):n;return i.isElement(t)?t.outerHTML:e("<div><\/div>").append(e(t).clone()).html()},setOuterHTML:function(n,t){u(n).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(n){}ft(e(this).html(t),!0)})},decode:si,encode:dt,insertAfter:function(n,t){var i=f(t);return y(n,function(n){var t,r;return t=i.parentNode,(r=i.nextSibling)?t.insertBefore(n,r):t.appendChild(n),n})},replace:ti,rename:function(n,t){var i;return n.nodeName!==t.toUpperCase()&&(i=ut(t),de(b(n),function(t){k(i,t.nodeName,tt(n,t.nodeName))}),ti(i,n,!0)),i||n},findCommonAncestor:function(n,t){for(var r,i=n;i;){for(r=t;r&&i!==r;)r=r.parentNode;if(i===r)break;i=i.parentNode}return!i&&n.ownerDocument?n.ownerDocument.documentElement:i},toHex:function(n){return l.toHex(t.trim(n))},run:y,getAttribs:b,isEmpty:function(n,t){var e,s,u,h,f,r,c=0,o;if(n=n.firstChild){f=new ht(n,n.parentNode);t=t||(a?a.getNonEmptyElements():null);h=a?a.getWhiteSpaceElements():{};do{if(u=n.nodeType,i.isElement(n)){if(o=n.getAttribute("data-mce-bogus"),o){n=f.next("all"===o);continue}if(r=n.nodeName.toLowerCase(),t&&t[r]){if("br"===r){c++;n=f.next();continue}return!1}for(e=(s=b(n)).length;e--;)if("name"===(r=s[e].nodeName)||"data-mce-bookmark"===r)return!1}if(8===u||3===u&&!iet.test(n.nodeValue)||3===u&&n.parentNode&&h[n.parentNode.nodeName]&&iet.test(n.nodeValue))return!1;n=f.next()}while(n)}return c<=1},createRng:et,nodeIndex:ge,split:function(n,t,i){var f,e,u,r=et();if(n&&t)return r.setStart(n.parentNode,ge(n)),r.setEnd(t.parentNode,ge(t)),f=r.extractContents(),(r=et()).setStart(t.parentNode,ge(t)+1),r.setEnd(n.parentNode,ge(n)+1),e=r.extractContents(),(u=n.parentNode).insertBefore(kft.trimNode(c,f),n),i?u.insertBefore(i,n):u.insertBefore(t,n),u.insertBefore(kft.trimNode(c,e),n),ft(n),i||t},bind:ii,unbind:ri,fire:function(n,t,i){return v.fire(n,t,i)},getContentEditable:ui,getContentEditableParent:function(n){for(var i=d(),t=null;n&&n!==i&&null===(t=ui(n));n=n.parentNode);return t},destroy:function(){var t,n;if(h)for(t=h.length;t--;)n=h[t],v.unbind(n[0],n[1],n[2]);p.setDocument&&p.setDocument()},isChildOf:function(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1},dumpRng:function(n){return"startContainer: "+n.startContainer.nodeName+", startOffset: "+n.startOffset+", endContainer: "+n.endContainer.nodeName+", endOffset: "+n.endOffset}};return g=pii(l,r,function(){return c}),c}function bt(){var s=this,r=[],t={},n={},i=[],u=function(t){var i;return n[t]&&(i=n[t].dependencies),i||[]},f=function(n,t){return"object"==typeof t?t:"string"==typeof n?{prefix:"",resource:t,suffix:""}:{prefix:n.prefix,resource:t,suffix:n.suffix}},e=function(n,t,i,r){var e=u(n);oa(e,function(n){var i=f(t,n);o(i.resource,i,undefined,undefined)});i&&(r?i.call(r):i.call(wr))},o=function(i,r,u,f,o){if(!t[i]){var s="string"==typeof r?r:r.prefix+r.resource+r.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=bt.baseURL+"/"+s);t[i]=s.substring(0,s.lastIndexOf("/"));n[i]?e(i,r,u,f):wr.ScriptLoader.add(s,function(){return e(i,r,u,f)},f,o)}};return{items:r,urls:t,lookup:n,_listeners:i,get:function(t){return n[t]?n[t].instance:undefined},dependencies:u,requireLangPack:function(n,i){var r=bt.language;if(r&&!1!==bt.languageLoad){if(i)if(-1!==(i=","+i+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===i.indexOf(","+r+","))return;wr.ScriptLoader.add(t[n]+"/langs/"+r+".js")}},add:function(t,u,f){r.push(u);n[t]={instance:u,dependencies:f};var e=lit(i,function(n){return n.name===t});return i=e.fail,oa(e.pass,function(n){n.callback()}),u},remove:function(i){delete t[i];delete n[i]},createUrl:f,addComponents:function(n,t){var i=s.urls[n];oa(t,function(n){wr.ScriptLoader.add(i+"/"+n)})},load:o,waitFor:function(t,r){n.hasOwnProperty(t)?r():i.push({name:t,callback:r})}}}function aet(t,i,r,u,f){return t(r,u)?n.some(r):nu(f)&&f(r)?n.none():i(r,u,f)}function et(n,t,i){var r=function(){return i||(i=tui(et(n,t))),i};return{container:ct.constant(n),offset:ct.constant(t),toRange:function(){var i;return(i=ok(n.ownerDocument)).setStart(n,t),i.setEnd(n,t),i},getClientRects:r,isVisible:function(){return 0<r().length},isAtStart:function(){return uh(n),0===t},isAtEnd:function(){return uh(n)?t>=n.data.length:t>=n.childNodes.length},isEqual:function(i){return i&&n===i.container()&&t===i.offset()},getNode:function(i){return ya(n,i?t-1:t)}}}function bct(t){var i,u=(i={},{register:function(n,t){i[n]={name:n,settings:t}},lookup:function(t){return i.hasOwnProperty(t)?n.from(i[t]).map(function(n){return n.settings}):n.none()}}),f;return fri(t,u),f=uri(t),{register:function(n,t){u.register(n,t)},annotate:function(n,i){u.lookup(n).each(function(r){vei(t,n,r,i)})},annotationChanged:function(n,t){f.addListener(n,t)},remove:function(i){ket(t,n.some(i)).each(function(n){var t=n.elements;l(t,ft.unwrap)})},getAll:function(n){var u,f,e,o,i,s,h=(u=t,f=n,e=r.fromDom(u.getBody()),o=gi(e,"["+ih()+'="'+f+'"]'),i={},l(o,function(n){var t=rt.get(n,ca()),r=i.hasOwnProperty(t)?i[t]:[];i[t]=r.concat([n])}),i);return s=function(n){return lt(n,function(n){return n.dom()})},iti(h,function(n,t,i){return{k:t,v:s(n,t,i)}})}}}function nlt(n){var i,f,u,r,e,t=[];return i=(n=n||{}).indent,f=gct(n.indent_before||""),u=gct(n.indent_after||""),r=wf.getEncodeFunc(n.entity_encoding||"raw",n.entities),e="html"===n.element_format,{start:function(n,o,s){var h,a,l,c;if(i&&f[n]&&0<t.length&&0<(c=t[t.length-1]).length&&"\n"!==c&&t.push("\n"),t.push("<",n),o)for(h=0,a=o.length;h<a;h++)l=o[h],t.push(" ",l.name,'="',r(l.value,!0),'"');t[t.length]=!s||e?">":" />";s&&i&&u[n]&&0<t.length&&0<(c=t[t.length-1]).length&&"\n"!==c&&t.push("\n")},end:function(n){var r;t.push("<\/",n,">");i&&u[n]&&0<t.length&&0<(r=t[t.length-1]).length&&"\n"!==r&&t.push("\n")},text:function(n,i){0<n.length&&(t[t.length]=i?n:r(n))},cdata:function(n){t.push("<![CDATA[",n,"]\]>")},comment:function(n){t.push("<!--",n,"-->")},pi:function(n,u){u?t.push("<?",n," ",r(u),"?>"):t.push("<?",n,"?>");i&&t.push("\n")},doctype:function(n){t.push("<!DOCTYPE",n,">",i?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}}function ah(n,t){void 0===t&&(t=yu());var i=nlt(n);return(n=n||{}).validate=!("validate"in n)||n.validate,{serialize:function(r){var f,e,u;return e=n.validate,f={3:function(n){i.text(n.value,n.raw)},8:function(n){i.comment(n.value)},7:function(n){i.pi(n.name,n.value)},10:function(n){i.doctype(n.value)},4:function(n){i.cdata(n.value)},11:function(n){if(n=n.firstChild)for(;u(n),n=n.next;);}},i.reset(),u=function(n){var y,a,r,o,c,h,s,l,v,p=f[n.type];if(p)p(n);else{if(y=n.name,a=n.shortEnded,r=n.attributes,e&&r&&1<r.length&&((h=[]).map={},v=t.getElementRule(n.name))){for(s=0,l=v.attributesOrder.length;s<l;s++)(o=v.attributesOrder[s])in r.map&&(c=r.map[o],h.map[o]=c,h.push({name:o,value:c}));for(s=0,l=r.length;s<l;s++)(o=r[s].name)in h.map||(c=r.map[o],h.map[o]=c,h.push({name:o,value:c}));r=h}if(i.start(n.name,r,a),!a){if(n=n.firstChild)for(;u(n),n=n.next;);i.end(y)}}},1!==r.type||n.inner?f[11](r):u(r),i.getContent()}}}function tyt(n){var r,t,u,v,f={state:{},exec:{},value:{}},c=n.settings,o;n.on("PreInit",function(){r=n.dom;t=n.selection;c=n.settings;u=n.formatter});var l=function(t){var i;if(!n.quirks.isHidden()&&!n.removed){if(t=t.toLowerCase(),i=f.state[t])return i(t);try{return n.getDoc().queryCommandState(t)}catch(r){}return!1}},h=function(n,t){t=t||"exec";ry(n,function(n,i){ry(i.toLowerCase().split(","),function(i){f[t][i]=n})})},a=function(t,i,r){t=t.toLowerCase();f.value[t]=function(){return i.call(r||n)}};cli(this,{execCommand:function(t,i,r,u){var s,o,e=!1;if(!n.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||u&&u.skip_focus?sli(n):n.focus(),(u=n.fire("BeforeExecCommand",{command:t,ui:i,value:r})).isDefaultPrevented())return!1;if(o=t.toLowerCase(),s=f.exec[o])return s(o,i,r),n.fire("ExecCommand",{command:t,ui:i,value:r}),!0;if(ry(n.plugins,function(u){if(u.execCommand&&u.execCommand(t,i,r))return n.fire("ExecCommand",{command:t,ui:i,value:r}),!(e=!0)}),e)return e;if(n.theme&&n.theme.execCommand&&n.theme.execCommand(t,i,r))return n.fire("ExecCommand",{command:t,ui:i,value:r}),!0;try{e=n.getDoc().execCommand(t,i,r)}catch(h){}return!!e&&(n.fire("ExecCommand",{command:t,ui:i,value:r}),!0)}},queryCommandState:l,queryCommandValue:function(t){var i;if(!n.quirks.isHidden()&&!n.removed){if(t=t.toLowerCase(),i=f.value[t])return i(t);try{return n.getDoc().queryCommandValue(t)}catch(r){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),f.exec[t])return!0;try{return n.getDoc().queryCommandSupported(t)}catch(i){}return!1},addCommands:h,addCommand:function(t,i,r){t=t.toLowerCase();f.exec[t]=function(t,u,f,e){return i.call(r||n,u,f,e)}},addQueryStateHandler:function(t,i,r){t=t.toLowerCase();f.state[t]=function(){return i.call(r||n)}},addQueryValueHandler:a,hasCustomCommand:function(n){return n=n.toLowerCase(),!!f.exec[n]}});var y=function(t,i,r){return i===undefined&&(i=!1),r===undefined&&(r=null),n.getDoc().execCommand(t,i,r)},p=function(n){return u.match(n)},e=function(t,i){u.toggle(t,i?{value:i}:undefined);n.nodeChanged()},w=function(n){v=t.getBookmark(n)},b=function(){t.moveToBookmark(v)};h({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(t){var r,u=n.getDoc(),i;try{y(t)}catch(f){r=!0}("paste"!==t||u.queryCommandEnabled(t)||(r=!0),r||!u.queryCommandSupported(t))&&(i=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),s.mac&&(i=i.replace(/Ctrl\+/g,"⌘+")),n.notificationManager.open({text:i,type:"error"}))},unlink:function(){if(t.isCollapsed()){var i=n.dom.getParent(n.selection.getStart(),"a");i&&n.dom.remove(i,!0)}else u.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var t=n.substring(7);"full"===t&&(t="justify");ry("left,center,right,justify".split(","),function(n){t!==n&&u.remove("align"+n)});"none"!==t&&e("align"+t)},"InsertUnorderedList,InsertOrderedList":function(n){var i,u;y(n);(i=r.getParent(t.getNode(),"ol,ul"))&&(u=i.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(u.nodeName)&&(w(),r.split(u,i),b()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){e(n)},"ForeColor,HiliteColor":function(n,t,i){e(n,i)},FontName:function(t,i,r){var u,f;f=r;(u=n).formatter.toggle("fontname",{value:svt(u,f)});u.nodeChanged()},FontSize:function(t,i,r){var u,f;f=r;(u=n).formatter.toggle("fontsize",{value:svt(u,f)});u.nodeChanged()},RemoveFormat:function(n){u.remove(n)},mceBlockQuote:function(){e("blockquote")},FormatBlock:function(n,t,i){return e(i||"p")},mceCleanup:function(){var i=t.getBookmark();n.setContent(n.getContent());t.moveToBookmark(i)},mceRemoveNode:function(i,r,u){var f=u||t.getNode();f!==n.getBody()&&(w(),n.dom.remove(f,!0),b())},mceSelectNodeDepth:function(i,u,f){var e=0;r.getParent(t.getNode(),function(n){if(1===n.nodeType&&e++===f)return t.select(n),!1},n.getBody())},mceSelectNode:function(n,i,r){t.select(r)},mceInsertContent:function(t,i,r){eoi(n,r)},mceInsertRawHTML:function(i,r,u){var f=n.getContent();t.setContent("tiny_mce_marker");n.setContent(f.replace(/tiny_mce_marker/g,function(){return u}))},mceToggleFormat:function(n,t,i){e(i)},mceSetContent:function(t,i,r){n.setContent(r)},"Indent,Outdent":function(t){hli(n,t)},mceRepaint:function(){},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual;n.addVisual()},mceReplaceContent:function(i,r,u){n.execCommand("mceInsertContent",!1,u.replace(/\{\$selection\}/g,t.getContent({format:"text"})))},mceInsertLink:function(n,i,f){var e;"string"==typeof f&&(f={href:f});e=r.getParent(t.getNode(),"a");f.href=f.href.replace(" ","%20");e&&f.href||u.remove("link");f.href&&u.apply("link",f,e)},selectAll:function(){var u=r.getParent(t.getStart(),i.isContentEditableTrue),n;u&&(n=r.createRng(),n.selectNodeContents(u),t.setRng(n))},"delete":function(){cci(n)},forwardDelete:function(){lci(n)},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(t,i,r){return pvt(n,r),!0}});o=function(n){return function(){var i=t.isCollapsed()?[r.getParent(t.getNode(),r.isBlock)]:t.getSelectedBlocks(),f=lli(i,function(t){return!!u.matchNode(t,n)});return-1!==ali(f,!0)}};h({JustifyLeft:o("alignleft"),JustifyCenter:o("aligncenter"),JustifyRight:o("alignright"),JustifyFull:o("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){return p(n)},mceBlockQuote:function(){return p("blockquote")},Outdent:function(){var n;return c.inline_styles&&((n=r.getParent(t.getStart(),r.isBlock))&&0<parseInt(n.style.paddingLeft,10)||(n=r.getParent(t.getEnd(),r.isBlock))&&0<parseInt(n.style.paddingLeft,10))?!0:l("InsertUnorderedList")||l("InsertOrderedList")||!c.inline_styles&&!!r.getParent(t.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(n){var i=r.getParent(t.getNode(),"ul,ol");return i&&("insertunorderedlist"===n&&"UL"===i.tagName||"insertorderedlist"===n&&"OL"===i.tagName)}},"state");h({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}});a("FontName",function(){return ovt(t=n).fold(function(){return evt(t).map(function(n){return gv.getFontFamily(t.getBody(),n)}).getOr("")},function(n){return gv.getFontFamily(t.getBody(),n)});var t},this);a("FontSize",function(){return ovt(t=n).fold(function(){return evt(t).map(function(n){return gv.getFontSize(t.getBody(),n)}).getOr("")},function(n){return gv.getFontSize(t.getBody(),n)});var t},this)}function hyt(n){var r={},i=[],o=function(n){var r,i,t={};for(i in ng(tg(n,"+"),function(n){n in syt?t[n]=!0:/^[0-9]{2,}$/.test(n)?t.keyCode=parseInt(n,10):(t.charCode=n.charCodeAt(0),t.keyCode=gli[n]||n.toUpperCase().charCodeAt(0))}),r=[t.keyCode],syt)t[i]?r.push(i):t[i]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,s.mac?t.ctrl=!0:t.shift=!0),t.meta&&(s.mac?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t},u=function(i,r,u,f){var e;return(e=t.map(tg(i,">"),o))[e.length-1]=t.extend(e[e.length-1],{func:u,scope:f||n}),t.extend(e[0],{desc:n.translate(r),subpatterns:e.slice(1)})},f=function(n,t){return!!t&&t.ctrl===n.ctrlKey&&t.meta===n.metaKey&&t.alt===n.altKey&&t.shift===n.shiftKey&&!!(n.keyCode===t.keyCode||n.charCode&&n.charCode===t.charCode)&&(n.preventDefault(),!0)},e=function(n){return n.func?n.func.call(n.scope):null};n.on("keyup keypress keydown",function(n){var t,u;((u=n).altKey||u.ctrlKey||u.metaKey||"keydown"===(t=n).type&&112<=t.keyCode&&t.keyCode<=123)&&!n.isDefaultPrevented()&&(ng(r,function(t){if(f(n,t))return i=t.subpatterns.slice(0),"keydown"===n.type&&e(t),!0}),f(n,i[0])&&(1===i.length&&"keydown"===n.type&&e(i[0]),i.shift()))});this.add=function(i,f,e,o){var s;return"string"==typeof(s=e)?e=function(){n.execCommand(s,!1,null)}:t.isArray(s)&&(e=function(){n.execCommand(s[0],s[1],s[2])}),ng(tg(t.trim(i.toLowerCase())),function(n){var t=u(n,f,e,o);r[t.id]=t}),!0};this.remove=function(n){var t=u(n);return!!r[t.id]&&(delete r[t.id],!0)}}function wyt(t){var u,i=[],r=function(){var n,i=t.theme;return i&&i.getNotificationManagerImpl?i.getNotificationManagerImpl():{open:n=function(){throw new Error("Theme did not provide a NotificationManager implementation.");},close:n,reposition:n,getArgs:n}},f=function(){0<i.length&&r().reposition(i)},e=function(n){lf(i,function(t){return t===n}).each(function(n){i.splice(n,1)})},o=function(n){if(!t.removed&&hai(t))return fi(i,function(t){return i=r().getArgs(t),u=n,!(i.type!==u.type||i.text!==u.text||i.progressBar||i.timeout||u.progressBar||u.timeout);var i,u}).getOrThunk(function(){t.editorManager.setActive(t);var o,u=r().open(n,function(){e(u);f()});return o=u,i.push(o),f(),u})};return(u=t).on("SkinLoaded",function(){var n=u.settings.service_message;n&&o({text:n,type:"warning",timeout:0,icon:""})}),u.on("ResizeEditor ResizeWindow",function(){gt.requestAnimationFrame(f)}),u.on("remove",function(){l(i,function(n){r().close(n)})}),{open:o,close:function(){n.from(i[0]).each(function(n){r().close(n);e(n);f()})},getNotifications:function(){return i}}}function byt(t){var i=[],r=function(){var n,i=t.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():{open:n=function(){throw new Error("Theme did not provide a WindowManager implementation.");},alert:n,confirm:n,close:n,getParams:n,setParams:n}},o=function(n,t){return function(){return t?t.apply(n,arguments):undefined}},f=function(n){var r;i.push(n);r=n;t.fire("OpenWindow",{win:r})},u=function(n){lf(i,function(t){return t===n}).each(function(r){var u;i.splice(r,1);u=n;t.fire("CloseWindow",{win:u});0===i.length&&t.focus()})},e=function(){return n.from(i[i.length-1])};return t.on("remove",function(){l(i.slice(0),function(n){r().close(n)})}),{windows:i,open:function(n,i){t.editorManager.setActive(t);iy(t);var e=r().open(n,i,u);return f(e),e},alert:function(n,t,i){var e=r().alert(n,o(i||this,t),u);f(e)},confirm:function(n,t,i){var e=r().confirm(n,o(i||this,t),u);f(e)},close:function(){e().each(function(n){r().close(n);u(n)})},getParams:function(){return e().map(r().getParams).getOr(null)},setParams:function(n){e().each(function(t){r().setParams(t,n)})},getWindows:function(){return i}}}function fg(){return new(ce.getOrDie("XMLHttpRequest"))}function yai(n,i){var r={},f=function(n,t,r,u){var f,e;(f=new fg).open("POST",i.url);f.withCredentials=i.credentials;f.upload.onprogress=function(n){u(n.loaded/n.total*100)};f.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+f.status)};f.onload=function(){var n,u,e;f.status<200||300<=f.status?r("HTTP Error: "+f.status):(n=JSON.parse(f.responseText))&&"string"==typeof n.location?t((u=i.basePath,e=n.location,u?u.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e)):r("Invalid JSON: "+f.responseText)};(e=new FormData).append("file",n.blob(),n.filename());f.send(e)},e=function(n,t){return{url:t,blobInfo:n,status:!0}},u=function(n,t){return{url:"",blobInfo:n,status:!1,error:t}},o=function(n,i){t.each(r[n],function(n){n(i)});delete r[n]},s=function(f,s){return f=t.grep(f,function(t){return!n.isUploaded(t.blobUri())}),oi.all(t.map(f,function(t){return n.isPending(t.blobUri())?(h=t.blobUri(),new oi(function(n){r[h]=r[h]||[];r[h].push(n)})):(f=t,c=i.handler,l=s,n.markPending(f.blobUri()),new oi(function(t){var i,r;try{r=function(){i&&i.close()};c(f,function(i){r();n.markUploaded(f.blobUri(),i);o(f.blobUri(),e(f,i));t(e(f,i))},function(i){r();n.removeFailed(f.blobUri());o(f.blobUri(),u(f,i));t(u(f,i))},function(n){n<0||100<n||(i||(i=l()),i.progressBar.value(n))})}catch(s){t(u(f,s.message))}}));var f,c,l,h}))};return!1===nu(i.handler)&&(i.handler=f),{upload:function(n,t){return i.url||i.handler!==f?s(n,t):new oi(function(n){n([])})}}}function pai(){return new(ce.getOrDie("FileReader"))}function wai(n){return new(ce.getOrDie("Uint8Array"))(n)}function ivi(n){var r,i,c,b,a,e,o,t,v,y,u=(r=[],i=ct.constant,c=function(n){var t,r,u;if(!n.blob||!n.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=n.id||eg.uuid("blobid"),r=n.name||t,{id:i(t),name:i(r),filename:i(r+"."+(u=n.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[u.toLowerCase()]||"dat")),blob:i(n.blob),base64:i(n.base64),blobUri:i(n.blobUri||nl.createObjectURL(n.blob)),uri:i(n.uri)}},{create:function(n,t,i,r){if(ui(n))return c({id:n,name:r,blob:t,base64:i});if(oit(n))return c(n);throw new Error("Unknown input type");},add:function(n){b(n.id())||r.push(n)},get:b=function(n){return a(function(t){return t.id()===n})},getByUri:function(n){return a(function(t){return t.blobUri()===n})},findFirst:a=function(n){return h.filter(r,n)[0]},removeByUri:function(n){r=h.filter(r,function(t){return t.blobUri()!==n||(nl.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){h.each(r,function(n){nl.revokeObjectURL(n.blobUri())});r=[]}}),f=(t={},v=function(n,t){return{status:n,resultUri:t}},{hasBlobUri:y=function(n){return n in t},getResultUri:function(n){var i=t[n];return i?i.resultUri:null},isPending:function(n){return!!y(n)&&1===t[n].status},isUploaded:function(n){return!!y(n)&&2===t[n].status},markPending:function(n){t[n]=v(1,null)},markUploaded:function(n,i){t[n]=v(2,i)},removeFailed:function(n){delete t[n]},destroy:function(){t={}}}),k=[],p=function(t){return function(i){return n.selection?t(i):[]}},d=function(n,t,i){for(var r=0;-1!==(r=n.indexOf(t,r))&&(n=n.substring(0,r)+i+n.substr(r+t.length),r+=i.length-t.length+1),-1!==r;);return n},g=function(n,t,i){return n=d(n,'src="'+t+'"','src="'+i+'"'),n=d(n,'data-mce-src="'+t+'"','data-mce-src="'+i+'"')},nt=function(t,i){l(n.undoManager.data,function(n){"fragmented"===n.type?n.fragments=lt(n.fragments,function(n){return g(n,t,i)}):n.content=g(n.content,t,i)})},ut=function(){return n.notificationManager.open({text:n.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},ft=function(t,i){u.removeByUri(t.src);nt(t.src,i);n.$(t).attr({src:ofi(n)?i+"?"+(new Date).getTime():i,"data-mce-src":n.convertURL(i,"src")})},tt=function(t){return e||(e=yai(f,{url:hfi(n),basePath:cfi(n),credentials:lfi(n),handler:afi(n)})),w().then(p(function(i){var r;return r=lt(i,function(n){return n.blobInfo}),e.upload(r,ut).then(p(function(r){var u=lt(r,function(t,r){var u=i[r].image;return t.status&&sfi(n)?ft(u,t.url):t.error&&aai(n,t.error),{element:u,status:t.status}});return t&&t(u),u}))}))},it=function(t){if(uht(n))return tt(t)},et=function(t){return!1!==bp(k,function(n){return n(t)})&&(0!==t.getAttribute("src").indexOf("data:")||efi(n)(t))},w=function(){var i,r,t;return o||(i=f,r=u,t={},o={findAll:function(n,u){var f,e;return u||(u=ct.constant(!0)),f=h.filter(nvi(n),function(n){var t=n.src;return!!s.fileApi&&!n.hasAttribute("data-mce-bogus")&&!n.hasAttribute("data-mce-placeholder")&&!(!t||t===s.transparentSrc)&&(0===t.indexOf("blob:")?!i.isUploaded(t)&&u(n):0===t.indexOf("data:")&&u(n))}),e=h.map(f,function(n){if(t[n.src])return new oi(function(i){t[n.src].then(function(t){if("string"==typeof t)return t;i({image:n,blobInfo:t.blobInfo})})});var i=new oi(function(t,i){gai(r,n,t,i)}).then(function(n){return delete t[n.image.src],n})["catch"](function(i){return delete t[n.src],i});return t[n.src]=i}),oi.all(e)}}),o.findAll(n.getBody(),et).then(p(function(t){return t=ot(t,function(t){return"string"!=typeof t||(vai(n,t),!1)}),l(t,function(n){nt(n.image.src,n.blobInfo.blobUri());n.image.src=n.blobInfo.blobUri();n.image.removeAttribute("data-mce-src")}),t}))},rt=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,i){var e=f.getResultUri(i),r;return e?'src="'+e+'"':(r=u.getByUri(i),r||(r=tu(n.editorManager.get(),function(n,t){return n||t.editorUpload&&t.editorUpload.blobCache.getByUri(i)},null)),r?'src="data:'+r.blob().type+";base64,"+r.base64()+'"':t)})};return n.on("setContent",function(){uht(n)?it():w()}),n.on("RawSaveContent",function(n){n.content=rt(n.content)}),n.on("getContent",function(n){n.source_view||"raw"===n.format||(n.content=rt(n.content))}),n.on("PostRender",function(){n.parser.addNodeFilter("img",function(n){l(n,function(n){var i=n.attr("src"),t;u.getByUri(i)||(t=f.getResultUri(i),t&&n.attr("src",t))})})}),{blobCache:u,addFilter:function(n){k.push(n)},uploadImages:tt,uploadImagesAuto:it,scanForImages:w,destroy:function(){u.destroy();f.destroy();o=e=null}}}function ovi(n){var i,t=[];"onselectionchange"in n.getDoc()||n.on("NodeChange Click MouseUp KeyUp Focus",function(t){var r,u;u={startContainer:(r=n.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==t.type&&wd(u,i)||n.fire("SelectionChange");i=u});n.on("contextmenu",function(){n.fire("SelectionChange")});n.on("SelectionChange",function(){var i=n.selection.getStart(!0);i&&(s.range||!n.selection.isCollapsed())&&cg(n)&&!function(i){var r,u;if((u=n.$(i).parentsUntil(n.getBody()).add(i)).length===t.length){for(r=u.length;0<=r&&u[r]===t[r];r--);if(-1===r)return t=u,!0}return t=u,!1}(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})});n.on("MouseUp",function(t){!t.isDefaultPrevented()&&cg(n)&&("IMG"===n.selection.getNode().nodeName?gt.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())});this.nodeChanged=function(t){var i,u,r,f=n.selection;n.initialized&&f&&!n.settings.disable_nodechange&&!n.readonly&&(r=n.getBody(),(i=f.getStart(!0)||r).ownerDocument===n.getDoc()&&n.dom.isChildOf(i,r)||(i=r),u=[],n.dom.getParent(i,function(n){if(n===r)return!0;u.push(n)}),(t=t||{}).element=i,t.parents=u,n.fire("NodeChange",t))}}function wg(n,i){var r;void 0===i&&(i=yu());r=function(){};!1!==(n=n||{}).fix_self_closing&&(n.fix_self_closing=!0);var e=n.comment?n.comment:r,o=n.cdata?n.cdata:r,u=n.text?n.text:r,s=n.start?n.start:r,f=n.end?n.end:r,h=n.pi?n.pi:r,c=n.doctype?n.doctype:r;return{parse:function(r){var a,l,lt,p,y,ut,g,ft,vt,yt,pt,at,it,d,w,nt,tt,wt,et,ot,st,ht,bt,kt,rt,dt,gt,k,ni,v=0,b=[],ti=0,ct=wf.decode,ii=t.makeMap("src,href,data,background,formaction,poster,xlink:href"),ui=/((java|vb)script|mhtml):/i,ri=function(n){for(var i,t=b.length;t--&&b[t].name!==n;);if(0<=t){for(i=b.length-1;t<=i;i--)(n=b[i]).valid&&f(n.name);b.length=t}},fi=function(t,i,r,u,f){var o,s,c,l,h,e;if(r=(i=i.toLowerCase())in pt?i:ct(r||u||f||""),it&&!ft&&0==(0===(c=i).indexOf("data-")||0===c.indexOf("aria-"))){if(!(o=wt[i])&&et){for(s=et.length;s--&&!(o=et[s]).pattern.test(i););-1===s&&(o=null)}if(!o)return;if(o.validValues&&!(r in o.validValues))return}if(ii[i]&&!n.allow_script_urls){e=r.replace(/[\s\u0000-\u001F]+/g,"");try{e=decodeURIComponent(e)}catch(a){e=unescape(e)}if(ui.test(e))return;if(h=e,!(l=n).allow_html_data_urls&&(/^data:image\//i.test(h)?!1===l.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(h):/^data:/i.test(h)))return}ft&&(i in ii||0===i.indexOf("on"))||(p.map[i]=r,p.push({name:i,value:r}))};for(rt=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),dt=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,yt=i.getShortEndedElements(),kt=n.self_closing_elements||i.getSelfClosingElements(),pt=i.getBoolAttrs(),it=n.validate,vt=n.remove_internals,ni=n.fix_self_closing,gt=i.getSpecialElements(),bt=r+">";a=rt.exec(bt);){if(v<a.index&&u(ct(r.substr(v,a.index-v))),l=a[6])":"===(l=l.toLowerCase()).charAt(0)&&(l=l.substr(1)),ri(l);else if(l=a[7]){if(a.index+a[0].length>r.length){u(ct(r.substr(a.index)));v=a.index+a[0].length;continue}if(":"===(l=l.toLowerCase()).charAt(0)&&(l=l.substr(1)),at=l in yt,ni&&kt[l]&&0<b.length&&b[b.length-1].name===l&&ri(l),!it||(d=i.getElementRule(l))){if(w=!0,it&&(wt=d.attributes,et=d.attributePatterns),(tt=a[8])?((ft=-1!==tt.indexOf("data-mce-type"))&&vt&&(w=!1),(p=[]).map={},tt.replace(dt,fi)):(p=[]).map={},it&&!ft){if(ot=d.attributesRequired,st=d.attributesDefault,ht=d.attributesForced,d.removeEmptyAttrs&&!p.length&&(w=!1),ht)for(y=ht.length;y--;)g=(nt=ht[y]).name,"{$uid}"===(k=nt.value)&&(k="mce_"+ti++),p.map[g]=k,p.push({name:g,value:k});if(st)for(y=st.length;y--;)(g=(nt=st[y]).name)in p.map||("{$uid}"===(k=nt.value)&&(k="mce_"+ti++),p.map[g]=k,p.push({name:g,value:k}));if(ot){for(y=ot.length;y--&&!(ot[y]in p.map););-1===y&&(w=!1)}if(nt=p.map["data-mce-bogus"]){if("all"===nt){v=vpt(i,r,rt.lastIndex);rt.lastIndex=v;continue}w=!1}}w&&s(l,p,at)}else w=!1;if(lt=gt[l]){lt.lastIndex=v=a.index+a[0].length;(a=lt.exec(r))?(w&&(ut=r.substr(v,a.index-v)),v=a.index+a[0].length):(ut=r.substr(v),v=r.length);w&&(0<ut.length&&u(ut,!0),f(l));rt.lastIndex=v;continue}at||(tt&&tt.indexOf("/")===tt.length-1?w&&f(l):b.push({name:l,valid:w}))}else(l=a[1])?(">"===l.charAt(0)&&(l=" "+l),n.allow_conditional_comments||"[if"!==l.substr(0,3).toLowerCase()||(l=" "+l),e(l)):(l=a[2])?o(l.replace(/<!--|-->/g,"")):(l=a[3])?c(l):(l=a[4])&&h(l,a[5]);v=a.index+a[0].length}for(v<r.length&&u(ct(r.substr(v))),y=b.length-1;0<=y;y--)(l=b[y]).valid&&f(l.name)}}}function dpt(n){var l,s,r=this,u=0,i=[],h=0,c=function(){return 0===h},e=function(n){c()&&(r.typing=n)},o=function(t){n.setDirty(t)},f=function(n){e(!1);r.add({},n)},a=function(){r.typing&&(e(!1),r.add())};return n.on("init",function(){r.add()}),n.on("BeforeExecCommand",function(n){var t=n.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(a(),r.beforeChange())}),n.on("ExecCommand",function(n){var t=n.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&f(n)}),n.on("ObjectResizeStart Cut",function(){r.beforeChange()}),n.on("SaveContent ObjectResized blur",f),n.on("DragEnd",f),n.on("KeyUp",function(t){var u=t.keyCode;t.isDefaultPrevented()||((33<=u&&u<=36||37<=u&&u<=40||45===u||t.ctrlKey)&&(f(),n.nodeChanged()),46!==u&&8!==u||n.nodeChanged(),s&&r.typing&&!1===nn(dg(n),i[0])&&(!1===n.isDirty()&&(o(!0),n.fire("change",{level:i[0],lastLevel:null})),n.fire("TypingUndo"),s=!1,n.nodeChanged()))}),n.on("KeyDown",function(n){var t=n.keyCode,i;n.isDefaultPrevented()||(33<=t&&t<=36||37<=t&&t<=40||45===t?r.typing&&f(n):(i=n.ctrlKey&&!n.altKey||n.metaKey,(t<16||20<t)&&224!==t&&91!==t&&!r.typing&&!i&&(r.beforeChange(),e(!0),r.add({},n),s=!0)))}),n.on("MouseDown",function(n){r.typing&&f(n)}),n.on("input",function(n){var t;n.inputType&&("insertReplacementText"===n.inputType||"insertText"===(t=n).inputType&&null===t.data)&&f(n)}),n.addShortcut("meta+z","","Undo"),n.addShortcut("meta+y,meta+shift+z","","Redo"),n.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||n.nodeChanged()}),r={data:i,typing:!1,beforeChange:function(){c()&&(l=co.getUndoBookmark(n.selection))},add:function(r,f){var e,s,a,v=n.settings,h;if((a=dg(n),r=r||{},r=t.extend(r,a),!1===c()||n.removed)||(s=i[u],n.fire("BeforeAddUndo",{level:r,lastLevel:s,originalEvent:f}).isDefaultPrevented())||s&&nn(s,r))return null;if(i[u]&&(i[u].beforeBookmark=l),v.custom_undo_redo_levels&&i.length>v.custom_undo_redo_levels){for(e=0;e<i.length-1;e++)i[e]=i[e+1];i.length--;u=i.length}return r.bookmark=co.getUndoBookmark(n.selection),u<i.length-1&&(i.length=u+1),i.push(r),u=i.length-1,h={level:r,lastLevel:s,originalEvent:f},n.fire("AddUndo",h),0<u&&(o(!0),n.fire("change",h)),r},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,e(!1)),0<u&&(t=i[--u],gg(n,t,!0),o(!0),n.fire("undo",{level:t})),t},redo:function(){var t;return u<i.length-1&&(t=i[++u],gg(n,t,!1),o(!0),n.fire("redo",{level:t})),t},clear:function(){i=[];u=0;r.typing=!1;r.data=i;n.fire("ClearUndos")},hasUndo:function(){return 0<u||r.typing&&i[0]&&!nn(dg(n),i[0])},hasRedo:function(){return u<i.length-1&&!r.typing},transact:function(n){return a(),r.beforeChange(),r.ignore(n),r.add()},ignore:function(n){try{h++;n()}finally{h--}},extra:function(t,f){var e,o;r.transact(t)&&(o=i[u].bookmark,e=i[u-1],gg(n,e,!0),r.transact(f)&&(i[u-1].beforeBookmark=o))}}}function dwt(n){var e,i,r,u=(e=n,i={},(r=function(n,u){n&&("string"!=typeof n?t.each(n,function(n,t){r(t,n)}):(u=u.length?u:[u],t.each(u,function(n){"undefined"==typeof n.deep&&(n.deep=!n.selector);"undefined"==typeof n.split&&(n.split=!n.selector||n.inline);"undefined"==typeof n.remove&&n.selector&&!n.inline&&(n.remove="none");n.selector&&n.inline&&(n.mixed=!0,n.block_expand=!0);"string"==typeof n.classes&&(n.classes=n.classes.split(/\s+/))}),i[n]=u))})(spi.get(e.dom)),r(e.settings.formats),{get:function(n){return n?i[n]:i},register:r,unregister:function(n){return n&&i[n]&&delete i[n],i}}),o=pu(null);return vpi(n),byi(n),{get:u.get,register:u.register,unregister:u.unregister,apply:f(bwt.applyFormat,n),remove:f(cwt,n),toggle:f(api,n,u),match:f(ci.match,n),matchAll:f(ci.matchAll,n),matchNode:f(ci.matchNode,n),canApply:f(ci.canApply,n),formatChanged:f(opi,n,o),getCssText:f(lpi,n)}}function vn(n,t){var e,o;void 0===t&&(t=yu());var r={},i=[],u={},f={};return(n=n||{}).validate=!("validate"in n)||n.validate,n.root_name=n.root_name||"body",e=function(n){var o,t,e;for((t in r)&&((e=u[t])?e.push(n):u[t]=[n]),o=i.length;o--;)(t=i[o].name)in n.attributes.map&&((e=f[t])?e.push(n):f[t]=[n]);return n},o={schema:t,addAttributeFilter:function(n,t){fbt(ebt(n),function(n){for(var r=0;r<i.length;r++)if(i[r].name===n)return void i[r].callbacks.push(t);i.push({name:n,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(i)},addNodeFilter:function(n,t){fbt(ebt(n),function(n){var i=r[n];i||(r[n]=i=[]);i.push(t)})},getNodeFilters:function(){var t=[];for(var n in r)r.hasOwnProperty(n)&&t.push({name:n,callbacks:r[n]});return t},filterNode:e,parse:function(o,s){var et,a,v,d,c,ot,l,g,p,w,h,it=[],y,tt,k;s=s||{};u={};f={};p=iwi(ubt("script,style,head,html,body,title,meta,param"),t.getBlockElements());var st=t.getNonEmptyElements(),ht=t.children,nt=n.validate,rt="forced_root_block"in s?s.forced_root_block:n.forced_root_block,b=t.getWhiteSpaceElements(),ut=/^[ \t\r\n]+/,ft=/[ \t\r\n]+$/,lt=/[ \t\r\n]+/g,ct=/^[ \t\r\n]+$/;if(w=b.hasOwnProperty(s.context)||b.hasOwnProperty(n.root_name),y=function(n,t){var f,i=new wi(n,t);return n in r&&((f=u[n])?f.push(i):u[n]=[i]),i},tt=function(n){for(var r,u,f,e=t.getBlockElements(),i=n.prev;i&&3===i.type;){if(0<(u=i.value.replace(ft,"")).length)return void(i.value=u);if(r=i.next){if(3===r.type&&r.value.length){i=i.prev;continue}if(!e[r.name]&&"script"!==r.name&&"style"!==r.name){i=i.prev;continue}}f=i.prev;i.remove();i=f}},et=bg({validate:nt,allow_script_urls:n.allow_script_urls,allow_conditional_comments:n.allow_conditional_comments,self_closing_elements:function(n){var t,i={};for(t in n)"li"!==t&&"p"!==t&&(i[t]=n[t]);return i}(t.getSelfClosingElements()),cdata:function(n){h.append(y("#cdata",4)).value=n},text:function(n,t){var i;w||(n=n.replace(lt," "),nwi(h.lastChild,p)&&(n=n.replace(ut,"")));0!==n.length&&((i=y("#text",3)).raw=!!t,h.append(i).value=n)},comment:function(n){h.append(y("#comment",8)).value=n},pi:function(n,t){h.append(y(n,7)).value=t;tt(h)},doctype:function(n){h.append(y("#doctype",10)).value=n;tt(h)},start:function(n,r,u){var e,o,c,s,a;if(c=nt?t.getElementRule(n):{}){for((e=y(c.outputName||n,1)).attributes=r,e.shortEnded=u,h.append(e),(a=ht[h.name])&&ht[e.name]&&!a[e.name]&&it.push(e),o=i.length;o--;)(s=i[o].name)in r.map&&((l=f[s])?l.push(e):f[s]=[e]);p[n]&&tt(e);u||(h=e);!w&&b[n]&&(w=!0)}},end:function(i){var r,e,u,f,o;if(e=nt?t.getElementRule(i):{}){if(p[i]&&!w){if((r=h.firstChild)&&3===r.type)if(0<(u=r.value.replace(ut,"")).length)r.value=u,r=r.next;else for(f=r.next,r.remove(),r=f;r&&3===r.type;)u=r.value,f=r.next,(0===u.length||ct.test(u))&&(r.remove(),r=f),r=f;if((r=h.lastChild)&&3===r.type)if(0<(u=r.value.replace(ft,"")).length)r.value=u,r=r.prev;else for(f=r.prev,r.remove(),r=f;r&&3===r.type;)u=r.value,f=r.prev,(0===u.length||ct.test(u))&&(r.remove(),r=f),r=f}if(w&&b[i]&&(w=!1),e.removeEmpty&&ic(t,st,b,h)&&!h.attributes.map.name&&!h.attr("id"))return o=h.parent,p[h.name]?h.empty().remove():h.unwrap(),void(h=o);e.paddEmpty&&(gpi(h)||ic(t,st,b,h))&&ibt(n,s,p,h);h=h.parent}}},t),k=h=new wi(s.context||n.root_name,11),et.parse(o),nt&&it.length&&(s.context?s.invalid=!0:function(n){var l,i,u,f,a,h,c,s,o,v,y,w,p,b,r,k;for(w=ubt("tr,td,th,tbody,thead,tfoot,table"),v=t.getNonEmptyElements(),y=t.getWhiteSpaceElements(),p=t.getTextBlockElements(),b=t.getSpecialElements(),l=0;l<n.length;l++)if((i=n[l]).parent&&!i.fixed)if(p[i.name]&&"li"===i.parent.name){for(r=i.next;r&&p[r.name];)r.name="li",r.fixed=!0,i.parent.insert(r,i.parent),r=r.next;i.unwrap(i)}else{for(f=[i],u=i.parent;u&&!t.isValidChild(u.name,i.name)&&!w[u.name];u=u.parent)f.push(u);if(u&&1<f.length){for(f.reverse(),a=h=e(f[0].clone()),o=0;o<f.length-1;o++){for(t.isValidChild(h.name,f[o].name)?(c=e(f[o].clone()),h.append(c)):c=h,s=f[o].firstChild;s&&s!==f[o+1];)k=s.next,c.append(s),s=k;h=c}ic(t,v,y,a)?u.insert(i,f[0],!0):(u.insert(a,f[0],!0),u.insert(i,a));u=f[0];(ic(t,v,y,u)||rbt(u,"br"))&&u.empty().remove()}else if(i.parent){if("li"===i.name){if((r=i.prev)&&("ul"===r.name||"ul"===r.name)){r.append(i);continue}if((r=i.next)&&("ul"===r.name||"ul"===r.name)){r.insert(i,r.firstChild,!0);continue}i.wrap(e(new wi("ul",1)));continue}t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)?i.wrap(e(new wi("div",1))):b[i.name]?i.empty().remove():i.unwrap()}}}(it)),rt&&("body"===k.name||s.isRootContent)&&function(){var u,r,i=k.firstChild,f=function(n){n&&((i=n.firstChild)&&3===i.type&&(i.value=i.value.replace(ut,"")),(i=n.lastChild)&&3===i.type&&(i.value=i.value.replace(ft,"")))};if(t.isValidChild(k.name,rt.toLowerCase())){for(;i;)u=i.next,3===i.type||1===i.type&&"p"!==i.name&&!p[i.name]&&!i.attr("data-mce-type")?(r||((r=y(rt,1)).attr(n.forced_root_block_attrs),k.insert(r,i)),r.append(i)):(f(r),r=null),i=u;f(r)}}(),!s.invalid){for(g in u){for(l=r[g],c=(a=u[g]).length;c--;)a[c].parent||a.splice(c,1);for(v=0,d=l.length;v<d;v++)l[v](a,g,s)}for(v=0,d=i.length;v<d;v++)if((l=i[v]).name in f){for(c=(a=f[l.name]).length;c--;)a[c].parent||a.splice(c,1);for(c=0,ot=l.callbacks.length;c<ot;c++)l.callbacks[c](a,l.name,s)}}return k}},twi(o,n),kpi.register(o,n),o}function obt(n,t){var i,r,s,e,o,h,u=(i=n,h=["data-mce-selected"],s=(r=t)&&r.dom?r.dom:g.DOM,e=r&&r.schema?r.schema:yu(i),i.entity_encoding=i.entity_encoding||"named",i.remove_trailing_brs=!("remove_trailing_brs"in i)||i.remove_trailing_brs,o=vn(i,e),nbt.register(o,i,s),{schema:e,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(n,t){var u=tc({format:"html"},t||{}),h=ppi.process(r,n,u),c=uwi(s,h,u),f=fwi(o,c,u);return"tree"===u.format?f:ewi(r,i,e,f,u)},addRules:function(n){e.addValidElements(n)},setRules:function(n){e.setValidElements(n)},addTempAttr:f(rwi,o,h),getTempAttrs:function(){return h}});return{schema:u.schema,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:u.serialize,addRules:u.addRules,setRules:u.setRules,addTempAttr:u.addTempAttr,getTempAttrs:u.getTempAttrs}}function yn(n){return{getBookmark:f(fei,n),moveToBookmark:f(eei,n)}}function eki(n){var o,h,c,p=t.each,l=y.BACKSPACE,g=y.DELETE,i=n.dom,r=n.selection,e=n.settings,nt=n.parser,w=s.gecko,tt=s.ie,it=s.webkit,a="data:text/mce-internal,",b=tt?"Text":"URL",f=function(t,i){try{n.getDoc().execCommand(t,!1,i)}catch(r){}},u=function(n){return n.isDefaultPrevented()},k=function(){n.shortcuts.add("meta+a",null,"SelectAll")},v=function(){n.on("keydown",function(n){if(!u(n)&&n.keyCode===l&&r.isCollapsed()&&0===r.getRng().startOffset){var t=r.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return n.preventDefault(),!1}})},d=function(){n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",function(t){var i;if("HTML"===t.target.nodeName){if(11<s.ie)return void n.getBody().focus();i=n.selection.getRng();n.getBody().focus();n.selection.setRng(i);n.selection.normalize();n.nodeChanged()}}))};return n.on("keydown",function(t){var e,o,s,h,f;if(!u(t)&&t.keyCode===y.BACKSPACE&&(o=(e=r.getRng()).startContainer,s=e.startOffset,h=i.getRoot(),f=o,e.collapsed&&0===s)){for(;f&&f.parentNode&&f.parentNode.firstChild===f&&f.parentNode!==h;)f=f.parentNode;"BLOCKQUOTE"===f.tagName&&(n.formatter.toggle("blockquote",null,f),(e=i.createRng()).setStart(o,0),e.setEnd(o,0),r.setRng(e))}}),o=function(n){var t=i.create("body"),u=n.cloneContents();return t.appendChild(u),r.serializer.serialize(t,{format:"html"})},n.on("keydown",function(t){var f,r,e,s,h,c=t.keyCode;if(!u(t)&&(c===g||c===l)){if(f=n.selection.isCollapsed(),r=n.getBody(),f&&!i.isEmpty(r))return;if(!f&&(e=n.selection.getRng(),s=o(e),(h=i.createRng()).selectNode(n.getBody()),s!==o(h)))return;t.preventDefault();n.setContent("");r.firstChild&&i.isBlock(r.firstChild)?n.selection.setCursorLocation(r.firstChild,0):n.selection.setCursorLocation(r,0);n.nodeChanged()}}),s.windowsPhone||n.on("keyup focusin mouseup",function(n){y.modifierPressed(n)||r.normalize()},!0),it&&(n.settings.content_editable||i.bind(n.getDoc(),"mousedown mouseup",function(t){var i;if(t.target===n.getDoc().documentElement)if(i=r.getRng(),n.getBody().focus(),"mousedown"===t.type){if(si(i.startContainer))return;r.placeCaretAt(t.clientX,t.clientY)}else r.setRng(i)}),n.on("click",function(t){var u=t.target;/^(IMG|HR)$/.test(u.nodeName)&&"false"!==i.getContentEditableParent(u)&&(t.preventDefault(),n.selection.select(u),n.nodeChanged());"A"===u.nodeName&&i.hasClass(u,"mce-item-anchor")&&(t.preventDefault(),r.select(u))}),e.forced_root_block&&n.on("init",function(){f("DefaultParagraphSeparator",e.forced_root_block)}),n.on("init",function(){n.dom.bind(n.getBody(),"submit",function(n){n.preventDefault()})}),v(),nt.addNodeFilter("br",function(n){for(var t=n.length;t--;)"Apple-interchange-newline"===n[t].attr("class")&&n[t].remove()}),s.iOS?(n.inline||n.on("keydown",function(){document.activeElement===document.body&&n.getWin().focus()}),d(),n.on("click",function(n){var t=n.target;do if("A"===t.tagName)return void n.preventDefault();while(t=t.parentNode)}),n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):k()),11<=s.ie&&(d(),v()),s.ie&&(k(),f("AutoUrlDetect",!1),n.on("dragstart",function(t){var i,u,f;(i=t).dataTransfer&&(n.selection.isCollapsed()&&"IMG"===i.target.tagName&&r.select(i.target),0<(u=n.selection.getContent()).length&&(f=a+escape(n.id)+","+escape(u),i.dataTransfer.setData(b,f)))}),n.on("drop",function(t){var f,o,e,s,h,i;u(t)||(f=(h=t).dataTransfer&&(i=h.dataTransfer.getData(b))&&0<=i.indexOf(a)?(i=i.substr(a.length).split(","),{id:unescape(i[0]),html:unescape(i[1])}):null,f&&f.id!==n.id&&(t.preventDefault(),o=pn(t.x,t.y,n.getDoc()),r.setRng(o),e=f.html,s=!0,n.queryCommandSupported("mceInsertClipboardContent")?n.execCommand("mceInsertClipboardContent",!1,{content:e,internal:s}):n.execCommand("mceInsertContent",!1,e)))})),w&&(n.on("keydown",function(t){if(!u(t)&&t.keyCode===l){if(!n.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&0===r.getRng().startOffset){var e=r.getNode(),f=e.previousSibling;if("HR"===e.nodeName)return i.remove(e),void t.preventDefault();f&&f.nodeName&&"hr"===f.nodeName.toLowerCase()&&(i.remove(f),t.preventDefault())}}}),Range.prototype.getClientRects||n.on("mousedown",function(t){if(!u(t)&&"HTML"===t.target.nodeName){var i=n.getBody();i.blur();gt.setEditorTimeout(n,function(){i.focus()})}}),h=function(){var t=i.getAttribs(r.getStart().cloneNode(!1));return function(){var u=r.getStart();u!==n.getBody()&&(i.setAttrib(u,"style",null),p(t,function(n){u.setAttributeNode(n.cloneNode(!0))}))}},c=function(){return!r.isCollapsed()&&i.getParent(r.getStart(),i.isBlock)!==i.getParent(r.getEnd(),i.isBlock)},n.on("keypress",function(t){var i;if(!u(t)&&(8===t.keyCode||46===t.keyCode)&&c())return i=h(),n.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),i.bind(n.getDoc(),"cut",function(t){var i;!u(t)&&c()&&(i=h(),gt.setEditorTimeout(n,function(){i()}))}),e.readonly||n.on("BeforeExecCommand MouseDown",function(){f("StyleWithCSS",!1);f("enableInlineTableEditing",!1);e.object_resizing||f("enableObjectResizing",!1)}),n.on("SetContent ExecCommand",function(n){"setcontent"!==n.type&&"mceInsertLink"!==n.command||p(i.select("a"),function(n){var t=n.parentNode,r=i.getRoot();if(t.lastChild===n){for(;t&&!i.isBlock(t);){if(t.parentNode.lastChild!==t||t===r)return;t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}})}),n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),s.mac&&n.on("keydown",function(t){!y.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),n.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}),v()),{refreshContentEditable:function(){},isHidden:function(){var t;return!w||n.removed?0:!(t=n.selection.getSel())||!t.rangeCount||0===t.rangeCount}}}function ltt(n){return{walk:function(t,i){return ov(n,t,i)},split:ay,normalize:function(t){return ny(n,t).fold(o(!1),function(n){return t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0})}}}var dtt,gtt,nit,ap,tit,yc,vi,pc,wc,iit,rit,os,bc,vp,uit,fit,eit,ss=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},gr=function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},o=function(n){return function(){return n}},bi=function(n){return n},f=function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},hs=o(!1),kc=o(!0),cs=hs,yp=kc,hf=function(){return pp},pp=(ap={fold:function(n){return n()},is:cs,isSome:cs,isNone:yp,getOr:nit=function(n){return n},getOrThunk:gtt=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:nit,orThunk:gtt,map:hf,ap:hf,each:function(){},bind:hf,flatten:hf,exists:cs,forall:yp,filter:hf,equals:dtt=function(n){return n.isNone()},equals_:dtt,toArray:function(){return[]},toString:o("none()")},Object.freeze&&Object.freeze(ap),ap),dc=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:yp,isNone:cs,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:u,orThunk:u,map:function(t){return dc(t(n))},ap:function(t){return t.fold(hf,function(t){return dc(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:pp},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(cs,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},n={some:dc,none:hf,from:function(n){return null===n||n===undefined?pp:dc(n)}},cf=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},ui=cf("string"),oit=cf("object"),ls=cf("array"),igt=cf("null"),sit=cf("boolean"),nu=cf("function"),wp=cf("number"),hit=(tit=Array.prototype.indexOf)===undefined?function(n,t){return rgt(n,t)}:function(n,t){return tit.call(n,t)},as=function(n,t){return-1<hit(n,t)},cit=function(n,t){return lf(n,t).isSome()},lt=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},l=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},lit=function(n,t){for(var r,u=[],f=[],i=0,e=n.length;i<e;i++)r=n[i],(t(r,i,n)?u:f).push(r);return{pass:u,fail:f}},ot=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},tu=function(n,t,i){return l(n,function(n){i=t(i,n)}),i},fi=function(t,i){for(var u,r=0,f=t.length;r<f;r++)if(u=t[r],i(u,r,t))return n.some(u);return n.none()},lf=function(t,i){for(var r=0,u=t.length;r<u;r++)if(i(t[r],r,t))return n.some(r);return n.none()},rgt=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},ugt=Array.prototype.push,gc=function(n,t){return function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!Array.prototype.isPrototypeOf(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);ugt.apply(i,n[t])}return i}(lt(n,t))},bp=function(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i,n))return!1;return!0},kp=Array.prototype.slice,ait=function(n,t){return ot(n,function(n){return!as(t,n)})},ur=function(t){return 0===t.length?n.none():n.some(t[0])},he=function(t){return 0===t.length?n.none():n.some(t[t.length-1])},fgt=nu(Array.from)?Array.from:function(n){return kp.call(n)},egt="undefined"!=typeof window?window:Function("return this;")(),ogt=function(n,t){return function(n,t){for(var i=t!==undefined&&null!==t?t:egt,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i}(n.split("."),t)},ce={getOrDie:function(n,t){var i=ogt(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i}},vit=function(){return ce.getOrDie("URL")},nl={createObjectURL:function(n){return vit().createObjectURL(n)},revokeObjectURL:function(n){vit().revokeObjectURL(n)}},dp=navigator,yi=dp.userAgent,yit=function(n){return"matchMedia"in window&&matchMedia(n).matches},p,vl,eb,cb,ea,oa,iyt,wh,op,ctt,ptt,ac,se,wtt,btt,vc;bc=/Android/.test(yi);vi=(vi=!(yc=/WebKit/.test(yi))&&/MSIE/gi.test(yi)&&/Explorer/gi.test(dp.appName))&&/MSIE (\w+)\./.exec(yi)[1];pc=-1!==yi.indexOf("Trident/")&&(-1!==yi.indexOf("rv:")||-1!==dp.appName.indexOf("Netscape"))&&11;wc=-1!==yi.indexOf("Edge/")&&!vi&&!pc&&12;vi=vi||pc||wc;iit=!yc&&!pc&&/Gecko/.test(yi);rit=-1!==yi.indexOf("Mac");os=/(iPad|iPhone)/.test(yi);vp="FormData"in window&&"FileReader"in window&&"URL"in window&&!!nl.createObjectURL;uit=yit("only screen and (max-device-width: 480px)")&&(bc||os);fit=yit("only screen and (min-width: 800px)")&&(bc||os);eit=-1!==yi.indexOf("Windows Phone");wc&&(yc=!1);var gp,le,it,w,tl,pit,vs,nw,wit,il,iu,ae,ru,ei,rl,fr,uu,ve,ys,s={opera:!1,webkit:yc,ie:vi,gecko:iit,mac:rit,iOS:os,android:bc,contentEditable:!os||vp||534<=parseInt(yi.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==vi,range:window.getSelection&&"Range"in window,documentMode:vi&&!wc?document.documentMode||7:10,fileApi:vp,ceFalse:!1===vi||8<vi,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===vi||11<vi,desktop:!uit&&!fit,windowsPhone:eit},oi=window.Promise?window.Promise:function(){function t(n,t){return function(){n.apply(t,arguments)}}function r(n){var t=this;null!==this._state?s(function(){var i=t._state?n.onFulfilled:n.onRejected,r;if(null!==i){try{r=i(t._value)}catch(u){return void n.reject(u)}n.resolve(r)}else(t._state?n.resolve:n.reject)(t._value)}):this._deferreds.push(n)}function u(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if("function"==typeof r)return void e(t(r,n),t(u,this),t(i,this))}this._state=!0;this._value=n;f.call(this)}catch(o){i.call(this,o)}}function i(n){this._state=!1;this._value=n;f.call(this)}function f(){for(var n=0,t=this._deferreds.length;n<t;n++)r.call(this,this._deferreds[n]);this._deferreds=null}function h(n,t,i,r){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.resolve=i;this.reject=r}function e(n,t,i){var r=!1;try{n(function(n){r||(r=!0,t(n))},function(n){r||(r=!0,i(n))})}catch(u){if(r)return;r=!0;i(u)}}var o=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)},n=function(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null;this._value=null;this._deferreds=[];e(n,t(u,this),t(i,this))},s=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(n){setTimeout(n,1)};return n.prototype["catch"]=function(n){return this.then(null,n)},n.prototype.then=function(t,i){var u=this;return new n(function(n,f){r.call(u,new h(t,i,n,f))})},n.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&o(arguments[0])?arguments[0]:arguments);return new n(function(n,i){function f(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,function(n){f(r,n)},i)}t[r]=e;0==--u&&n(t)}catch(s){i(s)}}var u,r;if(0===t.length)return n([]);for(u=t.length,r=0;r<t.length;r++)f(r,t[r])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})},n}(),tw=function(n,t){return"number"!=typeof t&&(t=0),setTimeout(n,t)},bit=function(n,t){return"number"!=typeof t&&(t=1),setInterval(n,t)},kit=function(n,t){var i,r;return(r=function(){var r=arguments;clearTimeout(i);i=tw(function(){n.apply(this,r)},t)}).stop=function(){clearTimeout(i)},r},gt={requestAnimationFrame:function(n,t){gp?gp.then(n):gp=new oi(function(n){t||(t=document.body),function(n,t){for(var i=window.requestAnimationFrame,u=["ms","moz","webkit"],r=0;r<u.length&&!i;r++)i=window[u[r]+"RequestAnimationFrame"];i||(i=function(n){window.setTimeout(n,0)});i(n,t)}(n,t)}).then(n)},setTimeout:tw,setInterval:bit,setEditorTimeout:function(n,t,i){return tw(function(){n.removed||t()},i)},setEditorInterval:function(n,t,i){var r;return r=bit(function(){n.removed?clearInterval(r):t()},i)},debounce:kit,throttle:kit,clearInterval:function(n){return clearInterval(n)},clearTimeout:function(n){return clearTimeout(n)}},sgt=/^(?:mouse|contextmenu)|click/,hgt={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},ul=function(){return!1},fl=function(){return!0},el=function(n,t,i,r){n.addEventListener?n.addEventListener(t,i,r||!1):n.attachEvent&&n.attachEvent("on"+t,i)},iw=function(n,t,i,r){n.removeEventListener?n.removeEventListener(t,i,r||!1):n.detachEvent&&n.detachEvent("on"+t,i)},ps=function(n,t){var f,e,i=t||{};for(f in n)hgt[f]||(i[f]=n[f]);if(i.target||(i.target=i.srcElement||document),s.experimentalShadowDom&&(i.target=function(n,t){if(n.composedPath){var i=n.composedPath();if(i&&0<i.length)return i[0]}return t}(n,i.target)),n&&sgt.test(n.type)&&n.pageX===undefined&&n.clientX!==undefined){var o=i.target.ownerDocument||document,r=o.documentElement,u=o.body;i.pageX=n.clientX+(r&&r.scrollLeft||u&&u.scrollLeft||0)-(r&&r.clientLeft||u&&u.clientLeft||0);i.pageY=n.clientY+(r&&r.scrollTop||u&&u.scrollTop||0)-(r&&r.clientTop||u&&u.clientTop||0)}return i.preventDefault=function(){i.isDefaultPrevented=fl;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=fl;n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},!(i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=fl;i.stopPropagation()})==((e=i).isDefaultPrevented===fl||e.isDefaultPrevented===ul)&&(i.isDefaultPrevented=ul,i.isPropagationStopped=ul,i.isImmediatePropagationStopped=ul),"undefined"==typeof i.metaKey&&(i.metaKey=!1),i},cgt=function(n,t,i){var r=n.document,f={type:"ready"};if(i.domLoaded)t(f);else{var e=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},u=function(){i.domLoaded||(i.domLoaded=!0,t(f))},o=function(){e()&&(iw(r,"readystatechange",o),u())},h=function(){try{r.documentElement.doScroll("left")}catch(n){return void gt.setTimeout(h)}u()};!r.addEventListener||s.ie&&s.ie<11?(el(r,"readystatechange",o),r.documentElement.doScroll&&n.self===n.top&&h()):e()?u():el(n,"DOMContentLoaded",u);el(n,"load",u)}},vr=function(){var u,t,f,e,o,n=this,i={},r;t="mce-data-"+(+new Date).toString(32);e="onmouseenter"in document.documentElement;f="onfocusin"in document.documentElement;o={mouseenter:"mouseover",mouseleave:"mouseout"};u=1;n.domLoaded=!1;n.events=i;r=function(n,t){var u,r,e,f,o=i[t];if(u=o&&o[n.type])for(r=0,e=u.length;r<e;r++)if((f=u[r])&&!1===f.func.call(f.scope,n)&&n.preventDefault(),n.isImmediatePropagationStopped())return};n.bind=function(s,h,c,l){var v,y,k,a,w,p,b,d=window,g=function(n){r(ps(n||d.event),v)};if(s&&3!==s.nodeType&&8!==s.nodeType){for(s[t]?v=s[t]:(v=u++,s[t]=v,i[v]={}),l=l||s,k=(h=h.split(" ")).length;k--;)p=g,w=b=!1,"DOMContentLoaded"===(a=h[k])&&(a="ready"),n.domLoaded&&"ready"===a&&"complete"===s.readyState?c.call(l,ps({type:a})):(e||(w=o[a])&&(p=function(n){var i,t;if(i=n.currentTarget,(t=n.relatedTarget)&&i.contains)t=i.contains(t);else for(;t&&t!==i;)t=t.parentNode;t||((n=ps(n||d.event)).type="mouseout"===n.type?"mouseleave":"mouseenter",n.target=i,r(n,v))}),f||"focusin"!==a&&"focusout"!==a||(b=!0,w="focusin"===a?"focus":"blur",p=function(n){(n=ps(n||d.event)).type="focus"===n.type?"focusin":"focusout";r(n,v)}),(y=i[v][a])?"ready"===a&&n.domLoaded?c({type:a}):y.push({func:c,scope:l}):(i[v][a]=y=[{func:c,scope:l}],y.fakeName=w,y.capture=b,y.nativeHandler=p,"ready"===a?cgt(s,p,n):el(s,w||a,p,b)));return s=y=0,c}};n.unbind=function(r,u,f){var c,e,l,h,o,s;if(!r||3===r.nodeType||8===r.nodeType)return n;if(c=r[t]){if(s=i[c],u){for(l=(u=u.split(" ")).length;l--;)if(e=s[o=u[l]]){if(f)for(h=e.length;h--;)if(e[h].func===f){var a=e.nativeHandler,v=e.fakeName,y=e.capture;(e=e.slice(0,h).concat(e.slice(h+1))).nativeHandler=a;e.fakeName=v;e.capture=y;s[o]=e}f&&0!==e.length||(delete s[o],iw(r,e.fakeName||o,e.nativeHandler,e.capture))}}else{for(o in s)e=s[o],iw(r,e.fakeName||o,e.nativeHandler,e.capture);s={}}for(o in s)return n;delete i[c];try{delete r[t]}catch(p){r[t]=null}}return n};n.fire=function(i,u,f){var e;if(!i||3===i.nodeType||8===i.nodeType)return n;for((f=ps(null,f)).type=u,f.target=i;(e=i[t])&&r(f,e),(i=i.parentNode||i.ownerDocument||i.defaultView||i.parentWindow)&&!f.isPropagationStopped(););return n};n.clean=function(i){var r,f,u=n.unbind;if(!i||3===i.nodeType||8===i.nodeType)return n;if(i[t]&&u(i),i.getElementsByTagName||(i=i.document),i&&i.getElementsByTagName)for(u(i),r=(f=i.getElementsByTagName("*")).length;r--;)(i=f[r])[t]&&u(i);return n};n.destroy=function(){i={}};n.cancel=function(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}};vr.Event=new vr;vr.Event.bind(window,"ready",function(){});var st="sizzle"+-new Date,ki=window.document,er=0,lgt=0,dit=ew(),git=ew(),nrt=ew(),rw=function(n,t){return n===t&&(ae=!0),0},ol=typeof undefined,agt={}.hasOwnProperty,fu=[],vgt=fu.pop,ygt=fu.push,eu=fu.push,trt=fu.slice,af=fu.indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]===n)return t;return-1},nt="[\\x20\\t\\r\\n\\f]",vf="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",irt="\\["+nt+"*("+vf+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+vf+"))|)"+nt+"*\\]",rrt=":("+vf+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+irt+")*)|.*)\\)|)",sl=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),pgt=new RegExp("^"+nt+"*,"+nt+"*"),wgt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),bgt=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),kgt=new RegExp(rrt),dgt=new RegExp("^"+vf+"$"),hl={ID:new RegExp("^#("+vf+")"),CLASS:new RegExp("^\\.("+vf+")"),TAG:new RegExp("^("+vf+"|[*])"),ATTR:new RegExp("^"+irt),PSEUDO:new RegExp("^"+rrt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ggt=/^(?:input|select|textarea|button)$/i,nnt=/^h\d$/i,uw=/^[^{]+\{\s*\[native \w/,tnt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fw=/[+~]/,int=/'|\\/g,ou=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),su=function(n,t,i){var r="0x"+t-65536;return r!=r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{eu.apply(fu=trt.call(ki.childNodes),ki.childNodes);fu[ki.childNodes.length].nodeType}catch(kdi){eu={apply:fu.length?function(n,t){ygt.apply(n,trt.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}p=function(n,t,i,r){var h,u,f,o,c,s,l,e,v,a;if((t?t.ownerDocument||t:ki)!==ei&&ru(t),i=i||[],!n||"string"!=typeof n)return i;if(1!==(o=(t=t||ei).nodeType)&&9!==o)return[];if(fr&&!r){if(h=tnt.exec(n))if(f=h[1]){if(9===o){if(!(u=t.getElementById(f))||!u.parentNode)return i;if(u.id===f)return i.push(u),i}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&ys(t,u)&&u.id===f)return i.push(u),i}else{if(h[2])return eu.apply(i,t.getElementsByTagName(n)),i;if((f=h[3])&&it.getElementsByClassName)return eu.apply(i,t.getElementsByClassName(f)),i}if(it.qsa&&(!uu||!uu.test(n))){if(e=l=st,v=t,a=9===o&&n,1===o&&"object"!==t.nodeName.toLowerCase()){for(s=vs(n),(l=t.getAttribute("id"))?e=l.replace(int,"\\$&"):t.setAttribute("id",e),e="[id='"+e+"'] ",c=s.length;c--;)s[c]=e+cl(s[c]);v=fw.test(n)&&ow(t.parentNode)||t;a=s.join(",")}if(a)try{return eu.apply(i,v.querySelectorAll(a)),i}catch(y){}finally{l||t.removeAttribute("id")}}}return wit(n.replace(sl,"$1"),t,i,r)};for(le in it=p.support={},pit=p.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return!!t&&"HTML"!==t.nodeName},ru=p.setDocument=function(n){var r,t=n?n.ownerDocument||n:ki,i=t.defaultView;return t!==ei&&9===t.nodeType&&t.documentElement?(rl=(ei=t).documentElement,fr=!pit(t),i&&i!==function(n){try{return n.top}catch(t){}return null}(i)&&(i.addEventListener?i.addEventListener("unload",function(){ru()},!1):i.attachEvent&&i.attachEvent("onunload",function(){ru()})),it.attributes=!0,it.getElementsByTagName=!0,it.getElementsByClassName=uw.test(t.getElementsByClassName),it.getById=!0,w.find.ID=function(n,t){if(typeof t.getElementById!==ol&&fr){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(n){var t=n.replace(ou,su);return function(n){return n.getAttribute("id")===t}},w.find.TAG=it.getElementsByTagName?function(n,t){if(typeof t.getElementsByTagName!==ol)return t.getElementsByTagName(n)}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){for(;i=u[f++];)1===i.nodeType&&r.push(i);return r}return u},w.find.CLASS=it.getElementsByClassName&&function(n,t){if(fr)return t.getElementsByClassName(n)},ve=[],uu=[],it.disconnectedMatch=!0,uu=uu.length&&new RegExp(uu.join("|")),ve=ve.length&&new RegExp(ve.join("|")),r=uw.test(rl.compareDocumentPosition),ys=r||uw.test(rl.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)for(;t=t.parentNode;)if(t===n)return!0;return!1},rw=r?function(n,i){if(n===i)return ae=!0,0;var r=!n.compareDocumentPosition-!i.compareDocumentPosition;return r||(1&(r=(n.ownerDocument||n)===(i.ownerDocument||i)?n.compareDocumentPosition(i):1)||!it.sortDetached&&i.compareDocumentPosition(n)===r?n===t||n.ownerDocument===ki&&ys(ki,n)?-1:i===t||i.ownerDocument===ki&&ys(ki,i)?1:iu?af.call(iu,n)-af.call(iu,i):0:4&r?-1:1)}:function(n,i){if(n===i)return ae=!0,0;var r,u=0,o=n.parentNode,s=i.parentNode,f=[n],e=[i];if(!o||!s)return n===t?-1:i===t?1:o?-1:s?1:iu?af.call(iu,n)-af.call(iu,i):0;if(o===s)return urt(n,i);for(r=n;r=r.parentNode;)f.unshift(r);for(r=i;r=r.parentNode;)e.unshift(r);for(;f[u]===e[u];)u++;return u?urt(f[u],e[u]):f[u]===ki?-1:e[u]===ki?1:0},t):ei},p.matches=function(n,t){return p(n,null,null,t)},p.matchesSelector=function(n,t){if((n.ownerDocument||n)!==ei&&ru(n),t=t.replace(bgt,"='$1']"),it.matchesSelector&&fr&&(!ve||!ve.test(t))&&(!uu||!uu.test(t)))try{var i=(void 0).call(n,t);if(i||it.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(r){}return 0<p(t,ei,null,[n]).length},p.contains=function(n,t){return(n.ownerDocument||n)!==ei&&ru(n),ys(n,t)},p.attr=function(n,t){(n.ownerDocument||n)!==ei&&ru(n);var r=w.attrHandle[t.toLowerCase()],i=r&&agt.call(w.attrHandle,t.toLowerCase())?r(n,t,!fr):undefined;return i!==undefined?i:it.attributes||!fr?n.getAttribute(t):(i=n.getAttributeNode(t))&&i.specified?i.value:null},p.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);},p.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ae=!it.detectDuplicates,iu=!it.sortStable&&n.slice(0),n.sort(rw),ae){for(;r=n[i++];)r===n[i]&&(t=u.push(i));for(;t--;)n.splice(u[t],1)}return iu=null,n},tl=p.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=tl(n)}else if(3===t||4===t)return n.nodeValue}else for(;r=n[u++];)i+=tl(r);return i},(w=p.selectors={cacheLength:50,createPseudo:di,match:hl,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(ou,su),n[3]=(n[3]||n[4]||n[5]||"").replace(ou,su),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||p.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&p.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return hl.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&kgt.test(t)&&(i=vs(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(ou,su).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=dit[n+" "];return t||(t=new RegExp("(^|"+nt+")"+n+"("+nt+"|$)"))&&dit(n,function(n){return t.test("string"==typeof n.className&&n.className||typeof n.getAttribute!==ol&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var u=p.attr(r,n);return null==u?"!="===t:!t||(u+="","="===t?u===i:"!="===t?u!==i:"^="===t?i&&0===u.indexOf(i):"*="===t?i&&-1<u.indexOf(i):"$="===t?i&&u.slice(-i.length)===i:"~="===t?-1<(" "+u+" ").indexOf(i):"|="===t&&(u===i||u.slice(0,i.length+1)===i+"-"))}},CHILD:function(n,t,i,r,u){var o="nth"!==n.slice(0,3),e="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,s){var a,b,h,c,l,y,p=o!==e?"nextSibling":"previousSibling",v=t.parentNode,k=f&&t.nodeName.toLowerCase(),w=!s&&!f;if(v){if(o){for(;p;){for(h=t;h=h[p];)if(f?h.nodeName.toLowerCase()===k:1===h.nodeType)return!1;y=p="only"===n&&!y&&"nextSibling"}return!0}if(y=[e?v.firstChild:v.lastChild],e&&w){for(l=(a=(b=v[st]||(v[st]={}))[n]||[])[0]===er&&a[1],c=a[0]===er&&a[2],h=l&&v.childNodes[l];h=++l&&h&&h[p]||(c=l=0)||y.pop();)if(1===h.nodeType&&++c&&h===t){b[n]=[er,l,c];break}}else if(w&&(a=(t[st]||(t[st]={}))[n])&&a[0]===er)c=a[1];else for(;(h=++l&&h&&h[p]||(c=l=0)||y.pop())&&((f?h.nodeName.toLowerCase()!==k:1!==h.nodeType)||!++c||(w&&((h[st]||(h[st]={}))[n]=[er,c]),h!==t)););return(c-=u)===r||c%r==0&&0<=c/r}}},PSEUDO:function(n,t){var r,i=w.pseudos[n]||w.setFilters[n.toLowerCase()]||p.error("unsupported pseudo: "+n);return i[st]?i(t):1<i.length?(r=[n,n,"",t],w.setFilters.hasOwnProperty(n.toLowerCase())?di(function(n,r){for(var e,u=i(n,t),f=u.length;f--;)n[e=af.call(n,u[f])]=!(r[e]=u[f])}):function(n){return i(n,0,r)}):i}},pseudos:{not:di(function(n){var i=[],r=[],t=nw(n.replace(sl,"$1"));return t[st]?di(function(n,i,r,u){for(var e,o=t(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(i[f]=e))}):function(n,u,f){return i[0]=n,t(i,null,f,r),!r.pop()}}),has:di(function(n){return function(t){return 0<p(n,t).length}}),contains:di(function(n){return n=n.replace(ou,su),function(t){return-1<(t.textContent||t.innerText||tl(t)).indexOf(n)}}),lang:di(function(n){return dgt.test(n||"")||p.error("unsupported lang: "+n),n=n.replace(ou,su).toLowerCase(),function(t){var i;do if(i=fr?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(n){var t=window.location&&window.location.hash;return t&&t.slice(1)===n.id},root:function(n){return n===rl},focus:function(n){return n===ei.activeElement&&(!ei.hasFocus||ei.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return!1===n.disabled},disabled:function(n){return!0===n.disabled},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,!0===n.selected},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!w.pseudos.empty(n)},header:function(n){return nnt.test(n.nodeName)},input:function(n){return ggt.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:yf(function(){return[0]}),last:yf(function(n,t){return[t-1]}),eq:yf(function(n,t,i){return[i<0?i+t:i]}),even:yf(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:yf(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:yf(function(n,t,i){for(var r=i<0?i+t:i;0<=--r;)n.push(r);return n}),gt:yf(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[le]=rnt(le);for(le in{submit:!0,reset:!0})w.pseudos[le]=unt(le);frt.prototype=w.filters=w.pseudos;w.setFilters=new frt;vs=p.tokenize=function(n,t){var u,r,e,f,i,o,s,h=git[n+" "];if(h)return t?0:h.slice(0);for(i=n,o=[],s=w.preFilter;i;){for(f in u&&!(r=pgt.exec(i))||(r&&(i=i.slice(r[0].length)||i),o.push(e=[])),u=!1,(r=wgt.exec(i))&&(u=r.shift(),e.push({value:u,type:r[0].replace(sl," ")}),i=i.slice(u.length)),w.filter)(r=hl[f].exec(i))&&(!s[f]||(r=s[f](r)))&&(u=r.shift(),e.push({value:u,type:f,matches:r}),i=i.slice(u.length));if(!u)break}return t?i.length:i?p.error(n):git(n,o).slice(0)};nw=p.compile=function(n,t){var u,f,e,r,o,s,h=[],c=[],i=nrt[n+" "];if(!i){for(t||(t=vs(n)),u=t.length;u--;)(i=lw(t[u]))[st]?h.push(i):c.push(i);(i=nrt(n,(f=c,r=0<(e=h).length,o=0<f.length,s=function(n,t,i,u,s){var c,y,a,v=0,h="0",b=n&&[],l=[],k=il,d=n||o&&w.find.TAG("*",s),g=er+=null==k?1:Math.random()||.1,nt=d.length;for(s&&(il=t!==ei&&t);h!==nt&&null!=(c=d[h]);h++){if(o&&c){for(y=0;a=f[y++];)if(a(c,t,i)){u.push(c);break}s&&(er=g)}r&&((c=!a&&c)&&v--,n&&b.push(c))}if(v+=h,r&&h!==v){for(y=0;a=e[y++];)a(b,l,t,i);if(n){if(0<v)for(;h--;)b[h]||l[h]||(l[h]=vgt.call(u));l=ll(l)}eu.apply(u,l);s&&!n&&0<l.length&&1<v+e.length&&p.uniqueSort(u)}return s&&(er=g,il=k),b},r?di(s):s))).selector=n}return i};wit=p.select=function(n,t,i,r){var e,u,f,h,c,s="function"==typeof n&&n,o=!r&&vs(n=s.selector||n);if(i=i||[],1===o.length){if(2<(u=o[0]=o[0].slice(0)).length&&"ID"===(f=u[0]).type&&it.getById&&9===t.nodeType&&fr&&w.relative[u[1].type]){if(!(t=(w.find.ID(f.matches[0].replace(ou,su),t)||[])[0]))return i;s&&(t=t.parentNode);n=n.slice(u.shift().value.length)}for(e=hl.needsContext.test(n)?0:u.length;e--&&(f=u[e],!w.relative[h=f.type]);)if((c=w.find[h])&&(r=c(f.matches[0].replace(ou,su),fw.test(u[0].type)&&ow(t.parentNode)||t))){if(u.splice(e,1),!(n=r.length&&cl(u)))return eu.apply(i,r),i;break}}return(s||nw(n,o))(r,t,!fr,i,fw.test(n)&&ow(t.parentNode)||t),i};it.sortStable=st.split("").sort(rw).join("")===st;it.detectDuplicates=!!ae;ru();it.sortDetached=!0;var ert=Array.isArray,aw=function(n,t,i){var r,u;if(!n)return 0;if(i=i||n,n.length!==undefined){for(r=0,u=n.length;r<u;r++)if(!1===t.call(i,n[r],r,n))return 0}else for(r in n)if(n.hasOwnProperty(r)&&!1===t.call(i,n[r],r,n))return 0;return 1},ort=function(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r,n))return r;return-1},h={isArray:ert,toArray:function(n){var t,r,i=n;if(!ert(n))for(i=[],t=0,r=n.length;t<r;t++)i[t]=n[t];return i},each:aw,map:function(n,t){var i=[];return aw(n,function(r,u){i.push(t(r,u,n))}),i},filter:function(n,t){var i=[];return aw(n,function(r,u){t&&!t(r,u,n)||i.push(r)}),i},indexOf:function(n,t){var i,r;if(n)for(i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},reduce:function(n,t,i,r){var u=0;for(arguments.length<3&&(i=n[0]);u<n.length;u++)i=t.call(r,i,n[u],u);return i},findIndex:ort,find:function(n,t,i){var r=ort(n,t,i);return-1!==r?n[r]:undefined},last:function(n){return n[n.length-1]}},fnt=/^\s*|\s*$/g,srt=function(n){return null===n||n===undefined?"":(""+n).replace(fnt,"")},hrt=function(n,t){return t?!("array"!==t||!h.isArray(n))||typeof n===t:n!==undefined},crt=function(n,t,i,r){r=r||this;n&&(i&&(n=n[i]),h.each(n,function(n,u){if(!1===t.call(r,n,u,i))return!1;crt(n,t,i,r)}))},t={trim:srt,isArray:h.isArray,is:hrt,toArray:h.toArray,makeMap:function(n,t,i){var r;for(t=t||",","string"==typeof(n=n||[])&&(n=n.split(t)),i=i||{},r=n.length;r--;)i[n[r]]={};return i},each:h.each,map:h.map,grep:h.filter,inArray:h.indexOf,hasOwn:function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},extend:function(n,t){for(var r,e,u,s,f,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];for(f=arguments,r=1,e=f.length;r<e;r++)for(u in t=f[r])t.hasOwnProperty(u)&&(s=t[u])!==undefined&&(n[u]=s);return n},create:function(n,t,i){var f,u,r,o,s,e=this,h=0;if(n=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(n),r=n[3].match(/(^|\.)(\w+)$/i)[2],!(u=e.createNS(n[3].replace(/\.\w+$/,""),i))[r]){if("static"===n[2])return u[r]=t,void(this.onCreate&&this.onCreate(n[2],n[3],u[r]));t[r]||(t[r]=function(){},h=1);u[r]=t[r];e.extend(u[r].prototype,t);n[5]&&(f=e.resolve(n[5]).prototype,o=n[5].match(/\.(\w+)$/i)[1],s=u[r],u[r]=h?function(){return f[o].apply(this,arguments)}:function(){return this.parent=f[o],s.apply(this,arguments)},u[r].prototype[r]=u[r],e.each(f,function(n,t){u[r].prototype[t]=f[t]}),e.each(t,function(n,t){f[t]?u[r].prototype[t]=function(){return this.parent=f[t],n.apply(this,arguments)}:t!==r&&(u[r].prototype[t]=n)}));e.each(t["static"],function(n,t){u[r][t]=n})}},walk:crt,createNS:function(n,t){var i,r;for(t=t||window,n=n.split("."),i=0;i<n.length;i++)t[r=n[i]]||(t[r]={}),t=t[r];return t},resolve:function(n,t){var i,r;for(t=t||window,i=0,r=(n=n.split(".")).length;i<r&&(t=t[n[i]]);i++);return t},explode:function(n,t){return!n||hrt(n,"array")?n:h.map(n.split(t||","),srt)},_addCacheSuffix:function(n){var t=s.cacheSuffix;return t&&(n+=(-1===n.indexOf("?")?"?":"&")+t),n}},lrt=document,vw=Array.prototype.push,ent=Array.prototype.slice,ont=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ws=vr.Event,snt=t.makeMap("children,contents,next,prev"),bs=function(n){return void 0!==n},yw=function(n){return"string"==typeof n},art=function(n,t){var i,u,r;for(r=(t=t||lrt).createElement("div"),i=t.createDocumentFragment(),r.innerHTML=n;u=r.firstChild;)i.appendChild(u);return i},ye=function(n,t,i,r){var u;if(yw(t))t=art(t,pw(n[0]));else if(t.length&&!t.nodeType){if(t=e.makeArray(t),r)for(u=t.length-1;0<=u;u--)ye(n,t[u],i,r);else for(u=0;u<t.length;u++)ye(n,t[u],i,r);return n}if(t.nodeType)for(u=n.length;u--;)i.call(n[u],t);return n},vrt=function(n,t){return n&&t&&-1!==(" "+n.className+" ").indexOf(" "+t+" ")},yrt=function(n,t,i){var u,r;return t=e(t)[0],n.each(function(){var n=this;i&&u===n.parentNode||(u=n.parentNode,r=t.cloneNode(!1),n.parentNode.insertBefore(r,n));r.appendChild(n)}),n},hnt=t.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),cnt=t.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),lnt={"for":"htmlFor","class":"className",readonly:"readOnly"},prt={float:"cssFloat"},ks={},al={},e=function(n,t){return new e.fn.init(n,t)},ant=/^\s*|\s*$/g,wrt=function(n){return null===n||n===undefined?"":(""+n).replace(ant,"")},or=function(n,t){var f,u,r,i;if(n)if((f=n.length)===undefined){for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],!1===t.call(i,u,i)))break}else for(r=0;r<f&&(i=n[r],!1!==t.call(i,r,i));r++);return n},brt=function(n,t){var i=[];return or(n,function(n,r){t(r,n)&&i.push(r)}),i},pw=function(n){return n?9===n.nodeType?n:n.ownerDocument:lrt};e.fn=e.prototype={constructor:e,selector:"",context:null,length:0,init:function(n,t){var u,r,i=this;if(!n)return i;if(n.nodeType)return i.context=i[0]=n,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return e(n).attr(t);i.context=t=document}if(yw(n)){if(!(u="<"===(i.selector=n).charAt(0)&&">"===n.charAt(n.length-1)&&3<=n.length?[null,n,null]:ont.exec(n)))return e(t).find(n);if(u[1])for(r=art(n,pw(t)).firstChild;r;)vw.call(i,r),r=r.nextSibling;else{if(!(r=pw(t).getElementById(u[2])))return i;if(r.id!==u[2])return i.find(n);i.length=1;i[0]=r}}else this.add(n,!1);return i},toArray:function(){return t.toArray(this)},add:function(n,t){var u,r,i=this;if(yw(n))return i.add(e(n));if(!1!==t)for(u=e.unique(i.toArray().concat(e.makeArray(n))),i.length=u.length,r=0;r<u.length;r++)i[r]=u[r];else vw.apply(i,e.makeArray(n));return i},attr:function(n,t){var r,i=this;if("object"==typeof n)or(n,function(n,t){i.attr(n,t)});else{if(!bs(t)){if(i[0]&&1===i[0].nodeType){if((r=ks[n])&&r.get)return r.get(i[0],n);if(cnt[n])return i.prop(n)?n:undefined;null===(t=i[0].getAttribute(n,2))&&(t=undefined)}return t}this.each(function(){var i;if(1===this.nodeType){if((i=ks[n])&&i.set)return void i.set(this,t);null===t?this.removeAttribute(n,2):this.setAttribute(n,t,2)}})}return i},removeAttr:function(n){return this.attr(n,null)},prop:function(n,t){var i=this;if("object"==typeof(n=lnt[n]||n))or(n,function(n,t){i.prop(n,t)});else{if(!bs(t))return i[0]&&i[0].nodeType&&n in i[0]?i[0][n]:t;this.each(function(){1===this.nodeType&&(this[n]=t)})}return i},css:function(n,t){var i,r,u=this,f=function(n){return n.replace(/-(\D)/g,function(n,t){return t.toUpperCase()})},e=function(n){return n.replace(/[A-Z]/g,function(n){return"-"+n})};if("object"==typeof n)or(n,function(n,t){u.css(n,t)});else if(bs(t))n=f(n),"number"!=typeof t||hnt[n]||(t=t.toString()+"px"),u.each(function(){var i=this.style;if((r=al[n])&&r.set)r.set(this,t);else{try{this.style[prt[n]||n]=t}catch(u){}null!==t&&""!==t||(i.removeProperty?i.removeProperty(e(n)):i.removeAttribute(n))}});else{if(i=u[0],(r=al[n])&&r.get)return r.get(i);if(!i.ownerDocument.defaultView)return i.currentStyle?i.currentStyle[f(n)]:"";try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(e(n))}catch(o){return undefined}}return u},remove:function(){for(var n,t=this.length;t--;)n=this[t],ws.clean(n),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){for(var n,t=this.length;t--;)for(n=this[t];n.firstChild;)n.removeChild(n.firstChild);return this},html:function(n){var i,t=this;if(bs(n)){i=t.length;try{for(;i--;)t[i].innerHTML=n}catch(r){e(t[i]).empty().append(n)}return t}return t[0]?t[0].innerHTML:""},text:function(n){var i,t=this;if(bs(n)){for(i=t.length;i--;)"innerText"in t[i]?t[i].innerText=n:t[0].textContent=n;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return ye(this,arguments,function(n){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(n)})},prepend:function(){return ye(this,arguments,function(n){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(n,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?ye(this,arguments,function(n){this.parentNode.insertBefore(n,this)}):this},after:function(){return this[0]&&this[0].parentNode?ye(this,arguments,function(n){this.parentNode.insertBefore(n,this.nextSibling)},!0):this},appendTo:function(n){return e(n).append(this),this},prependTo:function(n){return e(n).prepend(this),this},replaceWith:function(n){return this.before(n).remove()},wrap:function(n){return yrt(this,n)},wrapAll:function(n){return yrt(this,n,!0)},wrapInner:function(n){return this.each(function(){e(this).contents().wrapAll(n)}),this},unwrap:function(){return this.parent().each(function(){e(this).replaceWith(this.childNodes)})},clone:function(){var n=[];return this.each(function(){n.push(this.cloneNode(!0))}),e(n)},addClass:function(n){return this.toggleClass(n,!0)},removeClass:function(n){return this.toggleClass(n,!1)},toggleClass:function(n,t){var i=this;return"string"!=typeof n||(-1!==n.indexOf(" ")?or(n.split(" "),function(){i.toggleClass(this,t)}):i.each(function(i,r){var u,f;(f=vrt(r,n))!==t&&(u=r.className,f?r.className=wrt((" "+u+" ").replace(" "+n+" "," ")):r.className+=u?" "+n:n)})),i},hasClass:function(n){return vrt(this[0],n)},each:function(n){return or(this,n)},on:function(n,t){return this.each(function(){ws.bind(this,n,t)})},off:function(n,t){return this.each(function(){ws.unbind(this,n,t)})},trigger:function(n){return this.each(function(){"object"==typeof n?ws.fire(this,n.type,n):ws.fire(this,n)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new e(ent.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(n){for(var r=[],t=0,i=this.length;t<i;t++)e.find(n,this[t],r);return e(r)},filter:function(n){return e("function"==typeof n?brt(this.toArray(),function(t,i){return n(i,t)}):e.filter(n,this.toArray()))},closest:function(n){var t=[];return n instanceof e&&(n=n[0]),this.each(function(i,r){for(;r;){if("string"==typeof n&&e(r).is(n)){t.push(r);break}if(r===n){t.push(r);break}r=r.parentNode}}),e(t)},offset:function(n){var i,r,t,u,f=0,e=0;return n?this.css(n):((i=this[0])&&(t=(r=i.ownerDocument).documentElement,i.getBoundingClientRect&&(f=(u=i.getBoundingClientRect()).left+(t.scrollLeft||r.body.scrollLeft)-t.clientLeft,e=u.top+(t.scrollTop||r.body.scrollTop)-t.clientTop)),{left:f,top:e})},push:vw,sort:[].sort,splice:[].splice};t.extend(e,{extend:t.extend,makeArray:function(n){return(i=n)&&i===i.window||n.nodeType?[n]:t.toArray(n);var i},inArray:function(n,t){var i;if(t.indexOf)return t.indexOf(n);for(i=t.length;i--;)if(t[i]===n)return i;return-1},isArray:t.isArray,each:or,trim:wrt,grep:brt,find:p,expr:p.selectors,unique:p.uniqueSort,text:p.getText,contains:p.contains,filter:function(n,t,i){var r=t.length;for(i&&(n=":not("+n+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return 1===t.length?e.find.matchesSelector(t[0],n)?[t[0]]:[]:e.find.matches(n,t)}});var krt=function(n,t,i){var u=[],r=n[t];for("string"!=typeof i&&i instanceof e&&(i=i[0]);r&&9!==r.nodeType;){if(i!==undefined){if(r===i)break;if("string"==typeof i&&e(r).is(i))break}1===r.nodeType&&u.push(r);r=r[t]}return u},ww=function(n,t,i,r){var u=[];for(r instanceof e&&(r=r[0]);n;n=n[t])if(!i||n.nodeType===i){if(r!==undefined){if(n===r)break;if("string"==typeof r&&e(n).is(r))break}u.push(n)}return u},drt=function(n,t,i){for(n=n[t];n;n=n[t])if(n.nodeType===i)return n;return null};or({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return krt(n,"parentNode")},next:function(n){return drt(n,"nextSibling",1)},prev:function(n){return drt(n,"previousSibling",1)},children:function(n){return ww(n.firstChild,"nextSibling",1)},contents:function(n){return t.toArray(("iframe"===n.nodeName?n.contentDocument||n.contentWindow.document:n).childNodes)}},function(n,t){e.fn[n]=function(i){var r=[];return this.each(function(){var n=t.call(r,this,i,r);n&&(e.isArray(n)?r.push.apply(r,n):r.push(n))}),1<this.length&&(snt[n]||(r=e.unique(r)),0===n.indexOf("parents")&&(r=r.reverse())),r=e(r),i?r.filter(i):r}});or({parentsUntil:function(n,t){return krt(n,"parentNode",t)},nextUntil:function(n,t){return ww(n,"nextSibling",1,t).slice(1)},prevUntil:function(n,t){return ww(n,"previousSibling",1,t).slice(1)}},function(n,t){e.fn[n]=function(i,r){var u=[];return this.each(function(){var n=t.call(u,this,i,u);n&&(e.isArray(n)?u.push.apply(u,n):u.push(n))}),1<this.length&&(u=e.unique(u),0!==n.indexOf("parents")&&"prevUntil"!==n||(u=u.reverse())),u=e(u),r?u.filter(r):u}});e.fn.is=function(n){return!!n&&0<this.filter(n).length};e.fn.init.prototype=e.fn;e.overrideDefaults=function(n){var t,i=function(r,u){return t=t||n(),0===arguments.length&&(r=t.element),u||(u=t.context),new i.fn.init(r,u)};return e.extend(i,this),i};vl=function(n,t,i){or(i,function(i,r){n[i]=n[i]||{};n[i][t]=r})};s.ie&&s.ie<8&&(vl(ks,"get",{maxlength:function(n){var t=n.maxLength;return 2147483647===t?undefined:t},size:function(n){var t=n.size;return 20===t?undefined:t},"class":function(n){return n.className},style:function(n){var t=n.style.cssText;return 0===t.length?undefined:t}}),vl(ks,"set",{"class":function(n,t){n.className=t},style:function(n,t){n.style.cssText=t}}));s.ie&&s.ie<9&&(prt.float="styleFloat",vl(al,"set",{opacity:function(n,t){var i=n.style;null===t||""===t?i.removeAttribute("filter"):(i.zoom=1,i.filter="alpha(opacity="+100*t+")")}}));e.attrHooks=ks;e.cssHooks=al;var grt=function(n){var t,i=!1;return function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];return i||(i=!0,t=n.apply(null,u)),t}},vnt=function(n,t){var r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined}(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},bw(i(1),i(2))):{major:0,minor:0}},nut=function(){return bw(0,0)},bw=function(n,t){return{major:n,minor:t}},yl={nu:bw,detect:function(n,t){var i=String(t).toLowerCase();return 0===n.length?nut():vnt(n,i)},unknown:nut},tut="Firefox",pe=function(n,t){return function(){return t===n}},iut=function(n){var t=n.current;return{current:t,version:n.version,isEdge:pe("Edge",t),isChrome:pe("Chrome",t),isIE:pe("IE",t),isOpera:pe("Opera",t),isFirefox:pe(tut,t),isSafari:pe("Safari",t)}},rut={unknown:function(){return iut({current:undefined,version:yl.unknown()})},nu:iut,edge:o("Edge"),chrome:o("Chrome"),ie:o("IE"),opera:o("Opera"),firefox:o(tut),safari:o("Safari")},uut="Windows",fut="Android",eut="Solaris",out="FreeBSD",pf=function(n,t){return function(){return t===n}},sut=function(n){var t=n.current;return{current:t,version:n.version,isWindows:pf(uut,t),isiOS:pf("iOS",t),isAndroid:pf(fut,t),isOSX:pf("OSX",t),isLinux:pf("Linux",t),isSolaris:pf(eut,t),isFreeBSD:pf(out,t)}},hut={unknown:function(){return sut({current:undefined,version:yl.unknown()})},nu:sut,windows:o(uut),ios:o("iOS"),android:o(fut),linux:o("Linux"),osx:o("OSX"),solaris:o(eut),freebsd:o(out)},cut=function(n,t){var i=String(t).toLowerCase();return fi(n,function(n){return n.search(i)})},ynt=function(n,t){return cut(n,t).map(function(n){var i=yl.detect(n.versionRegexes,t);return{current:n.name,version:i}})},pnt=function(n,t){return cut(n,t).map(function(n){var i=yl.detect(n.versionRegexes,t);return{current:n.name,version:i}})},ni=function(n,t){return-1!==n.indexOf(t)},wnt=function(n){return n.replace(/^\s+|\s+$/g,"")},kw=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,hu=function(n){return function(t){return ni(t,n)}},bnt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return ni(n,"edge/")&&ni(n,"chrome")&&ni(n,"safari")&&ni(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,kw],search:function(n){return ni(n,"chrome")&&!ni(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return ni(n,"msie")||ni(n,"trident")}},{name:"Opera",versionRegexes:[kw,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:hu("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:hu("firefox")},{name:"Safari",versionRegexes:[kw,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(ni(n,"safari")||ni(n,"mobile/"))&&ni(n,"applewebkit")}}],knt=[{name:"Windows",search:hu("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return ni(n,"iphone")||ni(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:hu("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:hu("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:hu("linux"),versionRegexes:[]},{name:"Solaris",search:hu("sunos"),versionRegexes:[]},{name:"FreeBSD",search:hu("freebsd"),versionRegexes:[]}],lut={browsers:o(bnt),oses:o(knt)},dnt=function(n){var t,e,i,r,s,h,c,u,f,l,a,p=lut.browsers(),w=lut.oses(),v=ynt(p,n).fold(rut.unknown,rut.nu),y=pnt(w,n).fold(hut.unknown,hut.nu);return{browser:v,os:y,deviceType:(e=v,i=n,r=(t=y).isiOS()&&!0===/ipad/i.test(i),s=t.isiOS()&&!r,h=t.isAndroid()&&3===t.version.major,c=t.isAndroid()&&4===t.version.major,u=r||h||c&&!0===/mobile/i.test(i),f=t.isiOS()||t.isAndroid(),l=f&&!u,a=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(i),{isiPad:o(r),isiPhone:o(s),isTablet:o(u),isPhone:o(l),isTouch:o(f),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:o(a)})}},cu={detect:grt(function(){var n=navigator.userAgent;return dnt(n)})},ds=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:o(n)}},r={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return ds(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return ds(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return ds(i)},fromDom:ds,fromPoint:function(t,i,r){var u=t.dom();return n.from(u.elementFromPoint(i,r)).map(ds)}},we={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},aut=function(n){return n.dom().nodeName.toLowerCase()},dw=function(n){return n.dom().nodeType},gw=function(n){return function(t){return dw(t)===n}},gnt=gw(we.ELEMENT),nti=gw(we.TEXT),tti=gw(we.DOCUMENT),d={name:aut,type:dw,value:function(n){return n.dom().nodeValue},isElement:gnt,isText:nti,isDocument:tti,isComment:function(n){return dw(n)===we.COMMENT||"#comment"===aut(n)}},pl=Object.keys,wl=function(n,t){for(var r,u=pl(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r,n)},iti=function(n,t){var i={};return wl(n,function(r,u){var f=t(r,u,n);i[f.k]=f.v}),i},vut=function(n,t,i){if(!(ui(i)||sit(i)||wp(i)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,i+"")},yut=function(n,t,i){vut(n.dom(),t,i)},put=function(n,t){var i=n.dom().getAttribute(t);return null===i?undefined:i},nb=function(n,t){var i=n.dom();return!(!i||!i.hasAttribute)&&i.hasAttribute(t)},rt={clone:function(n){return tu(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},set:yut,setAll:function(n,t){var i=n.dom();wl(t,function(n,t){vut(i,t,n)})},get:put,has:nb,remove:function(n,t){n.dom().removeAttribute(t)},hasNone:function(n){var t=n.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(n,t,i){d.isElement(n)&&d.isElement(t)&&l(i,function(i){var f,u,r;u=t;nb(f=n,r=i)&&!nb(u,r)&&yut(u,r,put(f,r))})}},rti=grt(function(){return wut(r.fromDom(document))}),wut=function(n){var t=n.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return r.fromDom(t)},but={body:rti,getBody:wut,inBody:function(n){var t=d.isText(n)?n.dom().parentNode:n.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)}},kut=function(n){return n.style!==undefined},uti=function(n,t,i){if(!ui(i))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);kut(n)&&n.style.setProperty(t,i)},dut=function(n,t){return kut(n)?n.style.getPropertyValue(t):""},fti=function(t,i){var r=t.dom(),u=dut(r,i);return n.from(u).filter(function(n){return 0<n.length})},eti=function(n,t){var i=n.dom();wl(t,function(n,t){uti(i,t,n)})},gut=function(n,t){var i=n.dom(),r=window.getComputedStyle(i).getPropertyValue(t),u=""!==r||but.inBody(n)?r:dut(i,t);return null===u?undefined:u},oti=fti,sr=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(){for(var r,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(n.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+t.length+" arguments");return r={},l(n,function(n,i){r[n]=o(t[i])}),r}},nft=function(n,t){for(var i=[],u=function(n){return i.push(n),t(n)},r=t(n);(r=r.bind(u)).isSome(););return i},sti=function(){return ce.getOrDie("Node")},hti=function(n,t,i){return 0!=(n.compareDocumentPosition(t)&i)},cti=function(n,t){return hti(n,t,sti().DOCUMENT_POSITION_CONTAINED_BY)},tft=we.ELEMENT,lti=we.DOCUMENT,ift=function(n){return n.nodeType!==tft&&n.nodeType!==lti||0===n.childElementCount},lu={all:function(n,t){var i=t===undefined?document:t.dom();return ift(i)?[]:lt(i.querySelectorAll(n),r.fromDom)},is:function(n,t){var i=n.dom();if(i.nodeType!==tft)return!1;if(i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},one:function(t,i){var u=i===undefined?document:i.dom();return ift(u)?n.none():n.from(u.querySelector(t)).map(r.fromDom)}},rft=function(n,t){return n.dom()===t.dom()},ati=cu.detect().browser.isIE()?function(n,t){return cti(n.dom(),t.dom())}:function(n,t){var i=n.dom(),r=t.dom();return i!==r&&i.contains(r)},b={eq:rft,isEqualNode:function(n,t){return n.dom().isEqualNode(t.dom())},member:function(n,t){return cit(t,f(rft,n))},contains:ati,is:lu.is},tb=function(t){var i=t.dom();return n.from(i.parentNode).map(r.fromDom)},uft=function(t){var i=t.dom();return n.from(i.previousSibling).map(r.fromDom)},fft=function(t){var i=t.dom();return n.from(i.nextSibling).map(r.fromDom)},bl=function(n){var t=n.dom();return lt(t.childNodes,r.fromDom)},ib=function(t,i){var u=t.dom().childNodes;return n.from(u[i]).map(r.fromDom)},eft=sr("element","offset"),v={owner:function(n){return r.fromDom(n.dom().ownerDocument)},defaultView:function(n){var t=n.dom().ownerDocument.defaultView;return r.fromDom(t)},documentElement:function(n){return r.fromDom(n.dom().ownerDocument.documentElement)},parent:tb,findIndex:function(n){return tb(n).bind(function(t){var i=bl(t);return lf(i,function(t){return b.eq(n,t)})})},parents:function(n,t){for(var u,f,s=nu(t)?t:o(!1),i=n.dom(),e=[];null!==i.parentNode&&i.parentNode!==undefined;){if(u=i.parentNode,f=r.fromDom(u),e.push(f),!0===s(f))break;i=u}return e},siblings:function(n){return tb(n).map(bl).map(function(t){return ot(t,function(t){return!b.eq(n,t)})}).getOr([])},prevSibling:uft,offsetParent:function(t){var i=t.dom();return n.from(i.offsetParent).map(r.fromDom)},prevSiblings:function(n){return t=nft(n,uft),(i=kp.call(t,0)).reverse(),i;var t,i},nextSibling:fft,nextSiblings:function(n){return nft(n,fft)},children:bl,child:ib,firstChild:function(n){return ib(n,0)},lastChild:function(n){return ib(n,n.dom().childNodes.length-1)},childNodesCount:function(n){return n.dom().childNodes.length},hasChildNodes:function(n){return n.dom().hasChildNodes()},leaf:function(n,t){var i=bl(n);return 0<i.length&&t<i.length?eft(i[t],0):eft(n,t)}},vti=cu.detect().browser,oft=function(n){return fi(n,d.isElement)},yti={getPos:function(n,t,i){var u,h,s,e=0,f=0,o=n.ownerDocument;if(i=i||n,t){if(i===n&&t.getBoundingClientRect&&"static"===gut(r.fromDom(n),"position"))return{x:e=(h=t.getBoundingClientRect()).left+(o.documentElement.scrollLeft||n.scrollLeft)-o.documentElement.clientLeft,y:f=h.top+(o.documentElement.scrollTop||n.scrollTop)-o.documentElement.clientTop};for(u=t;u&&u!==i&&u.nodeType;)e+=u.offsetLeft||0,f+=u.offsetTop||0,u=u.offsetParent;for(u=t.parentNode;u&&u!==i&&u.nodeType;)e-=u.scrollLeft||0,f-=u.scrollTop||0,u=u.parentNode;f+=(s=r.fromDom(t),vti.isFirefox()&&"table"===d.name(s)?oft(v.children(s)).filter(function(n){return"caption"===d.name(n)}).bind(function(n){return oft(v.nextSiblings(n)).map(function(t){var i=t.dom().offsetTop,r=n.dom().offsetTop,u=n.dom().offsetHeight;return i<=r?-u:0})}).getOr(0):0)}return{x:e,y:f}}},rb=function(t){var i=n.none(),r=[],u=function(n){f()?e(n):r.push(n)},f=function(){return i.isSome()},o=function(n){l(n,e)},e=function(n){i.each(function(t){setTimeout(function(){n(t)},0)})};return t(function(t){i=n.some(t);o(r);r=[]}),{get:u,map:function(n){return rb(function(t){u(function(i){t(n(i))})})},isReady:f}},pti={nu:rb,pure:function(n){return rb(function(t){t(n)})}},be=function(n){var t=function(t){var i;n((i=t,function(){for(var r,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r=this;setTimeout(function(){i.apply(r,t)},0)}))},i=function(){return pti.nu(t)};return{map:function(n){return be(function(i){t(function(t){var r=n(t);i(r)})})},bind:function(n){return be(function(i){t(function(t){n(t).get(i)})})},anonBind:function(n){return be(function(i){t(function(){n.get(i)})})},toLazy:i,toCached:function(){var n=null;return be(function(t){null===n&&(n=i());n.get(t)})},get:t}},sft={nu:be,pure:function(n){return be(function(t){t(n)})}},wti=function(n,t){return t(function(t){var i=[],r=0;0===n.length?t([]):l(n,function(u,f){var e;u.get((e=f,function(u){i[e]=u;++r>=n.length&&t(i)}))})})},bti=function(n){return wti(n,sft.nu)},kl=function(t){return{is:function(n){return t===n},isValue:kc,isError:hs,getOr:o(t),getOrThunk:o(t),getOrDie:o(t),or:function(){return kl(t)},orThunk:function(){return kl(t)},fold:function(n,i){return i(t)},map:function(n){return kl(n(t))},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOption:function(){return n.some(t)}}},ub=function(t){return{is:hs,isValue:hs,isError:kc,getOr:bi,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(t),function(){throw new Error(n);}();var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n){return n(t)},map:function(){return ub(t)},each:ss,bind:function(){return ub(t)},exists:hs,forall:kc,toOption:n.none}},hft={value:kl,error:ub};var dl,au,cft,yr=function(n){var t;return function(i){return(t=t||function(n,t){for(var r,u={},i=0,f=n.length;i<f;i++)r=n[i],u[String(r)]=t(r,i);return u}(n,o(!0))).hasOwnProperty(d.name(i))}},kti=yr(["h1","h2","h3","h4","h5","h6"]),gs=yr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),lft=function(n){return d.isElement(n)&&!gs(n)},fb=function(n){return d.isElement(n)&&"br"===d.name(n)},aft=yr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),vft=yr(["ul","ol","dl"]),gl=yr(["li","dd","dt"]),dti=yr(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),gti=yr(["thead","tbody","tfoot"]),na=yr(["td","th"]),ta=yr(["pre","script","textarea","style"]),ia=function(n){return function(t){return!!t&&t.nodeType===n}},pr=ia(1),yft=function(n){var t=n.toLowerCase().split(" ");return function(n){var i,r;if(n&&n.nodeType)for(r=n.nodeName.toLowerCase(),i=0;i<t.length;i++)if(r===t[i])return!0;return!1}},pft=function(n){return function(t){return pr(t)&&(t.contentEditable===n||t.getAttribute("data-mce-contenteditable")===n)?!0:!1}},nii=ia(3),tii=ia(8),iii=ia(9),rii=yft("br"),uii=pft("true"),fii=pft("false"),i={isText:nii,isElement:pr,isComment:tii,isDocument:iii,isBr:rii,isContentEditableTrue:uii,isContentEditableFalse:fii,matchNodeNames:yft,hasPropValue:function(n,t){return function(i){return pr(i)&&i[n]===t}},hasAttribute:function(n){return function(t){return pr(t)&&t.hasAttribute(n)}},hasAttributeValue:function(n,t){return function(i){return pr(i)&&i.getAttribute(n)===t}},matchStyleValues:function(n,t){var i=t.toLowerCase().split(" ");return function(t){var r,u;if(pr(t))for(r=0;r<i.length;r++)if(u=t.ownerDocument.defaultView.getComputedStyle(t,null),(u?u.getPropertyValue(n):null)===i[r])return!0;return!1}},isBogus:function(n){return pr(n)&&n.hasAttribute("data-mce-bogus")},isBogusAll:function(n){return pr(n)&&"all"===n.getAttribute("data-mce-bogus")},isTable:function(n){return pr(n)&&"TABLE"===n.tagName}},wft=function(n){return n&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type")},bft=function(n,u){var e,f=u.childNodes,s,o,h,c;if(!i.isElement(u)||!wft(u)){for(e=f.length-1;0<=e;e--)bft(n,f[e]);if(!1===i.isDocument(u)){if(i.isText(u)&&0<u.nodeValue.length){if(s=t.trim(u.nodeValue).length,n.isBlock(u.parentNode)||0<s)return;if(0===s&&(h=(o=u).previousSibling&&"SPAN"===o.previousSibling.nodeName,c=o.nextSibling&&"SPAN"===o.nextSibling.nodeName,h&&c))return}else if(i.isElement(u)&&(1===(f=u.childNodes).length&&wft(f[0])&&u.parentNode.insertBefore(f[0],u),f.length||dti(r.fromDom(u))))return;n.remove(u)}return u}},kft={trimNode:bft},eii=t.makeMap,ra=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ua=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oii=/[<>&\"\']/g,sii=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,hii={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};au={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};cft={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};eb=function(n,t){var i,r,u,f={};if(n){for(n=n.split(","),t=t||10,i=0;i<n.length;i+=2)r=String.fromCharCode(parseInt(n[i],t)),au[r]||(u="&"+n[i+1]+";",f[r]=u,f[u]=r);return f}};dl=eb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var dft=function(n,t){return n.replace(t?ra:ua,function(n){return au[n]||n})},gft=function(n,t){return n.replace(t?ra:ua,function(n){return 1<n.length?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":au[n]||"&#"+n.charCodeAt(0)+";"})},ob=function(n,t,i){return i=i||dl,n.replace(t?ra:ua,function(n){return au[n]||i[n]||n})},wf={encodeRaw:dft,encodeAllRaw:function(n){return(""+n).replace(oii,function(n){return au[n]||n})},encodeNumeric:gft,encodeNamed:ob,getEncodeFunc:function(n,t){var r=eb(t)||dl,i=eii(n.replace(/\+/g,","));return i.named&&i.numeric?function(n,t){return n.replace(t?ra:ua,function(n){return au[n]!==undefined?au[n]:r[n]!==undefined?r[n]:1<n.length?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":"&#"+n.charCodeAt(0)+";"})}:i.named?t?function(n,t){return ob(n,t,r)}:ob:i.numeric?gft:dft},decode:function(n){return n.replace(sii,function(n,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):hii[t]||String.fromCharCode(t):cft[n]||dl[n]||(i=n,(u=r.fromTag("div").dom()).innerHTML=i,u.textContent||u.innerText||i);var i,u})}},vu={},cii={},ke=t.makeMap,at=t.each,sb=t.extend,net=t.explode,lii=t.inArray,ut=function(n,i){return(n=t.trim(n))?n.split(i||" "):[]},aii=function(n){var o,e,u,r,s,h,f={},t=function(n,t,i){var r,u,e,s=function(n,t){for(var u={},i=0,r=n.length;i<r;i++)u[n[i]]=t||{};return u};for(t=t||"","string"==typeof(i=i||[])&&(i=ut(i)),r=(n=ut(n)).length;r--;)e={attributes:s(u=ut([o,t].join(" "))),attributesOrder:u,children:s(i,cii)},f[n[r]]=e},i=function(n,t){var r,u,i,e;for(r=(n=ut(n)).length,t=ut(t);r--;)for(u=f[n[r]],i=0,e=t.length;i<e;i++)u.attributes[t[i]]={},u.attributesOrder.push(t[i])};return vu[n]?vu[n]:(o="id accesskey class dir lang style tabindex title role",e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",u="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==n&&(o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",e+=" article aside details dialog figure header footer hgroup section nav",u+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==n&&(o+=" xml:lang",u=[u,h="acronym applet basefont big font strike tt"].join(" "),at(ut(h),function(n){t(n,"",u)}),e=[e,s="center dir isindex noframes"].join(" "),r=[e,u].join(" "),at(ut(s),function(n){t(n,"",r)})),r=r||[e,u].join(" "),t("html","manifest","head body"),t("head","","base command link meta noscript script style title"),t("title hr noscript br"),t("base","href target"),t("link","href rel media hreflang type sizes hreflang"),t("meta","name http-equiv content charset"),t("style","media type scoped"),t("script","src async defer type charset"),t("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),t("address dt dd div caption","",r),t("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",u),t("blockquote","cite",r),t("ol","reversed start type","li"),t("ul","","li"),t("li","value",r),t("dl","","dt dd"),t("a","href target rel media hreflang type",u),t("q","cite",u),t("ins del","cite datetime",r),t("img","src sizes srcset alt usemap ismap width height"),t("iframe","src name width height",r),t("embed","src type width height"),t("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),t("param","name value"),t("map","name",[r,"area"].join(" ")),t("area","alt coords shape href target rel media hreflang type"),t("table","border","caption colgroup thead tfoot tbody tr"+("html4"===n?" col":"")),t("colgroup","span","col"),t("col","span"),t("tbody thead tfoot","","tr"),t("tr","","td th"),t("td","colspan rowspan headers",r),t("th","colspan rowspan headers scope abbr",r),t("form","accept-charset action autocomplete enctype method name novalidate target",r),t("fieldset","disabled form name",[r,"legend"].join(" ")),t("label","form for",u),t("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),t("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===n?r:u),t("select","disabled form multiple name required size","option optgroup"),t("optgroup","disabled label","option"),t("option","disabled label selected value"),t("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),t("menu","type label",[r,"li"].join(" ")),t("noscript","",r),"html4"!==n&&(t("wbr"),t("ruby","",[u,"rt rp"].join(" ")),t("figcaption","",r),t("mark rt rp summary bdi","",u),t("canvas","width height",r),t("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),t("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),t("picture","","img source"),t("source","src srcset type media sizes"),t("track","kind src srclang label default"),t("datalist","",[u,"option"].join(" ")),t("article section nav aside header footer","",r),t("hgroup","","h1 h2 h3 h4 h5 h6"),t("figure","",[r,"figcaption"].join(" ")),t("time","datetime",u),t("dialog","open",r),t("command","type label icon disabled checked radiogroup command"),t("output","for form name",u),t("progress","value max",u),t("meter","value min max low high optimum",u),t("details","open",[r,"summary"].join(" ")),t("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==n&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==n&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),at(ut("a form meter progress dfn"),function(n){f[n]&&delete f[n].children[n]}),delete f.caption.children.table,delete f.script,vu[n]=f)},hb=function(n,t){var i;return n&&(i={},"string"==typeof n&&(n={"*":n}),at(n,function(n,r){i[r]=i[r.toUpperCase()]="map"===t?ke(n,/[, ]/):net(n,/[, ]/)})),i};cb=function(n,t,i,r){var u=function(n){return 1<(n=parseInt(n,10).toString(16)).length?n:"0"+n};return"#"+u(t)+u(i)+u(r)};var ab,de=t.each,vii=t.grep,tet=s.ie,yii=/^([a-z0-9],?)+$/i,iet=/^[ \t\r\n]*$/,pii=function(n,t,i){var r={},u=t.keep_values,f={set:function(n,r,u){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||i(),r,u,n[0]));n.attr("data-mce-"+u,r).attr(u,r)},get:function(n,t){return n.attr("data-mce-"+t)||n.attr(t)}};return r={style:{set:function(n,t){null===t||"object"!=typeof t?(u&&n.attr("data-mce-style",t),n.attr("style",t)):n.css(t)},get:function(t){var i=t.attr("data-mce-style")||t.attr("style");return n.serialize(n.parse(i),t[0].nodeName)}}},u&&(r.href=r.src=f),r},ret=function(n,t){var r=t.attr("style"),i=n.serialize(n.parse(r),t[0].nodeName);i||(i=null);t.attr("data-mce-style",i)},ge=function(n,t){var r,i,u=0;if(n)for(r=n.nodeType,n=n.previousSibling;n;n=n.previousSibling)i=n.nodeType,(!t||3!==i||i!==r&&n.nodeValue.length)&&(u++,r=i);return u};(ab=no||(no={})).DOM=ab(document);ab.nodeIndex=ge;var g=no,wii=g.DOM,vb=t.each,bii=t.grep,fa=function(n){return"function"==typeof n},wr=function(){var n={},f=[],i={},u=[],r=0;this.isDone=function(t){return 2===n[t]};this.markDone=function(t){n[t]=2};this.add=this.load=function(t,r,u,e){n[t]===undefined&&(f.push(t),n[t]=0);r&&(i[t]||(i[t]=[]),i[t].push({success:r,failure:e,scope:u||this}))};this.remove=function(t){delete n[t];delete i[t]};this.loadQueue=function(n,t,i){this.loadScripts(f,n,t,i)};this.loadScripts=function(f,e,o,s){var c,l=[],h=function(n,t){vb(i[t],function(t){fa(t[n])&&t[n].call(t.scope)});i[t]=undefined};u.push({success:e,failure:s,scope:o||this});(c=function(){var e=bii(f),i;(f.length=0,vb(e,function(i){var f,s,e,u,o,a;2!==n[i]?3!==n[i]?1!==n[i]&&(n[i]=1,r++,f=i,s=function(){n[i]=2;r--;h("success",i);c()},e=function(){n[i]=3;r--;l.push(i);h("failure",i);c()},o=(a=wii).uniqueId(),(u=document.createElement("script")).id=o,u.type="text/javascript",u.src=t._addCacheSuffix(f),u.onload=function(){a.remove(o);u&&(u.onreadystatechange=u.onload=u=null);s()},u.onerror=function(){fa(e)?e():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+f)},(document.getElementsByTagName("head")[0]||document.body).appendChild(u)):h("failure",i):h("success",i)}),r)||(i=u.slice(0),u.length=0,vb(i,function(n){0===l.length?fa(n.success)&&n.success.call(n.scope):fa(n.failure)&&n.failure.call(n.scope,l)}))})()}};wr.ScriptLoader=new wr;oa=t.each;(ea=bt||(bt={})).PluginManager=ea();ea.ThemeManager=ea();var sa=function(n,t){v.parent(n).each(function(i){i.dom().insertBefore(t.dom(),n.dom())})},nh=function(n,t){n.dom().appendChild(t.dom())},tt={before:sa,after:function(n,t){v.nextSibling(n).fold(function(){v.parent(n).each(function(n){nh(n,t)})},function(n){sa(n,t)})},prepend:function(n,t){v.firstChild(n).fold(function(){nh(n,t)},function(i){n.dom().insertBefore(t.dom(),i.dom())})},append:nh,appendAt:function(n,t,i){v.child(n,i).fold(function(){nh(n,t)},function(n){sa(n,t)})},wrap:function(n,t){sa(n,t);nh(t,n)}},kii=function(n,t){l(t,function(t){tt.before(n,t)})},yb=function(n,t){l(t,function(t){tt.append(n,t)})},pb=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},ft={empty:function(n){n.dom().textContent="";l(v.children(n),function(n){pb(n)})},remove:pb,unwrap:function(n){var t=v.children(n);0<t.length&&kii(n,t);pb(n)}},uet=function(n,t){var i=null;return{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];null===i&&(i=setTimeout(function(){n.apply(null,u);i=null},t))}}},pu=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return pu(i())}}},wb=function(n,t){var i=rt.get(n,t);return i===undefined||""===i?[]:i.split(" ")},dii=wb,gii=function(n,t,i){var r=wb(n,t).concat([i]);return rt.set(n,t,r.join(" ")),!0},nri=function(n,t,i){var r=ot(wb(n,t),function(n){return n!==i});return 0<r.length?rt.set(n,t,r.join(" ")):rt.remove(n,t),!1},fet=function(n){return dii(n,"class")},eet=function(n,t){return gii(n,"class",t)},oet=function(n,t){return nri(n,"class",t)},tri=fet,set=eet,het=oet,iri=function(n,t){return as(fet(n),t)?oet(n,t):eet(n,t)},to=function(n){return n.dom().classList!==undefined},cet=function(n,t){return to(n)&&n.dom().classList.contains(t)},io={add:function(n,t){to(n)?n.dom().classList.add(t):set(n,t)},remove:function(n,t){var i;to(n)?n.dom().classList.remove(t):het(n,t);0===(to(i=n)?i.dom().classList:tri(i)).length&&rt.remove(i,"class")},toggle:function(n,t){return to(n)?n.dom().classList.toggle(t):iri(n,t)},toggler:function(n,t){var r,u,f,i,e,o,s=to(n),h=n.dom().classList;return r=function(){s?h.remove(t):het(n,t)},u=function(){s?h.add(t):set(n,t)},f=cet(n,t),i=f||!1,{on:e=function(){u();i=!0},off:o=function(){r();i=!1},toggle:function(){(i?o:e)()},isOn:function(){return i}}},has:cet},gi=function(n,t){return lu.all(t,n)};var kt,vet=function(t,i,u){for(var e,f=t.dom(),s=nu(u)?u:o(!1);f.parentNode;){if(f=f.parentNode,e=r.fromDom(f),i(e))return n.some(e);if(s(e))break}return n.none()},yet=function(n,t){return fi(n.dom().childNodes,gr(t,r.fromDom)).map(r.fromDom)},pet=function(t,i){var u=function(t){for(var e,f=0;f<t.childNodes.length;f++){if(i(r.fromDom(t.childNodes[f])))return n.some(r.fromDom(t.childNodes[f]));if(e=u(t.childNodes[f]),e.isSome())return e}return n.none()};return u(t.dom())},th={first:function(n){return pet(but.body(),n)},ancestor:vet,closest:function(n,t,i){return aet(function(n){return t(n)},vet,n,t,i)},sibling:function(t,i){var u=t.dom();return u.parentNode?yet(r.fromDom(u.parentNode),function(n){return!b.eq(t,n)&&i(n)}):n.none()},child:yet,descendant:pet},wet=function(n,t,i){return th.ancestor(n,function(n){return lu.is(n,t)},i)},bb=wet,ha=function(n,t){return lu.one(t,n)},bet=function(n,t,i){return aet(lu.is,wet,n,t,i)},kb=o("mce-annotation"),ih=o("data-mce-annotation"),ca=o("data-mce-annotation-uid"),ket=function(t,i){var u=t.selection.getRng(),f=r.fromDom(u.startContainer),o=r.fromDom(t.getBody()),s=i.fold(function(){return"."+kb()},function(n){return"["+ih()+'="'+n+'"]'}),h=v.child(f,u.startOffset).getOr(f),c=bet(h,s,function(n){return b.eq(n,o)}),e=function(t,i){return rt.has(t,i)?n.some(rt.get(t,i)):n.none()};return c.bind(function(n){return e(n,""+ca()).bind(function(i){return e(n,""+ih()).map(function(n){var r=rri(t,i);return{uid:i,name:n,elements:r}})})})},rri=function(n,t){var i=r.fromDom(n.getBody());return gi(i,"["+ca()+'="'+t+'"]')},uri=function(t){var f,e,i,r=pu({}),o=function(n,t){u(n,function(n){return t(n),n})},u=function(t,i){var u=r.get(),f=i(u.hasOwnProperty(t)?u[t]:{listeners:[],previous:pu(n.none())});u[t]=f;r.set(u)},s=(f=function(){var i,e,f,s=r.get(),h=(i=pl(s),(f=kp.call(i,0)).sort(e),f);l(h,function(i){u(i,function(r){var u=r.previous.get();return ket(t,n.some(i)).fold(function(){var t;u.isSome()&&(o(t=i,function(n){l(n.listeners,function(n){return n(!1,t)})}),r.previous.set(n.none()))},function(t){var f,e,s,i=t.uid,h=t.name,c=t.elements;u.is(i)||(e=i,s=c,o(f=h,function(n){l(n.listeners,function(n){return n(!0,f,{uid:e,nodes:lt(s,function(n){return n.dom()})})})}),r.previous.set(n.some(i)))}),{previous:r.previous,listeners:r.listeners}})})},e=30,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==i&&clearTimeout(i);i=setTimeout(function(){f.apply(null,t);i=null},e)}});return t.on("remove",function(){s.cancel()}),t.on("nodeChange",function(){s.throttle()}),{addListener:function(n,t){u(n,function(n){return{previous:n.previous,listeners:n.listeners.concat([t])}})}}},fri=function(t,i){t.on("init",function(){t.serializer.addNodeFilter("span",function(t){l(t,function(t){var r;(r=t,n.from(r.attributes.map[ih()]).bind(i.lookup)).each(function(n){!1===n.persistent&&t.unwrap()})})})})},eri=0,ori=function(n,t){l(t,function(t){io.add(n,t)})},det=function(n,t){return r.fromDom(n.dom().cloneNode(t))},sri=function(n){return det(n,!0)},ro=function(n){return det(n,!1)},get=sri,db=[].slice,not=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=db.call(arguments),i.length-1>=n.length?n.apply(this,i.slice(1)):function(){var n=i.concat([].slice.call(arguments));return not.apply(this,n)}},ct={constant:function(n){return function(){return n}},negate:function(n){return function(t){return!n(t)}},and:function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t=db.call(arguments),function(n){for(var i=0;i<t.length;i++)if(!t[i](n))return!1;return!0}},or:function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t=db.call(arguments),function(n){for(var i=0;i<t.length;i++)if(t[i](n))return!0;return!1}},curry:not,compose:function(n,t){return function(i){return n(t(i))}},noop:function(){}},gb="﻿",hri=function(n){return n===gb},pt=gb,wu=function(n){return n.replace(new RegExp(gb,"g"),"")},cri=i.isElement,uo=i.isText,fo=function(n){return uo(n)&&(n=n.parentNode),cri(n)&&n.hasAttribute("data-mce-caret")},la=function(n){return uo(n)&&hri(n.data)},si=function(n){return fo(n)||la(n)},tot=function(n){return n.firstChild!==n.lastChild||!i.isBr(n.firstChild)},nk=function(n){var t=n.container();return n&&i.isText(t)&&t.data.charAt(n.offset())===pt},tk=function(n){var t=n.container();return n&&i.isText(t)&&t.data.charAt(n.offset()-1)===pt},lri=function(n,t,i){var r,u,f;return(r=t.ownerDocument.createElement(n)).setAttribute("data-mce-caret",i?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((f=document.createElement("br")).setAttribute("data-mce-bogus","1"),f)),u=t.parentNode,i?u.insertBefore(r,t):t.nextSibling?u.insertBefore(r,t.nextSibling):u.appendChild(r),r},aa=function(n){return uo(n)&&n.data[0]===pt},va=function(n){return uo(n)&&n.data[n.data.length-1]===pt},ik=function(n){return n&&n.hasAttribute("data-mce-caret")?(r=n.getElementsByTagName("br"),t=r[r.length-1],i.isBogus(t)&&t.parentNode.removeChild(t),n.removeAttribute("data-mce-caret"),n.removeAttribute("data-mce-bogus"),n.removeAttribute("style"),n.removeAttribute("_moz_abspos"),n):null;var r,t},iot=i.isContentEditableTrue,ari=i.isContentEditableFalse,vri=i.isBr,yri=i.isText,pri=i.matchNodeNames("script style textarea"),rot=i.matchNodeNames("img input textarea hr iframe video audio object"),wri=i.matchNodeNames("table"),bri=si,hr=function(n){return!bri(n)&&(yri(n)?!pri(n.parentNode):rot(n)||vri(n)||wri(n)||rk(n))},rk=function(n){return!1===(t=n,i.isElement(t)&&"true"===t.getAttribute("unselectable"))&&ari(n);var t},uk=function(n,t){return hr(n)&&function(n,t){for(n=n.parentNode;n&&n!==t;n=n.parentNode){if(rk(n))return!1;if(iot(n))return!0}return!0}(n,t)},eo=Math.round,bf=function(n){return n?{left:eo(n.left),top:eo(n.top),bottom:eo(n.bottom),right:eo(n.right),width:eo(n.width),height:eo(n.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},uot=function(n,t){return n=bf(n),t||(n.left=n.left+n.width),n.right=n.left,n.width=0,n},fot=function(n,t,i){return 0<=n&&n<=Math.min(t.height,i.height)/2},oo=function(n,t){return n.bottom-n.height/2<t.top||!(n.top>t.bottom)&&fot(t.top-n.bottom,n,t)},so=function(n,t){return n.top>t.bottom||!(n.bottom<t.top)&&fot(t.bottom-n.top,n,t)},fk=function(n){var t=n.startContainer,i=n.startOffset;return t.hasChildNodes()&&n.endOffset===i+1?t.childNodes[i]:null},ho=function(n,t){return 1===n.nodeType&&n.hasChildNodes()&&(t>=n.childNodes.length&&(t=n.childNodes.length-1),n=n.childNodes[t]),n},kri=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),eot=function(n){return"string"==typeof n&&768<=n.charCodeAt(0)&&kri.test(n)},ti=function(t,i){for(var f,u=[],r=0;r<t.length;r++){if(f=t[r],!f.isSome())return n.none();u.push(f.getOrDie())}return n.some(i.apply(null,u))},oot=i.isElement,dri=hr,sot=i.matchStyleValues("display","block table"),gri=i.matchStyleValues("float","left right"),rh=ct.and(oot,dri,ct.negate(gri)),nui=ct.negate(i.matchStyleValues("white-space","pre pre-line pre-wrap")),uh=i.isText,ek=i.isBr,hot=g.nodeIndex,ya=ho,ok=function(n){return"createRange"in n?n.createRange():g.DOM.createRng()},sk=function(n){return n&&/[\r\n\t ]/.test(n)},cot=function(n){return!!n.setStart&&!!n.setEnd},hk=function(n){var t,r=n.startContainer,u=n.startOffset;return!!(sk(n.toString())&&nui(r.parentNode)&&i.isText(r)&&(t=r.data,sk(t[u-1])||sk(t[u+1])))},lot=function(n){return 0===n.left&&0===n.right&&0===n.top&&0===n.bottom},bu=function(n){var r,o,f,s,e,u,t,h;return r=0<(o=n.getClientRects()).length?bf(o[0]):bf(n.getBoundingClientRect()),!cot(n)&&ek(n)&&lot(r)?(e=(f=n).ownerDocument,u=ok(e),t=e.createTextNode(" "),(h=f.parentNode).insertBefore(t,f),u.setStart(t,0),u.setEnd(t,1),s=bf(u.getBoundingClientRect()),h.removeChild(t),s):lot(r)&&cot(n)?function(n){var u=n.startContainer,t=n.endContainer,f=n.startOffset,e=n.endOffset,r;return u===t&&i.isText(t)&&0===f&&1===e?(r=n.cloneRange(),r.setEndAfter(t),bu(r)):null}(n):r},kf=function(n,t){var i=uot(n,t);return i.width=1,i.right=i.left+1,i},tui=function(n){var u,t,i=[],r=function(n){var t,r;0!==n.height&&(0<i.length&&(t=n,r=i[i.length-1],t.left===r.left&&t.top===r.top&&t.bottom===r.bottom&&t.right===r.right)||i.push(n))},f=function(n,t){var u=ok(n.ownerDocument);if(t<n.data.length){if(eot(n.data[t]))return i;if(eot(n.data[t-1])&&(u.setStart(n,t),u.setEnd(n,t+1),!hk(u)))return r(kf(bu(u),!1)),i}0<t&&(u.setStart(n,t-1),u.setEnd(n,t),hk(u)||r(kf(bu(u),!1)));t<n.data.length&&(u.setStart(n,t),u.setEnd(n,t+1),hk(u)||r(kf(bu(u),!0)))};if(uh(n.container()))return f(n.container(),n.offset()),i;if(oot(n.container()))if(n.isAtEnd())t=ya(n.container(),n.offset()),uh(t)&&f(t,t.data.length),rh(t)&&!ek(t)&&r(kf(bu(t),!1));else{if(t=ya(n.container(),n.offset()),uh(t)&&f(t,0),rh(t)&&n.isAtEnd())return r(kf(bu(t),!1)),i;u=ya(n.container(),n.offset()-1);rh(u)&&!ek(u)&&(sot(u)||sot(t)||!rh(t))&&r(kf(bu(u),!1));rh(t)&&r(kf(bu(t),!0))}return i};(kt=et||(et={})).fromRangeStart=function(n){return kt(n.startContainer,n.startOffset)};kt.fromRangeEnd=function(n){return kt(n.endContainer,n.endOffset)};kt.after=function(n){return kt(n.parentNode,hot(n)+1)};kt.before=function(n){return kt(n.parentNode,hot(n))};kt.isAbove=function(n,t){return ti([ur(t.getClientRects()),he(n.getClientRects())],oo).getOr(!1)};kt.isBelow=function(n,t){return ti([he(t.getClientRects()),ur(n.getClientRects())],so).getOr(!1)};kt.isAtStart=function(n){return!!n&&n.isAtStart()};kt.isAtEnd=function(n){return!!n&&n.isAtEnd()};kt.isTextPosition=function(n){return!!n&&i.isText(n.container())};kt.isElementPosition=function(n){return!1===kt.isTextPosition(n)};var hi,pa,u=et,nr=i.isText,aot=i.isBogus,vot=g.nodeIndex,yot=function(n){var t=n.parentNode;return aot(t)?yot(t):t},ck=function(n){return n?h.reduce(n.childNodes,function(n,t){return aot(t)&&"BR"!==t.nodeName?n=n.concat(ck(t)):n.push(t),n},[]):[]},pot=function(n){return function(t){return n===t}},wot=function(n){var r,t,u,f;return(nr(n)?"text()":n.nodeName.toLowerCase())+"["+(t=ck(yot(r=n)),u=h.findIndex(t,pot(r),r),t=t.slice(0,u+1),f=h.reduce(t,function(n,i,r){return nr(i)&&nr(t[r-1])&&n++,n},0),t=h.filter(t,i.matchNodeNames(r.nodeName)),(u=h.findIndex(t,pot(r),r))-f)+"]"},bot=function(n,t){var r,u,f,o,e,s=[];return r=t.container(),u=t.offset(),nr(r)?f=function(n,t){for(;(n=n.previousSibling)&&nr(n);)t+=n.data.length;return t}(r,u):(u>=(o=r.childNodes).length?(f="after",u=o.length-1):f="before",r=o[u]),s.push(wot(r)),e=function(n,t,i){var r=[];for(t=t.parentNode;!(t===n||i&&i(t));t=t.parentNode)r.push(t);return r}(n,r),e=h.filter(e,ct.negate(i.isBogus)),(s=s.concat(h.map(e,function(n){return wot(n)}))).reverse().join("/")+","+f},kot=function(n,t){var e,r,f;return t?(t=(e=t.split(","))[0].split("/"),f=1<e.length?e[1]:"before",(r=h.reduce(t,function(n,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),u=n,f=t[1],e=parseInt(t[2],10),r=ck(u),r=h.filter(r,function(n,t){return!nr(n)||!nr(r[t-1])}),(r=h.filter(r,i.matchNodeNames(f)))[e]):null;var u,f,e,r},n))?nr(r)?function(n,t){for(var r,i=n,f=0;nr(i);){if(r=i.data.length,f<=t&&t<=f+r){n=i;t-=f;break}if(!nr(i.nextSibling)){n=i;t=r;break}f+=r;i=i.nextSibling}return nr(n)&&t>n.data.length&&(t=n.data.length),u(n,t)}(r,parseInt(f,10)):(f="after"===f?vot(r)+1:vot(r),u(r.parentNode,f)):null):null},wa=i.isContentEditableFalse,dot=function(n,t,r,u,f){var s,e=u[f?"startContainer":"endContainer"],o=u[f?"startOffset":"endOffset"],h=[],c=0,l=n.getRoot();for(i.isText(e)?h.push(r?function(n,t,r){for(var f=n(t.data.slice(0,r)).length,u=t.previousSibling;u&&i.isText(u);u=u.previousSibling)f+=n(u.data).length;return f}(t,e,o):o):(o>=(s=e.childNodes).length&&s.length&&(c=1,o=Math.max(0,s.length-1)),h.push(n.nodeIndex(s[o],r)+c));e&&e!==l;e=e.parentNode)h.push(n.nodeIndex(e,r));return h},lk=function(n){i.isText(n)&&0===n.data.length&&n.parentNode.removeChild(n)},ak=function(n,i,r){var u=0;return t.each(n.select(i),function(n){if("all"!==n.getAttribute("data-mce-bogus"))return n!==r&&void u++}),u},got=function(n,t){var r,u,f,e=t?"start":"end";r=n[e+"Container"];u=n[e+"Offset"];i.isElement(r)&&"TR"===r.nodeName&&(r=(f=r.childNodes)[Math.min(t?u:u-1,f.length-1)])&&(u=t?0:r.childNodes.length,n["set"+(t?"Start":"End")](r,u))},nst=function(n){return got(n,!0),got(n,!1),n},tst=function(n,t){var r;return i.isElement(n)&&(n=ho(n,t),wa(n))?n:si(n)&&((i.isText(n)&&fo(n)&&(n=n.parentNode),r=n.previousSibling,wa(r))||(r=n.nextSibling,wa(r)))?r:void 0},ist=function(n,t,i){var u=i.getNode(),r=u?u.nodeName:null,a=i.getRng(),f,o,v,s,h,c,l,e;return wa(u)||"IMG"===r?{name:r,index:ak(i.dom,r,u)}:(e=tst((f=a).startContainer,f.startOffset)||tst(f.endContainer,f.endOffset),e?{name:r=e.tagName,index:ak(i.dom,r,e)}:(o=n,s=t,h=a,c=(v=i).dom,(l={}).start=dot(c,o,s,h,!0),v.isCollapsed()||(l.end=dot(c,o,s,h,!1)),l))},rst=function(n,t,i){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return i?n.create("span",r,"&#xFEFF;"):n.create("span",r)},ust=function(n,t){var i=n.dom,r=n.getRng(),u=i.uniqueId(),c=n.isCollapsed(),h=n.getNode(),e=h.nodeName,o,s,f;return"IMG"===e?{name:e,index:ak(i,e,h)}:(o=nst(r.cloneRange()),c||(o.collapse(!1),s=rst(i,u+"_end",t),o.insertNode(s),lk(s.nextSibling)),(r=nst(r)).collapse(!0),f=rst(i,u+"_start",t),r.insertNode(f),lk(f.previousSibling),lk(f.nextSibling),n.moveToBookmark({id:u,keep:1}),{id:u})},co={getBookmark:function(n,t,i){return 2===t?ist(wu,i,n):3===t?(f=(r=n).getRng(),{start:bot(r.dom.getRoot(),u.fromRangeStart(f)),end:bot(r.dom.getRoot(),u.fromRangeEnd(f))}):t?{rng:n.getRng()}:ust(n,!1);var r,f},getUndoBookmark:f(ist,bi,!0),getPersistentBookmark:ust},fst="_mce_caret",ku=function(n){return i.isElement(n)&&n.id===fst},df=function(n,t){for(;t&&t!==n;){if(t.id===fst)return t;t=t.parentNode}return null},iui=i.isElement,est=i.isText,ost=function(n){var t=n.parentNode;t&&t.removeChild(n)},sst=function(n,t){0===t.length?ost(n):n.nodeValue=t},hst=function(n){var t=wu(n);return{count:n.length-t.length,text:t}},cst=function(n,t){return vk(n),t},rui=function(t,i){var f,e,r,o=i.container(),s=(f=fgt(o.childNodes),e=t,r=hit(f,e),-1===r?n.none():n.some(r)).map(function(n){return n<i.offset()?u(o,i.offset()-1):i}).getOr(i);return vk(t),s},uui=function(n,t){return est(n)&&t.container()===n?(i=t,f=hst((r=n).data.substr(0,i.offset())),e=hst(r.data.substr(i.offset())),0<(o=f.text+e.text).length?(sst(r,o),u(r,i.offset()-f.count)):i):cst(n,t);var r,i,f,e,o},vk=function(n){if(iui(n)&&si(n)&&(tot(n)?n.removeAttribute("data-mce-caret"):ost(n)),est(n)){var t=wu(function(n){try{return n.nodeValue}catch(t){return""}}(n));sst(n,t)}},lo={removeAndReposition:function(n,t){return u.isTextPosition(t)?uui(n,t):(i=n,(r=t).container()===i.parentNode?rui(i,r):cst(i,r));var i,r},remove:vk},fui=i.isContentEditableTrue,ba=i.isContentEditableFalse,du=function(n,t,i,r,u){return t._selectionOverrides.showCaret(n,i,r,u)},yk=function(n,t){var i,r;return n.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((r=(i=t).ownerDocument.createRange()).selectNode(i),r)},lst=function(n,t,i){var s=rv(1,n.getBody(),t),r=u.fromRangeStart(s),o=r.getNode(),f,e;return ba(o)?du(1,n,o,!r.isAtEnd(),!1):(f=r.getNode(!0),ba(f))?du(1,n,f,!1,!1):(e=n.dom.getParent(r.getNode(),function(n){return ba(n)||fui(n)}),ba(e)?du(1,n,e,!1,i):null)},ka=function(n,t,i){if(!t||!t.collapsed)return t;var r=lst(n,t,i);return r||t};(pa=hi||(hi={}))[pa.Backwards=-1]="Backwards";pa[pa.Forwards=1]="Forwards";var cr,gu,eui=i.isContentEditableFalse,br=i.isText,ast=i.isElement,pk=i.isBr,fh=hr,vst=function(n){return rot(n)||!!rk(t=n)&&!0!==h.reduce(t.getElementsByTagName("*"),function(n,t){return n||iot(t)},!1);var t},da=uk,yst=function(n,t){return n.hasChildNodes()&&t<n.childNodes.length?n.childNodes[t]:null},pst=function(n,t){if(ao(n)){if(fh(t.previousSibling)&&!br(t.previousSibling))return u.before(t);if(br(t))return u(t,0)}if(ne(n)){if(fh(t.nextSibling)&&!br(t.nextSibling))return u.after(t);if(br(t))return u(t,t.data.length)}return ne(n)?pk(t)?u.before(t):u.after(t):u.before(t)},ga=function(n,t,r){var l,f,o,a,s,v,y,p,e,c;if(!ast(r)||!t)return null;if(t.isEqual(u.after(r))&&r.lastChild){if(s=u.after(r.lastChild),ne(n)&&fh(r.lastChild)&&ast(r.lastChild))return pk(r.lastChild)?u.before(r.lastChild):s}else s=t;if(e=s.container(),c=s.offset(),br(e)){if(ne(n)&&0<c)return u(e,--c);if(ao(n)&&c<e.length)return u(e,++c);l=e}else{if(ne(n)&&0<c&&(f=yst(e,c-1),fh(f)))return!vst(f)&&(o=vo(f,n,da,f))?br(o)?u(o,o.data.length):u.after(o):br(f)?u(f,f.data.length):u.before(f);if(ao(n)&&c<e.childNodes.length&&(f=yst(e,c),fh(f)))return pk(f)&&r.lastChild===f?null:(v=f,y=r,i.isBr(v)&&(p=ga(1,u.after(v),y))&&!rf(u.before(v),u.before(p),y)?ga(n,u.after(f),r):!vst(f)&&(o=vo(f,n,da,f))?br(o)?u(o,0):u.before(o):br(f)?u(f,0):u.after(f));l=f||s.getNode()}return(ao(n)&&s.isAtEnd()||ne(n)&&s.isAtStart())&&(l=vo(l,n,ct.constant(!0),r,!0),da(l,r))?pst(n,l):(f=vo(l,n,da,r),!(a=h.last(h.filter(function(n,t){for(var i=[];n&&n!==t;)i.push(n),n=n.parentNode;return i}(e,r),eui)))||f&&a.contains(f)?f?pst(n,f):null:s=ao(n)?u.after(a):u.before(a))},lr=function(n){return{next:function(t){return ga(hi.Forwards,t,n)},prev:function(t){return ga(hi.Backwards,t,n)}}};(gu=cr||(cr={}))[gu.Br=0]="Br";gu[gu.Block=1]="Block";gu[gu.Wrap=2]="Wrap";gu[gu.Eol=3]="Eol";var nv,eh,wk,bk,wst,tv=function(n,t){return n===hi.Backwards?t.reverse():t},bst=function(t,r,u,f){for(var y,e,a,v,h,c,l,p=lr(u),o=f,s=[];o&&(c=p,l=o,e=r===hi.Forwards?c.next(l):c.prev(l));){if(i.isBr(e.getNode(!1)))return r===hi.Forwards?{positions:tv(r,s).concat([e]),breakType:cr.Br,breakAt:n.some(e)}:{positions:tv(r,s),breakType:cr.Br,breakAt:n.some(e)};if(e.isVisible()){if(t(o,e))return y=(a=r,v=o,h=e,i.isBr(h.getNode(a===hi.Forwards))?cr.Br:!1===rf(v,h)?cr.Block:cr.Wrap),{positions:tv(r,s),breakType:y,breakAt:n.some(e)};s.push(e);o=e}else o=e}return{positions:tv(r,s),breakType:cr.Eol,breakAt:n.none()}},kst=function(n,t,i,r){return t(i,r).breakAt.map(function(r){var u=t(i,r).positions;return n===hi.Backwards?u.concat(r):[r].concat(u)}).getOr([])},kk=function(t,i){return tu(t,function(t,r){return t.fold(function(){return n.some(r)},function(n){return ti([ur(n.getClientRects()),ur(r.getClientRects())],function(t,u){var f=Math.abs(i-t.left);return Math.abs(i-u.left)<=f?r:n}).or(t)})},n.none())},dst=function(n,t){return ur(t.getClientRects()).bind(function(t){return kk(n,t.left)})},dk=f(bst,et.isAbove,-1),gk=f(bst,et.isBelow,1),oui=f(kst,-1,dk),sui=f(kst,1,gk),gst=function(t,i,u,f,e){var o,c,s,h,l=gi(r.fromDom(u),"td,th,caption").map(function(n){return n.dom()}),a=ot((o=t,gc(l,function(n){var t,i,r=(t=bf(n.getBoundingClientRect()),i=-1,{left:t.left-i,top:t.top-i,right:t.right+2*i,bottom:t.bottom+2*i,width:t.width+i,height:t.height+i});return[{x:r.left,y:o(r),cell:n},{x:r.right,y:o(r),cell:n}]})),function(n){return i(n,e)});return(c=a,s=f,h=e,tu(c,function(t,i){return t.fold(function(){return n.some(i)},function(t){var r=Math.sqrt(Math.abs(t.x-s)+Math.abs(t.y-h)),u=Math.sqrt(Math.abs(i.x-s)+Math.abs(i.y-h));return n.some(u<r?i:t)})},n.none())).map(function(n){return n.cell})},hui=f(gst,function(n){return n.bottom},function(n,t){return n.y<t}),cui=f(gst,function(n){return n.top},function(n,t){return n.y>t}),lui=function(n,t){return ur(t.getClientRects()).bind(function(t){return hui(n,t.left,t.top)}).bind(function(n){return dst((i=n,c.lastPositionIn(i).map(function(n){return dk(i,n).positions.concat(n)}).getOr([])),t);var i})},aui=function(n,t){return he(t.getClientRects()).bind(function(t){return cui(n,t.left,t.top)}).bind(function(n){return dst((i=n,c.firstPositionIn(i).map(function(n){return[n].concat(gk(i,n).positions)}).getOr([])),t);var i})},nht=function(n){for(var i=0,r=0,t=n;t&&t.nodeType;)i+=t.offsetLeft||0,r+=t.offsetTop||0,t=t.offsetParent;return{x:i,y:r}},vui=function(n,t,r){var u,s,f,e,h,c=n.dom,a=c.getRoot(),l=0,o;if(h={elm:t,alignToTop:r},n.fire("scrollIntoView",h),!h.isDefaultPrevented()&&i.isElement(t)){if((!1===r&&(l=t.offsetHeight),"BODY"!==a.nodeName)&&(o=n.selection.getScrollContainer(),o))return u=nht(t).y-nht(o).y+l,e=o.clientHeight,void((u<(f=o.scrollTop)||f+e<u+25)&&(o.scrollTop=u<f?u:u-e+25));s=c.getViewPort(n.getWin());u=c.getPos(t).y+l;f=s.y;e=s.h;(u<s.y||f+e<u+25)&&n.getWin().scrollTo(0,u<f?u:u-e+25)}},yui=function(n,t){ur(et.fromRangeStart(t).getClientRects()).each(function(t){var c,l,r,u,f,e,o,s,h,a=function(n){if(n.inline)return n.getBody().getBoundingClientRect();var t=n.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(n),i={x:(f=c=a,e=l=t,e.left>f.left&&e.right<f.right?0:e.left<f.left?e.left-f.left:e.right-f.right),y:(r=c,u=l,u.top>r.top&&u.bottom<r.bottom?0:u.top<r.top?u.top-r.top:u.bottom-r.bottom)};s=0!==i.x?0<i.x?i.x+4:i.x-4:0;h=0!==i.y?0<i.y?i.y+4:i.y-4:0;(o=n).inline?(o.getBody().scrollLeft+=s,o.getBody().scrollTop+=h):o.getWin().scrollBy(s,h)})},tht=function(n,t,i){var u=n.getParam(t,i),r;return-1!==u.indexOf("=")?(r=n.getParam(t,"","hash"),r.hasOwnProperty(n.id)?r[n.id]:i):u},pui=function(n){return n.getParam("iframe_attrs",{})},wui=function(n){return n.getParam("doctype","<!DOCTYPE html>")},bui=function(n){return n.getParam("document_base_url","")},kui=function(n){return tht(n,"body_id","tinymce")},dui=function(n){return tht(n,"body_class","")},iht=function(n){return n.getParam("content_security_policy","")},gui=function(n){return n.getParam("br_in_pre",!0)},gf=function(n){if(n.getParam("force_p_newlines",!1))return"p";var t=n.getParam("forced_root_block","p");return!1===t?"":t},rht=function(n){return n.getParam("forced_root_block_attrs",{})},nfi=function(n){return n.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},tfi=function(n){return n.getParam("no_newline_selector","")},ifi=function(n){return n.getParam("keep_styles",!0)},rfi=function(n){return n.getParam("end_container_on_empty_block",!1)},ufi=function(n){return t.explode(n.getParam("font_size_style_values",""))},ffi=function(n){return t.explode(n.getParam("font_size_classes",""))},efi=function(n){return n.getParam("images_dataimg_filter",o(!0),"function")},uht=function(n){return n.getParam("automatic_uploads",!0,"boolean")},ofi=function(n){return n.getParam("images_reuse_filename",!1,"boolean")},sfi=function(n){return n.getParam("images_replace_blob_uris",!0,"boolean")},hfi=function(n){return n.getParam("images_upload_url","","string")},cfi=function(n){return n.getParam("images_upload_base_path","","string")},lfi=function(n){return n.getParam("images_upload_credentials",!1,"boolean")},afi=function(n){return n.getParam("images_upload_handler",null,"function")},nd=cu.detect().browser,fht=function(){return nd.isIE()||nd.isEdge()||nd.isFirefox()},oh=function(n,t){n.selection.setRng(t);yui(n,t)},eht=function(n,t,r){var f,e,o,s,u=n(t,r);return(s=u).breakType===cr.Wrap&&0===s.positions.length||!i.isBr(r.getNode())&&(o=u).breakType===cr.Br&&1===o.positions.length?(f=n,e=t,!u.breakAt.map(function(n){return f(e,n).breakAt.isSome()}).getOr(!1)):u.breakAt.isNone()},vfi=ct.curry(eht,dk),yfi=ct.curry(eht,gk),pfi=function(n,t,i){var r,f,e,o,h=n.selection.getRng(),l=t?1:-1,s;return fht()&&(r=t,f=h,e=i,o=u.fromRangeStart(f),c.positionIn(!r,e).map(function(n){return n.isEqual(o)}).getOr(!1))?(s=du(l,n,i,!t,!0),oh(n,s),!0):!1},wfi=function(t,r){var u=r.getNode(t);return i.isElement(u)&&"TABLE"===u.nodeName?n.some(u):n.none()},oht=function(n,t,i){var u=wfi(!!t,i),f=!1===t;u.fold(function(){return oh(n,i.toRange())},function(u){return c.positionIn(f,n.getBody()).filter(function(n){return n.isEqual(i)}).fold(function(){return oh(n,i.toRange())},function(){return o=t,e=u,s=i,void((h=gf(f=n))?f.undoManager.transact(function(){var n=r.fromTag(h),t;rt.setAll(n,rht(f));tt.append(n,r.fromTag("br"));o?tt.after(r.fromDom(e),n):tt.before(r.fromDom(e),n);t=f.dom.createRng();t.setStart(n.dom(),0);t.setEnd(n.dom(),0);oh(f,t)}):oh(f,s.toRange()));var o,f,e,s,h})})},bfi=function(n,t,i,r){var h,o,c,l,s,a,y=n.selection.getRng(),f=u.fromRangeStart(y),v=n.getBody(),e;return!t&&vfi(r,f)?(e=(l=v,lui(s=i,a=f).orThunk(function(){return ur(a.getClientRects()).bind(function(n){return kk(oui(l,u.before(s)),n.left)})}).getOr(u.before(s))),oht(n,t,e),!0):!(!t||!yfi(r,f))&&(h=v,e=aui(o=i,c=f).orThunk(function(){return ur(c.getClientRects()).bind(function(n){return kk(sui(h,u.after(o)),n.left)})}).getOr(u.after(o)),oht(n,t,e),!0)},sht=function(t,i){return function(){return n.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(r){return n.from(t.dom.getParent(r,"table")).map(function(n){return pfi(t,i,n)})}).getOr(!1)}},hht=function(t,i){return function(){return n.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(r){return n.from(t.dom.getParent(r,"table")).map(function(n){return bfi(t,i,n,r)})}).getOr(!1)}},cht=i.isContentEditableFalse,lht=function(n,t,i){var o,u,f,e,s,r=uot(t.getBoundingClientRect(),i);return"BODY"===n.tagName?(o=n.ownerDocument.documentElement,u=n.scrollLeft||o.scrollLeft,f=n.scrollTop||o.scrollTop):(s=n.getBoundingClientRect(),u=n.scrollLeft-s.left,f=n.scrollTop-s.top),r.left+=u,r.right+=u,r.top+=f,r.bottom+=f,r.width=1,0<(e=t.offsetWidth-t.clientWidth)&&(i&&(e*=-1),r.left+=e,r.right+=e),r},kfi=function(t,r,u){var s,f,o=pu(n.none()),h=function(){!function(n){for(var f,t,u,r=e("*[contentEditable=false]",n),i=0;i<r.length;i++)t=(f=r[i]).previousSibling,va(t)&&(1===(u=t.data).length?t.parentNode.removeChild(t):t.deleteData(u.length-1,1)),t=f.nextSibling,aa(t)&&(1===(u=t.data).length?t.parentNode.removeChild(t):t.deleteData(0,1))}(t);f&&(lo.remove(f),f=null);o.get().each(function(t){e(t.caret).remove();o.set(n.none())});clearInterval(s)},c=function(){s=gt.setInterval(function(){u()?e("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden"):e("div.mce-visual-caret",t).addClass("mce-visual-caret-hidden")},500)};return{show:function(u,s){var a,l,v,y;return(h(),v=s,i.isElement(v)&&/^(TD|TH)$/i.test(v.tagName))?null:r(s)?(f=lri("p",s,u),a=lht(t,s,u),e(f).css("top",a.top),y=e('<div class="mce-visual-caret" data-mce-bogus="all"><\/div>').css(a).appendTo(t)[0],o.set(n.some({caret:y,element:s,before:u})),o.get().each(function(n){u&&e(n.caret).addClass("mce-visual-caret-before")}),c(),(l=s.ownerDocument.createRange()).setStart(f,0),l.setEnd(f,0),l):(f=function(n,t){var i,r,u;if(r=n.ownerDocument.createTextNode(pt),u=n.parentNode,t){if(i=n.previousSibling,uo(i)){if(si(i))return i;if(va(i))return i.splitText(i.data.length-1)}u.insertBefore(r,n)}else{if(i=n.nextSibling,uo(i)){if(si(i))return i;if(aa(i))return i.splitText(1),i}n.nextSibling?u.insertBefore(r,n.nextSibling):u.appendChild(r)}return r}(s,u),l=s.ownerDocument.createRange(),cht(f.nextSibling)?(l.setStart(f,0),l.setEnd(f,0)):(l.setStart(f,1),l.setEnd(f,1)),l)},hide:h,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){o.get().each(function(n){var i=lht(t,n.element,n.before);e(n.caret).css(i)})},destroy:function(){return gt.clearInterval(s)}}},kr=function(n){return cht(n)||i.isTable(n)&&fht()},sh=i.isContentEditableFalse,dfi=i.matchStyleValues("display","block table table-cell table-caption list-item"),aht=si,td=fo,nf=ct.curry,vht=i.isElement,gfi=hr,ao=function(n){return 0<n},ne=function(n){return n<0},iv=function(n,t){for(var i;i=n(t);)if(!td(i))return i;return null},vo=function(n,t,i,r,u){var f=new ht(n,r);if(ne(t)){if((sh(n)||td(n))&&i(n=iv(f.prev,!0)))return n;for(;n=iv(f.prev,u);)if(i(n))return n}if(ao(t)){if((sh(n)||td(n))&&i(n=iv(f.next,!0)))return n;for(;n=iv(f.next,u);)if(i(n))return n}return null},tf=function(n,t){for(;n&&n!==t;){if(dfi(n))return n;n=n.parentNode}return null},rf=function(n,t,i){return tf(n.container(),i)===tf(t.container(),i)},id=function(n,t){var i,r;return t?(i=t.container(),r=t.offset(),vht(i)?i.childNodes[r+n]:null):null},yht=function(n,t){var i=t.ownerDocument.createRange();return n?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)),i},pht=function(n,t,i){for(var r,f,e,u=n?"previousSibling":"nextSibling";i&&i!==t;){if(r=i[u],aht(r)&&(r=r[u]),sh(r)){if(e=i,tf(r,f=t)===tf(e,f))return r;break}if(gfi(r))break;i=i.parentNode}return null},hh=nf(yht,!0),ch=nf(yht,!1),rv=function(n,t,r){var u,f,e,h,o=nf(pht,!0,t),s=nf(pht,!1,t);if(f=r.startContainer,e=r.startOffset,fo(f)){if(vht(f)||(f=f.parentNode),"before"===(h=f.getAttribute("data-mce-caret"))&&(u=f.nextSibling,kr(u)))return hh(u);if("after"===h&&(u=f.previousSibling,kr(u)))return ch(u)}if(!r.collapsed)return r;if(i.isText(f)){if(aht(f)){if(1===n){if(u=s(f))return hh(u);if(u=o(f))return ch(u)}if(-1===n){if(u=o(f))return ch(u);if(u=s(f))return hh(u)}return r}if(va(f)&&e>=f.data.length-1)return 1===n&&(u=s(f))?hh(u):r;if(aa(f)&&e<=1)return-1===n&&(u=o(f))?ch(u):r;if(e===f.data.length)return(u=s(f))?hh(u):r;if(0===e)return(u=o(f))?ch(u):r}return r},wht=function(n,t){var r=id(n,t);return sh(r)&&!i.isBogusAll(r)},bht=function(n,t){return i.isTable(id(n,t))},kht=function(t,i){return n.from(id(t?0:-1,i)).filter(sh)},dht=function(n,t,i){var r=rv(n,t,i);return-1===n?et.fromRangeStart(r):et.fromRangeEnd(r)},uv=nf(wht,0),fv=nf(wht,-1),nei=nf(bht,0),tei=nf(bht,-1),ght=function(n){return u.isTextPosition(n)?0===n.offset():hr(n.getNode())},nct=function(n){if(u.isTextPosition(n)){var t=n.container();return n.offset()===t.data.length}return hr(n.getNode(!0))},tct=function(n,t){return!u.isTextPosition(n)&&!u.isTextPosition(t)&&n.getNode()===t.getNode(!0)},iei=function(n,t,r){return n?!tct(t,r)&&(f=t,!(!u.isTextPosition(f)&&i.isBr(f.getNode())))&&nct(t)&&ght(r):!tct(r,t)&&ght(t)&&nct(r);var f},yo=function(t,i,r){var u=lr(i);return n.from(t?u.next(r):u.prev(r))},rd=function(t,r){var s,h,o,c,e,f=t?r.firstChild:r.lastChild;return i.isText(f)?n.some(u(f,t?0:f.data.length)):f?hr(f)?n.some(t?u.before(f):(e=f,i.isBr(e)?u.before(e):u.after(e))):(h=r,o=f,c=(s=t)?u.before(o):u.after(o),yo(s,h,c)):n.none()},c={fromPosition:yo,nextPosition:f(yo,!0),prevPosition:f(yo,!1),navigate:function(t,i,r){return yo(t,i,r).bind(function(u){return rf(r,u,i)&&iei(t,r,u)?yo(t,i,u):n.some(u)})},positionIn:rd,firstPositionIn:f(rd,!0),lastPositionIn:f(rd,!1)},ict=function(n,t){return!n.isBlock(t)||t.innerHTML||s.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},rei=function(n,t){return c.lastPositionIn(n).fold(function(){return!1},function(n){return t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0})},rct=function(n,t,i){return!(!1!==t.hasChildNodes()||!df(n,t)||(u=i,r=(f=t).ownerDocument.createTextNode(pt),f.appendChild(r),u.setStart(r,0),u.setEnd(r,0),0));var f,u,r},uct=function(n,t,i,r){var e,u,o,s,f=i[t?"start":"end"],h=n.getRoot();if(f){for(o=f[0],u=h,e=f.length-1;1<=e;e--){if(s=u.childNodes,rct(h,u,r))return!0;if(f[e]>s.length-1)return!!rct(h,u,r)||rei(u,r);u=s[f[e]]}3===u.nodeType&&(o=Math.min(f[0],u.nodeValue.length));1===u.nodeType&&(o=Math.min(f[0],u.childNodes.length));t?r.setStart(u,o):r.setEnd(u,o)}return!0},ud=function(n){return i.isText(n)&&0<n.data.length},fct=function(r,f,e){var c,h,a,l,v,y,o=r.get(e.id+"_"+f),p=e.keep;if(o){if(c=o.parentNode,"start"===f?p?o.hasChildNodes()?(c=o.firstChild,h=1):ud(o.nextSibling)?(c=o.nextSibling,h=0):ud(o.previousSibling)?(c=o.previousSibling,h=o.previousSibling.data.length):(c=o.parentNode,h=r.nodeIndex(o)+1):h=r.nodeIndex(o):p?o.hasChildNodes()?(c=o.firstChild,h=1):ud(o.previousSibling)?(c=o.previousSibling,h=o.previousSibling.data.length):(c=o.parentNode,h=r.nodeIndex(o)):h=r.nodeIndex(o),v=c,y=h,!p){for(l=o.previousSibling,a=o.nextSibling,t.each(t.grep(o.childNodes),function(n){i.isText(n)&&(n.nodeValue=n.nodeValue.replace(/\uFEFF/g,""))});o=r.get(e.id+"_"+f);)r.remove(o,!0);l&&a&&l.nodeType===a.nodeType&&i.isText(l)&&!s.opera&&(h=l.nodeValue.length,l.appendData(a.nodeValue),r.remove(a),v=l,y=h)}return n.some(u(v,y))}return n.none()},uei=function(i,r){var h,c,f,b,l,k,a,d,v,y,e,u,p,w,o,g,s=i.dom;if(r){if(g=r,t.isArray(g.start))return w=r,o=(p=s).createRng(),uct(p,!0,w,o)&&uct(p,!1,w,o)?n.some(o):n.none();if("string"==typeof r.start)return n.some((y=r,e=(v=s).createRng(),u=kot(v.getRoot(),y.start),e.setStart(u.container(),u.offset()),u=kot(v.getRoot(),y.end),e.setEnd(u.container(),u.offset()),e));if(r.hasOwnProperty("id"))return a=fct(f=s,"start",b=r),d=fct(f,"end",b),ti([a,(l=d,k=a,l.isSome()?l:k)],function(n,t){var i=f.createRng();return i.setStart(ict(f,n.container()),n.offset()),i.setEnd(ict(f,t.container()),t.offset()),i});if(r.hasOwnProperty("name"))return h=s,c=r,n.from(h.select(c.name)[c.index]).map(function(n){var t=h.createRng();return t.selectNode(n),t});if(r.hasOwnProperty("rng"))return n.some(r.rng)}return n.none()},fei=function(n,t,i){return co.getBookmark(n,t,i)},eei=function(n,t){uei(n,t).each(function(t){n.setRng(t)})},tr=function(n){return i.isElement(n)&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type")},ect=function(n){return n&&/^(IMG)$/.test(n.nodeName)},fd=function(n){return n&&3===n.nodeType&&/^([\t \r\n]+|)$/.test(n.nodeValue)},oct=function(n,t,i){return"color"!==i&&"backgroundColor"!==i||(t=n.toHex(t)),"fontWeight"===i&&700===t&&(t="bold"),"fontFamily"===i&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},a={isInlineBlock:ect,moveStart:function(n,t,i){var f,r,e,o=i.startOffset,u=i.startContainer;if((i.startContainer!==i.endContainer||!ect(i.startContainer.childNodes[i.startOffset]))&&1===u.nodeType)for(o<(e=u.childNodes).length?f=new ht(u=e[o],n.getParent(u,n.isBlock)):(f=new ht(u=e[e.length-1],n.getParent(u,n.isBlock))).next(!0),r=f.current();r;r=f.next())if(3===r.nodeType&&!fd(r))return i.setStart(r,0),void t.setRng(i)},getNonWhiteSpaceSibling:function(n,t,i){if(n)for(t=t?"nextSibling":"previousSibling",n=i?n:n[t];n;n=n[t])if(1===n.nodeType||!fd(n))return n},isTextBlock:function(n,t){return t.nodeType&&(t=t.nodeName),!!n.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(n,t,i){return n.schema.isValidChild(t,i)},isWhiteSpaceNode:fd,replaceVars:function(n,t){return"string"!=typeof n?n=n(t):t&&(n=n.replace(/%(\w+)/g,function(n,i){return t[i]||n})),n},isEq:function(n,t){return t=t||"",n=""+((n=n||"").nodeName||n),t=""+(t.nodeName||t),n.toLowerCase()===t.toLowerCase()},normalizeStyleValue:oct,getStyle:function(n,t,i){return oct(n,n.getStyle(t,i),i)},getTextDecoration:function(n,t){var i;return n.getParent(t,function(t){return(i=n.getStyle(t,"text-decoration"))&&"none"!==i}),i},getParents:function(n,t,i){return n.getParents(t,i,n.getRoot())}},uf=tr,sct=a.getParents,hct=a.isWhiteSpaceNode,oei=a.isTextBlock,cct=function(n,t){for(void 0===t&&(t=3===n.nodeType?n.length:n.childNodes.length);n&&n.hasChildNodes();)(n=n.childNodes[t])&&(t=3===n.nodeType?n.length:n.childNodes.length);return{node:n,offset:t}},lct=function(n,t){for(var i=t;i;){if(1===i.nodeType&&n.getContentEditable(i))return"false"===n.getContentEditable(i)?i:t;i=i.parentNode}return t},act=function(n,t,i,r){var u,f,e=i.nodeValue;return void 0===r&&(r=n?e.length:0),n?(u=e.lastIndexOf(" ",r),-1===(u=(f=e.lastIndexOf(" ",r))<u?u:f)||t||u++):(u=e.indexOf(" ",r),f=e.indexOf(" ",r),u=-1!==u&&(-1===f||u<f)?u:f),u},vct=function(n,t,i,r,u,f){var h,e,s,o;if(3===i.nodeType){if(-1!==(s=act(u,f,i,r)))return{container:i,offset:s};o=i}for(h=new ht(i,n.getParent(i,n.isBlock)||t);e=h[u?"prev":"next"]();)if(3!==e.nodeType||uf(e.parentNode)){if(n.isBlock(e)||a.isEq(e,"BR"))break}else if(-1!==(s=act(u,f,o=e)))return{container:e,offset:s};if(o)return{container:o,offset:r=u?0:o.length}},yct=function(n,t,i,r,u){var e,f,o,s;for(3===r.nodeType&&0===r.nodeValue.length&&r[u]&&(r=r[u]),e=sct(n,r),f=0;f<e.length;f++)for(o=0;o<t.length;o++)if(!("collapsed"in(s=t[o])&&s.collapsed!==i.collapsed)&&n.is(e[f],s.selector))return e[f];return r},pct=function(n,t,i,r){var u,f=n.dom,e=f.getRoot(),o;if((t[0].wrapper||(u=f.getParent(i,t[0].block,e)),u)||(o=f.getParent(i,"LI,TD,TH"),u=f.getParent(3===i.nodeType?i.parentNode:i,function(t){return t!==e&&oei(n,t)},o)),u&&t[0].wrapper&&(u=sct(f,u,"ul,ol").reverse()[0]||u),!u)for(u=i;u[r]&&!f.isBlock(u[r])&&(u=u[r],!a.isEq(u,"br")););return u||i},ev=function(n,t,i,r,u,f,e){var s,o,h,c,l,a;if(s=o=e?i:u,c=e?"previousSibling":"nextSibling",l=n.getRoot(),3===s.nodeType&&!hct(s)&&(e?0<r:f<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&n.isBlock(o))return o;for(h=o[c];h;h=h[c])if(!uf(h)&&!hct(h)&&("BR"!==(a=h).nodeName||!a.getAttribute("data-mce-bogus")||a.nextSibling))return o;if(o===l||o.parentNode===l){s=o;break}o=o.parentNode}return s},po=function(n,t,i,r){var h,f=t.startContainer,s=t.startOffset,u=t.endContainer,e=t.endOffset,o=n.dom;return 1===f.nodeType&&f.hasChildNodes()&&3===(f=ho(f,s)).nodeType&&(s=0),1===u.nodeType&&u.hasChildNodes()&&3===(u=ho(u,t.collapsed?e:e-1)).nodeType&&(e=u.nodeValue.length),f=lct(o,f),u=lct(o,u),(uf(f.parentNode)||uf(f))&&(f=uf(f)?f:f.parentNode,3===(f=t.collapsed?f.previousSibling||f:f.nextSibling||f).nodeType&&(s=t.collapsed?f.length:0)),(uf(u.parentNode)||uf(u))&&(u=uf(u)?u:u.parentNode,3===(u=t.collapsed?u.nextSibling||u:u.previousSibling||u).nodeType&&(e=t.collapsed?0:u.length)),t.collapsed&&((h=vct(o,n.getBody(),f,s,!0,r))&&(f=h.container,s=h.offset),(h=vct(o,n.getBody(),u,e,!1,r))&&(u=h.container,e=h.offset)),i[0].inline&&(u=r?u:function(n,t){var i=cct(n,t);if(i.node){for(;i.node&&0===i.offset&&i.node.previousSibling;)i=cct(i.node.previousSibling);i.node&&0<i.offset&&3===i.node.nodeType&&" "===i.node.nodeValue.charAt(i.offset-1)&&1<i.offset&&(n=i.node).splitText(i.offset-1)}return n}(u,e)),(i[0].inline||i[0].block_expand)&&(i[0].inline&&3===f.nodeType&&0!==s||(f=ev(o,i,f,s,u,e,!0)),i[0].inline&&3===u.nodeType&&e!==u.nodeValue.length||(u=ev(o,i,f,s,u,e,!1))),i[0].selector&&!1!==i[0].expand&&!i[0].inline&&(f=yct(o,i,t,f,"previousSibling"),u=yct(o,i,t,u,"nextSibling")),(i[0].block||i[0].selector)&&(f=pct(n,i,f,"previousSibling"),u=pct(n,i,u,"nextSibling"),i[0].block&&(o.isBlock(f)||(f=ev(o,i,f,s,u,e,!0)),o.isBlock(u)||(u=ev(o,i,f,s,u,e,!1)))),1===f.nodeType&&(s=o.nodeIndex(f),f=f.parentNode),1===u.nodeType&&(e=o.nodeIndex(u)+1,u=u.parentNode),{startContainer:f,startOffset:s,endContainer:u,endOffset:e}},sei=t.each,ov=function(n,t,i){var e,s,h,r,v,c,p,u=t.startContainer,w=t.startOffset,f=t.endContainer,b=t.endOffset;if(0<(p=n.select("td[data-mce-selected],th[data-mce-selected]")).length)sei(p,function(n){i([n])});else{var k,o,l,y=function(n){var t;return 3===(t=n[0]).nodeType&&t===u&&w>=t.nodeValue.length&&n.splice(0,1),t=n[n.length-1],0===b&&0<n.length&&t===f&&3===t.nodeType&&n.splice(n.length-1,1),n},d=function(n,t,i){for(var r=[];n&&n!==i;n=n[t])r.push(n);return r},g=function(n,t){do{if(n.parentNode===t)return n;n=n.parentNode}while(n)},a=function(n,t,u){var f=u?"nextSibling":"previousSibling";for(v=(r=n).parentNode;r&&r!==t;r=v)v=r.parentNode,(c=d(r===n?r:r[f],f)).length&&(u||c.reverse(),i(y(c)))};if(1===u.nodeType&&u.hasChildNodes()&&(u=u.childNodes[w]),1===f.nodeType&&f.hasChildNodes()&&(o=b,l=(k=f).childNodes,--o>l.length-1?o=l.length-1:o<0&&(o=0),f=l[o]||k),u===f)return i(y([u]));for(e=n.findCommonAncestor(u,f),r=u;r;r=r.parentNode){if(r===f)return a(u,e,!0);if(r===e)break}for(r=f;r;r=r.parentNode){if(r===u)return a(f,e);if(r===e)break}s=g(u,e)||u;h=g(f,e)||f;a(u,s,!0);(c=d(s===u?s:s.nextSibling,"nextSibling",h===f?h.nextSibling:h)).length&&i(y(c));a(f,h)}},hei=(nv=d.isText,eh="text",wk=function(t){return nv(t)?n.from(t.dom().nodeValue):n.none()},bk=cu.detect().browser,{get:function(n){if(!nv(n))throw new Error("Can only get "+eh+" value of a "+eh+" node");return wst(n).getOr("")},getOption:wst=bk.isIE()&&10===bk.version.major?function(t){try{return wk(t)}catch(i){return n.none()}}:wk,set:function(n,t){if(!nv(n))throw new Error("Can only set raw "+eh+" value of a "+eh+" node");n.dom().nodeValue=t}}),wct=function(n){return hei.get(n)},cei=function(n,t,i,r){return v.parent(t).fold(function(){return"skipping"},function(u){return"br"===r||(e=t,d.isText(e)&&"﻿"===wct(e))?"skipping":(f=t,d.isElement(f)&&io.has(f,kb())?"existing":ku(t)?"caret":a.isValid(n,i,r)&&a.isValid(n,d.name(u),i)?"valid":"invalid-child");var f,e})},lei=undefined&&undefined.__rest||function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},aei=function(t,i,u,f,e){var c,a,y=e.uid,p=void 0===y?(c="mce-annotation",a=(new Date).getTime(),c+"_"+Math.floor(1e9*Math.random())+ ++eri+String(a)):y,it=lei(e,["uid"]),w=[],o=r.fromTag("span");io.add(o,kb());rt.set(o,""+ca(),p);rt.set(o,""+ih(),u);var b=f(p,it),k=b.attributes,ut=void 0===k?{}:k,g=b.classes,ft=void 0===g?[]:g;rt.setAll(o,ut);ori(o,ft);var s=pu(n.none()),h=function(){s.set(n.none())},nt=function(n){l(n,et)},et=function(i){var r,u;switch(cei(t,i,"span",d.name(i))){case"invalid-child":h();r=v.children(i);nt(r);h();break;case"valid":u=s.get().getOrThunk(function(){var t=ro(o);return w.push(t),s.set(n.some(t)),t});tt.wrap(i,u)}};return ov(t.dom,i,function(n){var t;h();t=lt(n,r.fromDom);nt(t)}),w},vei=function(n,t,i,r){n.undoManager.transact(function(){var e,f,u,o=n.selection.getRng(),s,h;o.collapsed&&(u=po(e=n,f=o,[{inline:!0}],!1),f.setStart(u.startContainer,u.startOffset),f.setEnd(u.endContainer,u.endOffset),e.selection.setRng(f));s=co.getPersistentBookmark(n.selection,!0);h=n.selection.getRng();aei(n,h,t,i.decorate,r);n.selection.moveToBookmark(s)})};var yei=function(n){return t.grep(n.childNodes,function(n){return"LI"===n.nodeName})},pei=function(n){return n&&n.firstChild&&n.firstChild===n.lastChild&&(" "===(t=n.firstChild).data||i.isBr(t));var t},wei=function(n){return 0<n.length&&(!(t=n[n.length-1]).firstChild||pei(t))?n.slice(0,-1):n;var t},ed=function(n,t){var i=n.getParent(t,n.isBlock);return i&&"LI"===i.nodeName?i:null},kct=function(n,t){var r=u.after(n),i=lr(t).prev(r);return i?i.toRange():null},bei=function(n,i,r){var f,e,o,s,h=n.parentNode;return t.each(i,function(t){h.insertBefore(t,n)}),f=n,e=r,o=u.before(f),(s=lr(e).next(o))?s.toRange():null},kei=function(n,t){var o,u,f,s,e,h,i=t.firstChild,r=t.lastChild;return i&&"meta"===i.name&&(i=i.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),u=r,h=(o=n).getNonEmptyElements(),u&&(u.isEmpty(h)||(f=u,o.getBlockElements()[f.name]&&(e=f).firstChild&&e.firstChild===e.lastChild&&("br"===(s=f.firstChild).name||" "===s.value)))&&(r=r.prev),!(!i||i!==r||"ul"!==i.name&&"ol"!==i.name)},dei=function(n,i,r,f){var g,nt,a,o,s,tt,it,rt,v,ut,e,h,ft,y,et,p,w,b,c,st=(g=i,nt=f,tt=n.serialize(nt),it=g.createFragment(tt),o=(a=it).firstChild,s=a.lastChild,o&&"META"===o.nodeName&&o.parentNode.removeChild(o),s&&"mce_marker"===s.id&&s.parentNode.removeChild(s),a),l=ed(i,r.startContainer),k=wei(yei(st.firstChild)),d=i.getRoot(),ot=function(n){var t=u.fromRangeStart(r),f=lr(i.getRoot()),e=1===n?f.prev(t):f.next(t);return!e||ed(i,e.getNode())!==l};return ot(1)?bei(l,k,d):ot(2)?(rt=l,v=k,ut=d,i.insertAfter(v.reverse(),rt),kct(v[0],ut)):(h=k,ft=d,y=e=l,p=(et=r).cloneRange(),w=et.cloneRange(),p.setStartBefore(y),w.setEndAfter(y),b=[p.cloneContents(),w.cloneContents()],(c=e.parentNode).insertBefore(b[0],e),t.each(h,function(n){c.insertBefore(n,e)}),c.insertBefore(b[1],e),c.removeChild(e),kct(h[h.length-1],ft))},gei=function(n,t){return!!ed(n,t)},noi=t.each,dct=function(n){this.compare=function(t,i){if(t.nodeName!==i.nodeName)return!1;var r=function(t){var i={};return noi(n.getAttribs(t),function(r){var u=r.nodeName.toLowerCase();0!==u.indexOf("_")&&"style"!==u&&0!==u.indexOf("data-")&&(i[u]=n.getAttrib(t,u))}),i},u=function(n,t){var r;for(var i in n)if(n.hasOwnProperty(i)){if(void 0===(r=t[i])||n[i]!==r)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0};return!(!u(r(t),r(i))||!u(n.parseStyle(n.getAttrib(t,"style")),n.parseStyle(n.getAttrib(i,"style")))||tr(t)||tr(i))}},toi=function(n){var i=gi(n,"br"),t=ot(function(n){for(var i=[],t=n.dom();t;)i.push(r.fromDom(t)),t=t.lastChild;return i}(n).slice(-1),fb);i.length===t.length&&l(t,ft.remove)},lh=function(n){ft.empty(n);tt.append(n,r.fromHtml('<br data-mce-bogus="1">'))},ioi=function(n){v.lastChild(n).each(function(t){v.prevSibling(t).each(function(i){gs(n)&&fb(t)&&gs(i)&&ft.remove(t)})})},gct=t.makeMap;var roi=function(n){var t=u.fromRangeStart(n),r=u.fromRangeEnd(n),i=n.commonAncestorContainer;return c.fromPosition(!1,i,r).map(function(u){return!rf(t,r,i)&&rf(t,u,i)?(e=t.container(),o=t.offset(),s=u.container(),h=u.offset(),(f=document.createRange()).setStart(e,o),f.setEnd(s,h),f):n;var e,o,s,h,f}).getOr(n)},od=function(n){return n.collapsed?n:roi(n)},uoi=i.matchNodeNames("td th"),foi=function(i,f,e){var nt,k,l,v,y,p,ut,c,o,d,tt,ft,lt=i.schema.getTextInlineElements(),a=i.selection,h=i.dom,et,it,b,g,ot,w,st,ht,ct,rt;if(/^ | $/.test(f)&&(f=function(n){var i,t,r,u;return i=a.getRng(),t=i.startContainer,r=i.startOffset,u=function(n){return t[n]&&3===t[n].nodeType},3===t.nodeType&&(0<r?n=n.replace(/^&nbsp;/," "):u("previousSibling")||(n=n.replace(/^ /,"&nbsp;")),r<t.length?n=n.replace(/&nbsp;(<br>|)$/," "):u("nextSibling")||(n=n.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),n}(f)),nt=i.parser,ft=e.merge,k=ah({validate:i.settings.validate},i.schema),tt='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;<\/span>',p={content:f,format:"html",selection:!0,paste:e.paste},(p=i.fire("BeforeSetContent",p)).isDefaultPrevented())i.fire("SetContent",{content:p.content,format:"html",selection:!0,paste:e.paste});else{if(-1===(f=p.content).indexOf("{$caret}")&&(f+="{$caret}"),f=f.replace(/\{\$caret\}/,tt),ot=(c=a.getRng()).startContainer||(c.parentElement?c.parentElement():null),w=i.getBody(),ot===w&&a.isCollapsed()&&h.isBlock(w.firstChild)&&(et=w.firstChild)&&!i.schema.getShortEndedElements()[et.nodeName]&&h.isEmpty(w.firstChild)&&((c=h.createRng()).setStart(w.firstChild,0),c.setEnd(w.firstChild,0),a.setRng(c)),a.isCollapsed()||(i.selection.setRng(od(i.selection.getRng())),i.getDoc().execCommand("Delete",!1,null),b=(it=a.getRng()).startContainer,g=it.startOffset,3===b.nodeType&&it.collapsed&&(" "===b.data[g]?(b.deleteData(g,1),/[\u00a0| ]$/.test(f)||(f+=" ")):" "===b.data[g-1]&&(b.deleteData(g-1,1),/[\u00a0| ]$/.test(f)||(f=" "+f)))),rt={context:(l=a.getNode()).nodeName.toLowerCase(),data:e.data,insert:!0},y=nt.parse(f,rt),!0===e.paste&&kei(i.schema,y)&&gei(h,l))return c=dei(k,h,i.selection.getRng(),y),i.selection.setRng(c),void i.fire("SetContent",p);if(function(n){for(var t=n;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(y),"mce_marker"===(o=y.lastChild).attr("id"))for(o=(ut=o).prev;o;o=o.walk(!0))if(3===o.type||!h.isBlock(o.name)){i.schema.isValidChild(o.parent.name,"span")&&o.parent.insert(ut,o,"br"===o.name);break}if(i._selectionOverrides.showBlockCaretContainer(l),rt.invalid){for(a.setContent(tt),l=a.getNode(),v=i.getBody(),9===l.nodeType?l=o=v:o=l;o!==v;)o=(l=o).parentNode;f=l===v?v.innerHTML:h.getOuterHTML(l);f=k.serialize(nt.parse(f.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return k.serialize(y)})));l===v?h.setHTML(v,f):h.setOuterHTML(l,f)}else f=k.serialize(y),function(n,t,i){if("all"===i.getAttribute("data-mce-bogus"))i.parentNode.insertBefore(n.dom.createFragment(t),i);else{var r=i.firstChild,u=i.lastChild;!r||r===u&&"BR"===r.nodeName?n.dom.setHTML(i,t):n.selection.setContent(t)}}(i,f,l);!function(){if(ft){var n=i.getBody(),r=new dct(h);t.each(h.select("*[data-mce-fragment]"),function(t){for(var i=t.parentNode;i&&i!==n;i=i.parentNode)lt[t.nodeName.toLowerCase()]&&r.compare(i,t)&&h.remove(t,!0)})}}(),function(n){var r,t,f;if(n){if(a.scrollIntoView(n),r=function(n){for(var t=i.getBody();n&&n!==t;n=n.parentNode)if("false"===i.dom.getContentEditable(n))return n;return null}(n))return h.remove(n),a.select(r);c=h.createRng();(o=n.previousSibling)&&3===o.nodeType?(c.setStart(o,o.nodeValue.length),s.ie||(d=n.nextSibling)&&3===d.nodeType&&(o.appendData(d.data),d.parentNode.removeChild(d))):(c.setStartBefore(n),c.setEndBefore(n));t=h.getParent(n,h.isBlock);h.remove(n);t&&h.isEmpty(t)&&(i.$(t).empty(),c.setStart(t,0),c.setEnd(t,0),uoi(t)||t.getAttribute("data-mce-fragment")||!(f=function(n){var t=u.fromRangeStart(n);if(t=lr(i.getBody()).next(t))return t.toRange()}(c))?h.add(t,h.create("br",{"data-mce-bogus":"1"})):(c=f,h.remove(t)));a.setRng(c)}}(h.get("mce_marker"));st=i.getBody();t.each(st.getElementsByTagName("*"),function(n){n.removeAttribute("data-mce-fragment")});ht=i.dom;ct=i.selection.getStart();n.from(ht.getParent(ct,"td,th")).map(r.fromDom).each(ioi);i.fire("SetContent",p);i.addVisual()}},eoi=function(n,i){var r,u,f="string"!=typeof(r=i)?(u=t.extend({paste:r.paste,data:{paste:r.paste}},r),{content:r.content,details:u}):{content:r,details:{}};foi(n,f.content,f.details)},ooi=sr("sections","settings"),soi=cu.detect().deviceType.isTouch(),hoi=["lists","autolink","autosave"],coi={theme:"mobile"},sv=function(n){var t=ls(n)?n.join(" "):n,i=lt(ui(t)?t.split(" "):[],wnt);return ot(i,function(n){return 0<n.length})},loi=function(n,t){var u,i,r,f=(u=function(t,i){return as(n,i)},i={},r={},wl(t,function(n,t){(u(n,t)?i:r)[t]=n}),{t:i,f:r});return ooi(f.t,f.f)},tlt=function(n,t){return n.sections().hasOwnProperty(t)},aoi=function(n,i,r,u){var e,s=sv(r.forced_plugins),o=sv(u.plugins),h=n&&tlt(i,"mobile")?ot(o,f(as,hoi)):o,c=(e=h,[].concat(sv(s)).concat(sv(e)));return t.extend(u,{plugins:c.join(" ")})},voi=function(n,i,r,u){var e,o,s,h,l,c,a,v,y,p,f=loi(["mobile"],u),w=t.extend(i,r,f.settings(),(v=n,p=(y=f).settings().inline,v&&tlt(y,"mobile")&&!p?(h="mobile",l=coi,c=f.sections(),a=c.hasOwnProperty(h)?c[h]:{},t.extend({},l,a)):{}),{validate:!0,content_editable:f.settings().inline,external_plugins:(e=r,o=f.settings(),s=o.external_plugins?o.external_plugins:{},e&&e.external_plugins?t.extend({},e.external_plugins,s):s)});return aoi(n,f,r,w)},ff=function(t,i,r){return n.from(i.settings[r]).filter(t)},yoi=f(ff,ui),poi=function(n,i,r,u){var o,f,e,s=i in n.settings?n.settings[i]:r;return"hash"===u?(e={},"string"==typeof(f=s)?l(0<f.indexOf("=")?f.split(/[;,](?![^=;,]*(?:[;,]|$))/):f.split(","),function(n){var i=n.split("=");e[t.trim(i[0])]=1<i.length?t.trim(i[1]):t.trim(i)}):e=f,e):"string"===u?ff(ui,n,i).getOr(r):"number"===u?ff(wp,n,i).getOr(r):"boolean"===u?ff(sit,n,i).getOr(r):"object"===u?ff(oit,n,i).getOr(r):"array"===u?ff(ls,n,i).getOr(r):"string[]"===u?ff((o=ui,function(n){return ls(n)&&bp(n,o)}),n,i).getOr(r):"function"===u?ff(nu,n,i).getOr(r):s},woi=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,sd=function(n,t){var r=t.container(),f=t.offset();return n?la(r)?i.isText(r.nextSibling)?u(r.nextSibling,0):u.after(r):nk(t)?u(r,f+1):t:la(r)?i.isText(r.previousSibling)?u(r.previousSibling,r.previousSibling.data.length):u.before(r):tk(t)?u(r,f-1):t},k={isInlineTarget:function(n,t){var i=yoi(n,"inline_boundaries_selector").getOr("a[href],code");return lu.is(r.fromDom(t),i)},findRootInline:function(t,i,r){var u,f,e,o=(u=t,f=i,e=r,ot(g.DOM.getParents(e.container(),"*",f),u));return n.from(o[o.length-1])},isRtl:function(n){return"rtl"===g.DOM.getStyle(n,"direction",!0)||(t=n.textContent,woi.test(t));var t},isAtZwsp:function(n){return nk(n)||tk(n)},normalizePosition:sd,normalizeForwards:f(sd,!0),normalizeBackwards:f(sd,!1),hasSameParentBlock:function(n,t,i){var r=tf(t,n),u=tf(i,n);return r&&r===u}},hv=function(t,i){return b.contains(t,i)?th.closest(i,function(n){return aft(n)||gl(n)},(u=t,function(n){return b.eq(u,r.fromDom(n.dom().parentNode))})):n.none();var u},ilt=function(n){var i,t,r;n.dom.isEmpty(n.getBody())&&(n.setContent(""),t=(i=n).getBody(),r=t.firstChild&&i.dom.isBlock(t.firstChild)?t.firstChild:t,i.selection.setCursorLocation(r,0))},boi=function(n,t,i){return ti([c.firstPositionIn(i),c.lastPositionIn(i)],function(r,u){var f=k.normalizePosition(!0,r),e=k.normalizePosition(!1,u),o=k.normalizePosition(!1,t);return n?c.nextPosition(i,o).map(function(n){return n.isEqual(e)&&t.isEqual(f)}).getOr(!1):c.prevPosition(i,o).map(function(n){return n.isEqual(f)&&t.isEqual(e)}).getOr(!1)}).getOr(!0)},koi=function(n,t,i){return bb(n,t,i).isSome()},doi=function(n,t){return i.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===(u=n,e=t,o=r.fromDom(u),s=r.fromDom(e),koi(s,"pre,code",f(b.eq,o)));var u,e,o,s},rlt=function(n,t){return hr(t)&&!1===doi(n,t)||(r=t,i.isElement(r)&&"A"===r.nodeName&&r.hasAttribute("name"))||goi(t);var r},goi=i.hasAttribute("data-mce-bookmark"),nsi=i.hasAttribute("data-mce-bogus"),tsi=i.hasAttributeValue("data-mce-bogus","all"),ir=function(n){return function(n){var r,t,u=0;if(rlt(n,n))return!1;if(!(t=n.firstChild))return!0;r=new ht(t,n);do if(tsi(t))t=r.next(!0);else if(nsi(t))t=r.next();else if(i.isBr(t))u++,t=r.next();else{if(rlt(n,t))return!1;t=r.next()}while(t);return u<=1}(n.dom())},isi=sr("block","position"),rsi=sr("from","to"),hd=function(n,t){var i=r.fromDom(n),u=r.fromDom(t.container());return hv(i,u).map(function(n){return isi(n,t)})},usi=function(t,r,f){var e=hd(t,u.fromRangeStart(f)),o=e.bind(function(u){return c.fromPosition(r,t,u.position()).bind(function(u){return hd(t,u).map(function(u){return e=t,o=r,f=u,i.isBr(f.position().getNode())&&!1===ir(f.block())?c.positionIn(!1,f.block().dom()).bind(function(t){return t.isEqual(f.position())?c.fromPosition(o,e,t).bind(function(n){return hd(e,n)}):n.some(f)}).getOr(f):f;var e,o,f})})});return ti([e,o],rsi).filter(function(n){return u=n,!1===b.eq(u.from().block(),u.to().block())&&(r=n,v.parent(r.from().block()).bind(function(n){return v.parent(r.to().block()).filter(function(t){return b.eq(n,t)})}).isSome())&&(t=n,!1===i.isContentEditableFalse(t.from().block())&&!1===i.isContentEditableFalse(t.to().block()));var t,r,u})},fsi=function(t,i,r){return r.collapsed?usi(t,i,r):n.none()},esi=function(n,t,i){return b.contains(t,n)?v.parents(n,function(n){return i(n)||b.eq(n,t)}).slice(0,-1):[]},ult=function(n,t){return esi(n,t,o(!1))},osi=ult,wo=function(n,t){return[n].concat(ult(n,t))},flt=function(n){var i,t,r=(i=n,t=v.children(i),lf(t,gs).fold(function(){return t},function(n){return t.slice(0,n)}));return l(r,ft.remove),r},elt=function(n,t){var i=wo(t,n);return fi(i.reverse(),ir).each(ft.remove)},ssi=function(n,t,i,f){var e,o;return ir(i)?(lh(i),c.firstPositionIn(i.dom())):(e=f,0===ot(v.prevSiblings(e),function(n){return!ir(n)}).length&&ir(t)&&tt.before(f,r.fromTag("br")),o=c.prevPosition(i.dom(),u.before(f.dom())),l(flt(t),function(n){tt.before(f,n)}),elt(n,t),o)},hsi=function(n,t,i){if(ir(i))return ft.remove(i),ir(t)&&lh(t),c.firstPositionIn(t.dom());var r=c.lastPositionIn(i.dom());return l(flt(t),function(n){tt.append(i,n)}),elt(n,t),r},csi=function(t,i){return b.contains(i,t)?(r=wo(t,i),n.from(r[r.length-1])):n.none();var r},olt=function(n,t){c.positionIn(n,t.dom()).map(function(n){return n.getNode()}).map(r.fromDom).filter(fb).each(ft.remove)},slt=function(n,t,i){return olt(!0,t),olt(!1,i),csi(t,i).fold(f(hsi,n,t,i),f(ssi,n,t,i))},hlt=function(n,t,i,r){return t?slt(n,r,i):slt(n,i,r)},cv=function(n,t){var i,u=r.fromDom(n.getBody());return(i=fsi(u.dom(),t,n.selection.getRng()).bind(function(n){return hlt(u,t,n.from().block(),n.to().block())})).each(function(t){n.selection.setRng(t.toRange())}),i.isSome()},clt=function(n,t){var i=r.fromDom(t),u=f(b.eq,n);return th.ancestor(i,na,u).isSome()},lsi=function(n,t){var i,r,f=c.prevPosition(n.dom(),u.fromRangeStart(t)).isNone(),e=c.nextPosition(n.dom(),u.fromRangeEnd(t)).isNone();return!(clt(i=n,(r=t).startContainer)||clt(i,r.endContainer))&&f&&e},asi=function(n){var t,u,i,f,e=r.fromDom(n.getBody()),o=n.selection.getRng();return lsi(e,o)?((f=n).setContent(""),f.selection.setCursorLocation(),!0):(t=e,u=n.selection,i=u.getRng(),ti([hv(t,r.fromDom(i.startContainer)),hv(t,r.fromDom(i.endContainer))],function(n,r){return!1===b.eq(n,r)&&(i.deleteContents(),hlt(t,!0,n,r).each(function(n){u.setRng(n.toRange())}),!0)}).getOr(!1))},lv=function(n){return!n.selection.isCollapsed()&&asi(n)},bo=function(n){if(!ls(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],i={};return l(n,function(r,u){var o=pl(r),f,e;if(1!==o.length)throw new Error("one and only one name per case");if(f=o[0],e=r[f],i[f]!==undefined)throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!ls(e))throw new Error("case arguments must be an array");t.push(f);i[f]=function(){var o=arguments.length,i,r;if(o!==e.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+e.length+" ("+e+"), got "+o);for(i=new Array(o),r=0;r<i.length;r++)i[r]=arguments[r];return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);return arguments[u].apply(null,i)},match:function(n){var r=pl(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!bp(t,function(n){return as(r,n)}))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[f].apply(null,i)},log:function(n){console.log(n,{constructors:t,constructor:f,params:i})}}}}),i},pi=bo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),llt=function(t,i,u,f){var e=f.getNode(!1===i);return hv(r.fromDom(t),r.fromDom(u.getNode())).map(function(n){return ir(n)?pi.remove(n.dom()):pi.moveToElement(e)}).orThunk(function(){return n.some(pi.moveToElement(e))})},alt=function(t,u,f){return c.fromPosition(u,t,f).bind(function(e){return c=e.getNode(),na(r.fromDom(c))||gl(r.fromDom(c))?n.none():(l=t,s=e,h=function(n){return lft(r.fromDom(n))&&!rf(v,s,l)},kht(!(a=u),v=f).fold(function(){return kht(a,s).fold(o(!1),h)},h)?n.none():u&&i.isContentEditableFalse(e.getNode())?llt(t,u,f,e):!1===u&&i.isContentEditableFalse(e.getNode(!0))?llt(t,u,f,e):u&&fv(f)?n.some(pi.moveToPosition(e)):!1===u&&uv(f)?n.some(pi.moveToPosition(e)):n.none());var l,a,v,s,h,c})},vsi=function(t,r,u){return o=r,s=u.getNode(!1===o),h=o?"after":"before",i.isElement(s)&&s.getAttribute("data-mce-caret")===h?(e=r,f=u.getNode(!1===r),e&&i.isContentEditableFalse(f.nextSibling)?n.some(pi.moveToElement(f.nextSibling)):!1===e&&i.isContentEditableFalse(f.previousSibling)?n.some(pi.moveToElement(f.previousSibling)):n.none()).fold(function(){return alt(t,r,u)},n.some):alt(t,r,u).bind(function(i){return r=t,f=u,i.fold(function(t){return n.some(pi.remove(t))},function(t){return n.some(pi.moveToElement(t))},function(t){return rf(f,t,r)?n.none():n.some(pi.moveToPosition(t))});var r,f});var e,f,o,s,h},ysi=function(n,t){return r=n,f=(i=t).container(),e=i.offset(),!1===u.isTextPosition(i)&&f===r.parentNode&&e>u.before(r).offset()?u(t.container(),t.offset()-1):t;var i,r,f,e},vlt=function(t){return hr(t.previousSibling)?n.some((r=t.previousSibling,i.isText(r)?u(r,r.data.length):u.after(r))):t.previousSibling?c.lastPositionIn(t.previousSibling):n.none();var r},ylt=function(t){return hr(t.nextSibling)?n.some((r=t.nextSibling,i.isText(r)?u(r,0):u.before(r))):t.nextSibling?c.firstPositionIn(t.nextSibling):n.none();var r},psi=function(t,i){return vlt(i).orThunk(function(){return ylt(i)}).orThunk(function(){return f=t,r=i,e=u.before(r.previousSibling?r.previousSibling:r.parentNode),c.prevPosition(f,e).fold(function(){return c.nextPosition(f,u.after(r))},n.some);var f,r,e})},wsi=function(t,i){return ylt(i).orThunk(function(){return vlt(i)}).orThunk(function(){return r=t,f=i,c.nextPosition(r,u.after(f)).fold(function(){return c.prevPosition(r,u.before(f))},n.some);var r,f})},bsi=function(n,t,i){return(e=n,r=t,u=i,e?wsi(r,u):psi(r,u)).map(f(ysi,i));var e,r,u},plt=function(n,t,i){i.fold(function(){n.focus()},function(i){n.selection.setRng(i.toRange(),t)})},ksi=function(n,t){return t&&n.schema.getBlockElements().hasOwnProperty(d.name(t))},dsi=function(t){if(ir(t)){var i=r.fromHtml('<br data-mce-bogus="1">');return ft.empty(t),tt.append(t,i),n.some(u.before(i.dom()))}return n.none()},vh=function(t,r,e){var h,o,s,c=bsi(r,t.getBody(),e.dom()),l=th.ancestor(e,f(ksi,t),(h=t.getBody(),function(n){return n.dom()===h})),a=(o=e,s=c,ti([v.prevSibling(o),v.nextSibling(o),s],function(n,t,r){var s,f=n.dom(),e=t.dom();return i.isText(f)&&i.isText(e)?(s=f.data.length,f.appendData(e.data),ft.remove(t),ft.remove(o),r.container()===e?u(f,s):r):(ft.remove(o),r)}).orThunk(function(){return ft.remove(o),s}));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):l.bind(dsi).fold(function(){plt(t,r,a)},function(i){plt(t,r,n.some(i))})},gsi=function(t,i){var o,e,s,h,f;return(o=t.getBody(),e=i,s=t.selection.getRng(),h=rv(e?1:-1,o,s),f=u.fromRangeStart(h),!1===e&&fv(f)?n.some(pi.remove(f.getNode(!0))):e&&uv(f)?n.some(pi.remove(f.getNode())):vsi(o,e,f)).map(function(n){return n.fold((f=t,h=i,function(n){return f._selectionOverrides.hideFakeCaret(),vh(f,h,r.fromDom(n)),!0}),(o=t,s=i,function(n){var t=s?u.before(n):u.after(n);return o.selection.setRng(t.toRange()),!0}),(e=t,function(n){return e.selection.setRng(n.toRange()),!0}));var e,o,s,f,h}).getOr(!1)},nhi=function(n,t){var u,f=n.selection.getNode();return!!i.isContentEditableFalse(f)&&(u=r.fromDom(n.getBody()),l(gi(u,".mce-offscreen-selection"),ft.remove),vh(n,t,r.fromDom(n.selection.getNode())),ilt(n),!0)},av=function(n,t){return n.selection.isCollapsed()?gsi(n,t):nhi(n,t)},wlt=function(n){var r,t=function(n,t){for(;t&&t!==n;){if(i.isContentEditableTrue(t)||i.isContentEditableFalse(t))return t;t=t.parentNode}return null}(n.getBody(),n.selection.getNode());return i.isContentEditableTrue(t)&&n.dom.isBlock(t)&&n.dom.isEmpty(t)&&(r=n.dom.create("br",{"data-mce-bogus":"1"}),n.dom.setHTML(t,""),t.appendChild(r),n.selection.setRng(u.before(r).toRange())),!0},ko=i.isText,blt=function(n){return ko(n)&&n.data[0]===pt},klt=function(n){return ko(n)&&n.data[n.data.length-1]===pt},dlt=function(n){return n.ownerDocument.createTextNode(pt)},vv=function(n,t){return n?function(n){if(ko(n.previousSibling))return klt(n.previousSibling)||n.previousSibling.appendData(pt),n.previousSibling;if(ko(n))return blt(n)||n.insertData(0,pt),n;var t=dlt(n);return n.parentNode.insertBefore(t,n),t}(t):function(n){if(ko(n.nextSibling))return blt(n.nextSibling)||n.nextSibling.insertData(0,pt),n.nextSibling;if(ko(n))return klt(n)||n.appendData(pt),n;var t=dlt(n);return n.nextSibling?n.parentNode.insertBefore(t,n.nextSibling):n.parentNode.appendChild(t),t}(t)},thi=f(vv,!0),ihi=f(vv,!1),glt=function(n,t){return i.isText(n.container())?vv(t,n.container()):vv(t,n.getNode())},nat=function(n,t){var i=t.get();return i&&n.container()===i&&la(i)},tat=function(t,i){return i.fold(function(i){lo.remove(t.get());var r=thi(i);return t.set(r),n.some(u(r,r.length-1))},function(n){return c.firstPositionIn(n).map(function(n){if(nat(n,t))return u(t.get(),1);lo.remove(t.get());var i=glt(n,!0);return t.set(i),u(i,1)})},function(n){return c.lastPositionIn(n).map(function(n){if(nat(n,t))return u(t.get(),t.get().length-1);lo.remove(t.get());var i=glt(n,!1);return t.set(i),u(i,i.length-1)})},function(i){lo.remove(t.get());var r=ihi(i);return t.set(r),n.some(u(r,1))})},iat=function(t,i){for(var u,r=0;r<t.length;r++)if(u=t[r].apply(null,i),u.isSome())return u;return n.none()},vt=bo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),rat=function(n,t){var i=tf(t,n);return i||n},rhi=function(t,i,r){var u=k.normalizeForwards(r),e=rat(i,u.container());return k.findRootInline(t,e,u).fold(function(){return c.nextPosition(e,u).bind(f(k.findRootInline,t,e)).map(function(n){return vt.before(n)})},n.none)},uhi=function(n,t){return null===df(n,t)},uat=function(n,t,i){return k.findRootInline(n,t,i).filter(f(uhi,t))},fhi=function(t,i,r){var u=k.normalizeBackwards(r);return uat(t,i,u).bind(function(t){return c.prevPosition(t,u).isNone()?n.some(vt.start(t)):n.none()})},ehi=function(t,i,r){var u=k.normalizeForwards(r);return uat(t,i,u).bind(function(t){return c.nextPosition(t,u).isNone()?n.some(vt.end(t)):n.none()})},ohi=function(t,i,r){var u=k.normalizeBackwards(r),e=rat(i,u.container());return k.findRootInline(t,e,u).fold(function(){return c.prevPosition(e,u).bind(f(k.findRootInline,t,e)).map(function(n){return vt.after(n)})},n.none)},fat=function(n){return!1===k.isRtl(cd(n))},yv=function(n,t,i){return iat([rhi,fhi,ehi,ohi],[n,t,i]).filter(fat)},cd=function(n){return n.fold(bi,bi,bi,bi)},eat=function(n){return n.fold(o("before"),o("start"),o("end"),o("after"))},oat=function(n){return n.fold(vt.before,vt.before,vt.after,vt.after)},shi=function(n,t,i,r,u,f){return ti([k.findRootInline(t,i,r),k.findRootInline(t,i,u)],function(t,r){return t!==r&&k.hasSameParentBlock(i,t,r)?vt.after(n?t:r):f}).getOr(f)},hhi=function(n,t){return n.fold(o(!0),function(n){return i=t,!(eat(r=n)===eat(i)&&cd(r)===cd(i));var r,i})},chi=function(t,i){return t?i.fold(gr(n.some,vt.start),n.none,gr(n.some,vt.after),n.none):i.fold(n.none,gr(n.some,vt.before),n.none,gr(n.some,vt.end))},ld=function(n,t,i,r){var u=k.normalizePosition(n,r),e=yv(t,i,u);return yv(t,i,u).bind(f(chi,n)).orThunk(function(){return u=n,s=t,o=i,h=e,a=r,l=k.normalizePosition(u,a),c.fromPosition(u,o,l).map(f(k.normalizePosition,u)).fold(function(){return h.map(oat)},function(n){return yv(s,o,n).map(f(shi,u,s,o,l,n)).filter(f(hhi,h))}).filter(fat);var u,s,o,h,a,l})},go=yv,lhi=ld,sat=(f(ld,!1),f(ld,!0),oat),ad=function(n){return n.fold(vt.start,vt.start,vt.end,vt.end)},ahi=function(n){return nu(n.selection.getSel().modify)},hat=function(n,t,i){var r=n?1:-1;return t.setRng(u(i.container(),i.offset()+r).toRange()),t.getSel().modify("move",n?"forward":"backward","word"),!0},vhi=function(n,t){var r=t.selection.getRng(),i=n?u.fromRangeEnd(r):u.fromRangeStart(r);return!!ahi(t)&&(n&&nk(i)?hat(!0,t.selection,i):!(n||!tk(i))&&hat(!1,t.selection,i))},vd=function(n,t){var i=n.dom.createRng();i.setStart(t.container(),t.offset());i.setEnd(t.container(),t.offset());n.selection.setRng(i)},yd=function(n){return!1!==n.settings.inline_boundaries},cat=function(n,t){n?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},lat=function(n,t,i){return tat(t,i).map(function(t){return vd(n,t),i})},aat=function(n,t){return function(){return!!yd(t)&&vhi(n,t)}},ns={move:function(n,t,i){return function(){return!!yd(n)&&(r=n,e=t,o=i,s=r.getBody(),h=u.fromRangeStart(r.selection.getRng()),c=f(k.isInlineTarget,r),lhi(o,c,s,h).bind(function(n){return lat(r,e,n)})).isSome();var r,e,o,s,h,c}},moveNextWord:f(aat,!0),movePrevWord:f(aat,!1),setupSelectedState:function(n){var t=pu(null),i=f(k.isInlineTarget,n);return n.on("NodeChange",function(r){var e,h,c,o,s;yd(n)&&(e=i,h=n.dom,c=r.parents,o=ot(h.select('*[data-mce-selected="inline-boundary"]'),e),s=ot(c,e),l(ait(o,s),f(cat,!1)),l(ait(s,o),f(cat,!0)),function(n,t){if(n.selection.isCollapsed()&&!0!==n.composing&&t.get()){var i=u.fromRangeStart(n.selection.getRng());u.isTextPosition(i)&&!1===k.isAtZwsp(i)&&(vd(n,lo.removeAndReposition(t.get(),i)),t.set(null))}}(n,t),function(n,t,i,r){if(t.selection.isCollapsed()){var f=ot(r,n);l(f,function(){var r=u.fromRangeStart(t.selection.getRng());go(n,t.getBody(),r).bind(function(n){return lat(t,i,n)})})}}(i,n,t,r.parents))}),t},setCaretPosition:vd},vat=function(n,t){return function(i){return tat(t,i).map(function(t){return ns.setCaretPosition(n,t),!0}).getOr(!1)}},yat=function(n,t,i,r){var e=n.getBody(),o=f(k.isInlineTarget,n);n.undoManager.ignore(function(){var f,s,h;n.selection.setRng((f=i,s=r,(h=document.createRange()).setStart(f.container(),f.offset()),h.setEnd(s.container(),s.offset()),h));n.execCommand("Delete");go(o,e,u.fromRangeStart(n.selection.getRng())).map(ad).map(vat(n,t))});n.nodeChanged()},yhi=function(t,i,u,e){var h,a,s=(h=t.getBody(),a=e.container(),tf(a,h)||h),l=f(k.isInlineTarget,t),v=go(l,s,e);return v.bind(function(t){return u?t.fold(o(n.some(ad(t))),n.none,o(n.some(sat(t))),n.none):t.fold(n.none,o(n.some(sat(t))),n.none,o(n.some(ad(t))))}).map(vat(t,i)).getOrThunk(function(){var n=c.navigate(u,s,e),f=n.bind(function(n){return go(l,s,n)});return v.isSome()&&f.isSome()?k.findRootInline(l,s,e).map(function(n){return i=n,!!ti([c.firstPositionIn(i),c.lastPositionIn(i)],function(n,t){var r=k.normalizePosition(!0,n),u=k.normalizePosition(!1,t);return c.nextPosition(i,r).map(function(n){return n.isEqual(u)}).getOr(!0)}).getOr(!0)&&(vh(t,u,r.fromDom(n)),!0);var i}).getOr(!1):f.bind(function(){return n.map(function(n){return u?yat(t,i,e,n):yat(t,i,n,e),!0})}).getOr(!1)})},pv=function(n,t,i){if(n.selection.isCollapsed()&&!1!==n.settings.inline_boundaries){var r=u.fromRangeStart(n.selection.getRng());return yhi(n,t,i,r)}return!1},yh=sr("start","end"),phi=sr("rng","table","cells"),pat=bo([{removeTable:["element"]},{emptyCells:["cells"]}]),wv=function(n,t){return bet(r.fromDom(n),"td,th",t)},ph=function(n,t){return bb(n,"table",t)},whi=function(n){return!1===b.eq(n.start(),n.end())},wat=function(t,i){return ph(t.start(),i).bind(function(r){return ph(t.end(),i).bind(function(t){return b.eq(r,t)?n.some(r):n.none()})})},bv=function(n){return gi(n,"td,th")},bhi=function(t,i){var r=wv(i.startContainer,t),u=wv(i.endContainer,t);return i.collapsed?n.none():ti([r,u],yh).fold(function(){return r.fold(function(){return u.bind(function(n){return ph(n,t).bind(function(t){return ur(bv(t)).map(function(t){return yh(t,n)})})})},function(n){return ph(n,t).bind(function(t){return he(bv(t)).map(function(t){return yh(n,t)})})})},function(i){return bat(t,i)?n.none():(u=t,ph((r=i).start(),u).bind(function(n){return he(bv(n)).map(function(n){return yh(r.start(),n)})}));var r,u})},bat=function(n,t){return wat(t,n).isSome()},khi=function(n,t){var u,r,i,e,o,s=(u=n,f(b.eq,u));return(r=t,i=s,e=wv(r.startContainer,i),o=wv(r.endContainer,i),ti([e,o],yh).filter(whi).filter(function(n){return bat(i,n)}).orThunk(function(){return bhi(i,r)})).bind(function(n){return wat(t=n,s).map(function(n){return phi(t,n,bv(n))});var t})},kat=function(n,t){return lf(n,function(n){return b.eq(n,t)})},dhi=function(n){return(t=n,ti([kat(t.cells(),t.rng().start()),kat(t.cells(),t.rng().end())],function(n,i){return t.cells().slice(n,i+1)})).map(function(t){var i=n.cells();return t.length===i.length?pat.removeTable(n.table()):pat.emptyCells(t)});var t},ghi=function(n,t){return khi(n,t).bind(dhi)},dat=function(n){var i=[],t;if(n)for(t=0;t<n.rangeCount;t++)i.push(n.getRangeAt(t));return i},gat=dat,nci=function(n){return gc(n,function(n){var t=fk(n);return t?[r.fromDom(t)]:[]})},tci=function(n){return 1<dat(n).length},ici=function(n){return ot(nci(n),na)},rci=function(n){return gi(n,"td[data-mce-selected],th[data-mce-selected]")},nvt=function(n,t){var i=rci(t),r=ici(n);return 0<i.length?i:r},uci=nvt,tvt=function(n){return nvt(gat(n.selection.getSel()),r.fromDom(n.getBody()))},ivt=function(n,t){return l(t,lh),n.selection.setCursorLocation(t[0].dom(),0),!0},fci=function(n,t){return vh(n,!1,t),!0},eci=function(n,t,i,r){return pd(t,r).fold(function(){return r=n,ghi(t,i).map(function(n){return n.fold(f(fci,r),f(ivt,r))});var r},function(t){return kv(n,t)}).getOr(!1)},rvt=function(n,t){return fi(wo(t,n),na)},pd=function(n,t){return fi(wo(t,n),function(n){return"caption"===d.name(n)})},kv=function(t,i){return lh(i),t.selection.setCursorLocation(i.dom(),0),n.some(!0)},oci=function(t,i,u,f,e){return c.navigate(u,t.getBody(),e).bind(function(n){return o=f,v=u,s=e,h=n,c.firstPositionIn(o.dom()).bind(function(n){return c.lastPositionIn(o.dom()).map(function(t){return v?s.isEqual(n)&&h.isEqual(t):s.isEqual(t)&&h.isEqual(n)})}).getOr(!0)?kv(t,f):(l=f,a=n,pd(i,r.fromDom(a.getNode())).map(function(n){return!1===b.eq(n,l)}));var l,a,o,v,s,h}).or(n.some(!0))},sci=function(n,t,i,f){var e=u.fromRangeStart(n.selection.getRng());return rvt(i,f).bind(function(u){return ir(u)?kv(n,u):(f=n,o=i,s=t,h=u,l=e,c.navigate(s,f.getBody(),l).bind(function(n){return rvt(o,r.fromDom(n.getNode())).map(function(n){return!1===b.eq(n,h)})}));var f,o,s,h,l})},hci=function(n,t,i){var f=r.fromDom(n.getBody());return pd(f,i).fold(function(){return sci(n,t,f,i)},function(i){return r=n,o=t,s=f,e=i,h=u.fromRangeStart(r.selection.getRng()),ir(e)?kv(r,e):oci(r,s,o,e,h);var r,o,s,e,h}).getOr(!1)},dv=function(n,t){var i,u,f,e,o,s=r.fromDom(n.selection.getStart(!0)),h=tvt(n);return n.selection.isCollapsed()&&0===h.length?hci(n,t,s):(i=n,u=s,f=r.fromDom(i.getBody()),e=i.selection.getRng(),0!==(o=tvt(i)).length?ivt(i,o):eci(i,f,e,u))},uvt=function(n,t){n.getDoc().execCommand(t,!1,null)},cci=function(n){av(n,!1)||pv(n,!1)||cv(n,!1)||dv(n)||lv(n,!1)||(uvt(n,"Delete"),ilt(n))},lci=function(n){av(n,!0)||pv(n,!0)||cv(n,!0)||dv(n)||lv(n,!0)||uvt(n,"ForwardDelete")},fvt=function(t){return function(i,u){return n.from(u).map(r.fromDom).filter(d.isElement).bind(function(u){return(s=t,h=i,c=u.dom(),f=function(n){return oti(n,s)},th.closest(r.fromDom(c),function(n){return f(n).isSome()},function(n){return b.eq(r.fromDom(h),n)}).bind(f)).or((e=t,o=u.dom(),n.from(g.DOM.getStyle(o,e,!0))));var e,o,s,h,c,f}).getOr("")}},gv={getFontSize:fvt("font-size"),getFontFamily:gr(function(n){return n.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},fvt("font-family")),toPt:function(n,t){return/[0-9.]+px$/.test(n)?(r=72*parseInt(n,10)/96,u=t||0,i=Math.pow(10,u),Math.round(r*i)/i+"pt"):n;var r,u,i}},evt=function(n){return c.firstPositionIn(n.getBody()).map(function(n){var t=n.container();return i.isText(t)?t.parentNode:t})},ovt=function(t){return n.from(t.selection.getRng()).bind(function(i){var r,u,f=t.getBody();return u=f,(r=i).startContainer===u&&0===r.startOffset?n.none():n.from(t.selection.getStart(!0))})},svt=function(n,t){var i,u,r;return/^[0-9\.]+$/.test(t)?(i=parseInt(t,10),1<=i&&i<=7)?(u=ufi(n),r=ffi(n),r?r[i-1]||t:u[i-1]||t):t:t},wd=function(n,t){return n&&t&&n.startContainer===t.startContainer&&n.startOffset===t.startOffset&&n.endContainer===t.endContainer&&n.endOffset===t.endOffset},hvt=function(n,t,i){return null!==function(n,t,i){for(;n&&n!==t;){if(i(n))return n;n=n.parentNode}return null}(n,t,i)},aci=function(n,t,i){return hvt(n,t,function(n){return n.nodeName===i})},bd=function(n){return n&&"TABLE"===n.nodeName},cvt=function(n,t,r){for(var u=new ht(t,n.getParent(t.parentNode,n.isBlock)||n.getRoot());t=u[r?"prev":"next"]();)if(i.isBr(t))return!0},kd=function(t,r,u,f,e){var l,s,h,o,a,v,c=t.getRoot(),y=t.schema.getNonEmptyElements();if(h=t.getParent(e.parentNode,t.isBlock)||c,f&&i.isBr(e)&&r&&t.isEmpty(h))return n.some(et(e.parentNode,t.nodeIndex(e)));for(l=new ht(e,h);o=l[f?"prev":"next"]();){if("false"===t.getContentEditableParent(o)||(v=c,si(a=o)&&!1===hvt(a,v,ku)))return n.none();if(i.isText(o)&&0<o.nodeValue.length)return!1===aci(o,c,"A")?n.some(et(o,f?o.nodeValue.length:0)):n.none();if(t.isBlock(o)||y[o.nodeName.toLowerCase()])return n.none();s=o}return u&&s?n.some(et(s,0)):n.none()},lvt=function(t,r,u,f){var e,s,v,o,y,h,l,p,w,b,a=t.getRoot(),c=!1;if(e=f[(u?"start":"end")+"Container"],s=f[(u?"start":"end")+"Offset"],l=i.isElement(e)&&s===e.childNodes.length,y=t.schema.getNonEmptyElements(),h=u,si(e))return n.none();if(i.isElement(e)&&s>e.childNodes.length-1&&(h=!1),i.isDocument(e)&&(e=a,s=0),e===a){if(h&&(o=e.childNodes[0<s?s-1:0])&&(si(o)||y[o.nodeName]||bd(o)))return n.none();if(e.hasChildNodes()){if((s=Math.min(!h&&0<s?s-1:s,e.childNodes.length-1),e=e.childNodes[s],s=i.isText(e)&&l?e.data.length:0,!r&&e===a.lastChild&&bd(e))||function(n,t){for(;t&&t!==n;){if(i.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(a,e)||si(e))return n.none();if(e.hasChildNodes()&&!1===bd(e)){v=new ht(o=e,a);do{if(i.isContentEditableFalse(o)||si(o)){c=!1;break}if(i.isText(o)&&0<o.nodeValue.length){s=h?0:o.nodeValue.length;e=o;c=!0;break}if(y[o.nodeName.toLowerCase()]&&(!(p=o)||!/^(TD|TH|CAPTION)$/.test(p.nodeName))){s=t.nodeIndex(o);e=o.parentNode;h||s++;c=!0;break}}while(o=h?v.next():v.prev())}}}return r&&(i.isText(e)&&0===s&&kd(t,l,r,!0,e).each(function(n){e=n.container();s=n.offset();c=!0}),i.isElement(e)&&((o=e.childNodes[s])||(o=e.childNodes[s-1]),!o||!i.isBr(o)||(b="A",(w=o).previousSibling&&w.previousSibling.nodeName===b)||cvt(t,o,!1)||cvt(t,o,!0)||kd(t,l,r,!0,o).each(function(n){e=n.container();s=n.offset();c=!0}))),h&&!r&&i.isText(e)&&s===e.nodeValue.length&&kd(t,l,r,!1,e).each(function(n){e=n.container();s=n.offset();c=!0}),c?n.some(et(e,s)):n.none()},ny=function(t,i){var u=i.collapsed,r=i.cloneRange(),f=et.fromRangeStart(i);return lvt(t,u,!0,r).each(function(n){u&&et.isAbove(f,n)||r.setStart(n.container(),n.offset())}),u||lvt(t,u,!1,r).each(function(n){r.setEnd(n.container(),n.offset())}),u&&r.collapse(!0),wd(i,r)?n.none():n.some(r)},avt=function(n,t,i){var r=n.create("span",{},"&nbsp;");i.parentNode.insertBefore(r,i);t.scrollIntoView(r);n.remove(r)},vvt=function(n,t,i,r){var u=n.createRng();r?(u.setStartBefore(i),u.setEndBefore(i)):(u.setStartAfter(i),u.setEndAfter(i));t.setRng(u)},vci=function(n,t){var f,c,s=n.selection,r=n.dom,u=s.getRng(),e,i,l;ny(r,u).each(function(n){u.setStart(n.startContainer,n.startOffset);u.setEnd(n.endContainer,n.endOffset)});e=u.startOffset;i=u.startContainer;1===i.nodeType&&i.hasChildNodes()&&(l=e>i.childNodes.length-1,i=i.childNodes[Math.min(e,i.childNodes.length-1)]||i,e=l&&3===i.nodeType?i.nodeValue.length:0);var o=r.getParent(i,r.isBlock),h=o?r.getParent(o.parentNode,r.isBlock):null,a=h?h.nodeName.toUpperCase():"",v=t&&t.ctrlKey;"LI"!==a||v||(o=h);i&&3===i.nodeType&&e>=i.nodeValue.length&&(function(n,t,i){for(var r,u=new ht(t,i),f=n.getNonEmptyElements();r=u.next();)if(f[r.nodeName.toLowerCase()]||0<r.length)return!0}(n.schema,i,o)||(f=r.create("br"),u.insertNode(f),u.setStartAfter(f),u.setEndAfter(f),c=!0));f=r.create("br");u.insertNode(f);avt(r,s,f);vvt(r,s,f,c);n.undoManager.add()},yci=function(n,t){var i=r.fromTag("br");tt.before(r.fromDom(t),i);n.undoManager.add()},pci=function(n,t){wci(n.getBody(),t)||tt.after(r.fromDom(t),r.fromTag("br"));var i=r.fromTag("br");tt.after(r.fromDom(t),i);avt(n.dom,n.selection,i.dom());vvt(n.dom,n.selection,i.dom(),!1);n.undoManager.add()},wci=function(n,t){return r=u.after(t),!!i.isBr(r.getNode())||c.nextPosition(n,u.after(t)).map(function(n){return i.isBr(n.getNode())}).getOr(!1);var r},yvt=function(n){return n&&"A"===n.nodeName&&"href"in n},bci=function(n){return n.fold(o(!1),yvt,yvt,o(!1))},kci=function(n,t){t.fold(ss,f(yci,n),f(pci,n),ss)},pvt=function(n,t){var i,r,e,o=(i=n,r=f(k.isInlineTarget,i),e=u.fromRangeStart(i.selection.getRng()),go(r,i.getBody(),e).filter(bci));o.isSome()?o.each(f(kci,n)):vci(n,t)},dd=bo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),dci=(dd.before,dd.on,dd.after,function(n){return n.fold(bi,bi,bi)}),ty=bo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gci=sr("start","soffset","finish","foffset"),wvt={domRange:ty.domRange,relative:ty.relative,exact:ty.exact,exactFromRange:function(n){return ty.exact(n.start(),n.soffset(),n.finish(),n.foffset())},range:gci,getWin:function(n){var t=n.match({domRange:function(n){return r.fromDom(n.startContainer)},relative:function(n){return dci(n)},exact:function(n){return n}});return v.defaultView(t)}},nli=cu.detect().browser,bvt=function(n,t){var i=d.isText(t)?wct(t).length:v.children(t).length+1;return i<n?i:n<0?0:n},tli=function(n){return wvt.range(n.start(),bvt(n.soffset(),n.start()),n.finish(),bvt(n.foffset(),n.finish()))},kvt=function(n,t){return b.contains(n,t)||b.eq(n,t)},dvt=function(n){return function(t){return kvt(n,t.start())&&kvt(n,t.finish())}},ili=function(n){return!0===n.inline||nli.isIE()},rli=function(n){return wvt.range(r.fromDom(n.startContainer),n.startOffset,r.fromDom(n.endContainer),n.endOffset)},uli=function(t){var i=t.getSelection();return(i&&0!==i.rangeCount?n.from(i.getRangeAt(0)):n.none()).map(rli)},fli=function(n){var t=v.defaultView(n);return uli(t.dom()).filter(dvt(n))},eli=function(t,i){return n.from(i).filter(dvt(t)).map(tli)},oli=function(t){var i=document.createRange();try{return i.setStart(t.start().dom(),t.soffset()),i.setEnd(t.finish().dom(),t.foffset()),n.some(i)}catch(r){return n.none()}},gvt=function(t){return(t.bookmark?t.bookmark:n.none()).bind(f(eli,r.fromDom(t.getBody()))).bind(oli)},iy=function(t){var i=ili(t)?fli(r.fromDom(t.getBody())):n.none();t.bookmark=i.isSome()?i:t.bookmark},sli=function(n){gvt(n).each(function(t){n.selection.setRng(t)})},nyt=gvt,hli=function(n,t){var i=n.settings,r=n.dom,u=n.selection,f=n.formatter,e=/[a-z%]+$/i.exec(i.indentation)[0],o=parseInt(i.indentation,10),s=n.getParam("indent_use_margin",!1);n.queryCommandState("InsertUnorderedList")||n.queryCommandState("InsertOrderedList")||(i.forced_root_block||r.getParent(u.getNode(),r.isBlock)||f.apply("div"),l(u.getSelectedBlocks(),function(n){return function(n,t,i,r,u,f){var e,o;"false"!==n.getContentEditable(f)&&"LI"!==f.nodeName&&(e=i?"margin":"padding",(e="TABLE"===f.nodeName?"margin":e,e+="rtl"===n.getStyle(f,"direction",!0)?"Right":"Left","outdent"===t)?(o=Math.max(0,parseInt(f.style[e]||0,10)-r),n.setStyle(f,e,o?o+u:"")):(o=parseInt(f.style[e]||0,10)+r+u,n.setStyle(f,e,o)))}(r,t,s,o,e,n)}))},ry=t.each,cli=t.extend,lli=t.map,ali=t.inArray;iyt=t.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");wh=function(n){var e,u,r=this,i={},f=function(){return!1},o=function(){return!0},s,h;e=(n=n||{}).scope||r;u=n.toggleEvent||f;s=function(n,e,o,s){var h,l,c;if(!1===e&&(e=f),e)for(e={func:e},s&&t.extend(e,s),c=(l=n.toLowerCase().split(" ")).length;c--;)n=l[c],(h=i[n])||(h=i[n]=[],u(n,!0)),o?h.unshift(e):h.push(e);return r};h=function(n,t){var o,f,s,h,e;if(n)for(o=(h=n.toLowerCase().split(" ")).length;o--;){if(n=h[o],f=i[n],!n){for(s in i)u(s,!1),delete i[s];return r}if(f){if(t)for(e=f.length;e--;)f[e].func===t&&(f=f.slice(0,e).concat(f.slice(e+1)),i[n]=f);else f.length=0;f.length||(u(n,!1),delete i[n])}}else{for(n in i)u(n,!1);i={}}return r};r.fire=function(t,r){var s,u,l,c;if(t=t.toLowerCase(),(r=r||{}).type=t,r.target||(r.target=e),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=o},r.stopPropagation=function(){r.isPropagationStopped=o},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=o},r.isDefaultPrevented=f,r.isPropagationStopped=f,r.isImmediatePropagationStopped=f),n.beforeFire&&n.beforeFire(r),s=i[t])for(u=0,l=s.length;u<l;u++){if((c=s[u]).once&&h(t,c.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===c.func.call(e,r))return r.preventDefault(),r}return r};r.on=s;r.off=h;r.once=function(n,t,i){return s(n,t,i,{once:!0})};r.has=function(n){return n=n.toLowerCase(),!(!i[n]||0===i[n].length)}};wh.isNative=function(n){return!!iyt[n.toLowerCase()]};var te,bh=function(n){return n._eventDispatcher||(n._eventDispatcher=new wh({scope:n,toggleEvent:function(t,i){wh.isNative(t)&&n.toggleNativeEvent&&n.toggleNativeEvent(t,i)}})),n._eventDispatcher},uy={fire:function(n,t,i){if(this.removed&&"remove"!==n)return t;if(t=bh(this).fire(n,t,i),!1!==i&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(n,t,!1),r=r.parent();return t},on:function(n,t,i){return bh(this).on(n,t,i)},off:function(n,t){return bh(this).off(n,t)},once:function(n,t){return bh(this).once(n,t)},hasEventListeners:function(n){return bh(this).has(n)}},vli=function(n,t){return n.fire("PreProcess",t)},yli=function(n,t){return n.fire("PostProcess",t)},pli=function(n){return n.fire("remove")},wli=function(n,t){return n.fire("SwitchMode",{mode:t})},bli=function(n,t,i,r){n.fire("ObjectResizeStart",{target:t,width:i,height:r})},kli=function(n,t,i,r){n.fire("ObjectResized",{target:t,width:i,height:r})},gd=function(n,t,i){try{n.getDoc().execCommand(t,!1,i)}catch(r){}},ryt=function(n,t){var i,u,f;i=r.fromDom(n.getBody());u="mce-content-readonly";f=t;io.has(i,u)&&!1===f?io.remove(i,u):f&&io.add(i,u);t?(n.selection.controlSelection.hideResizeRect(),n.readonly=!0,n.getBody().contentEditable="false"):(n.readonly=!1,n.getBody().contentEditable="true",gd(n,"StyleWithCSS",!1),gd(n,"enableInlineTableEditing",!1),gd(n,"enableObjectResizing",!1),n.focus(),n.nodeChanged())},dli=function(n){return n.readonly?"readonly":"design"},fy=g.DOM,ey=function(n,t){return"selectionchange"===t?n.getDoc():!n.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?n.getDoc().documentElement:n.settings.event_root?(n.eventRoot||(n.eventRoot=fy.select(n.settings.event_root)[0]),n.eventRoot):n.getBody()},uyt=function(n,t,i){var r;(r=n).hidden||r.readonly?!0===n.readonly&&i.preventDefault():n.fire(t,i)},fyt=function(n,t){var r,i;if(n.delegates||(n.delegates={}),!n.delegates[t]&&!n.removed)if(r=ey(n,t),n.settings.event_root){if(te||(te={},n.editorManager.on("removeEditor",function(){var t;if(!n.editorManager.activeEditor&&te){for(t in te)n.dom.unbind(ey(n,t));te=null}})),te[t])return;i=function(i){for(var f,e=i.target,r=n.editorManager.get(),u=r.length;u--;)f=r[u].getBody(),(f===e||fy.isChildOf(e,f))&&uyt(r[u],t,i)};te[t]=i;fy.bind(r,t,i)}else i=function(i){uyt(n,t,i)},fy.bind(r,t,i),n.delegates[t]=i},eyt={bindPendingEventDelegates:function(){var n=this;t.each(n._pendingNativeEvents,function(t){fyt(n,t)})},toggleNativeEvent:function(n,t){var i=this;"focus"!==n&&"blur"!==n&&(t?i.initialized?fyt(i,n):i._pendingNativeEvents?i._pendingNativeEvents.push(n):i._pendingNativeEvents=[n]:i.initialized&&(i.dom.unbind(ey(i,n),n,i.delegates[n]),delete i.delegates[n]))},unbindAllNativeEvents:function(){var i,n=this,r=n.getBody(),t=n.dom;if(n.delegates){for(i in n.delegates)n.dom.unbind(ey(n,i),i,n.delegates[i]);delete n.delegates}!n.inline&&r&&t&&(r.onload=null,t.unbind(n.getWin()),t.unbind(n.getDoc()));t&&(t.unbind(r),t.unbind(n.getContainer()))}},oyt=eyt=t.extend({},uy,eyt),ng=t.each,tg=t.explode,gli={f9:120,f10:121,f11:122},syt=t.makeMap("alt,ctrl,shift,meta,access");var nai=function(t){var i=t!==undefined?t.dom():document;return n.from(i.activeElement).map(r.fromDom)},cyt=function(n){var t=v.owner(n).dom();return n.dom()===t.activeElement},tai=function(n){return nai(v.owner(n)).filter(function(t){return n.dom().contains(t.dom())})},iai=function(t,i){return(u=i,u.collapsed?n.from(ho(u.startContainer,u.startOffset)).map(r.fromDom):n.none()).bind(function(i){return gti(i)?n.some(i):!1===b.contains(t,i)?n.some(t):n.none()});var u},lyt=function(n,t){iai(r.fromDom(n.getBody()),t).bind(function(n){return c.firstPositionIn(n.dom())}).fold(function(){n.selection.normalize()},function(t){return n.selection.setRng(t.toRange())})},ig=function(n){if(n.setActive)try{n.setActive()}catch(t){n.focus()}else n.focus()},rai=function(n){var t,i=n.getBody();return i&&(t=r.fromDom(i),cyt(t)||tai(t).isSome())},ayt=function(n){return n.inline?rai(n):(t=n).iframeElement&&cyt(r.fromDom(t.iframeElement));var t},rg=function(n){return n.editorManager.setActive(n)},uai=function(n,t){n.removed||(t?rg(n):function(n){var f=n.selection,e=n.settings.content_editable,t=n.getBody(),i=f.getRng(),r,o,u;if(n.quirks.refreshContentEditable(),u=(r=n,o=f.getNode(),r.dom.getParent(o,function(n){return"true"===r.dom.getContentEditable(n)})),n.$.contains(t,u))return ig(u),lyt(n,i),rg(n);n.bookmark!==undefined&&!1===ayt(n)&&nyt(n).each(function(t){n.selection.setRng(t);i=t});e||(s.opera||ig(t),n.getWin().focus());(s.gecko||e)&&(ig(t),lyt(n,i));rg(n)}(n))},kh=ayt,vyt=function(n,t){return t.dom()[n]},yyt=function(n,t){return parseInt(gut(t,n),10)},fai=f(vyt,"clientWidth"),eai=f(vyt,"clientHeight"),oai=f(yyt,"margin-top"),sai=f(yyt,"margin-left"),pyt=function(n,t,i){var f,u,h,c,e,l,o,s,a,y,p=r.fromDom(n.getBody()),w=n.inline?p:v.documentElement(p),b=(f=n.inline,h=t,c=i,e=(u=w).dom().getBoundingClientRect(),{x:h-(f?e.left+u.dom().clientLeft+sai(u):0),y:c-(f?e.top+u.dom().clientTop+oai(u):0)});return o=b.x,s=b.y,a=fai(l=w),y=eai(l),0<=o&&0<=s&&o<=a&&s<=y},hai=function(t){var i,u=t.inline?t.getBody():t.getContentAreaContainer();return(i=u,n.from(i).map(r.fromDom)).map(function(n){return b.contains(v.owner(n),n)}).getOr(!1)};var kyt=bt.PluginManager,cai=function(n,t){var i=function(n,t){for(var i in kyt.urls)if(kyt.urls[i]+"/plugin"+t+".js"===n)return i;return null}(t,n.suffix);return i?"Failed to load plugin: "+i+" from url "+t:"Failed to load plugin url: "+t},dyt=function(n,t){n.notificationManager.open({type:"error",text:t})},ug=function(n,t){n._skinLoaded?dyt(n,t):n.on("SkinLoaded",function(){dyt(n,t)})},lai=function(n,t){ug(n,cai(n,t))},aai=function(n,t){ug(n,"Failed to upload image: "+t)},vai=ug,gyt=function(){for(var n,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];n=window.console;n&&(n.error?n.error.apply(n,arguments):n.log.apply(n,arguments))},dr=bt.PluginManager,ie=bt.ThemeManager;var bai=function(n){return ce.getOrDie("atob")(n)},npt=function(n){var t,i,r=decodeURIComponent(n).split(",");return(i=/data:([^;]+)/.exec(r[0]))&&(t=i[1]),{type:t,data:r[1]}},tpt=function(n){return 0===n.indexOf("blob:")?(t=n,new oi(function(n,i){var u=function(){i("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")},r;try{r=new fg;r.open("GET",t,!0);r.responseType="blob";r.onload=function(){200===this.status?n(this.response):u()};r.onerror=u;r.send()}catch(f){u()}})):0===n.indexOf("data:")?(i=n,new oi(function(n){var u,r,t,f=npt(i);try{u=bai(f.data)}catch(e){return void n(new Blob([]))}for(r=new wai(u.length),t=0;t<r.length;t++)r[t]=u.charCodeAt(t);n(new Blob([r],{type:f.type}))})):null;var t,i},kai=function(n){return new oi(function(t){var i=new pai;i.onloadend=function(){t(i.result)};i.readAsDataURL(n)})},ipt=npt,dai=0,rpt=function(n){return(n||"blobid")+dai++},gai=function(n,t,i,r){var f,u;0!==t.src.indexOf("blob:")?(f=ipt(t.src).data,(u=n.findFirst(function(n){return n.base64()===f}))?i({image:t,blobInfo:u}):tpt(t.src).then(function(r){u=n.create(rpt(),r,f);n.add(u);i({image:t,blobInfo:u})},function(n){r(n)})):(u=n.getByUri(t.src))?i({image:t,blobInfo:u}):tpt(t.src).then(function(r){kai(r).then(function(e){f=ipt(e).data;u=n.create(rpt(),r,f);n.add(u);i({image:t,blobInfo:u})})},function(n){r(n)})},nvi=function(n){return n?n.getElementsByTagName("img"):[]},tvi=0,eg={uuid:function(n){return n+tvi+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t}};var og=function(n,t){return n.hasOwnProperty(t.nodeName)},rvi=function(n,t){return i.isText(t)&&(0===t.nodeValue.length||/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||og(n,t.nextSibling)))?!0:!1},uvi=function(n){var u,a,v,y,p,f,o,w,b,k,s,ut=n.settings,d=n.dom,h=n.selection,g=n.schema,c=g.getBlockElements(),t=h.getStart(),l=n.getBody(),nt,tt,it,rt,e;if(s=ut.forced_root_block,t&&i.isElement(t)&&s&&(k=l.nodeName.toLowerCase(),g.isValidChild(k,s.toLowerCase())&&(nt=c,tt=l,it=t,!cit(osi(r.fromDom(it),r.fromDom(tt)),function(n){return og(nt,n.dom())})))){for(a=(u=h.getRng()).startContainer,v=u.startOffset,y=u.endContainer,p=u.endOffset,b=kh(n),t=l.firstChild;t;)if(rt=c,e=t,i.isText(e)||i.isElement(e)&&!og(rt,e)&&!tr(e)){if(rvi(c,t)){t=(o=t).nextSibling;d.remove(o);continue}f||(f=d.create(s,n.settings.forced_root_block_attrs),t.parentNode.insertBefore(f,t),w=!0);t=(o=t).nextSibling;f.appendChild(o)}else f=null,t=t.nextSibling;w&&b&&(u.setStart(a,v),u.setEnd(y,p),h.setRng(u),n.nodeChanged())}},fvi=function(n){n.settings.forced_root_block&&n.on("NodeChange",f(uvi,n))},upt=function(n){return v.firstChild(n).fold(o([n]),function(t){return[n].concat(upt(t))})},sg=function(n){return v.lastChild(n).fold(o([n]),function(t){return"br"===d.name(t)?v.prevSibling(t).map(function(t){return[n].concat(sg(t))}).getOr([]):[n].concat(sg(t))})},evi=function(t,u){return ti([(c=u,o=c.startContainer,l=c.startOffset,i.isText(o)?0===l?n.some(r.fromDom(o)):n.none():n.from(o.childNodes[l]).map(r.fromDom)),(s=u,e=s.endContainer,h=s.endOffset,i.isText(e)?h===e.data.length?n.some(r.fromDom(e)):n.none():n.from(e.childNodes[h-1]).map(r.fromDom))],function(n,i){var r=fi(upt(t),f(b.eq,n)),u=fi(sg(t),f(b.eq,i));return r.isSome()&&u.isSome()}).getOr(!1);var s,e,h,c,o,l},hg=function(n,i,r,u){var f=r,e=new ht(r,f),o=n.schema.getNonEmptyElements();do{if(3===r.nodeType&&0!==t.trim(r.nodeValue).length)return void(u?i.setStart(r,0):i.setEnd(r,r.nodeValue.length));if(o[r.nodeName]&&!/^(TD|TH)$/.test(r.nodeName))return void(u?i.setStartBefore(r):"BR"===r.nodeName?i.setEndBefore(r):i.setEndAfter(r));if(s.ie&&s.ie<11&&n.isBlock(r)&&n.isEmpty(r))return void(u?i.setStart(r,0):i.setEnd(r,0))}while(r=u?e.next():e.prev());"BODY"===f.nodeName&&(u?i.setStart(f,0):i.setEnd(f,f.childNodes.length))},cg=function(n){var t=n.selection.getSel();return t&&0<t.rangeCount};var ts,oy,fpt=function(n){var u,t,i,r;return r=n.getBoundingClientRect(),t=(u=n.ownerDocument).documentElement,i=u.defaultView,{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}},svi=function(n,t){return i=(o=n).inline?fpt(o.getBody()):{left:0,top:0},u=(e=n).getBody(),r=e.inline?{left:u.scrollLeft,top:u.scrollTop}:{left:0,top:0},{pageX:(f=function(n,t){var r,u,f,i,e,o,s;return t.target.ownerDocument!==n.getDoc()?(r=fpt(n.getContentAreaContainer()),u=(i=(f=n).getBody(),e=f.getDoc().documentElement,o={left:i.scrollLeft,top:i.scrollTop},s={left:i.scrollLeft||e.scrollLeft,top:i.scrollTop||e.scrollTop},f.inline?o:s),{left:t.pageX-r.left+u.left,top:t.pageY-r.top+u.top}):{left:t.pageX,top:t.pageY}}(n,t)).left-i.left+r.left,pageY:f.top-i.top+r.top};var i,r,f,e,u,o},dh=i.isContentEditableFalse,hvi=i.isContentEditableTrue,ept=function(n){n&&n.parentNode&&n.parentNode.removeChild(n)},cvi=function(n,t){return function(i){var r,o,s;if(0===i.button&&(r=h.find(t.dom.getParents(i.target),ct.or(dh,hvi)),o=t.getBody(),dh(s=r)&&s!==o)){var u=t.dom.getPos(r),f=t.getBody(),e=t.getDoc().documentElement;n.element=r;n.screenX=i.screenX;n.screenY=i.screenY;n.maxX=(t.inline?f.scrollWidth:e.offsetWidth)-2;n.maxY=(t.inline?f.scrollHeight:e.offsetHeight)-2;n.relX=i.pageX-u.x;n.relY=i.pageY-u.y;n.width=r.offsetWidth;n.height=r.offsetHeight;n.ghost=function(n,t,i,r){var u=t.cloneNode(!0),f;return n.dom.setStyles(u,{width:i,height:r}),n.dom.setAttrib(u,"data-mce-selected",null),f=n.dom.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),n.dom.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:i,height:r}),n.dom.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f}(t,r,n.width,n.height)}}},lvi=function(n,t){return function(i){var r,e,s,h,c,u,o,l,f;!n.dragging||(l=(c=t).selection,f=l.getSel().getRangeAt(0).startContainer,u=3===f.nodeType?f.parentNode:f,o=n.element,u===o||c.dom.isChildOf(u,o)||dh(u))||(r=(s=n.element,(h=s.cloneNode(!0)).removeAttribute("data-mce-selected"),h),e=t.fire("drop",{targetClone:r,clientX:i.clientX,clientY:i.clientY}),e.isDefaultPrevented()||(r=e.targetClone,t.undoManager.transact(function(){ept(n.element);t.insertContent(t.dom.getOuterHTML(r));t._selectionOverrides.hideFakeCaret()})));opt(n)}},opt=function(n){n.dragging=!1;n.element=null;ept(n.ghost)},avi=function(n){var r,h,f,c,o,u,t,i,l,s,a,e={};r=g.DOM;u=document;h=cvi(e,n);t=e;i=n;l=gt.throttle(function(n,t){i._selectionOverrides.hideFakeCaret();i.selection.placeCaretAt(n,t)},0);f=function(n){var u,r,f,e,o,s,h,c,a,v,y,p,b=Math.max(Math.abs(n.screenX-t.screenX),Math.abs(n.screenY-t.screenY)),w;if(t.element&&!t.dragging&&10<b){if(i.fire("dragstart",{target:t.element}).isDefaultPrevented())return;t.dragging=!0;i.focus()}t.dragging&&(w=(y=t,{pageX:(p=svi(i,n)).pageX-y.relX,pageY:p.pageY+5}),a=t.ghost,v=i.getBody(),a.parentNode!==v&&v.appendChild(a),u=t.ghost,r=w,f=t.width,e=t.height,o=t.maxX,s=t.maxY,c=h=0,u.style.left=r.pageX+"px",u.style.top=r.pageY+"px",r.pageX+f>o&&(h=r.pageX+f-o),r.pageY+e>s&&(c=r.pageY+e-s),u.style.width=f-h+"px",u.style.height=e-c+"px",l(n.clientX,n.clientY))};c=lvi(e,n);s=e;o=function(){s.dragging&&a.fire("dragend");opt(s)};(a=n).on("mousedown",h);n.on("mousemove",f);n.on("mouseup",c);r.bind(u,"mousemove",f);r.bind(u,"mouseup",o);n.on("remove",function(){r.unbind(u,"mousemove",f);r.unbind(u,"mouseup",o)})},vvi=function(n){var t;avi(n);(t=n).on("drop",function(n){var i="undefined"!=typeof n.clientX?t.getDoc().elementFromPoint(n.clientX,n.clientY):null;(dh(i)||dh(t.dom.getContentEditableParent(i)))&&n.preventDefault()})},lg=function(n){return h.reduce(n,function(n,t){return n.concat(function(n){var r=function(t){return h.map(t,function(t){return(t=bf(t)).node=n,t})},t;return i.isElement(n)?r(n.getClientRects()):i.isText(n)?(t=n.ownerDocument.createRange(),t.setStart(n,0),t.setEnd(n,n.data.length),r(t.getClientRects())):void 0}(t))},[])};(oy=ts||(ts={}))[oy.Up=-1]="Up";oy[oy.Down=1]="Down";var spt=function(n,t,i,r,u,f){var o,s,c=0,e=[],l=function(r){var l,f,o;for(o=lg([r]),-1===n&&(o=o.reverse()),l=0;l<o.length;l++)if(f=o[l],!i(f,s)){if(0<e.length&&t(f,h.last(e))&&c++,f.line=c,u(f))return!0;e.push(f)}};return(s=h.last(f.getClientRects()))&&(l(o=f.getNode()),function(n,t,i,r){for(;r=vo(r,n,uk,t);)if(i(r))return}(n,r,l,o)),e},yvi=f(spt,ts.Up,oo,so),pvi=f(spt,ts.Down,so,oo),hpt=function(n){return function(t){return i=n,t.line>i;var i}},ag=function(n){return function(t){return i=n,t.line===i;var i}},wvi=i.isContentEditableFalse,bvi=vo,vg=function(n,t){return Math.abs(n.left-t)},yg=function(n,t){return Math.abs(n.right-t)},cpt=function(n,t){return n>=t.left&&n<=t.right},sy=function(n,t){return h.reduce(n,function(n,i){var r,u;return r=Math.min(vg(n,t),yg(n,t)),u=Math.min(vg(i,t),yg(i,t)),cpt(t,i)?i:cpt(t,n)?n:u===r&&wvi(i.node)?i:u<r?i:n})},lpt=function(n,t,i,r){for(;r=bvi(r,n,uk,t);)if(i(r))return},kvi=function(n,t,i){var r,a,o,s,c,u,e,l,v=lg((a=n,h.filter(h.toArray(a.getElementsByTagName("*")),kr))),y=h.filter(v,function(n){return i>=n.top&&i<=n.bottom});return(r=sy(y,t))&&(r=sy((c=n,l=function(n,t){var i;return i=h.filter(lg([t]),function(t){return!n(t,u)}),e=e.concat(i),0===i.length},(e=[]).push(u=r),lpt(ts.Up,c,f(l,oo),u.node),lpt(ts.Down,c,f(l,so),u.node),e),t))&&kr(r.node)?(s=t,{node:(o=r).node,before:vg(o,s)<yg(o,s)}):null},apt=function(n,t,i){return!i.collapsed&&tu(i.getClientRects(),function(i,r){return i||(f=t,(e=n)>=(u=r).left&&e<=u.right&&f>=u.top&&f<=u.bottom);var u,e,f},!1)},dvi=function(n){var t=uet(function(){if(!n.removed&&n.selection.getRng().collapsed){var t=ka(n,n.selection.getRng(),!1);n.selection.setRng(t)}},0);n.on("focus",function(){t.throttle()});n.on("blur",function(){t.cancel()})},y={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(n){return n.shiftKey||n.ctrlKey||n.altKey||this.metaKeyPressed(n)},metaKeyPressed:function(n){return s.mac?n.metaKey:n.ctrlKey&&!n.altKey}},pg=i.isContentEditableTrue,ef=i.isContentEditableFalse,gvi=fv,nyi=uv,hy=function(n,t){for(var i=n.getBody();t&&t!==i;){if(pg(t)||ef(t))return t;t=t.parentNode}return null},tyi=function(n){var t,v,c,a=n.getBody(),f=kfi(n.getBody(),function(t){return n.dom.isBlock(t)},function(){return kh(n)}),e="sel-"+n.dom.uniqueId(),p=function(t){t&&n.selection.setRng(t)},b=function(){return n.selection.getRng()},i=function(t,i,r,u){return void 0===u&&(u=!0),n.fire("ShowCaret",{target:i,direction:t,before:r}).isDefaultPrevented()?null:(u&&n.selection.scrollIntoView(i,-1===t),f.show(r,i))},k=function(n,t){return t=rv(n,a,t),-1===n?u.fromRangeStart(t):u.fromRangeEnd(t)},d=function(n){return si(n)||aa(n)||va(n)},g=function(n){return d(n.startContainer)||d(n.endContainer)},w=function(u,f){var v,c,b,a,p,d,nt,o,y,tt,w=n.$,it=n.dom;if(!u)return null;if(u.collapsed){if(!g(u))if(!1===f){if(o=k(-1,u),kr(o.getNode(!0)))return i(-1,o.getNode(!0),!1,!1);if(kr(o.getNode()))return i(-1,o.getNode(),!o.isAtEnd(),!1)}else{if(o=k(1,u),kr(o.getNode()))return i(1,o.getNode(),!o.isAtEnd(),!1);if(kr(o.getNode(!0)))return i(1,o.getNode(!0),!1,!1)}return null}return a=u.startContainer,p=u.startOffset,d=u.endOffset,3===a.nodeType&&0===p&&ef(a.parentNode)&&(a=a.parentNode,p=it.nodeIndex(a),a=a.parentNode),1!==a.nodeType?null:(d===p+1&&(v=a.childNodes[p]),ef(v)?(y=tt=v.cloneNode(!0),(nt=n.fire("ObjectSelected",{target:v,targetClone:y})).isDefaultPrevented()?null:(c=ha(r.fromDom(n.getBody()),"#"+e).fold(function(){return w([])},function(n){return w([n.dom()])}),y=nt.targetClone,0===c.length&&(c=w('<div data-mce-bogus="all" class="mce-offscreen-selection"><\/div>').attr("id",e)).appendTo(n.getBody()),u=n.dom.createRng(),y===tt&&s.ie?(c.empty().append('<p style="font-size: 0" data-mce-bogus="all"> <\/p>').append(y),u.setStartAfter(c[0].firstChild.firstChild),u.setEndAfter(y)):(c.empty().append(" ").append(y).append(" "),u.setStart(c[0].firstChild,1),u.setEnd(c[0].lastChild,0)),c.css({top:it.getPos(v,n.getBody()).y}),c[0].focus(),(b=n.selection.getSel()).removeAllRanges(),b.addRange(u),l(gi(r.fromDom(n.getBody()),"*[data-mce-selected]"),function(n){rt.remove(n,"data-mce-selected")}),v.setAttribute("data-mce-selected","1"),t=v,h(),u)):null)},o=function(){t&&(t.removeAttribute("data-mce-selected"),ha(r.fromDom(n.getBody()),"#"+e).each(ft.remove),t=null);ha(r.fromDom(n.getBody()),"#"+e).each(ft.remove);t=null},h=function(){f.hide()};return s.ceFalse&&(function(){n.on("mouseup",function(t){var i=b();i.collapsed&&pyt(n,t.clientX,t.clientY)&&p(lst(n,i,!1))});n.on("click",function(t){var i;(i=hy(n,t.target))&&(ef(i)&&(t.preventDefault(),n.focus()),pg(i)&&n.dom.isChildOf(i,n.selection.getNode())&&o())});n.on("blur NewBlock",function(){o()});n.on("ResizeWindow FullscreenStateChanged",function(){return f.reposition()});var r,c,l=function(t,i){var f,e,r=n.dom.getParent(t,n.dom.isBlock),o=n.dom.getParent(i,n.dom.isBlock);return!(!r||!n.dom.isChildOf(r,o)||!1!==ef(hy(n,r)))||r&&(f=r,e=o,!(n.dom.getParent(f,n.dom.isBlock)===n.dom.getParent(e,n.dom.isBlock)))&&function(n){var r=lr(n),i,t;return n.firstChild?(i=u.before(n.firstChild),t=r.next(i),t&&!nyi(t)&&!gvi(t)):!1}(r)};c=!1;(r=n).on("touchstart",function(){c=!1});r.on("touchmove",function(){c=!0});r.on("touchend",function(n){var t=hy(r,n.target);ef(t)&&(c||(n.preventDefault(),w(yk(r,t))))});n.on("mousedown",function(t){var f,r=t.target,u,e;(r===a||"HTML"===r.nodeName||n.dom.isChildOf(r,a))&&!1!==pyt(n,t.clientX,t.clientY)&&((f=hy(n,r))?ef(f)?(t.preventDefault(),w(yk(n,f))):(o(),pg(f)&&t.shiftKey||apt(t.clientX,t.clientY,n.selection.getRng())||(h(),n.selection.placeCaretAt(t.clientX,t.clientY))):!1===kr(r)&&(o(),h(),u=kvi(a,t.clientX,t.clientY),u&&!l(t.target,u.node)&&(t.preventDefault(),e=i(1,u.node,u.before,!1),n.getBody().focus(),p(e))))});n.on("keypress",function(t){y.modifierPressed(t)||(t.keyCode,ef(n.selection.getNode())&&t.preventDefault())});n.on("getSelectionRange",function(n){var i=n.range;if(t){if(!t.parentNode)return void(t=null);(i=i.cloneRange()).selectNode(t);n.range=i}});n.on("setSelectionRange",function(n){var t;(t=w(n.range,n.forward))&&(n.range=t)});n.on("AfterSetSelectionRange",function(t){var r,i=t.range;g(i)||"mcepastebin"===i.startContainer.parentNode.id||h();r=i.startContainer.parentNode;n.dom.hasClass(r,"mce-offscreen-selection")||o()});n.on("copy",function(t){var r,u=t.clipboardData,i;t.isDefaultPrevented()||!t.clipboardData||s.ie||(i=(r=n.dom.get(e))?r.getElementsByTagName("*")[0]:r,i&&(t.preventDefault(),u.clearData(),u.setData("text/html",i.outerHTML),u.setData("text/plain",i.outerText)))});vvi(n);dvi(n)}(),v=n.contentStyles,c=".mce-content-body",v.push(f.getCss()),v.push(c+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+c+" *[contentEditable=false] {cursor: default;}"+c+" *[contentEditable=true] {cursor: text;}")),{showCaret:i,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(ik(t),p(b()),n.selection.scrollIntoView(t[0]))},hideFakeCaret:h,destroy:function(){f.destroy();t=null}}},vpt=function(n,t,i){var u,r,f,o,e=1;for(o=n.getShortEndedElements(),(f=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=u=i;r=f.exec(t);){if(u=f.lastIndex,"/"===r[1])e--;else if(!r[1]){if(r[2]in o)continue;e++}if(0===e)break}return u};(wg||(wg={})).findEndTag=vpt;var bg=wg,ypt=function(n,t){var o,r,u,f,s,h,c,l,i=t,e=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,a=n.schema;for(h=n.getTempAttrs(),c=i,l=new RegExp(["\\s?("+h.join("|")+')="[^"]+"'].join("|"),"gi"),i=c.replace(l,""),s=a.getShortEndedElements();f=e.exec(i);)r=e.lastIndex,u=f[0].length,o=s[f[1]]?r:bg.findEndTag(a,i,r),i=i.substring(0,r-u)+i.substring(o),e.lastIndex=r-u;return wu(i)},ppt={trimExternal:ypt,trimInternal:ypt},iyi=0,ryi=2,uyi=1,fyi=function(n,t){var f=n.length+t.length+2,r=new Array(f),i=new Array(f),u=function(i,r,f,e,o){var h=s(i,r,f,e),c,l,a;if(null===h||h.start===r&&h.diag===r-e||h.end===i&&h.diag===i-f)for(c=i,l=f;c<r||l<e;)c<r&&l<e&&n[c]===t[l]?(o.push([0,n[c]]),++c,++l):e-f<r-i?(o.push([2,n[c]]),++c):(o.push([1,t[l]]),++l);else{for(u(i,h.start,f,h.start-h.diag,o),a=h.start;a<h.end;++a)o.push([0,n[a]]);u(h.end,r,h.end-h.diag,e,o)}},e=function(i,r,u,f){for(var e=i;e-r<f&&e<u&&n[e]===t[e-r];)++e;return{start:i,end:e,diag:r}},s=function(u,f,o,s){var w=f-u,b=s-o;if(0===w||0===b)return null;var l,c,h,v,y,a=w-b,k=b+w,p=(k%2==0?k:k+1)/2;for(r[1+p]=u,i[1+p]=f+1,l=0;l<=p;++l){for(c=-l;c<=l;c+=2){for(h=c+p,r[h]=c===-l||c!==l&&r[h-1]<r[h+1]?r[h+1]:r[h-1]+1,y=(v=r[h])-u+o-c;v<f&&y<s&&n[v]===t[y];)r[h]=++v,++y;if(a%2!=0&&a-l<=c&&c<=a+l&&i[h-a]<=r[h])return e(i[h-a],c+u-o,f,s)}for(c=a-l;c<=a+l;c+=2){for(h=c+p-a,i[h]=c===a-l||c!==a+l&&i[h+1]<=i[h-1]?i[h+1]-1:i[h-1],y=(v=i[h]-1)-u+o-c;u<=v&&o<=y&&n[v]===t[y];)i[h]=v--,y--;if(a%2==0&&-l<=c&&c<=l&&i[h]<=r[h+a])return e(i[h],c+u-o,f,s)}}},o=[];return u(0,n.length,0,t.length,o),o},wpt=function(n){return i.isElement(n)?n.outerHTML:i.isText(n)?wf.encodeRaw(n.data,!1):i.isComment(n)?"<!--"+n.data+"-->":""},eyi=function(n,t,i){var u=function(n){var t,r,i;for(i=document.createElement("div"),t=document.createDocumentFragment(),n&&(i.innerHTML=n);r=i.firstChild;)t.appendChild(r);return t}(t),r;n.hasChildNodes()&&i<n.childNodes.length?(r=n.childNodes[i],r.parentNode.insertBefore(u,r)):n.appendChild(u)},oyi=function(n){return h.filter(h.map(n.childNodes,wpt),function(n){return 0<n.length})},syi=function(n,t){var u,r,i,f=h.map(t.childNodes,wpt);return u=fyi(f,n),r=t,i=0,h.each(u,function(n){n[0]===iyi?i++:n[0]===uyi?(eyi(r,n[1],i),i++):n[0]===ryi&&function(n,t){if(n.hasChildNodes()&&t<n.childNodes.length){var i=n.childNodes[t];i.parentNode.removeChild(i)}}(r,i)}),t},hyi=function(n,t){var i=(t||document).createElement("div");return i.innerHTML=n,v.children(r.fromDom(i))},cyi=function(n){return n.dom().innerHTML},lyi=cyi,ayi=function(n,t){var i=v.owner(n).dom(),u=r.fromDom(i.createDocumentFragment()),f=hyi(t,i);yb(u,f);ft.empty(n);tt.append(n,u)},bpt=pu(n.none()),vyi=function(n){return{type:"fragmented",fragments:n,content:"",bookmark:null,beforeBookmark:null}},yyi=function(n){return{type:"complete",fragments:null,content:n,bookmark:null,beforeBookmark:null}},kg=function(n){return"fragmented"===n.type?n.fragments.join(""):n.content},kpt=function(t){var i=r.fromTag("body",bpt.get().getOrThunk(function(){var t=document.implementation.createHTMLDocument("undo");return bpt.set(n.some(t)),t}));return ayi(i,kg(t)),l(gi(i,"*[data-mce-bogus]"),ft.unwrap),lyi(i)},dg=function(n){var t,i,r;return t=oyi(n.getBody()),-1!==(i=(r=gc(t,function(t){var i=ppt.trimInternal(n.serializer,t);return 0<i.length?[i]:[]})).join("")).indexOf("<\/iframe>")?vyi(r):yyi(i)},gg=function(n,t,i){"fragmented"===t.type?syi(t.fragments,n.getBody()):n.setContent(t.content,{format:"raw"});n.selection.moveToBookmark(i?t.beforeBookmark:t.bookmark)},nn=function(n,t){return!(!n||!t)&&(r=t,kg(n)===kg(r)||(i=t,kpt(n)===kpt(i)));var i,r};var tn,gpt,rn=a.isEq,nwt=function(n,t,i){var u=n.formatter.get(i),r;if(u)for(r=0;r<u.length;r++)if(!1===u[r].inherit&&n.dom.is(t,u[r].selector))return!0;return!1},un=function(n,t,i,r){var u=n.dom.getRoot();return t!==u&&(t=n.dom.getParent(t,function(t){return!!nwt(n,t,i)||t.parentNode===u||!!cy(n,t,i,r,!0)}),cy(n,t,i,r))},twt=function(n,t,i){return!!rn(t,i.inline)||!!rn(t,i.block)||(i.selector?1===t.nodeType&&n.is(t,i.selector):void 0)},iwt=function(n,t,i,r,u,f){var o,h,s,e=i[r];if(i.onmatch)return i.onmatch(t,i,r);if(e)if("undefined"==typeof e.length){for(o in e)if(e.hasOwnProperty(o)){if(h="attributes"===r?n.getAttrib(t,o):a.getStyle(n,t,o),u&&!h&&!i.exact)return;if((!u||i.exact)&&!rn(h,a.normalizeStyleValue(n,a.replaceVars(e[o],f),o)))return}}else for(s=0;s<e.length;s++)if("attributes"===r?n.getAttrib(t,e[s]):a.getStyle(n,t,e[s]))return i;return i},cy=function(n,t,i,r,u){var f,e,o,s,h=n.formatter.get(i),c=n.dom;if(h&&t)for(e=0;e<h.length;e++)if(f=h[e],twt(n.dom,t,f)&&iwt(c,t,f,"attributes",u,r)&&iwt(c,t,f,"styles",u,r)){if(s=f.classes)for(o=0;o<s.length;o++)if(!n.dom.hasClass(t,s[o]))return;return f}},ci={matchNode:cy,matchName:twt,match:function(n,t,i,r){var u;return r?un(n,r,t,i):(r=n.selection.getNode(),!!un(n,r,t,i)||!((u=n.selection.getStart())===r||!un(n,u,t,i)))},matchAll:function(n,t,i){var r,u=[],f={};return r=n.selection.getStart(),n.dom.getParent(r,function(r){for(var e,o=0;o<t.length;o++)e=t[o],!f[e]&&cy(n,r,e,i)&&(f[e]=!0,u.push(e))},n.dom.getRoot()),u},canApply:function(n,t){var e,f,r,i,o,u=n.formatter.get(t),s=n.dom;if(u)for(e=n.selection.getStart(),f=a.getParents(s,e),i=u.length-1;0<=i;i--){if(!(o=u[i].selector)||u[i].defaultBlock)return!0;for(r=f.length-1;0<=r;r--)if(s.is(f[r],o))return!0}return!1},matchesUnInheritedFormatSelector:nwt},ly=function(n,t){return n.splitText(t)},ay=function(n){var t=n.startContainer,r=n.startOffset,u=n.endContainer,f=n.endOffset;return t===u&&i.isText(t)?0<r&&r<t.nodeValue.length&&(t=(u=ly(t,r)).previousSibling,r<f?(t=u=ly(u,f-=r).previousSibling,f=u.nodeValue.length,r=0):f=0):(i.isText(t)&&0<r&&r<t.nodeValue.length&&(t=ly(t,r),r=0),i.isText(u)&&0<f&&f<u.nodeValue.length&&(f=(u=ly(u,f).previousSibling).nodeValue.length)),{startContainer:t,startOffset:r,endContainer:u,endOffset:f}},is=pt,rwt="_mce_caret",pyi=function(n){return 0<function(n){for(var t=[];n;){if(3===n.nodeType&&n.nodeValue!==is||1<n.childNodes.length)return[];1===n.nodeType&&t.push(n);n=n.firstChild}return t}(n).length},uwt=function(n){var t;if(n)for(n=(t=new ht(n,n)).current();n;n=t.next())if(3===n.nodeType)return n;return null},fn=function(n){var t=r.fromTag("span");return rt.setAll(t,{id:rwt,"data-mce-bogus":"1","data-mce-type":"format-caret"}),n&&tt.append(t,r.fromText(is)),t},en=function(n,t,i,u){var f,o,e,s;f=t.getRng(!0);o=n.getParent(i,n.isBlock);pyi(i)?(!1!==u&&(f.setStartBefore(i),f.setEndBefore(i)),n.remove(i)):((s=uwt(i))&&s.nodeValue.charAt(0)===is&&s.deleteData(0,1),e=s,f.startContainer===e&&0<f.startOffset&&f.setStart(e,f.startOffset-1),f.endContainer===e&&0<f.endOffset&&f.setEnd(e,f.endOffset-1),n.remove(i,!0));o&&n.isEmpty(o)&&lh(r.fromDom(o));t.setRng(f)},on=function(n,t,i,r,u){if(r)en(t,i,r,u);else if(!(r=df(n,i.getStart())))for(;r=t.get(rwt);)en(t,i,r,!1)},wyi=function(n,t,i){var u=n.dom,f=u.getParent(i,ct.curry(a.isTextBlock,n));f&&u.isEmpty(f)?i.parentNode.replaceChild(t,i):(toi(r.fromDom(i)),u.isEmpty(i)?i.parentNode.replaceChild(t,i):u.insertAfter(t,i))},fwt=function(n,t){return n.appendChild(t),t},ewt=function(n,t){var r,i,u=(r=function(n,t){return fwt(n,t.cloneNode(!1))},i=t,function(n,t){for(var i=n.length-1;0<=i;i--)t(n[i],i,n)}(n,function(n){i=r(i,n)}),i);return fwt(u,u.ownerDocument.createTextNode(is))},byi=function(n){var t=n.dom,i=n.selection,r=n.getBody();n.on("mouseup keydown",function(n){var f,e,u,o;f=r;e=t;u=i;o=n.keyCode;on(f,e,u,null,!1);8===o&&u.isCollapsed()&&u.getStart().innerHTML===is&&on(f,e,u,df(f,u.getStart()));37!==o&&39!==o||on(f,e,u,df(f,u.getStart()))})},kyi=function(n,t){return n.schema.getTextInlineElements().hasOwnProperty(d.name(t))&&!ku(t.dom())&&!i.isBogus(t.dom())},vy={},owt=h.filter,swt=h.each;gpt=function(n){var t,r,u=n.selection.getRng();t=i.matchNodeNames("pre");u.collapsed||(r=n.selection.getSelectedBlocks(),swt(owt(owt(r,t),function(n){return t(n.previousSibling)&&-1!==h.indexOf(r,n.previousSibling)}),function(n){var t,i;t=n.previousSibling;e(i=n).remove();e(t).append("<br><br>").append(i.childNodes)}))};vy[tn="pre"]||(vy[tn]=[]);vy[tn].push(gpt);var dyi=function(n,t){swt(vy[n],function(n){n(t)})},gyi=/^(src|href|style)$/,re=t.each,rs=a.isEq,sn=function(n){return/^(TH|TD)$/.test(n.nodeName)},hwt=function(n,t,r){var u,f,e;return u=t[r?"startContainer":"endContainer"],f=t[r?"startOffset":"endOffset"],i.isElement(u)&&(e=u.childNodes.length-1,!r&&f&&f--,u=u.childNodes[e<f?e:f]),i.isText(u)&&r&&f>=u.nodeValue.length&&(u=new ht(u,n.getBody()).next()||u),i.isText(u)&&!r&&0===f&&(u=new ht(u,n.getBody()).prev()||u),u},hn=function(n,t,i,r){var u=n.create(i,r);return t.parentNode.insertBefore(u,t),u.appendChild(t),u},yy=function(n,t,i,r){return!(t=a.getNonWhiteSpaceSibling(t,i,r))||"BR"===t.nodeName||n.isBlock(t)},gh=function(n,r,u,f,e){var y,k,nt,tt,it,p,w,l,o,c,v,d,s,b,h=n.dom,g;if(it=h,!(rs(p=f,(w=r).inline)||rs(p,w.block)||(w.selector?i.isElement(p)&&it.is(p,w.selector):void 0)||(tt=f,r.links&&"A"===tt.tagName)))return!1;if("all"!==r.remove)for(re(r.styles,function(n,t){n=a.normalizeStyleValue(h,a.replaceVars(n,u),t);"number"==typeof t&&(t=n,e=0);(r.remove_similar||!e||rs(a.getStyle(h,e,t),n))&&h.setStyle(f,t,"");nt=1}),nt&&""===h.getAttrib(f,"style")&&(f.removeAttribute("style"),f.removeAttribute("data-mce-style")),re(r.attributes,function(n,t){var i;if(n=a.replaceVars(n,u),"number"==typeof t&&(t=n,e=0),!e||rs(h.getAttrib(e,t),n)){if("class"===t&&(n=h.getAttrib(f,t))&&(i="",re(n.split(/\s+/),function(n){/mce\-\w+/.test(n)&&(i+=(i?" ":"")+n)}),i))return void h.setAttrib(f,t,i);"class"===t&&f.removeAttribute("className");gyi.test(t)&&f.removeAttribute("data-mce-"+t);f.removeAttribute(t)}}),re(r.classes,function(n){n=a.replaceVars(n,u);e&&!h.hasClass(e,n)||h.removeClass(f,n)}),k=h.getAttribs(f),y=0;y<k.length;y++)if(g=k[y].nodeName,0!==g.indexOf("_")&&0!==g.indexOf("data-"))return!1;if("none"!==r.remove)return(l=n,c=r,d=(o=f).parentNode,s=l.dom,b=l.settings.forced_root_block,c.block&&(b?d===s.getRoot()&&(c.list_block&&rs(o,c.list_block)||re(t.grep(o.childNodes),function(n){a.isValid(l,b,n.nodeName.toLowerCase())?v?v.appendChild(n):(v=hn(s,n,b),s.setAttribs(v,l.settings.forced_root_block_attrs)):v=0})):s.isBlock(o)&&!s.isBlock(d)&&(yy(s,o,!1)||yy(s,o.firstChild,!0,1)||o.insertBefore(s.create("br"),o.firstChild),yy(s,o,!0)||yy(s,o.lastChild,!1,1)||o.appendChild(s.create("br")))),c.selector&&c.inline&&!rs(c.inline,o)||s.remove(o,1),!0)},cn=gh,cwt=function(n,r,u,f,e){var k,p,s=n.formatter.get(r),c=s[0],v=!0,o=n.dom,h=n.selection,y=function(t){var i,o,h,l,v,f,y=(i=n,o=t,h=r,l=u,v=e,re(a.getParents(i.dom,o.parentNode).reverse(),function(n){var t;f||"_start"===n.id||"_end"===n.id||(t=ci.matchNode(i,n,h,l,v))&&!1!==t.split&&(f=n)}),f);return function(n,t,i,r,u,f,e,o){var h,s,c,a,l,y,v=n.dom;if(i){for(y=i.parentNode,h=r.parentNode;h&&h!==y;h=h.parentNode){for(s=v.clone(h,!1),l=0;l<t.length;l++)if(gh(n,t[l],o,s,s)){s=0;break}s&&(c&&s.appendChild(c),a||(a=s),c=s)}!f||e.mixed&&v.isBlock(i)||(r=v.split(i,r));c&&(u.parentNode.insertBefore(c,u),a.appendChild(u))}return r}(n,s,y,t,t,!0,c,u)},d=function(r){var e,f,h,a,l;if(i.isElement(r)&&o.getContentEditable(r)&&(a=v,v="true"===o.getContentEditable(r),l=!0),e=t.grep(r.childNodes),v&&!l)for(f=0,h=s.length;f<h&&!gh(n,s[f],u,r,r);f++);if(c.deep&&e.length){for(f=0,h=e.length;f<h;f++)d(e[f]);l&&(v=a)}},w=function(n){var r=o.get(n?"_start":"_end"),t=r[n?"firstChild":"lastChild"];return tr(t)&&(t=t[n?"firstChild":"lastChild"]),i.isText(t)&&0===t.data.length&&(t=n?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling),o.remove(r,!0),t},b=function(t){var r,u,f=t.commonAncestorContainer,e;if(t=po(n,t,s,!0),c.split){if(t=ay(t),(r=hwt(n,t,!0))!==(u=hwt(n,t))){if(/^(TR|TH|TD)$/.test(r.nodeName)&&r.firstChild&&(r="TR"===r.nodeName?r.firstChild.firstChild||r:r.firstChild||r),f&&/^T(HEAD|BODY|FOOT|R)$/.test(f.nodeName)&&sn(u)&&u.firstChild&&(u=u.firstChild||u),o.isChildOf(r,u)&&r!==u&&!o.isBlock(u)&&!sn(r)&&!sn(u))return e=function(n,t,i,r,u){var s=(r?"next":"previous")+"Sibling",e=n.create(i,u),o,f;for(t.parentNode.insertBefore(e,t),o=[t],f=t;f=f[s];)o.push(f);return o.forEach(function(n){return e.appendChild(n)}),e}(o,r,"span",!0,{id:"_start","data-mce-type":"bookmark"}),y(e),void(r=w(!0));r=hn(o,r,"span",{id:"_start","data-mce-type":"bookmark"});u=hn(o,u,"span",{id:"_end","data-mce-type":"bookmark"});y(r);y(u);r=w(!0);u=w()}else r=u=y(r);t.startContainer=r.parentNode?r.parentNode:r;t.startOffset=o.nodeIndex(r);t.endContainer=u.parentNode?u.parentNode:u;t.endOffset=o.nodeIndex(u)+1}ov(o,t,function(t){re(t,function(t){d(t);i.isElement(t)&&"underline"===n.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===a.getTextDecoration(o,t.parentNode)&&gh(n,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})},l,g;if(f)f.nodeType?((p=o.createRng()).setStartBefore(f),p.setEndAfter(f),b(p)):b(f);else if("false"!==o.getContentEditable(h.getNode()))h.isCollapsed()&&c.inline&&!o.select("td[data-mce-selected],th[data-mce-selected]").length?function(n,t,i,r){var h,y,p,c,u,f,l,a=n.dom,e=n.selection,w=[],o=e.getRng(),s,v,b;for(h=o.startContainer,y=o.startOffset,3===(u=h).nodeType&&(y!==h.nodeValue.length&&(c=!0),u=u.parentNode);u;){if(ci.matchNode(n,u,t,i,r)){f=u;break}u.nextSibling&&(c=!0);w.push(u);u=u.parentNode}f&&(c?(p=e.getBookmark(),o.collapse(!0),s=po(n,o,n.formatter.get(t),!0),s=ay(s),n.formatter.remove(t,i,s),e.moveToBookmark(p)):(l=df(n.getBody(),f),v=fn(!1).dom(),b=ewt(w,v),wyi(n,v,l||f),en(a,e,l,!1),e.setCursorLocation(b,1),a.isEmpty(f)&&a.remove(f)))}(n,r,u,e):(k=co.getPersistentBookmark(n.selection,!0),b(h.getRng()),h.moveToBookmark(k),c.inline&&ci.match(n,r,u,h.getStart())&&a.moveStart(o,h,h.getRng()),n.nodeChanged());else for(f=h.getNode(),l=0,g=s.length;l<g&&(!s[l].ceFalseOverride||!gh(n,s[l],u,f,f));l++);},nc=t.each,ln=function(n){return n&&1===n.nodeType&&!tr(n)&&!ku(n)&&!i.isBogus(n)},lwt=function(n,t){for(var i=n;i;i=i[t]){if(3===i.nodeType&&0!==i.nodeValue.length)return n;if(1===i.nodeType&&!tr(i))return i}return n},awt=function(n,i,r){var u,f,e=new dct(n);if(i&&r&&(i=lwt(i,"previousSibling"),r=lwt(r,"nextSibling"),e.compare(i,r))){for(u=i.nextSibling;u&&u!==r;)u=(f=u).nextSibling,i.appendChild(f);return n.remove(r),t.each(t.grep(r.childNodes),function(n){i.appendChild(n)}),i}return r},an=function(n,t,i){nc(n.childNodes,function(n){ln(n)&&(t(n)&&i(n),n.hasChildNodes()&&an(n,t,i))})},vwt=function(n,t){return f(function(t,i){return!(!i||!a.getStyle(n,i,t))},t)},ywt=function(n,t,i){return f(function(t,i,r){n.setStyle(r,t,i);""===r.getAttribute("style")&&r.removeAttribute("style");npi(n,r)},t,i)},npi=function(n,t){"SPAN"===t.nodeName&&0===n.getAttribs(t).length&&n.remove(t,!0)},pwt=function(n,t){var i;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(i=a.getTextDecoration(n,t.parentNode),n.getStyle(t,"color")&&i?n.setStyle(t,"text-decoration",i):n.getStyle(t,"text-decoration")===i&&n.setStyle(t,"text-decoration",null))},tpi=function(n,t,i,r){nc(t,function(t){nc(n.dom.select(t.inline,r),function(r){ln(r)&&cn(n,t,i,r,t.exact?r:null)}),function(n,t,i){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";nc(n.select(r,i),function(i){ln(i)&&nc(t.styles,function(t,r){n.setStyle(i,r,"")})})}}(n.dom,t,r)})},ipi=function(n,i,r,u){(i.styles.color||i.styles.textDecoration)&&(t.walk(u,f(pwt,n),"childNodes"),pwt(n,u))},rpi=function(n,t,i,r){t.styles&&t.styles.backgroundColor&&an(r,vwt(n,"fontSize"),ywt(n,"backgroundColor",a.replaceVars(t.styles.backgroundColor,i)))},upi=function(n,t,i,r){"sub"!==t.inline&&"sup"!==t.inline||(an(r,vwt(n,"fontSize"),ywt(n,"fontSize","")),n.remove(n.select("sup"===t.inline?"sub":"sup",r),!0))},fpi=function(n,t,i,r){r&&!1!==t.merge_siblings&&(r=awt(n,a.getNonWhiteSpaceSibling(r),r),r=awt(n,r,a.getNonWhiteSpaceSibling(r,!0)))},epi=function(n,t,i,r,u){ci.matchNode(n,u.parentNode,i,r)&&cn(n,t,r,u)||t.merge_with_parents&&n.dom.getParent(u.parentNode,function(f){if(ci.matchNode(n,f,i,r))return cn(n,t,r,u),!0})},rr=t.each,wwt=function(n,r,u,f){var w,v,s=n.formatter.get(r),e=s[0],b=!f&&n.selection.isCollapsed(),o=n.dom,h=n.selection,c=function(n,t){if(t=t||e,n){if(t.onformat&&t.onformat(n,t,u,f),rr(t.styles,function(t,i){o.setStyle(n,i,a.replaceVars(t,u))}),t.styles){var i=o.getAttrib(n,"style");i&&n.setAttribute("data-mce-style",i)}rr(t.attributes,function(t,i){o.setAttrib(n,i,a.replaceVars(t,u))});rr(t.classes,function(t){t=a.replaceVars(t,u);o.hasClass(n,t)||o.addClass(n,t)})}},k=function(n,t){var i=!1;return!!e.selector&&(rr(n,function(n){if(!("collapsed"in n&&n.collapsed!==b))return o.is(t,n.selector)&&!ku(t)?(c(t,n),!(i=!0)):void 0}),i)},y=function(f,o,h,l){var v,w,p=[],y=!0;v=e.inline||e.block;w=f.create(v);c(w);ov(f,o,function(i){var o,h=function(i){var b,g,d,nt,tt;if(nt=y,b=i.nodeName.toLowerCase(),g=i.parentNode.nodeName.toLowerCase(),1===i.nodeType&&f.getContentEditable(i)&&(nt=y,y="true"===f.getContentEditable(i),d=!0),a.isEq(b,"br"))return o=0,void(e.block&&f.remove(i));if(e.wrapper&&ci.matchNode(n,i,r,u))o=0;else{if(y&&!d&&e.block&&!e.wrapper&&a.isTextBlock(n,b)&&a.isValid(n,g,v))return i=f.rename(i,v),c(i),p.push(i),void(o=0);if(e.selector&&(tt=k(s,i),!e.inline||tt))return void(o=0);!y||d||!a.isValid(n,v,b)||!a.isValid(n,g,v)||!l&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||ku(i)||e.inline&&f.isBlock(i)?(o=0,rr(t.grep(i.childNodes),h),d&&(y=nt),o=0):(o||(o=f.clone(w,!1),i.parentNode.insertBefore(o,i),p.push(o)),o.appendChild(i))}};rr(i,h)});!0===e.links&&rr(p,function(n){var i=function(n){"A"===n.nodeName&&c(n,e);rr(t.grep(n.childNodes),i)};i(n)});rr(p,function(t){var l,v,y,o,h,w=function(n){var t=!1;return rr(n.childNodes,function(n){if((r=n)&&1===r.nodeType&&!tr(r)&&!ku(r)&&!i.isBogus(r))return t=n,!1;var r}),t};v=0;rr(t.childNodes,function(n){a.isWhiteSpaceNode(n)||tr(n)||v++});l=v;!(1<p.length)&&f.isBlock(t)||0!==l?(e.inline||e.wrapper)&&(e.exact||1!==l||((o=w(y=t))&&!tr(o)&&ci.matchName(f,o,e)&&(h=f.clone(o,!1),c(h),f.replace(h,y,!0),f.remove(o,1)),t=h||y),tpi(n,s,u,t),epi(n,e,r,u,t),rpi(f,e,u,t),upi(f,e,u,t),fpi(f,e,u,t)):f.remove(t,1)})},p,l,d;if("false"!==o.getContentEditable(h.getNode()))e&&(f?f.nodeType?k(s,f)||((v=o.createRng()).setStartBefore(f),v.setEndAfter(f),y(o,po(n,v,s),0,!0)):y(o,f,0,!0):b&&e.inline&&!o.select("td[data-mce-selected],th[data-mce-selected]").length?!function(n,t,i){var r,f,s,u,c,e,o=n.selection,l,a,h;u=(r=o.getRng(!0)).startOffset;e=r.startContainer.nodeValue;(f=df(n.getBody(),o.getStart()))&&(s=uwt(f));h=/[^\s\u00a0\u00ad\u200b\ufeff]/;e&&0<u&&u<e.length&&h.test(e.charAt(u))&&h.test(e.charAt(u-1))?(c=o.getBookmark(),r.collapse(!0),r=po(n,r,n.formatter.get(t)),r=ay(r),n.formatter.apply(t,i,r),o.moveToBookmark(c)):(f&&s.nodeValue===is||(l=n.getDoc(),a=fn(!0).dom(),s=(f=l.importNode(a,!0)).firstChild,r.insertNode(f),u=1),n.formatter.apply(t,i,f),o.setCursorLocation(s,u))}(n,r,u):(p=n.selection.getNode(),n.settings.forced_root_block||!s[0].defaultBlock||o.getParent(p,o.isBlock)||wwt(n,s[0].defaultBlock),n.selection.setRng(od(n.selection.getRng())),w=co.getPersistentBookmark(n.selection,!0),y(o,po(n,h.getRng(),s)),e.styles&&ipi(o,e,u,p),h.moveToBookmark(w),a.moveStart(o,h,h.getRng()),n.nodeChanged()),dyi(r,n));else for(f=h.getNode(),l=0,d=s.length;l<d;l++)if(s[l].ceFalseOverride&&o.is(f,s[l].selector))return void c(f,s[l])},bwt={applyFormat:wwt},us=t.each,opi=function(n,i,r,u,f){var h,o,s,c,l,v,y,e;null===i.get()&&(o=n,s={},(h=i).set({}),o.on("NodeChange",function(n){var i=a.getParents(o.dom,n.element),r={};i=t.grep(i,function(n){return 1===n.nodeType&&!n.getAttribute("data-mce-bogus")});us(h.get(),function(n,t){us(i,function(u){return o.formatter.matchNode(u,t,{},n.similar)?(s[t]||(us(n,function(n){n(!0,{node:u,format:t,parents:i})}),s[t]=n),r[t]=n,!1):!ci.matchesUnInheritedFormatSelector(o,u,t)&&void 0})});us(s,function(t,u){r[u]||(delete s[u],us(t,function(t){t(!1,{node:n.element,format:u,parents:i})}))})}));l=r;v=u;y=f;e=(c=i).get();us(l.split(","),function(n){e[n]||(e[n]=[],e[n].similar=y);e[n].push(v)});c.set(e)},spi={get:function(n){var i={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(i,r,u){t.each(u,function(t,r){n.setAttrib(i,r,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return t.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(n){i[n]={block:n,remove:"all"}}),i}},py=t.each,yt=g.DOM,kwt=function(n,i){var f,r,e,s=i&&i.schema||yu({}),u=function(n){var t,i,u;return r="string"==typeof n?{name:n,classes:[],attrs:{}}:n,t=yt.create(r.name),i=t,(u=r).classes.length&&yt.addClass(i,u.classes.join(" ")),yt.setAttribs(i,u.attrs),t},o=function(n,i,r){var e,f,l,a,h,p,v,c,y=0<i.length&&i[0],w=y&&y.name;if(h=w,p="string"!=typeof(a=n)?a.nodeName.toLowerCase():a,v=s.getElementRule(p),l=!(!(c=v&&v.parentsRequired)||!c.length)&&(h&&-1!==t.inArray(c,h)?h:c[0]))w===l?(f=i[0],i=i.slice(1)):f=l;else if(y)f=i[0],i=i.slice(1);else if(!r)return n;return f&&(e=u(f)).appendChild(n),r&&(e||(e=yt.create("div")).appendChild(n),t.each(r,function(t){var i=u(t);e.insertBefore(i,n)})),o(e,i,f&&f.siblings)};return n&&n.length?(r=n[0],f=u(r),(e=yt.create("div")).appendChild(o(f,n.slice(1),r.siblings)),e):""},hpi=function(n){var r,i={classes:[],attrs:{}};return"*"!==(n=i.selector=t.trim(n))&&(r=n.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(n,r,u,f,e){switch(r){case"#":i.attrs.id=u;break;case".":i.classes.push(u);break;case":":-1!==t.inArray("checked disabled enabled read-only required".split(" "),u)&&(i.attrs[u]=u)}if("["===f){var o=e.match(/([\w\-]+)(?:\=\"([^\"]+))?/);o&&(i.attrs[o[1]]=o[2])}return""})),i.name=r||"div",i},cpi=function(n){return n&&"string"==typeof n?(n=(n=n.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),t.map(n.split(/(?:>|\s+(?![^\[\]]+\]))/),function(n){var i=t.map(n.split(/(?:~\+|~|\+)/),hpi),r=i.pop();return i.length&&(r.siblings=i),r}).reverse()):[]},lpi=function(n,t){var f,i,r,o,u,e,h="",s;if(!1===(e=n.settings.preview_styles))return"";if("string"!=typeof e&&(e="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),s=function(n){return n.replace(/%(\w+)/g,"")},"string"==typeof t){if(!(t=n.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(e=t.preview)?"":(f=t.block||t.inline||"span",(o=cpi(t.selector)).length?(o[0].name||(o[0].name=f),f=t.selector,i=kwt(o,n)):i=kwt([f],n),r=yt.select(f,i)[0]||i.firstChild,py(t.styles,function(n,t){(n=s(n))&&yt.setStyle(r,t,n)}),py(t.attributes,function(n,t){(n=s(n))&&yt.setAttrib(r,t,n)}),py(t.classes,function(n){n=s(n);yt.hasClass(r,n)||yt.addClass(r,n)}),n.fire("PreviewFormats"),yt.setStyles(i,{position:"absolute",left:-65535}),n.getBody().appendChild(i),u=yt.getStyle(n.getBody(),"fontSize",!0),u=/px$/.test(u)?parseInt(u,10):0,py(e.split(" "),function(t){var i=yt.getStyle(r,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(i)&&(i=yt.getStyle(n.getBody(),t,!0),"#ffffff"===yt.toHex(i).toLowerCase())||"color"===t&&"#000000"===yt.toHex(i).toLowerCase())){if("font-size"===t&&/em|%$/.test(i)){if(0===u)return;i=parseFloat(i)/(/%$/.test(i)?100:1)*u+"px"}"border"===t&&i&&(h+="padding:0 2px;");h+=t+":"+i+";"}}),n.fire("AfterPreviewFormats"),yt.remove(i),h)},api=function(n,t,i,r,u){var f=t.get(i);!ci.match(n,i,r,u)||"toggle"in f[0]&&!f[0].toggle?bwt.applyFormat(n,i,r,u):cwt(n,i,r,u)},vpi=function(n){n.addShortcut("meta+b","","Bold");n.addShortcut("meta+i","","Italic");n.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)n.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);n.addShortcut("access+7","",["FormatBlock",!1,"p"]);n.addShortcut("access+8","",["FormatBlock",!1,"div"]);n.addShortcut("access+9","",["FormatBlock",!1,"address"])};var gwt,ypi=Object.prototype.hasOwnProperty,tc=(gwt=function(n,t){return t},function(){for(var r,u,f,i,n=new Array(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Can't merge zero objects");for(r={},u=0;u<n.length;u++){f=n[u];for(i in f)ypi.call(f,i)&&(r[i]=gwt(r[i],f[i]))}return r}),nbt={register:function(n,t,i){n.addAttributeFilter("data-mce-tabindex",function(n,t){for(var i,r=n.length;r--;)(i=n[r]).attr("tabindex",i.attributes.map["data-mce-tabindex"]),i.attr(t,null)});n.addAttributeFilter("src,href,style",function(n,r){for(var f,u,e=n.length,o="data-mce-"+r,s=t.url_converter,h=t.url_converter_scope;e--;)(u=(f=n[e]).attributes.map[o])!==undefined?(f.attr(r,0<u.length?u:null),f.attr(o,null)):(u=f.attributes.map[r],"style"===r?u=i.serializeStyle(i.parseStyle(u),f.name):s&&(u=s.call(h,u,r,f.name)),f.attr(r,0<u.length?u:null))});n.addAttributeFilter("class",function(n){for(var i,t,r=n.length;r--;)(t=(i=n[r]).attr("class"))&&(t=i.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),i.attr("class",0<t.length?t:null))});n.addAttributeFilter("data-mce-type",function(n,t,i){for(var r,u=n.length;u--;)"bookmark"!==(r=n[u]).attributes.map["data-mce-type"]||i.cleanup||r.remove()});n.addNodeFilter("noscript",function(n){for(var t,i=n.length;i--;)(t=n[i].firstChild)&&(t.value=wf.decode(t.value))});n.addNodeFilter("script,style",function(n,i){for(var r,u,f,e=n.length,o=function(n){return n.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};e--;)u=(r=n[e]).firstChild?r.firstChild.value:"","script"===i?((f=r.attr("type"))&&r.attr("type","mce-no/type"===f?null:f.replace(/^mce\-/,"")),"xhtml"===t.element_format&&0<u.length&&(r.firstChild.value="// <![CDATA[\n"+o(u)+"\n// ]\]>")):"xhtml"===t.element_format&&0<u.length&&(r.firstChild.value="<!--\n"+o(u)+"\n-->")});n.addNodeFilter("#comment",function(n){for(var t,i=n.length;i--;)0===(t=n[i]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))});n.addNodeFilter("xml:namespace,input",function(n,t){for(var i,r=n.length;r--;)7===(i=n[r]).type?i.remove():1===i.type&&("input"!==t||"type"in i.attributes.map||i.attr("type","text"))});n.addAttributeFilter("data-mce-type",function(t){l(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(n.schema.getNonEmptyElements())?t.remove():t.unwrap())})});n.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)})},trimTrailingBr:function(n){var t,i,r=function(n){return n&&"br"===n.name};r(t=n.lastChild)&&r(i=t.prev)&&(t.remove(),i.remove())}},ppi={process:function(n,i,r){return a=r,(l=n)&&l.hasEventListeners("PreProcess")&&!a.no_events?(u=i,h=r,e=(s=n).dom,u=u.cloneNode(!0),(c=document.implementation).createHTMLDocument&&(f=c.createHTMLDocument(""),t.each("BODY"===u.nodeName?u.childNodes:[u],function(n){f.body.appendChild(f.importNode(n,!0))}),u="BODY"!==u.nodeName?f.body.firstChild:f.body,o=e.doc,e.doc=f),vli(s,tc(h,{node:u})),o&&(e.doc=o),u):i;var s,u,h,c,f,o,e,l,a}},wpi=function(n,t,i){n.addNodeFilter("font",function(n){l(n,function(n){var u,r=t.parse(n.attr("style")),f=n.attr("color"),e=n.attr("face"),o=n.attr("size");f&&(r.color=f);e&&(r["font-family"]=e);o&&(r["font-size"]=i[parseInt(n.attr("size"),10)-1]);n.name="span";n.attr("style",t.serialize(r));u=n;l(["color","face","size"],function(n){u.attr(n,null)})})})},bpi=function(n,i){var r,u=lb();i.convert_fonts_to_spans&&wpi(n,u,t.explode(i.font_size_legacy_values));r=u;n.addNodeFilter("strike",function(n){l(n,function(n){var t=r.parse(n.attr("style"));t["text-decoration"]="line-through";n.name="span";n.attr("style",r.serialize(t))})})},kpi={register:function(n,t){t.inline_styles&&bpi(n,t)}},tbt=/^[ \t\r\n]*$/,dpi={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},wy=function(n,t,i){var u,r,f=i?"lastChild":"firstChild",e=i?"prev":"next";if(n[f])return n[f];if(n!==t){if(u=n[e])return u;for(r=n.parent;r&&r!==t;r=r.parent)if(u=r[e])return u}},wi=function(){function n(n,t){this.name=n;1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return n.create=function(t,i){var r,u;if(r=new n(t,dpi[t]||1),i)for(u in i)r.attr(u,i[u]);return r},n.prototype.replace=function(n){return n.parent&&n.remove(),this.insert(n,this),this.remove(),this},n.prototype.attr=function(n,t){var i,r;if("string"!=typeof n){for(r in n)this.attr(r,n[r]);return this}if(i=this.attributes){if(t!==undefined){if(null===t){if(n in i.map)for(delete i.map[n],r=i.length;r--;)if(i[r].name===n)return i=i.splice(r,1),this;return this}if(n in i.map){for(r=i.length;r--;)if(i[r].name===n){i[r].value=t;break}}else i.push({name:n,value:t});return i.map[n]=t,this}return i.map[n]}},n.prototype.clone=function(){var r,e,f,t,i,u=new n(this.name,this.type);if(f=this.attributes){for((i=[]).map={},r=0,e=f.length;r<e;r++)"id"!==(t=f[r]).name&&(i[i.length]={name:t.name,value:t.value},i.map[t.name]=t.value);u.attributes=i}return u.value=this.value,u.shortEnded=this.shortEnded,u},n.prototype.wrap=function(n){return this.parent.insert(n,this),n.append(this),this},n.prototype.unwrap=function(){for(var t,n=this.firstChild;n;)t=n.next,this.insert(n,this,!0),n=t;this.remove()},n.prototype.remove=function(){var n=this.parent,t=this.next,i=this.prev;return n&&(n.firstChild===this?(n.firstChild=t)&&(t.prev=null):i.next=t,n.lastChild===this?(n.lastChild=i)&&(i.next=null):t.prev=i,this.parent=this.next=this.prev=null),this},n.prototype.append=function(n){var t;return n.parent&&n.remove(),(t=this.lastChild)?((t.next=n).prev=t,this.lastChild=n):this.lastChild=this.firstChild=n,n.parent=this,n},n.prototype.insert=function(n,t,i){var r;return n.parent&&n.remove(),r=t.parent||this,i?(t===r.firstChild?r.firstChild=n:t.prev.next=n,n.prev=t.prev,(n.next=t).prev=n):(t===r.lastChild?r.lastChild=n:t.next.prev=n,n.next=t.next,(n.prev=t).next=n),n.parent=r,n},n.prototype.getAll=function(n){for(var i=[],t=this.firstChild;t;t=wy(t,this))t.name===n&&i.push(t);return i},n.prototype.empty=function(){var t,i,n;if(this.firstChild){for(t=[],n=this.firstChild;n;n=wy(n,this))t.push(n);for(i=t.length;i--;)(n=t[i]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},n.prototype.isEmpty=function(n,t,i){var u,f,r=this.firstChild;if(t=t||{},r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(n[r.name])return!1;for(u=r.attributes.length;u--;)if("name"===(f=r.attributes[u].name)||0===f.indexOf("data-mce-bookmark"))return!1}if(8===r.type||3===r.type&&!tbt.test(r.value)||3===r.type&&r.parent&&t[r.parent.name]&&tbt.test(r.value)||i&&i(r))return!1}while(r=wy(r,this));return!0},n.prototype.walk=function(n){return wy(this,null,n)},n}(),ibt=function(n,t,i,r){(n.padd_empty_with_br||t.insert)&&i[r.name]?r.empty().append(new wi("br",1)).shortEnded=!0:r.empty().append(new wi("#text",3)).value=" "},gpi=function(n){return rbt(n,"#text")&&" "===n.firstChild.value},rbt=function(n,t){return n&&n.firstChild&&n.firstChild===n.lastChild&&n.firstChild.name===t},ic=function(n,t,i,r){return r.isEmpty(t,i,function(t){return i=t,(r=n.getElementRule(i.name))&&r.paddEmpty;var i,r})},nwi=function(n,t){return n&&(t[n.name]||"br"===n.name)},twi=function(n,i){var r=n.schema;i.remove_trailing_brs&&n.addNodeFilter("br",function(n,u,f){var c,o,e,h,s,a,v,y,p=n.length,l=t.extend({},r.getBlockElements()),w=r.getNonEmptyElements(),b=r.getNonEmptyElements();for(l.body=1,c=0;c<p;c++)if(e=(o=n[c]).parent,l[o.parent.name]&&o===e.lastChild){for(s=o.prev;s;){if("span"!==(a=s.name)||"bookmark"!==s.attr("data-mce-type")){if("br"!==a)break;if("br"===a){o=null;break}}s=s.prev}o&&(o.remove(),ic(r,w,b,e)&&(v=r.getElementRule(e.name))&&(v.removeEmpty?e.remove():v.paddEmpty&&ibt(i,f,l,e)))}else{for(h=o;e&&e.firstChild===h&&e.lastChild===h&&!l[(h=e).name];)e=e.parent;h===e&&!0!==i.padd_empty_with_br&&((y=new wi("#text",3)).value=" ",o.replace(y))}});n.addAttributeFilter("href",function(n){var r,f,u,e=n.length;if(!i.allow_unsafe_link_target)for(;e--;)"a"===(r=n[e]).name&&"_blank"===r.attr("target")&&r.attr("rel",(f=r.attr("rel"),u=f?t.trim(f):"",/\b(noopener)\b/g.test(u)?u:u.split(" ").filter(function(n){return 0<n.length}).concat(["noopener"]).sort().join(" ")))});i.allow_html_in_named_anchor||n.addAttributeFilter("id,name",function(n){for(var i,r,u,t,f=n.length;f--;)if("a"===(t=n[f]).name&&t.firstChild&&!t.attr("href"))for(u=t.parent,i=t.lastChild;r=i.prev,u.insert(i,t),i=r;);});i.fix_list_elements&&n.addNodeFilter("ul,ol",function(n){for(var t,u,r,i=n.length;i--;)("ul"===(u=(t=n[i]).parent).name||"ol"===u.name)&&(t.prev&&"li"===t.prev.name?t.prev.append(t):(r=new wi("li",1),r.attr("style","list-style-type: none"),t.wrap(r)))});i.validate&&r.getValidClasses()&&n.addAttributeFilter("class",function(n){for(var o,s,f,e,t,i,u,h=n.length,c=r.getValidClasses();h--;){for(s=(o=n[h]).attr("class").split(" "),t="",f=0;f<s.length;f++)e=s[f],u=!1,(i=c["*"])&&i[e]&&(u=!0),i=c[o.name],!u&&i&&i[e]&&(u=!0),u&&(t&&(t+=" "),t+=e);t.length||(t=null);o.attr("class",t)}})},ubt=t.makeMap,fbt=t.each,ebt=t.explode,iwi=t.extend;var rwi=function(n,i,r){-1===t.inArray(i,r)&&(n.addAttributeFilter(r,function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)}),i.push(r))},uwi=function(n,i,u){var f=wu(u.getInner?i.innerHTML:n.getOuterHTML(i));return u.selection||ta(r.fromDom(i))?f:t.trim(f)},fwi=function(n,t,i){var u=i.selection?tc({forced_root_block:!1},i):i,r=n.parse(t,u);return nbt.trimTrailingBr(r),r},ewi=function(n,t,i,r,u){var o,f,s,e,h=(o=r,ah(t,i).serialize(o));return f=n,e=h,!(s=u).no_events&&f?yli(f,tc(s,{content:e})).content:e};(yn||(yn={})).isBookmarkNode=tr;var sbt=yn,hbt=i.isContentEditableFalse,owi=i.isContentEditableTrue,cbt=function(n,i){var f,e,k,d,l,lt,at,g,nt,v,p,tt,it,o,h,vt,yt,u=i.dom,pt=t.each,w=i.getDoc(),b=document,wt=Math.abs,ft=Math.round,c=i.getBody(),a;d={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};a=".mce-content-body";i.contentStyles.push(a+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+a+" .mce-resizehandle:hover {background: #000}"+a+" img[data-mce-selected],"+a+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+a+" .mce-clonedresizable {position: absolute;"+(s.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+a+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var st=function(n){return n&&("IMG"===n.nodeName||i.dom.is(n,"figure.image"))},ti=function(n){var t,r,u=n.target;t=n;r=i.selection.getRng();!st(t.target)||apt(t.clientX,t.clientY,r)||n.isDefaultPrevented()||(n.preventDefault(),i.selection.select(u))},rt=function(n){return i.dom.is(n,"figure.image")?n.querySelector("img"):n},bt=function(n){var t=i.settings.object_resizing;return!1!==t&&!s.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==n.getAttribute("data-mce-resize")&&n!==i.getBody()&&lu.is(r.fromDom(n),t))},et=function(n){var t,r,s,a;t=n.screenX-lt;r=n.screenY-at;o=t*l[2]+v;h=r*l[3]+p;o=o<5?5:o;h=h<5?5:h;(st(f)&&!1!==i.settings.resize_img_proportional?!y.modifierPressed(n):y.modifierPressed(n)||st(f)&&l[2]*l[3]!=0)&&(wt(t)>wt(r)?(h=ft(o*tt),o=ft(h/tt)):(o=ft(h/tt),h=ft(o*tt)));u.setStyles(rt(e),{width:o,height:h});s=0<(s=l.startPos.x+t)?s:0;a=0<(a=l.startPos.y+r)?a:0;u.setStyles(k,{left:s,top:a,display:"block"});k.innerHTML=o+" &times; "+h;l[2]<0&&e.clientWidth<=o&&u.setStyle(e,"left",g+(v-o));l[3]<0&&e.clientHeight<=h&&u.setStyle(e,"top",nt+(p-h));(t=c.scrollWidth-vt)+(r=c.scrollHeight-yt)!=0&&u.setStyles(k,{left:s-t,top:a-r});it||(bli(i,f,v,p),it=!0)},ot=function(){it=!1;var n=function(n,t){t&&(f.style[n]||!i.schema.isValid(f.nodeName.toLowerCase(),n)?u.setStyle(rt(f),n,t):u.setAttrib(rt(f),n,t))};n("width",o);n("height",h);u.unbind(w,"mousemove",et);u.unbind(w,"mouseup",ot);b!==w&&(u.unbind(b,"mousemove",et),u.unbind(b,"mouseup",ot));u.remove(e);u.remove(k);ht(f);kli(i,f,o,h);u.setAttrib(f,"style",u.getAttrib(f,"style"));i.nodeChanged()},ht=function(n){var r,a,y,it,t;ut();ct();r=u.getPos(n,c);g=r.x;nt=r.y;t=n.getBoundingClientRect();a=t.width||t.right-t.left;y=t.height||t.bottom-t.top;f!==n&&(f=n,o=h=0);it=i.fire("ObjectSelected",{target:n});bt(n)&&!it.isDefaultPrevented()?pt(d,function(n,t){var i;(i=u.get("mceResizeHandle"+t))&&u.remove(i);i=u.add(c,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"});11===s.ie&&(i.contentEditable=!1);u.bind(i,"mousedown",function(t){var i;t.stopImmediatePropagation();t.preventDefault();lt=(i=t).screenX;at=i.screenY;v=rt(f).clientWidth;p=rt(f).clientHeight;tt=p/v;(l=n).startPos={x:a*n[0]+g,y:y*n[1]+nt};vt=c.scrollWidth;yt=c.scrollHeight;e=f.cloneNode(!0);u.addClass(e,"mce-clonedresizable");u.setAttrib(e,"data-mce-bogus","all");e.contentEditable=!1;e.unSelectabe=!0;u.setStyles(e,{left:g,top:nt,margin:0});e.removeAttribute("data-mce-selected");c.appendChild(e);u.bind(w,"mousemove",et);u.bind(w,"mouseup",ot);b!==w&&(u.bind(b,"mousemove",et),u.bind(b,"mouseup",ot));k=u.add(c,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},v+" &times; "+p)});n.elm=i;u.setStyles(i,{left:a*n[0]+g-i.offsetWidth/2,top:y*n[1]+nt-i.offsetHeight/2})}):ut();f.setAttribute("data-mce-selected","1")},ut=function(){var t,n;for(t in ct(),f&&f.removeAttribute("data-mce-selected"),d)(n=u.get("mceResizeHandle"+t))&&(u.unbind(n),u.remove(n))},kt=function(t){var r,f=function(n,t){if(n)do if(n===t)return!0;while(n=n.parentNode)};it||i.removed||(pt(u.select("img[data-mce-selected],hr[data-mce-selected]"),function(n){n.removeAttribute("data-mce-selected")}),r="mousedown"===t.type?t.target:n.getNode(),f(r=u.$(r).closest("table,img,figure.image,hr")[0],c)&&(ni(),f(n.getStart(!0),r)&&f(n.getEnd(!0),r))?ht(r):ut())},dt=function(n){return hbt(function(n,t){for(;t&&t!==n;){if(owi(t)||hbt(t))return t;t=t.parentNode}return null}(i.getBody(),n))},ct=function(){var t,n;for(t in d)n=d[t],n.elm&&(u.unbind(n.elm),delete n.elm)},ni=function(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(n){}};return i.on("init",function(){ni();s.ie&&11<=s.ie&&(i.on("mousedown click",function(n){var t=n.target,r=t.nodeName;it||!/^(TABLE|IMG|HR)$/.test(r)||dt(t)||(2!==n.button&&i.selection.select(t,"TABLE"===r),"mousedown"===n.type&&i.nodeChanged())}),i.dom.bind(c,"mscontrolselect",function(n){var t=function(n){gt.setEditorTimeout(i,function(){i.selection.select(n)})};if(dt(n.target))return n.preventDefault(),void t(n.target);/^(TABLE|IMG|HR)$/.test(n.target.nodeName)&&(n.preventDefault(),"IMG"===n.target.tagName&&t(n.target))}));var n=gt.throttle(function(n){i.composing||kt(n)});i.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",n);i.on("keyup compositionend",function(t){f&&"TABLE"===f.nodeName&&n(t)});i.on("hide blur",ut);i.on("contextmenu",ti)}),i.on("remove",ct),{isResizable:bt,showResizeRect:ht,hideResizeRect:ut,updateResizeRect:kt,destroy:function(){f=e=null}}},swi=function(n){return i.isContentEditableTrue(n)||i.isContentEditableFalse(n)},pn=function(n,r,u){var f,s,e,h,c,o=u;if(o.caretPositionFromPoint)(s=o.caretPositionFromPoint(n,r))&&((f=u.createRange()).setStart(s.offsetNode,s.offset),f.collapse(!0));else if(u.caretRangeFromPoint)f=u.caretRangeFromPoint(n,r);else if(o.body.createTextRange){f=o.body.createTextRange();try{f.moveToPoint(n,r);f.collapse(!0)}catch(l){f=function(n,i,r){var f,u,e;if(f=r.elementFromPoint(n,i),u=r.body.createTextRange(),f&&"HTML"!==f.tagName||(f=r.body),u.moveToElementText(f),0<(e=(e=t.toArray(u.getClientRects())).sort(function(n,t){return(n=Math.abs(Math.max(n.top-i,n.bottom-i)))-(t=Math.abs(Math.max(t.top-i,t.bottom-i)))})).length){i=(e[0].bottom+e[0].top)/2;try{return u.moveToPoint(n,i),u.collapse(!0),u}catch(o){}}return null}(n,r,u)}return e=f,h=u.body,c=e&&e.parentElement?e.parentElement():null,i.isContentEditableFalse(function(n,t,i){for(;n&&n!==t;){if(i(n))return n;n=n.parentNode}return null}(c,h,swi))?null:e}return f},wn=function(n,t){return lt(t,function(t){var i=n.fire("GetSelectionRange",{range:t});return i.range!==t?i.range:t})},bn=function(n,t){var i=(t||document).createDocumentFragment();return l(n,function(n){i.appendChild(n.dom())}),r.fromDom(i)},kn=sr("element","width","rows"),lbt=sr("element","cells"),hwi=sr("x","y"),abt=function(n,t){var i=parseInt(rt.get(n,t),10);return isNaN(i)?1:i},vbt=function(n){return tu(n,function(n,t){return t.cells().length>n?t.cells().length:n},0)},ybt=function(t,i){for(var e,u,f=t.rows(),r=0;r<f.length;r++)for(e=f[r].cells(),u=0;u<e.length;u++)if(b.eq(e[u],i))return n.some(hwi(u,r));return n.none()},pbt=function(n,t,i,r,u){for(var e,h,o=[],s=n.rows(),f=i;f<=u;f++)e=s[f].cells(),h=t<r?e.slice(t,r+1):e.slice(r,t+1),o.push(lbt(s[f].element(),h));return o},cwi=function(n){var t=kn(ro(n),0,[]);return l(gi(n,"tr"),function(n,i){l(gi(n,"td,th"),function(r,u){!function(n,t,i,r,u){for(var e,s=abt(u,"rowspan"),h=abt(u,"colspan"),o=n.rows(),f=i;f<i+s;f++)for(o[f]||(o[f]=lbt(get(r),[])),e=t;e<t+h;e++)o[f].cells()[e]=f===i&&e===t?u:ro(u)}(t,function(n,t,i){for(;f=t,r=i,u=void 0,((u=n.rows())[r]?u[r].cells():[])[f];)t++;var f,r,u;return t}(t,u,i),i,n,r)})}),kn(t.element(),vbt(t.rows()),t.rows())},lwi=function(n){return f=lt((u=n).rows(),function(n){var i=lt(n.cells(),function(n){var t=get(n);return rt.remove(t,"colspan"),rt.remove(t,"rowspan"),t}),t=ro(n.element());return yb(t,i),t}),t=ro(u.element()),i=r.fromTag("tbody"),yb(i,f),tt.append(t,i),t;var u,f,t,i},awi=function(n,t,i){return ybt(n,t).bind(function(t){return ybt(n,i).map(function(i){return r=n,e=i,o=(c=t).x(),u=c.y(),s=e.x(),f=e.y(),h=u<f?pbt(r,o,u,s,f):pbt(r,o,f,s,u),kn(r.element(),vbt(h),h);var r,c,e,o,u,s,f,h})})},vwi=function(n,t){return fi(n,function(n){return"li"===d.name(n)&&evi(n,t)}).fold(o([]),function(){return(t=n,fi(t,function(n){return"ul"===d.name(n)||"ol"===d.name(n)})).map(function(n){return[r.fromTag("li"),r.fromTag(d.name(n))]}).getOr([]);var t})},ywi=function(n,t){var i,u=r.fromDom(t.commonAncestorContainer),f=wo(u,n),s=ot(f,function(n){return lft(n)||kti(n)}),e=vwi(f,t),h=s.concat(e.length?e:gl(i=u)?v.parent(i).filter(vft).fold(o([]),function(n){return[i,n]}):vft(i)?[i]:[]);return lt(h,ro)},wbt=function(){return bn([])},pwi=function(n,t){return f=r.fromDom(t.cloneContents()),i=ywi(n,t),u=tu(i,function(n,t){return tt.append(t,n),t},f),0<i.length?bn([u]):u;var f,i,u},wwi=function(n,t){return(i=n,r=t[0],bb(r,"table",f(b.eq,i))).bind(function(n){var i=t[0],r=t[t.length-1],u=cwi(n);return awi(u,i,r).map(function(n){return bn([lwi(n)])})}).getOrThunk(wbt);var i,r},bwi=function(n,t){var r,i,u=uci(t,n);return 0<u.length?wwi(n,u):(r=n,0<(i=t).length&&i[0].collapsed?wbt():pwi(r,i[0]))},kwi=function(n,t){var o,i=n.selection.getRng(),u=n.dom.create("body"),f=n.selection.getSel(),s=wn(n,gat(f)),e;return((t=t||{}).get=!0,t.format=t.format||"html",t.selection=!0,(t=n.fire("BeforeGetContent",t)).isDefaultPrevented())?(n.fire("GetContent",t),t.content):"text"===t.format?n.selection.isCollapsed()?"":wu(i.text||(f.toString?f.toString():"")):(i.cloneContents?(o=t.contextual?bwi(r.fromDom(n.getBody()),s).dom():i.cloneContents())&&u.appendChild(o):i.item!==undefined||i.htmlText!==undefined?(u.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),u.removeChild(u.firstChild)):u.innerHTML=i.toString(),t.getInner=!0,e=n.selection.serializer.serialize(u,t),"tree"===t.format?e:(t.content=n.selection.isCollapsed()?"":e,n.fire("GetContent",t),t.content))},dwi=function(n,t,i){var f,e,o,r=n.selection.getRng(),u=n.getDoc();if((i=i||{format:"html"}).set=!0,i.selection=!0,i.content=t,i.no_events||!(i=n.fire("BeforeSetContent",i)).isDefaultPrevented()){if(t=i.content,r.insertNode){t+='<span id="__caret">_<\/span>';r.startContainer===u&&r.endContainer===u?u.body.innerHTML=t:(r.deleteContents(),0===u.body.childNodes.length?u.body.innerHTML=t:r.createContextualFragment?r.insertNode(r.createContextualFragment(t)):(e=u.createDocumentFragment(),o=u.createElement("div"),e.appendChild(o),o.outerHTML=t,r.insertNode(e)));f=n.dom.get("__caret");(r=u.createRange()).setStartBefore(f);r.setEndBefore(f);n.selection.setRng(r);n.dom.remove("__caret");try{n.selection.setRng(r)}catch(s){}}else r.item&&(u.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(t)?(r.pasteHTML('<span id="__mce_tmp">_<\/span>'+t),n.dom.remove("__mce_tmp")):r.pasteHTML(t);i.no_events||n.fire("SetContent",i)}else n.fire("SetContent",i)},bbt=function(t,i,u,f,e){var o=u?i.startContainer:i.endContainer,s=u?i.startOffset:i.endOffset;return n.from(o).map(r.fromDom).map(function(n){return f&&i.collapsed?n:v.child(n,e(n,s)).getOr(n)}).bind(function(t){return d.isElement(t)?n.some(t):v.parent(t)}).map(function(n){return n.dom()}).getOr(t)},kbt=function(n,t,i){return bbt(n,t,!0,i,function(n,t){return Math.min(v.childNodesCount(n),t)})},dbt=function(n,t,i){return bbt(n,t,!1,i,function(n,t){return 0<t?t-1:t})},gbt=function(n,t){for(var r=n;n&&i.isText(n)&&0===n.length;)n=t?n.nextSibling:n.previousSibling;return n||r},rc=t.each,nkt=function(n){return!!n.select},tkt=function(n){return!(!n||!n.ownerDocument)&&b.contains(r.fromDom(n.ownerDocument),r.fromDom(n))},ikt=function(t,i,r,f){var y,p,h,c,l,w=function(n,t){return dwi(f,n,t)},b=function(n){var t=e();t.collapse(!!n);o(t)},a=function(){return i.getSelection?i.getSelection():i.document.selection},e=function(){var u,n,e,r,s=function(n,t,i){try{return t.compareBoundaryPoints(n,i)}catch(r){return-1}},o;if(!i||null==(r=i.document))return null;if(f.bookmark!==undefined&&!1===kh(f)&&(o=nyt(f),o.isSome()))return o.map(function(n){return wn(f,[n])[0]}).getOr(r.createRange());try{(u=a())&&(n=0<u.rangeCount?u.getRangeAt(0):u.createRange?u.createRange():r.createRange())}catch(l){}return(n=wn(f,[n])[0])||(n=r.createRange?r.createRange():r.body.createTextRange()),n.setStart&&9===n.startContainer.nodeType&&n.collapsed&&(e=t.getRoot(),n.setStart(e,0),n.setEnd(e,0)),h&&c&&(0===s(n.START_TO_START,n,h)&&0===s(n.END_TO_END,n,h)?n=c:c=h=null),n},o=function(n,t){var i,r,u,e;if((u=n)&&(nkt(u)||tkt(u.startContainer)&&tkt(u.endContainer)))if(e=nkt(n)?n:null,e){c=null;try{e.select()}catch(o){}}else{if(i=a(),n=f.fire("SetSelectionRange",{range:n,forward:t}).range,i){c=n;try{i.removeAllRanges();i.addRange(n)}catch(o){}!1===t&&i.extend&&(i.collapse(n.endContainer,n.endOffset),i.extend(n.startContainer,n.startOffset));h=0<i.rangeCount?i.getRangeAt(0):null}n.collapsed||n.startContainer!==n.endContainer||!i.setBaseAndExtent||s.ie||n.endOffset-n.startOffset<2&&n.startContainer.hasChildNodes()&&(r=n.startContainer.childNodes[n.startOffset])&&"IMG"===r.tagName&&(i.setBaseAndExtent(n.startContainer,n.startOffset,n.endContainer,n.endOffset),i.anchorNode===n.startContainer&&i.focusNode===n.endContainer||i.setBaseAndExtent(r,0,r,1));f.fire("AfterSetSelectionRange",{range:n,forward:t})}},k=function(){var i,r,n=a();return!(n&&n.anchorNode&&n.focusNode)||((i=t.createRng()).setStart(n.anchorNode,n.anchorOffset),i.collapse(!0),(r=t.createRng()).setStart(n.focusNode,n.focusOffset),r.collapse(!0),i.compareBoundaryPoints(i.START_TO_START,r)<=0)},v={bookmarkManager:null,controlSelection:null,dom:t,win:i,serializer:r,editor:f,collapse:b,setCursorLocation:function(n,i){var r=t.createRng();n?(r.setStart(n,i),r.setEnd(n,i),o(r),b(!1)):(hg(t,r,f.getBody(),!0),o(r))},getContent:function(n){return kwi(f,n)},setContent:w,getBookmark:function(n,t){return y.getBookmark(n,t)},moveToBookmark:function(n){return y.moveToBookmark(n)},select:function(i,r){var u,f,e;return(u=t,f=i,e=r,n.from(f).map(function(n){var i=u.nodeIndex(n),t=u.createRng();return t.setStart(n.parentNode,i),t.setEnd(n.parentNode,i+1),e&&(hg(u,t,n,!0),hg(u,t,n,!1)),t})).each(o),i},isCollapsed:function(){var n=e(),t=a();return!(!n||n.item)&&(n.compareEndPoints?0===n.compareEndPoints("StartToEnd",n):!t||n.collapsed)},isForward:k,setNode:function(n){return w(t.getOuterHTML(n)),n},getNode:function(){return s=f.getBody(),(t=e())?(n=t.startContainer,i=t.endContainer,u=t.startOffset,o=t.endOffset,r=t.commonAncestorContainer,!t.collapsed&&(n===i&&o-u<2&&n.hasChildNodes()&&(r=n.childNodes[u]),3===n.nodeType&&3===i.nodeType&&(n=n.length===u?gbt(n.nextSibling,!0):n.parentNode,i=0===o?gbt(i.previousSibling,!1):i.parentNode,n&&n===i))?n:r&&3===r.nodeType?r.parentNode:r):s;var s,t,r,n,i,u,o},getSel:a,setRng:o,getRng:e,getStart:function(n){return kbt(f.getBody(),e(),n)},getEnd:function(n){return dbt(f.getBody(),e(),n)},getSelectedBlocks:function(n,i){return function(n,t,i,r){var f,u,e=[],o;if(u=n.getRoot(),i=n.getParent(i||kbt(u,t,t.collapsed),n.isBlock),r=n.getParent(r||dbt(u,t,t.collapsed),n.isBlock),i&&i!==u&&e.push(i),i&&r&&i!==r)for(o=new ht(f=i,u);(f=o.next())&&f!==r;)n.isBlock(f)&&e.push(f);return r&&i!==r&&r!==u&&e.push(r),e}(t,e(),n,i)},normalize:function(){var n=e(),r=a(),i;return!tci(r)&&cg(f)?(i=ny(t,n),i.each(function(n){o(n,k())}),i.getOr(n)):n},selectorChanged:function(n,i){var r;return l||(l={},r={},f.on("NodeChange",function(n){var u=n.element,i=t.getParents(u,null,t.getRoot()),f={};rc(l,function(n,u){rc(i,function(e){if(t.is(e,u))return r[u]||(rc(n,function(n){n(!0,{node:e,selector:u,parents:i})}),r[u]=n),f[u]=n,!1})});rc(r,function(n,t){f[t]||(delete r[t],rc(n,function(n){n(!1,{node:u,selector:t,parents:i})}))})})),l[n]||(l[n]=[]),l[n].push(i),v},getScrollContainer:function(){for(var i,n=t.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){i=n;break}n=n.parentNode}return i},scrollIntoView:function(n,t){return vui(f,n,t)},placeCaretAt:function(n,t){return o(pn(n,t,f.getDoc()))},getBoundingClientRect:function(){var n=e();return n.collapsed?u.fromRangeStart(n).getClientRects()[0]:n.getBoundingClientRect()},destroy:function(){i=h=c=null;p.destroy()}};return y=sbt(v),p=cbt(v,f),v.bookmarkManager=y,v.controlSelection=p,v},rkt=i.isContentEditableFalse,ukt=fk,fkt=fv,ekt=uv,by=function(n,t){for(;t=n(t);)if(t.isVisible())return t;return t},gwi=function(n,t,r,u){var o,f,s,h,l,a,e=n===hi.Forwards,c=e?ekt:fkt;return!u.collapsed&&(o=ukt(u),rkt(o))?du(n,t,o,n===hi.Backwards,!0):(h=fo(u.startContainer),c(f=dht(n,t.getBody(),u))?yk(t,f.getNode(!e)):(f=r(f))?c(f)?du(n,t,f.getNode(!e),e,!0):c(s=r(f))&&(!(a=rf(l=f,s))&&i.isBr(l.getNode())||a)?du(n,t,s.getNode(!e),e,!0):h?ka(t,f.toRange(),!0):null:h?u:null)},nbi=function(n,t,i,r){var f,a,v,e,c,o,y,p,s,l;return(s=ukt(r),f=dht(n,t.getBody(),r),a=i(t.getBody(),hpt(1),f),v=h.filter(a,ag(1)),c=h.last(f.getClientRects()),(ekt(f)||nei(f))&&(s=f.getNode()),(fkt(f)||tei(f))&&(s=f.getNode(!0)),!c)?null:(o=c.left,(e=sy(v,o))&&rkt(e.node))?(y=Math.abs(o-e.left),p=Math.abs(o-e.right),du(n,t,e.node,y<p,!0)):s&&((l=function(n,t,i,r){var s,c,l,f,e,a,v=lr(t),o=[],y=0,p=function(n){return h.last(n.getClientRects())};1===n?(s=v.next,c=so,l=oo,f=u.after(r)):(s=v.prev,c=oo,l=so,f=u.before(r));a=p(f);do if(f.isVisible()&&!l(e=p(f),a)){if(0<o.length&&c(e,h.last(o))&&y++,(e=bf(e)).position=f,e.line=y,i(e))return o;o.push(e)}while(f=s(f));return o}(n,t.getBody(),hpt(1),s),e=sy(h.filter(l,ag(1)),o))||(e=h.last(h.filter(l,ag(0)))))?ka(t,e.position.toRange(),!0):void 0},okt=function(n,t,i){var f,r,o,e,h=lr(n.getBody()),c=ct.curry(by,h.next),l=ct.curry(by,h.prev);if(i.collapsed&&n.settings.forced_root_block){if(!(f=n.dom.getParent(i.startContainer,"PRE")))return;(1===t?c(u.fromRangeStart(i)):l(u.fromRangeStart(i)))||(e=(o=n).dom.create(o.settings.forced_root_block),(!s.ie||11<=s.ie)&&(e.innerHTML='<br data-mce-bogus="1">'),r=e,1===t?n.$(f).after(r):n.$(f).before(r),n.selection.select(r,!0),n.selection.collapse())}},skt=function(n,t){return function(){var i,r,u,f,s,h,e,c,o,l=(r=t,f=lr((i=n).getBody()),s=ct.curry(by,f.next),h=ct.curry(by,f.prev),e=r?hi.Forwards:hi.Backwards,c=r?s:h,o=i.selection.getRng(),(u=gwi(e,i,c,o))?u:(u=okt(i,e,o))||null);return!!l&&(n.selection.setRng(l),!0)}},hkt=function(n,t){return function(){var i,e,r,u,o,f,s=(u=(e=t)?1:-1,o=e?pvi:yvi,f=(i=n).selection.getRng(),(r=nbi(u,i,o,f))?r:(r=okt(i,u,f))||null);return!!s&&(n.selection.setRng(s),!0)}},tbi=function(n,t){return gc(lt(n,function(n){return tc({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:ss},n)}),function(n){return i=n,(r=t).keyCode===i.keyCode&&r.shiftKey===i.shiftKey&&r.altKey===i.altKey&&r.ctrlKey===i.ctrlKey&&r.metaKey===i.metaKey?[n]:[];var i,r})},dt=function(n){for(var r,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return r=Array.prototype.slice.call(arguments,1),function(){return n.apply(null,r)}},ky=function(n,t){return fi(tbi(n,t),function(n){return n.action()})},ibi=function(n,t){n.on("keydown",function(i){var r,u,e,f;!1===i.isDefaultPrevented()&&(r=n,u=t,e=i,f=cu.detect().os,ky([{keyCode:y.RIGHT,action:skt(r,!0)},{keyCode:y.LEFT,action:skt(r,!1)},{keyCode:y.UP,action:hkt(r,!1)},{keyCode:y.DOWN,action:hkt(r,!0)},{keyCode:y.RIGHT,action:sht(r,!0)},{keyCode:y.LEFT,action:sht(r,!1)},{keyCode:y.UP,action:hht(r,!1)},{keyCode:y.DOWN,action:hht(r,!0)},{keyCode:y.RIGHT,action:ns.move(r,u,!0)},{keyCode:y.LEFT,action:ns.move(r,u,!1)},{keyCode:y.RIGHT,ctrlKey:!f.isOSX(),altKey:f.isOSX(),action:ns.moveNextWord(r,u)},{keyCode:y.LEFT,ctrlKey:!f.isOSX(),altKey:f.isOSX(),action:ns.movePrevWord(r,u)}],e).each(function(){e.preventDefault()}))})},rbi=function(n){return 1===v.children(n).length},ubi=function(n,t,i,e){var o,h,s,c,v=f(kyi,t),l=lt(ot(e,v),function(n){return n.dom()}),a;0===l.length?vh(t,n,i):(a=(o=i.dom(),h=l,s=fn(!1),c=ewt(h,s.dom()),tt.before(r.fromDom(o),s),ft.remove(r.fromDom(o)),u(c,0)),t.selection.setRng(a.toRange()))},fbi=function(n,t){var i,e=r.fromDom(n.getBody()),s=r.fromDom(n.selection.getStart()),f=ot((i=wo(s,e),lf(i,gs).fold(o(i),function(n){return i.slice(0,n)})),rbi);return he(f).map(function(i){var r=u.fromRangeStart(n.selection.getRng());return!!boi(t,r,i.dom())&&(ubi(t,n,i,f),!0)}).getOr(!1)},ckt=function(n,t){return!!n.selection.isCollapsed()&&fbi(n,t)},ebi=function(n,t){n.on("keydown",function(i){var r,u,f;!1===i.isDefaultPrevented()&&(r=n,u=t,f=i,ky([{keyCode:y.BACKSPACE,action:dt(av,r,!1)},{keyCode:y.DELETE,action:dt(av,r,!0)},{keyCode:y.BACKSPACE,action:dt(pv,r,u,!1)},{keyCode:y.DELETE,action:dt(pv,r,u,!0)},{keyCode:y.BACKSPACE,action:dt(dv,r,!1)},{keyCode:y.DELETE,action:dt(dv,r,!0)},{keyCode:y.BACKSPACE,action:dt(lv,r,!1)},{keyCode:y.DELETE,action:dt(lv,r,!0)},{keyCode:y.BACKSPACE,action:dt(cv,r,!1)},{keyCode:y.DELETE,action:dt(cv,r,!0)},{keyCode:y.BACKSPACE,action:dt(ckt,r,!1)},{keyCode:y.DELETE,action:dt(ckt,r,!0)}],f).each(function(){f.preventDefault()}))});n.on("keyup",function(t){var i,r;!1===t.isDefaultPrevented()&&(i=n,r=t,ky([{keyCode:y.BACKSPACE,action:dt(wlt,i)},{keyCode:y.DELETE,action:dt(wlt,i)}],r))})},dn=function(t){return n.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock))},uc=function(n,t){var e,u,r,o=t,f=n.dom,h=n.schema.getMoveCaretBeforeOnEnterElements(),s;if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)&&(s=function(n){for(;n;){if(1===n.nodeType||3===n.nodeType&&n.data&&/[\r\n\s]/.test(n.data))return n;n=n.nextSibling}}(t.firstChild),s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(f.doc.createTextNode(" "),t.firstChild)),r=f.createRng(),t.normalize(),t.hasChildNodes()){for(e=new ht(t,t);u=e.current();){if(i.isText(u)){r.setStart(u,0);r.setEnd(u,0);break}if(h[u.nodeName.toLowerCase()]){r.setStartBefore(u);r.setEndBefore(u);break}o=u;u=e.next()}u||(r.setStart(o,0),r.setEnd(o,0))}else i.isBr(t)?t.nextSibling&&f.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));n.selection.setRng(r);f.remove(void 0);n.selection.scrollIntoView(t)}},obi=function(n,t){for(var u,r=n.getRoot(),i=t;i!==r&&"false"!==n.getContentEditable(i);)"true"===n.getContentEditable(i)&&(u=i),i=i.parentNode;return i!==r?u:r},sbi=dn,hbi=function(n){return dn(n).fold(o(""),function(n){return n.nodeName.toUpperCase()})},cbi=function(n){return dn(n).filter(function(n){return gl(r.fromDom(n))}).isSome()},lkt=function(n,t){return n&&n.parentNode&&n.parentNode.nodeName===t},akt=function(n){return n&&/^(OL|UL|LI)$/.test(n.nodeName)},dy=function(n){var t=n.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:n},gy=function(n,t,r){for(var u=n[r?"firstChild":"lastChild"];u&&!i.isElement(u);)u=u[r?"nextSibling":"previousSibling"];return u===t},lbi=function(n,t,i,r,u){var e=n.dom,a=n.selection.getRng(),h,c,l,f,s,o;i!==n.getBody()&&(akt(h=i)&&akt(h.parentNode)&&(u="LI"),f=u?t(u):e.create("BR"),gy(i,r,!0)&&gy(i,r,!1)?lkt(i,"LI")?e.insertAfter(f,dy(i)):e.replace(f,i):gy(i,r,!0)?lkt(i,"LI")?(e.insertAfter(f,dy(i)),f.appendChild(e.doc.createTextNode(" ")),f.appendChild(i)):i.parentNode.insertBefore(f,i):gy(i,r,!1)?e.insertAfter(f,dy(i)):(i=dy(i),s=a.cloneRange(),s.setStartAfter(r),s.setEndAfter(i),o=s.extractContents(),"LI"===u&&(l="LI",(c=o).firstChild&&c.firstChild.nodeName===l)?(f=o.firstChild,e.insertAfter(o,i)):(e.insertAfter(o,i),e.insertAfter(f,i))),e.remove(r),uc(n,f))},gn=function(n){n.innerHTML='<br data-mce-bogus="1">'},ntt=function(n,t){return n.nodeName===t||n.previousSibling&&n.previousSibling.nodeName===t},vkt=function(n,t){return t&&n.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==n.getContentEditable(t)},ttt=function(n,t,r){return!1===i.isText(t)?r:n?1===r&&t.data.charAt(r-1)===pt?0:r:r===t.data.length-1&&t.data.charAt(r)===pt?t.data.length:r},ykt=function(n,t){for(var u,r=n.getRoot(),i=t;i!==r&&"false"!==n.getContentEditable(i);)"true"===n.getContentEditable(i)&&(u=i),i=i.parentNode;return i!==r?u:r},itt=function(n,t){var i=gf(n);i&&i.toLowerCase()===t.tagName.toLowerCase()&&n.dom.setAttribs(t,rht(n))},abi=function(n,r){var tt,it,f,a,u,b,o,k,h,v,d,s,y,g,nt,rt,c,p,e=n.dom,ut=n.schema,ft=ut.getNonEmptyElements(),l=n.selection.getRng(),w=function(t){var i,o,h,r=f,c=ut.getTextInlineElements();if(t||"TABLE"===v||"HR"===v?(i=e.create(t||s),itt(n,i)):i=u.cloneNode(!1),h=i,!1===ifi(n))e.setAttrib(i,"style",null),e.setAttrib(i,"class",null);else do if(c[r.nodeName]){if(ku(r))continue;o=r.cloneNode(!1);e.setAttrib(o,"id","");i.hasChildNodes()?o.appendChild(i.firstChild):h=o;i.appendChild(o)}while((r=r.parentNode)&&r!==it);return gn(h),i},et=function(n){var t,r,o,e;if(e=ttt(n,f,a),i.isText(f)&&(n?0<e:e<f.nodeValue.length))return!1;if(f.parentNode===u&&y&&!n||n&&i.isElement(f)&&f===u.firstChild)return!0;if(ntt(f,"TABLE")||ntt(f,"HR"))return y&&!n||!y&&n;for(t=new ht(f,u),i.isText(f)&&(n&&0===e?t.prev():n||e!==f.nodeValue.length||t.next());r=t.current();){if(i.isElement(r)){if(!r.getAttribute("data-mce-bogus")&&(o=r.nodeName.toLowerCase(),ft[o]&&"br"!==o))return!1}else if(i.isText(r)&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;n?t.prev():t.next()}return!0},ot=function(){o=/^(H[1-6]|PRE|FIGURE)$/.test(v)&&"HGROUP"!==d?w(s):w();rfi(n)&&vkt(e,h)&&e.isEmpty(u)?o=e.split(h,u):e.insertAfter(o,u);uc(n,o)};ny(e,l).each(function(n){l.setStart(n.startContainer,n.startOffset);l.setEnd(n.endContainer,n.endOffset)});f=l.startContainer;a=l.startOffset;s=gf(n);b=r.shiftKey;i.isElement(f)&&f.hasChildNodes()&&(y=a>f.childNodes.length-1,f=f.childNodes[Math.min(a,f.childNodes.length-1)]||f,a=y&&i.isText(f)?f.nodeValue.length:0);(it=ykt(e,f))&&((s&&!b||!s&&b)&&(f=function(n,t,i,r,u){var e,o,h,f,l,a,v,c=t||"P",s=n.dom,y=ykt(s,r);if(!(o=s.getParent(r,s.isBlock))||!vkt(s,o)){if(a=(o=o||y)===n.getBody()||(v=o)&&/^(TD|TH|CAPTION)$/.test(v.nodeName)?o.nodeName.toLowerCase():o.parentNode.nodeName.toLowerCase(),!o.hasChildNodes())return e=s.create(c),itt(n,e),o.appendChild(e),i.setStart(e,0),i.setEnd(e,0),e;for(f=r;f.parentNode!==o;)f=f.parentNode;for(;f&&!s.isBlock(f);)f=(h=f).previousSibling;if(h&&n.schema.isValidChild(a,c.toLowerCase())){for(e=s.create(c),itt(n,e),h.parentNode.insertBefore(e,h),f=h;f&&!s.isBlock(f);)l=f.nextSibling,e.appendChild(f),f=l;i.setStart(r,u);i.setEnd(r,u)}}return r}(n,s,l,f,a)),u=e.getParent(f,e.isBlock),h=u?e.getParent(u.parentNode,e.isBlock):null,v=u?u.nodeName.toUpperCase():"","LI"!==(d=h?h.nodeName.toUpperCase():"")||r.ctrlKey||(h=(u=h).parentNode,v=d),/^(LI|DT|DD)$/.test(v)&&e.isEmpty(u)?lbi(n,w,h,u,s):s&&u===n.getBody()||(s=s||"P",fo(u)?(o=ik(u),e.isEmpty(u)&&gn(u),uc(n,o)):et()?ot():et(!0)?(o=u.parentNode.insertBefore(w(),u),uc(n,ntt(u,"HR")?o:u)):((tt=(c=l,p=c.cloneRange(),p.setStart(c.startContainer,ttt(!0,c.startContainer,c.startOffset)),p.setEnd(c.endContainer,ttt(!1,c.endContainer,c.endOffset)),p).cloneRange()).setEndAfter(u),function(n){for(;i.isText(n)&&(n.nodeValue=n.nodeValue.replace(/^[\r\n]+/,"")),n=n.firstChild;);}(k=tt.extractContents()),o=k.firstChild,e.insertAfter(k,u),function(n,r,u){var o,f=u,s=[],e;if(f){for(;f=f.firstChild;){if(n.isBlock(f))return;i.isElement(f)&&!r[f.nodeName.toLowerCase()]&&s.push(f)}for(o=s.length;o--;)!(f=s[o]).hasChildNodes()||f.firstChild===f.lastChild&&""===f.firstChild.nodeValue?n.remove(f):(e=f)&&"A"===e.nodeName&&0===t.trim(wu(e.innerText||e.textContent)).length&&n.remove(f)}}(e,ft,o),g=e,(nt=u).normalize(),(rt=nt.lastChild)&&!/^(left|right)$/gi.test(g.getStyle(rt,"float",!0))||g.add(nt,"br"),e.isEmpty(u)&&gn(u),o.normalize(),e.isEmpty(o)?(e.remove(o),ot()):uc(n,o)),e.setAttrib(o,"id",""),n.fire("NewBlock",{newBlock:o})))},pkt=function(n,t){return sbi(n).filter(function(n){return 0<t.length&&lu.is(r.fromDom(n),t)}).isSome()},vbi=function(n){return pkt(n,nfi(n))},ybi=function(n){return pkt(n,tfi(n))},ii=bo([{br:[]},{block:[]},{none:[]}]),pbi=function(n){return ybi(n)},rtt=function(n){return function(t){return""===gf(t)===n}},wkt=function(n){return function(t){return cbi(t)===n}},bkt=function(n,t){return function(i){return hbi(i)===n.toUpperCase()===t}},np=function(n){return bkt("pre",n)},tp=function(n){return function(t){return gui(t)===n}},wbi=function(n){return vbi(n)},fc=function(n,t){return t},kkt=function(n){var i=gf(n),t=obi(n.dom,n.selection.getStart());return t&&n.schema.isValidChild(t.nodeName,i||"P")},li=function(t,i){return function(r,u){return tu(t,function(n,t){return n&&t(r,u)},!0)?n.some(i):n.none()}},bbi=function(n,t){return iat([li([pbi],ii.none()),li([bkt("summary",!0)],ii.br()),li([np(!0),tp(!1),fc],ii.br()),li([np(!0),tp(!1)],ii.block()),li([np(!0),tp(!0),fc],ii.block()),li([np(!0),tp(!0)],ii.br()),li([wkt(!0),fc],ii.br()),li([wkt(!0)],ii.block()),li([rtt(!0),fc,kkt],ii.block()),li([rtt(!0)],ii.br()),li([wbi],ii.br()),li([rtt(!1),fc],ii.br()),li([kkt],ii.block())],[n,t.shiftKey]).getOr(ii.none())},kbi=function(n,t){bbi(n,t).fold(function(){pvt(n,t)},function(){abi(n,t)},ss)},dbi=function(n){n.on("keydown",function(t){var i,r,u;t.keyCode===y.ENTER&&(i=n,(r=t).isDefaultPrevented()||(r.preventDefault(),(u=i.undoManager).typing&&(u.typing=!1,u.add()),i.undoManager.transact(function(){!1===i.selection.isCollapsed()&&i.execCommand("Delete");kbi(i,r)})))})},gbi=function(n,t,r){return s=t,!(!nki(r)||!i.isText(s.container())||(e=n,u=(o=t).container(),f=o.offset(),u.insertData(f," "),e.selection.setCursorLocation(u,f+1),0));var e,o,u,f,s},nki=function(n){return n.fold(o(!1),o(!0),o(!0),o(!1))},tki=function(n){return!!n.selection.isCollapsed()&&(t=n,r=f(k.isInlineTarget,t),i=u.fromRangeStart(t.selection.getRng()),go(r,t.getBody(),i).map(f(gbi,t,i)).getOr(!1));var t,r,i},iki=function(n){n.on("keydown",function(t){var r,i;!1===t.isDefaultPrevented()&&(r=n,i=t,ky([{keyCode:y.SPACEBAR,action:dt(tki,r)}],i).each(function(){i.preventDefault()}))})},dkt=function(n,t){var i;t.hasAttribute("data-mce-caret")&&(ik(t),(i=n).selection.setRng(i.selection.getRng()),n.selection.scrollIntoView(t))},rki=function(n,t){var u,i=(u=n,ha(r.fromDom(u.getBody()),"*[data-mce-caret]").fold(o(null),function(n){return n.dom()}));if(i)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void dkt(n,i)):void(tot(i)&&(dkt(n,i),n.undoManager.add()))},uki=function(n){n.on("keyup compositionstart",f(rki,n))},fki=function(n){var t=ns.setupSelectedState(n);uki(n);ibi(n,t);ebi(n,t);dbi(n);iki(n)};var gkt=function(n){return i.isElement(n)&&aft(r.fromDom(n))},oki=function(n){n.on("click",function(t){3<=t.detail&&function(n){var i=n.selection.getRng(),r=et.fromRangeStart(i),u=et.fromRangeEnd(i),t;et.isElementPosition(r)&&(t=r.container(),gkt(t)&&c.firstPositionIn(t).each(function(n){return i.setStart(n.container(),n.offset())}));et.isElementPosition(u)&&(t=r.container(),gkt(t)&&c.lastPositionIn(t).each(function(n){return i.setEnd(n.container(),n.offset())}));n.selection.setRng(od(i))}(n)})},ski=function(n){var t,i;(t=n).on("click",function(n){t.dom.getParent(n.target,"details")&&n.preventDefault()});(i=n).parser.addNodeFilter("details",function(n){l(n,function(n){n.attr("data-mce-open",n.attr("open"));n.attr("open","open")})});i.serializer.addNodeFilter("details",function(n){l(n,function(n){var t=n.attr("data-mce-open");n.attr("open",ui(t)?t:null);n.attr("data-mce-open",null)})})},ue=g.DOM,ndt=function(n){var t;n.bindPendingEventDelegates();n.initialized=!0;n.fire("init");n.focus(!0);n.nodeChanged({initial:!0});n.execCallback("init_instance_callback",n);(t=n).settings.auto_focus&&gt.setEditorTimeout(t,function(){var n;(n=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||n.focus()},100)},utt=function(n,i){var f,c,o,s,l,v,y,p,h,u=n.settings,a=n.getElement(),e=n.getDoc();u.inline||(n.getElement().style.visibility=n.orgVisibility);i||u.content_editable||(e.open(),e.write(n.iframeHTML),e.close());u.content_editable&&(n.on("remove",function(){var n=this.getBody();ue.removeClass(n,"mce-content-body");ue.removeClass(n,"mce-edit-focus");ue.setAttrib(n,"contentEditable",null)}),ue.addClass(a,"mce-content-body"),n.contentDocument=e=u.content_document||document,n.contentWindow=u.content_window||window,n.bodyElement=a,u.content_document=u.content_window=null,u.root_name=a.nodeName.toLowerCase());(f=n.getBody()).disabled=!0;n.readonly=u.readonly;n.readonly||(n.inline&&"static"===ue.getStyle(f,"position",!0)&&(f.style.position="relative"),f.contentEditable=n.getParam("content_editable_state",!0));f.disabled=!1;n.editorUpload=ivi(n);n.schema=yu(u);n.dom=g(e,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:u.force_hex_style_colors,class_filter:u.class_filter,update_styles:!0,root_element:n.inline?n.getBody():null,collect:u.content_editable,schema:n.schema,onSetAttrib:function(t){n.fire("SetAttrib",t)}});n.parser=((s=vn((o=n).settings,o.schema)).addAttributeFilter("src,href,style,tabindex",function(n,t){for(var r,i,u,f=n.length,e=o.dom;f--;)if(i=(r=n[f]).attr(t),u="data-mce-"+t,!r.attributes.map[u]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===t?((i=e.serializeStyle(e.parseStyle(i),r.name)).length||(i=null),r.attr(u,i),r.attr(t,i)):"tabindex"===t?(r.attr(u,i),r.attr(t,null)):r.attr(u,o.convertURL(i,t,r.name))}}),s.addNodeFilter("script",function(n){for(var t,i,r=n.length;r--;)0!==(i=(t=n[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+i)}),s.addNodeFilter("#cdata",function(n){for(var t,i=n.length;i--;)(t=n[i]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(n){for(var t,i=n.length,r=o.schema.getNonEmptyElements();i--;)(t=n[i]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new wi("br",1)).shortEnded=!0)}),s);n.serializer=obt(u,n);n.selection=ikt(n.dom,n.getWin(),n.serializer,n);n.annotator=bct(n);n.formatter=dwt(n);n.undoManager=dpt(n);n._nodeChangeDispatcher=new ovi(n);n._selectionOverrides=tyi(n);ski(n);oki(n);fki(n);fvi(n);n.fire("PreInit");u.browser_spellcheck||u.gecko_spellcheck||(e.body.spellcheck=!1,ue.setAttrib(f,"spellcheck","false"));n.quirks=eki(n);n.fire("PostRender");u.directionality&&(f.dir=u.directionality);u.nowrap&&(f.style.whiteSpace="nowrap");u.protect&&n.on("BeforeSetContent",function(n){t.each(u.protect,function(t){n.content=n.content.replace(t,function(n){return"<!--mce:protected "+escape(n)+"-->"})})});n.on("SetContent",function(){n.addVisual(n.getBody())});n.load({initial:!0,format:"html"});n.startContent=n.getContent({format:"raw"});n.on("compositionstart compositionend",function(t){n.composing="compositionstart"===t.type});0<n.contentStyles.length&&(c="",t.each(n.contentStyles,function(n){c+=n+"\r\n"}),n.dom.addStyle(c));(l=n,l.inline?ue.styleSheetLoader:l.dom.styleSheetLoader).loadAll(n.contentCSS,function(){ndt(n)},function(){ndt(n)});u.content_style&&(v=n,y=u.content_style,p=r.fromDom(v.getDoc().head),h=r.fromTag("style"),rt.set(h,"type","text/css"),tt.append(h,r.fromText(y)),tt.append(p,h))},ec=g.DOM,hki=function(n,t){var h,c,l,a,o,v,u,b=n.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),f=(h=n.id,c=b,l=t.height,a=pui(n),u=r.fromTag("iframe"),rt.setAll(u,a),rt.setAll(u,{id:h+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),eti(u,{width:"100%",height:(o=l,v="number"==typeof o?o+"px":o,v||""),display:"block"}),u).dom(),i,y,p,e,w;return f.onload=function(){f.onload=null;n.fire("load")},w=function(n,t){var i,r;return document.domain!==window.location.hostname&&s.ie&&s.ie<12?(i=eg.uuid("mce"),n[i]=function(){utt(n)},r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.'+i+"(true);})()",ec.setAttrib(t,"src",r),!0):!1}(n,f),n.contentAreaContainer=t.iframeContainer,n.iframeElement=f,n.iframeHTML=(e=wui(i=n)+"<html><head>",bui(i)!==i.documentBaseUrl&&(e+='<base href="'+i.documentBaseURI.getURI()+'" />'),e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',y=kui(i),p=dui(i),iht(i)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+iht(i)+'" />'),e+='<\/head><body id="'+y+'" class="mce-content-body '+p+'" data-id="'+i.id+'"><br><\/body><\/html>'),ec.add(t.iframeContainer,f),w},cki=function(n,t){var i=hki(n,t);t.editorContainer&&(ec.get(t.editorContainer).style.display=n.orgDisplay,n.hidden=ec.isHidden(t.editorContainer));n.getElement().style.display="none";ec.setAttrib(n.id,"aria-hidden","true");i||utt(n)},oc=g.DOM,tdt=function(n,i,r){var u,f,e=dr.get(r);if(u=dr.urls[r]||n.documentBaseUrl.replace(/\/$/,""),r=t.trim(r),e&&-1===t.inArray(i,r)){if(t.each(dr.dependencies(r),function(t){tdt(n,i,t)}),n.plugins[r])return;f=new e(n,u,n.$);(n.plugins[r]=f).init&&(f.init(n,u),i.push(r))}},idt=function(n){return n.replace(/^\-/,"")},rdt=function(n){return{editorContainer:n,iframeContainer:n}},lki=function(n){var i,t,r=n.getElement();return n.inline?rdt(null):(i=r,t=oc.create("div"),oc.insertAfter(t,i),rdt(t))},aki=function(n){var u,t,h,c,f,i,s,l,e,r,o,a=n.settings,v=n.getElement();return n.orgDisplay=v.style.display,ui(a.theme)?(r=(c=n).settings,o=c.getElement(),f=r.width||oc.getStyle(o,"width")||"100%",i=r.height||oc.getStyle(o,"height")||o.offsetHeight,s=r.min_height||100,(l=/^[0-9\.]+(|px)$/i).test(""+f)&&(f=Math.max(parseInt(f,10),100)),l.test(""+i)&&(i=Math.max(parseInt(i,10),s)),e=c.theme.renderUI({targetNode:o,width:f,height:i,deltaWidth:r.delta_width,deltaHeight:r.delta_height}),r.content_editable||(i=(e.iframeHeight||i)+("number"==typeof i?e.deltaHeight||0:""))<s&&(i=s),e.height=i,e):nu(a.theme)?(h=(u=n).getElement(),(t=u.settings.theme(u,h)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||u.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||u.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:h.offsetHeight,t):lki(n)},udt=function(n){var f,i,o,u,e,s,r=n.settings,h=n.getElement();return n.rtl=r.rtl_ui||n.editorManager.i18n.rtl,n.editorManager.i18n.setCode(r.language),r.aria_label=r.aria_label||oc.getAttrib(h,"aria-label",n.getLang("aria.rich_text_area")),n.fire("ScriptsLoaded"),u=(i=n).settings.theme,ui(u)?(i.settings.theme=idt(u),o=ie.get(u),i.theme=new o(i,ie.urls[u]),i.theme.init&&i.theme.init(i,ie.urls[u]||i.documentBaseUrl.replace(/\/$/,""),i.$)):i.theme={},e=n,s=[],t.each(e.settings.plugins.split(/[ ,]/),function(n){tdt(e,s,idt(n))}),f=aki(n),n.editorContainer=f.editorContainer?f.editorContainer:null,r.content_css&&t.each(t.explode(r.content_css),function(t){n.contentCSS.push(n.documentBaseURI.toAbsolute(t))}),r.content_editable?utt(n):cki(n,f)},fe=g.DOM,fdt=function(n){return"-"===n.charAt(0)},vki=function(n,i){var r=wr.ScriptLoader;!function(n,t,i,r){var e=t.settings,u=e.theme,f;ui(u)?(fdt(u)||ie.urls.hasOwnProperty(u)||(f=e.theme_url,f?ie.load(u,t.documentBaseURI.toAbsolute(f)):ie.load(u,"themes/"+u+"/theme"+i+".js")),n.loadQueue(function(){ie.waitFor(u,r)})):r()}(r,n,i,function(){var s,e,u,f,o;s=r;(u=(e=n).settings).language&&"en"!==u.language&&!u.language_url&&(u.language_url=e.editorManager.baseURL+"/langs/"+u.language+".js");u.language_url&&!e.editorManager.i18n.data[u.language]&&s.add(u.language_url);f=n.settings;o=i;t.isArray(f.plugins)&&(f.plugins=f.plugins.join(" "));t.each(f.external_plugins,function(n,t){dr.load(t,n);f.plugins+=" "+t});t.each(f.plugins.split(/[ ,]/),function(n){if((n=t.trim(n))&&!dr.urls[n])if(fdt(n)){n=n.substr(1,n.length);var i=dr.dependencies(n);t.each(i,function(n){var t={prefix:"plugins/",resource:n,suffix:"/plugin"+o+".js"};n=dr.createUrl(t,n);dr.load(n.resource,n)})}else dr.load(n,{prefix:"plugins/",resource:n,suffix:"/plugin"+o+".js"})});r.loadQueue(function(){n.removed||udt(n)},n,function(t){lai(n,t[0]);n.removed||udt(n)})})},yki=function(n){var i=n.settings,r=n.id,u=function(){fe.unbind(window,"ready",u);n.render()},t;vr.Event.domLoaded?n.getElement()&&s.contentEditable&&(i.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden"),t=n.getElement().form||fe.getParent(r,"form"),t&&(n.formElement=t,i.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(fe.insertAfter(fe.create("input",{type:"hidden",name:r}),r),n.hasHiddenInput=!0),n.formEventDelegate=function(t){n.fire(t.type,t)},fe.bind(t,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!i.submit_patch||t.submit.nodeType||t.submit.length||t._mceOldSubmit||(t._mceOldSubmit=t.submit,t.submit=function(){return n.editorManager.triggerSave(),n.setDirty(!1),t._mceOldSubmit(t)})),n.windowManager=byt(n),n.notificationManager=wyt(n),"xml"===i.encoding&&n.on("GetContent",function(n){n.save&&(n.content=fe.encode(n.content))}),i.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),i.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),n.editorManager.add(n),vki(n,n.suffix)):fe.bind(window,"ready",u)},pki=function(n,t,i){var r=n.sidebars?n.sidebars:[];r.push({name:t,settings:i});n.sidebars=r},edt=t.each,wki=t.trim,bki="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),kki={ftp:21,http:80,https:443,mailto:25},ai=function(n,t){var r,u,i=this,f;(n=wki(n),r=(t=i.settings=t||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n))?i.source=n:(f=0===n.indexOf("//"),0!==n.indexOf("/")||f||(n=(r&&r.protocol||"http")+"://mce_host"+n),/^[\w\-]*:?\/\//.test(n)||(u=t.base_uri?t.base_uri.path:new ai(document.location.href).directory,""==t.base_uri.protocol?n="//mce_host"+i.toAbsPath(u,n):(n=/([^#?]*)([#?]?.*)/.exec(n),n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(u,n[1])+n[2])),n=n.replace(/@@/g,"(mce_at)"),n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n),edt(bki,function(t,r){var u=n[r];u&&(u=u.replace(/\(mce_at\)/g,"@@"));i[t]=u}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),i.port||"mce_host"!==i.host||(i.port=r.port),i.host&&"mce_host"!==i.host||(i.host=r.host),i.source=""),f&&(i.protocol=""))};ai.prototype={setPath:function(n){n=/^(.*?)\/?(\w+)?$/.exec(n);this.path=n[0];this.directory=n[1];this.file=n[2];this.source="";this.getURI()},toRelative:function(n){var i,t,r;return"./"===n?n:"mce_host"!==(n=new ai(n,{base_uri:this})).host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol?n.getURI():(t=this.getURI(),r=n.getURI(),t===r||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===r?t:(i=this.toRelPath(this.path,n.path),n.query&&(i+="?"+n.query),n.anchor&&(i+="#"+n.anchor),i))},toAbsolute:function(n,t){return(n=new ai(n,{base_uri:this})).getURI(t&&this.isSameOrigin(n))},isSameOrigin:function(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;var t=kki[this.protocol];if(t&&(this.port||t)==(n.port||t))return!0}return!1},toRelPath:function(n,t){var r,i,u,f=0,e="";if(n=(n=n.substring(0,n.lastIndexOf("/"))).split("/"),r=t.split("/"),n.length>=r.length)for(i=0,u=n.length;i<u;i++)if(i>=r.length||n[i]!==r[i]){f=i+1;break}if(n.length<r.length)for(i=0,u=r.length;i<u;i++)if(i>=n.length||n[i]!==r[i]){f=i+1;break}if(1===f)return t;for(i=0,u=n.length-(f-1);i<u;i++)e+="../";for(i=f-1,u=r.length;i<u;i++)e+=i!==f-1?"/"+r[i]:r[i];return e},toAbsPath:function(n,t){var i,e,r,f=0,u=[];for(e=/\/$/.test(t)?"/":"",n=n.split("/"),t=t.split("/"),edt(n,function(n){n&&u.push(n)}),n=u,i=t.length-1,u=[];0<=i;i--)0!==t[i].length&&"."!==t[i]&&(".."!==t[i]?0<f?f--:u.push(t[i]):f++);return 0!==(r=(i=n.length-f)<=0?u.reverse().join("/"):n.slice(0,i).join("/")+"/"+u.reverse().join("/")).indexOf("/")&&(r="/"+r),e&&r.lastIndexOf("/")!==r.length-1&&(r+=e),r},getURI:function(n){var i,t=this;return t.source&&!n||(i="",n||(i+=t.protocol?t.protocol+"://":"//",t.userInfo&&(i+=t.userInfo+"@"),t.host&&(i+=t.host),t.port&&(i+=":"+t.port)),t.path&&(i+=t.path),t.query&&(i+="?"+t.query),t.anchor&&(i+="#"+t.anchor),t.source=i),t.source}};ai.parseDataUri=function(n){var t,i;return n=decodeURIComponent(n).split(","),(i=/data:([^;]+)/.exec(n[0]))&&(t=i[1]),{type:t,data:n[1]}};ai.getDocumentBaseUrl=function(n){var t;return t=0!==n.protocol.indexOf("http")&&"file:"!==n.protocol?n.href:n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var dki=function(n,i,u){var f,o,s,e,h;if(i.format=i.format?i.format:"html",i.get=!0,i.getInner=!0,i.no_events||n.fire("BeforeGetContent",i),"raw"===i.format)f=t.trim(ppt.trimExternal(n.serializer,u.innerHTML));else if("text"===i.format)f=wu(u.innerText||u.textContent);else{if("tree"===i.format)return n.serializer.serialize(u,i);s=(o=n).serializer.serialize(u,i);e=gf(o);h=new RegExp("^(<"+e+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+e+">[\r\n]*|<br \\/>[\r\n]*)$");f=s.replace(h,"")}return i.content="text"===i.format||ta(r.fromDom(u))?f:t.trim(f),i.no_events||n.fire("GetContent",i),i.content},ftt=function(n,t){t(n);n.firstChild&&ftt(n.firstChild,t);n.next&&ftt(n.next,t)},gki=function(n,t,i){var r=function(n,t,i){var r={},u={},e=[];for(var f in i.firstChild&&ftt(i.firstChild,function(i){l(n,function(n){n.name===i.name&&(r[n.name]?r[n.name].nodes.push(i):r[n.name]={filter:n,nodes:[i]})});l(t,function(n){"string"==typeof i.attr(n.name)&&(u[n.name]?u[n.name].nodes.push(i):u[n.name]={filter:n,nodes:[i]})})}),r)r.hasOwnProperty(f)&&e.push(r[f]);for(f in u)u.hasOwnProperty(f)&&e.push(u[f]);return e}(n,t,i);l(r,function(n){l(n.filter.callbacks,function(t){t(n.nodes,n.filter.name,{})})})},ett=function(n){return n instanceof wi},ott=function(n,t){var r;n.dom.setHTML(n.getBody(),t);kh(r=n)&&c.firstPositionIn(r.getBody()).each(function(n){var t=n.getNode(),u=i.isTable(t)?c.firstPositionIn(t).getOr(n):n;r.selection.setRng(u.toRange())})},ndi=function(i,u,f){return void 0===f&&(f={}),f.format=f.format?f.format:"html",f.set=!0,f.content=ett(u)?"":u,ett(u)||f.no_events||(i.fire("BeforeSetContent",f),u=f.content),n.from(i.getBody()).fold(o(u),function(n){return ett(u)?function(n,i,u,f){gki(n.parser.getNodeFilters(),n.parser.getAttributeFilters(),u);var e=ah({validate:n.validate},n.schema).serialize(u);return f.content=ta(r.fromDom(i))?e:t.trim(e),ott(n,f.content),f.no_events||n.fire("SetContent",f),u}(i,n,u,f):(o=i,h=n,s=f,0===(e=u).length||/^\s+$/.test(e)?(c='<br data-mce-bogus="1">',"TABLE"===h.nodeName?e="<tr><td>"+c+"<\/td><\/tr>":/^(UL|OL)$/.test(h.nodeName)&&(e="<li>"+c+"<\/li>"),(l=gf(o))&&o.schema.isValidChild(h.nodeName.toLowerCase(),l.toLowerCase())?(e=c,e=o.dom.createHTML(l,o.settings.forced_root_block_attrs,e)):e||(e='<br data-mce-bogus="1">'),ott(o,e),o.fire("SetContent",s)):("raw"!==s.format&&(e=ah({validate:o.validate},o.schema).serialize(o.parser.parse(e,{isRootContent:!0,insert:!0}))),s.content=ta(r.fromDom(h))?e:t.trim(e),ott(o,s.content),s.no_events||o.fire("SetContent",s)),s.content);var o,h,e,s,l,c})},ip=g.DOM,rp=function(t){return n.from(t).each(function(n){return n.destroy()})},tdi=function(n){var t;if(!n.removed){var u=n._selectionOverrides,f=n.editorUpload,i=n.getBody(),r=n.getElement();i&&n.save({is_removing:!0});n.removed=!0;n.unbindAllNativeEvents();n.hasHiddenInput&&r&&ip.remove(r.nextSibling);!n.inline&&i&&(t=n,ip.setStyle(t.id,"display",t.orgDisplay));pli(n);n.editorManager.remove(n);ip.remove(n.getContainer());rp(u);rp(f);n.destroy()}},idi=function(n,t){var u,r,i,f=n.selection,e=n.dom;n.destroyed||(t||n.removed?(t||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),rp(f),rp(e)),(r=(u=n).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,r._mceOldSubmit=null),ip.unbind(r,"submit reset",u.formEventDelegate)),(i=n).contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null,i.selection&&(i.selection=i.selection.win=i.selection.dom=i.selection.dom.doc=null),n.destroyed=!0):n.remove())},ee=g.DOM,odt=t.extend,sdt=t.each,hdt=t.resolve,rdi=s.ie,sc=function(n,t,i){var u,f,o,h,c,l,a,r=this,y=r.documentBaseUrl=i.documentBaseURL,v=i.baseURI;u=r;f=n;o=y;h=i.defaultSettings;c=t;a={id:f,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:o,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(l=u).convertURL,url_converter_scope:l,ie7_compat:!0};t=voi(soi,a,h,c);r.settings=t;bt.language=t.language||"en";bt.languageLoad=t.language_load;bt.baseURL=i.baseURL;r.id=n;r.setDirty(!1);r.plugins={};r.documentBaseURI=new ai(t.document_base_url,{base_uri:v});r.baseURI=v;r.contentCSS=[];r.contentStyles=[];r.shortcuts=new hyt(r);r.loadedCSS={};r.editorCommands=new tyt(r);r.suffix=i.suffix;r.editorManager=i;r.inline=t.inline;r.buttons={};r.menuItems={};t.cache_suffix&&(s.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,""));!1===t.override_viewport&&(s.overrideViewPort=!1);i.fire("SetupEditor",{editor:r});r.execCallback("setup",r);r.$=e.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};odt(sc.prototype={render:function(){yki(this)},focus:function(n){uai(this,n)},hasFocus:function(){return kh(this)},execCallback:function(n){for(var t,i,u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return i=this.settings[n],i?(this.callbackLookup&&(t=this.callbackLookup[n])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=(t=i.replace(/\.\w+$/,""))?hdt(t):0,i=hdt(i),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[n]={func:i,scope:t}),i.apply(t||this,Array.prototype.slice.call(arguments,1))):void 0},translate:function(n){if(n&&t.is(n,"string")){var i=this.settings.language||"en",r=this.editorManager.i18n;n=r.data[i+"."+n]||n.replace(/\{\#([^\}]+)\}/g,function(n,t){return r.data[i+"."+t]||"{#"+t+"}"})}return this.editorManager.translate(n)},getLang:function(n,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+n]||(t!==undefined?t:"{#"+n+"}")},getParam:function(n,t,i){return poi(this,n,t,i)},nodeChanged:function(n){this._nodeChangeDispatcher.nodeChanged(n)},addButton:function(n,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)});t.stateSelector&&"undefined"==typeof t.active&&(t.active=!1);t.text||t.icon||(t.icon=n);i.buttons=i.buttons;t.tooltip=t.tooltip||t.title;i.buttons[n]=t},addSidebar:function(n,t){return pki(this,n,t)},addMenuItem:function(n,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)});i.menuItems=i.menuItems;i.menuItems[n]=t},addContextToolbar:function(n,t){var r,i=this;i.contextToolbars=i.contextToolbars||[];"string"==typeof n&&(r=n,n=function(n){return i.dom.is(n,r)});i.contextToolbars.push({id:eg.uuid("mcet"),predicate:n,items:t})},addCommand:function(n,t,i){this.editorCommands.addCommand(n,t,i)},addQueryStateHandler:function(n,t,i){this.editorCommands.addQueryStateHandler(n,t,i)},addQueryValueHandler:function(n,t,i){this.editorCommands.addQueryValueHandler(n,t,i)},addShortcut:function(n,t,i,r){this.shortcuts.add(n,t,i,r)},execCommand:function(n,t,i,r){return this.editorCommands.execCommand(n,t,i,r)},queryCommandState:function(n){return this.editorCommands.queryCommandState(n)},queryCommandValue:function(n){return this.editorCommands.queryCommandValue(n)},queryCommandSupported:function(n){return this.editorCommands.queryCommandSupported(n)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(ee.show(this.getContainer()),ee.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var n=this,t=n.getDoc();n.hidden||(rdi&&t&&!n.inline&&t.execCommand("SelectAll"),n.save(),n.inline?(n.getBody().contentEditable=!1,n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(ee.hide(n.getContainer()),ee.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(n,t){this.fire("ProgressState",{state:n,time:t})},load:function(n){var i,t=this.getElement();return this.removed?"":t?((n=n||{}).load=!0,i=this.setContent(t.value!==undefined?t.value:t.innerHTML,n),n.element=t,n.no_events||this.fire("LoadContent",n),n.element=t=null,i):void 0},save:function(n){var r,u,t=this,i=t.getElement();if(i&&t.initialized&&!t.removed)return(n=n||{}).save=!0,n.element=i,n.content=t.getContent(n),n.no_events||t.fire("SaveContent",n),"raw"===n.format&&t.fire("RawSaveContent",n),r=n.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=r:(!n.is_removing&&t.inline||(i.innerHTML=r),(u=ee.getParent(t.id,"form"))&&sdt(u.elements,function(n){if(n.name===t.id)return n.value=r,!1})),n.element=i=null,!1!==n.set_dirty&&t.setDirty(!1),r},setContent:function(n,t){return ndi(this,n,t)},getContent:function(t){return r=this,void 0===(i=t)&&(i={}),n.from(r.getBody()).fold(o("tree"===i.format?new wi("body",11):""),function(n){return dki(r,i,n)});var r,i},insertContent:function(n,t){t&&(n=odt({content:n},t));this.execCommand("mceInsertContent",!1,n)},isDirty:function(){return!this.isNotDirty},setDirty:function(n){var t=!this.isNotDirty;this.isNotDirty=!n;n&&n!==t&&this.fire("dirty")},setMode:function(n){var t,i;(i=n)!==dli(t=this)&&(t.initialized?ryt(t,"readonly"===i):t.on("init",function(){ryt(t,"readonly"===i)}),wli(t,i))},getContainer:function(){return this.container||(this.container=ee.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=ee.get(this.id)),this.targetElm},getWin:function(){var n;return this.contentWindow||(n=this.iframeElement)&&(this.contentWindow=n.contentWindow),this.contentWindow},getDoc:function(){var n;return this.contentDocument||(n=this.getWin())&&(this.contentDocument=n.document),this.contentDocument},getBody:function(){var n=this.getDoc();return this.bodyElement||(n?n.body:null)},convertURL:function(n,t,i){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",n,i,!0,t):!r.convert_urls||i&&"LINK"===i.nodeName||0===n.indexOf("file:")||0===n.length?n:r.relative_urls?this.documentBaseURI.toRelative(n):n=this.documentBaseURI.toAbsolute(n,r.remove_script_host)},addVisual:function(n){var r,t=this,u=t.settings,i=t.dom;n=n||t.getBody();t.hasVisual===undefined&&(t.hasVisual=u.visual);sdt(i.select("table,a",n),function(n){var f;switch(n.nodeName){case"TABLE":return r=u.visual_table_class||"mce-item-table",void((f=i.getAttrib(n,"border"))&&"0"!==f||!t.hasVisual?i.removeClass(n,r):i.addClass(n,r));case"A":return void(i.getAttrib(n,"href")||(f=i.getAttrib(n,"name")||n.id,r=u.visual_anchor_class||"mce-item-anchor",f&&t.hasVisual?i.addClass(n,r):i.removeClass(n,r)))}});t.fire("VisualAid",{element:n,hasVisual:t.hasVisual})},remove:function(){tdi(this)},destroy:function(n){idi(this,n)},uploadImages:function(n){return this.editorUpload.uploadImages(n)},_scanForImages:function(){return this.editorUpload.scanForImages()}},oyt);var hc,up,of,cdt={isEditorUIElement:function(n){return-1!==n.className.toString().indexOf("mce-")}},udi=function(n,t){var i,r;cu.detect().browser.isIE()?(r=n).on("focusout",function(){iy(r)}):(i=t,n.on("mouseup touchend",function(){i.throttle()}));n.on("keyup nodechange",function(t){var i;"nodechange"===(i=t).type&&i.selectionChange||iy(n)})},fdi=function(n){var r,u,t,i=uet(function(){iy(n)},0);n.inline&&(r=n,u=i,t=function(){u.throttle()},g.DOM.bind(document,"mouseup",t),r.on("remove",function(){g.DOM.unbind(document,"mouseup",t)}));n.on("init",function(){udi(n,i)});n.on("remove",function(){i.cancel()})},stt=g.DOM,edi=function(n){return cdt.isEditorUIElement(n)},ldt=function(n,t){var i=n?n.settings.custom_ui_selector:"";return null!==stt.getParent(t,function(t){return edi(t)||!!i&&n.dom.is(t,i)})},odi=function(n,t){var i=t.editor;fdi(i);i.on("focusin",function(){var t=n.focusedEditor;t!==this&&(t&&t.fire("blur",{focusedEditor:this}),n.setActive(this),(n.focusedEditor=this).fire("focus",{blurredEditor:t}),this.focus(!0))});i.on("focusout",function(){var t=this;gt.setEditorTimeout(t,function(){var i=n.focusedEditor;ldt(t,function(){try{return document.activeElement}catch(n){return document.body}}())||i!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})});hc||(hc=function(t){var i,r=n.activeEditor;i=t.target;r&&i.ownerDocument===document&&(i===document.body||ldt(r,i)||n.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),n.focusedEditor=null))},stt.bind(document,"focusin",hc))},sdi=function(n,t){n.focusedEditor===t.editor&&(n.focusedEditor=null);n.activeEditor||(stt.unbind(document,"focusin",hc),hc=null)},hdi=function(n){n.on("AddEditor",f(odi,n));n.on("RemoveEditor",f(sdi,n))},fp={},htt="en",ep={setCode:function(n){n&&(htt=n,this.rtl=!!this.data[n]&&"rtl"===this.data[n]._dir)},getCode:function(){return htt},rtl:!1,add:function(n,t){var i=fp[n];for(var r in i||(fp[n]=i={}),t)i[r]=t[r];this.setCode(n)},translate:function(n){var u=fp[htt]||{},i=function(n){return t.is(n,"function")?Object.prototype.toString.call(n):f(n)?"":""+n},f=function(n){return""===n||null===n||t.is(n,"undefined")},e=function(n){return n=i(n),t.hasOwn(u,n)?i(u[n]):n},r;return f(n)?"":t.is(n,"object")&&t.hasOwn(n,"raw")?i(n.raw):(t.is(n,"array")&&(r=n.slice(1),n=e(n[0]).replace(/\{([0-9]+)\}/g,function(n,u){return t.hasOwn(r,u)?i(r[u]):n})),e(n).replace(/{context:\w+}$/,""))},data:fp},ri=g.DOM,cdi=t.explode,ar=t.each,adt=t.extend,ldi=0,vdt=!1,sf=[],wt=[],ydt=function(n){ar(of.get(),function(t){"scroll"===n.type?t.fire("ScrollWindow",n):t.fire("ResizeWindow",n)})},pdt=function(n){n!==vdt&&(n?e(window).on("resize scroll",ydt):e(window).off("resize scroll",ydt),vdt=n)},wdt=function(n){var i=wt,t;for(delete sf[n.id],t=0;t<sf.length;t++)if(sf[t]===n){sf.splice(t,1);break}return wt=ot(wt,function(t){return n!==t}),of.activeEditor===n&&(of.activeEditor=0<wt.length?wt[0]:null),of.focusedEditor===n&&(of.focusedEditor=null),i.length!==wt.length};adt(of={defaultSettings:{},$:e,majorVersion:"4",minorVersion:"8.3",releaseDate:"2018-09-13",editors:sf,i18n:ep,activeEditor:null,settings:{},setup:function(){var i,n,r,t,u="",e,f,o;if(n=ai.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),r=window.tinymce||window.tinyMCEPreInit)i=r.base||r.baseURL,u=r.suffix;else{for(e=document.getElementsByTagName("script"),f=0;f<e.length;f++)if(o=(t=e[f].src).substring(t.lastIndexOf("/")),/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(t)){-1!==o.indexOf(".min")&&(u=".min");i=t.substring(0,t.lastIndexOf("/"));break}!i&&document.currentScript&&(-1!==(t=document.currentScript.src).indexOf(".min")&&(u=".min"),i=t.substring(0,t.lastIndexOf("/")))}this.baseURL=new ai(n).toAbsolute(i);this.documentBaseURL=n;this.baseURI=new ai(this.baseURL);this.suffix=u;hdi(this)},overrideDefaults:function(n){var r,u,t,i;(r=n.base_url)&&(this.baseURL=new ai(this.documentBaseURL).toAbsolute(r.replace(/\/+$/,"")),this.baseURI=new ai(this.baseURL));u=n.suffix;n.suffix&&(this.suffix=u);t=(this.defaultSettings=n).plugin_base_urls;for(i in t)bt.PluginManager.urls[i]=t[i]},init:function(n){var r,f,i=this;f=t.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var o=function(n){var t=n.id;return t||(t=(t=n.name)&&!ri.get(t)?n.name:ri.uniqueId(),n.setAttribute("id",t)),t},h=function(n,t){return t.constructor===RegExp?t.test(n.className):ri.hasClass(n,t)},u=function(n){r=n},c=function(){var r,v=0,l=[],a=function(n,t,f){var e=new sc(n,t,i);l.push(e);e.on("init",function(){++v===r.length&&u(l)});e.targetElm=e.targetElm||f;e.render()};ri.unbind(window,"ready",c),function(t){var r=n[t];r&&r.apply(i,Array.prototype.slice.call(arguments,2))}("onpageload");r=e.unique(function(n){var i,t=[];if(s.ie&&s.ie<11)return gyt("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(n.types)return ar(n.types,function(n){t=t.concat(ri.select(n.selector))}),t;if(n.selector)return ri.select(n.selector);if(n.target)return[n.target];switch(n.mode){case"exact":0<(i=n.elements||"").length&&ar(cdi(i),function(n){var i;(i=ri.get(n))?t.push(i):ar(document.forms,function(i){ar(i.elements,function(i){i.name===n&&(n="mce_editor_"+ldi++,ri.setAttrib(i,"id",n),t.push(i))})})});break;case"textareas":case"specific_textareas":ar(ri.select("textarea"),function(i){n.editor_deselector&&h(i,n.editor_deselector)||n.editor_selector&&!h(i,n.editor_selector)||t.push(i)})}return t}(n));n.types?ar(n.types,function(i){t.each(r,function(t){return!ri.is(t,i.selector)||(a(o(t),adt({},n,i),t),!1)})}):(t.each(r,function(n){var t;(t=i.get(n.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(wdt(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(r=t.grep(r,function(n){return!i.get(n.id)})).length?u([]):ar(r,function(t){var i;i=t;n.inline&&i.tagName.toLowerCase()in f?gyt("Could not initialize inline editor on invalid inline target element",t):a(o(t),n,t)}))};return i.settings=n,ri.bind(window,"ready",c),new oi(function(n){r?n(r):u=function(t){n(t)}})},get:function(n){return 0===arguments.length?wt.slice(0):ui(n)?fi(wt,function(t){return t.id===n}).getOr(null):wp(n)&&wt[n]?wt[n]:null},add:function(n){var t=this;return sf[n.id]===n||(null===t.get(n.id)&&("length"!==n.id&&(sf[n.id]=n),sf.push(n),wt.push(n)),pdt(!0),t.activeEditor=n,t.fire("AddEditor",{editor:n}),up||(up=function(){t.fire("BeforeUnload")},ri.bind(window,"beforeunload",up))),n},createEditor:function(n,t){return this.add(new sc(n,t,this))},remove:function(n){var r,t,i=this;if(n){if(!ui(n))return t=n,igt(i.get(t.id))?null:(wdt(t)&&i.fire("RemoveEditor",{editor:t}),0===wt.length&&ri.unbind(window,"beforeunload",up),t.remove(),pdt(0<wt.length),t);ar(ri.select(n),function(n){(t=i.get(n.id))&&i.remove(t)})}else for(r=wt.length-1;0<=r;r--)i.remove(wt[r])},execCommand:function(n,t,i){var r=this.get(i);switch(n){case"mceAddEditor":return this.get(i)||new sc(i,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",0,i),!0}return!!this.activeEditor&&this.activeEditor.execCommand(n,t,i)},triggerSave:function(){ar(wt,function(n){n.save()})},addI18n:function(n,t){ep.add(n,t)},translate:function(n){return ep.translate(n)},setActive:function(n){var t=this.activeEditor;this.activeEditor!==n&&(t&&t.fire("deactivate",{relatedTarget:n}),n.fire("activate",{relatedTarget:t}));this.activeEditor=n}},uy);of.setup();ctt=of;(op=ltt||(ltt={})).compareRanges=wd;op.getCaretRangeFromPoint=pn;op.getSelectedNode=fk;op.getNode=ho;var bdt,att,adi=ltt,kdt=Math.min,fs=Math.max,sp=Math.round,ddt=function(n,t,i){var r,u,f,e,o,s;return r=t.x,u=t.y,f=n.w,e=n.h,o=t.w,s=t.h,"b"===(i=(i||"").split(""))[0]&&(u+=s),"r"===i[1]&&(r+=o),"c"===i[0]&&(u+=sp(s/2)),"c"===i[1]&&(r+=sp(o/2)),"b"===i[3]&&(u-=e),"r"===i[4]&&(r-=f),"c"===i[3]&&(u-=sp(e/2)),"c"===i[4]&&(r-=sp(f/2)),es(r,u,f,e)},es=function(n,t,i,r){return{x:n,y:t,w:i,h:r}},vdi={inflate:function(n,t,i){return es(n.x-t,n.y-i,n.w+2*t,n.h+2*i)},relativePosition:ddt,findBestRelativePosition:function(n,t,i,r){for(var u,f=0;f<r.length;f++)if((u=ddt(n,t,r[f])).x>=i.x&&u.x+u.w<=i.w+i.x&&u.y>=i.y&&u.y+u.h<=i.h+i.y)return r[f];return null},intersect:function(n,t){var i,r,u,f;return i=fs(n.x,t.x),r=fs(n.y,t.y),u=kdt(n.x+n.w,t.x+t.w),f=kdt(n.y+n.h,t.y+t.h),u-i<0||f-r<0?null:es(i,r,u-i,f-r)},clamp:function(n,t,i){var o,s,h,c,r,u,f,e,l,a;return r=n.x,u=n.y,f=n.x+n.w,e=n.y+n.h,l=t.x+t.w,a=t.y+t.h,o=fs(0,t.x-r),s=fs(0,t.y-u),h=fs(0,f-l),c=fs(0,e-a),r+=o,u+=s,i&&(f+=o,e+=s,r-=h,u-=c),es(r,u,(f-=h)-r,(e-=c)-u)},create:es,fromClientRect:function(n){return es(n.left,n.top,n.width,n.height)}},cc={},ydi={add:function(n,t){cc[n.toLowerCase()]=t},has:function(n){return!!cc[n.toLowerCase()]},get:function(n){var t=n.toLowerCase(),i=cc.hasOwnProperty(t)?cc[t]:null;if(null===i)throw new Error("Could not find module for type: "+n);return i},create:function(n,t){var i;if("string"==typeof n?(t=t||{}).type=n:n=(t=n).type,n=n.toLowerCase(),!(i=cc[n]))throw new Error("Could not find control by type: "+n);return(i=new i(t)).type=n,i}},hp=t.each,pdi=t.extend,gdt=function(){};gdt.extend=bdt=function(n){var u,i,f,t=this.prototype,r=function(){var n,t,i;if(!att&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(n=t.length;n--;)(i=t[n]).init&&i.init.apply(this,arguments)},e=function(){return this},o=function(n,i){return function(){var r,u=this._super;return this._super=t[n],r=i.apply(this,arguments),this._super=u,r}};for(i in att=!0,u=new this,att=!1,n.Mixins&&(hp(n.Mixins,function(t){for(var i in t)"init"!==i&&(n[i]=t[i])}),t.Mixins&&(n.Mixins=t.Mixins.concat(n.Mixins))),n.Methods&&hp(n.Methods.split(","),function(t){n[t]=e}),n.Properties&&hp(n.Properties.split(","),function(t){var i="_"+t;n[t]=function(n){return n!==undefined?(this[i]=n,this):this[i]}}),n.Statics&&hp(n.Statics,function(n,t){r[t]=n}),n.Defaults&&t.Defaults&&(n.Defaults=pdi({},t.Defaults,n.Defaults)),n)u[i]="function"==typeof(f=n[i])&&t[i]?o(i,f):f;return r.prototype=u,(r.constructor=r).extend=bdt,r};var cp=Math.min,lp=Math.max,oe=Math.round,vtt=function(n,t){var r,i,f,u;if(t=t||'"',null===n)return"null";if("string"==(f=typeof n))return i="\bb\tt\nn\ff\rr\"\"''\\\\",t+n.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(n,u){return'"'===t&&"'"===n?n:(r=i.indexOf(u))+1?"\\"+i.charAt(r+1):(n=u.charCodeAt().toString(16),"\\u"+"0000".substring(n.length)+n)})+t;if("object"===f){if(n.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(n)){for(r=0,i="[";r<n.length;r++)i+=(0<r?",":"")+vtt(n[r],t);return i+"]"}for(u in i="{",n)n.hasOwnProperty(u)&&(i+="function"!=typeof n[u]?(1<i.length?","+t:t)+u+t+":"+vtt(n[u],t):"");return i+"}"}return""+n},ytt={serialize:vtt,parse:function(n){try{return JSON.parse(n)}catch(t){}}},wdi={callbacks:{},count:0,send:function(n){var t=this,i=g.DOM,r=n.count!==undefined?n.count:t.count,u="tinymce_jsonp_"+r;t.callbacks[r]=function(f){i.remove(u);delete t.callbacks[r];n.callback(f)};i.add(i.doc.body,"script",{id:u,src:n.url,type:"text/javascript"});t.count++}},lc={send:function(n){var i,r=0,u=function(){!n.async||4===i.readyState||1e4<r++?(n.success&&r<1e4&&200===i.status?n.success.call(n.success_scope,""+i.responseText,i,n):n.error&&n.error.call(n.error_scope,1e4<r?"TIMED_OUT":"GENERAL",i,n),i=null):setTimeout(u,10)};if(n.scope=n.scope||this,n.success_scope=n.success_scope||n.scope,n.error_scope=n.error_scope||n.scope,n.async=!1!==n.async,n.data=n.data||"",lc.fire("beforeInitialize",{settings:n}),i=new fg){if(i.overrideMimeType&&i.overrideMimeType(n.content_type),i.open(n.type||(n.data?"POST":"GET"),n.url,n.async),n.crossDomain&&(i.withCredentials=!0),n.content_type&&i.setRequestHeader("Content-Type",n.content_type),n.requestheaders&&t.each(n.requestheaders,function(n){i.setRequestHeader(n.key,n.value)}),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),(i=lc.fire("beforeSend",{xhr:i,settings:n}).xhr).send(n.data),!n.async)return u();setTimeout(u,10)}}};t.extend(lc,uy);btt=t.extend;vc=function(n){this.settings=btt({},n);this.count=0};vc.sendRPC=function(n){return(new vc).send(n)};vc.prototype={send:function(n){var t=n.error,i=n.success;(n=btt(this.settings,n)).success=function(r,u){void 0===(r=ytt.parse(r))&&(r={error:"JSON Parse error."});r.error?t.call(n.error_scope||n.scope,r.error,u):i.call(n.success_scope||n.scope,r.result)};n.error=function(i,r){t&&t.call(n.error_scope||n.scope,i,r)};n.data=ytt.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params});n.content_type="application/json";lc.send(n)}};try{ptt=window.localStorage}catch(kdi){ac={};se=[];wtt={getItem:function(n){var t=ac[n];return t||null},setItem:function(n,t){se.push(n);ac[n]=String(t)},key:function(n){return se[n]},removeItem:function(n){se=se.filter(function(t){return t===n});delete ac[n]},clear:function(){se=[];ac={}},length:0};Object.defineProperty(wtt,"length",{get:function(){return se.length},configurable:!1,enumerable:!1});ptt=wtt}var ktt,ngt=ctt,bdi={geom:{Rect:vdi},util:{Promise:oi,Delay:gt,Tools:t,VK:y,URI:ai,Class:gdt,EventDispatcher:wh,Observable:uy,I18n:ep,XHR:lc,JSON:ytt,JSONRequest:vc,JSONP:wdi,LocalStorage:ptt,Color:function(n){var u={},t=0,i=0,r=0,f=function(n){var f;return"object"==typeof n?"r"in n?(t=n.r,i=n.g,r=n.b):"v"in n&&function(n,u,f){var h,e,o,s;if(n=(parseInt(n,10)||0)%360,u=parseInt(u,10)/100,f=parseInt(f,10)/100,u=lp(0,cp(u,1)),f=lp(0,cp(f,1)),0!==u){switch(h=n/60,o=(e=f*u)*(1-Math.abs(h%2-1)),s=f-e,Math.floor(h)){case 0:t=e;i=o;r=0;break;case 1:t=o;i=e;r=0;break;case 2:t=0;i=e;r=o;break;case 3:t=0;i=o;r=e;break;case 4:t=o;i=0;r=e;break;case 5:t=e;i=0;r=o;break;default:t=i=r=0}t=oe(255*(t+s));i=oe(255*(i+s));r=oe(255*(r+s))}else t=i=r=oe(255*f)}(n.h,n.s,n.v):(f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(n))?(t=parseInt(f[1],10),i=parseInt(f[2],10),r=parseInt(f[3],10)):(f=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(n))?(t=parseInt(f[1],16),i=parseInt(f[2],16),r=parseInt(f[3],16)):(f=/#([0-F])([0-F])([0-F])/gi.exec(n))&&(t=parseInt(f[1]+f[1],16),i=parseInt(f[2]+f[2],16),r=parseInt(f[3]+f[3],16)),t=t<0?0:255<t?255:t,i=i<0?0:255<i?255:i,r=r<0?0:255<r?255:r,u};return n&&f(n),u.toRgb=function(){return{r:t,g:i,b:r}},u.toHsv=function(){return u=t,e=i,f=r,o=0,(n=cp(u/=255,cp(e/=255,f/=255)))===(s=lp(u,lp(e,f)))?{h:0,s:0,v:100*(o=n)}:(h=(s-n)/s,{h:oe(60*((u===n?3:f===n?1:5)-(u===n?e-f:f===n?u-e:f-u)/((o=s)-n))),s:oe(100*h),v:oe(100*o)});var u,e,f,h,o,n,s},u.toHex=function(){var n=function(n){return 1<(n=parseInt(n,10).toString(16)).length?n:"0"+n};return"#"+n(t)+n(i)+n(r)},u.parse=f,u}},dom:{EventUtils:vr,Sizzle:p,DomQuery:e,TreeWalker:ht,DOMUtils:g,ScriptLoader:wr,RangeUtils:adi,Serializer:obt,ControlSelection:cbt,BookmarkManager:sbt,Selection:ikt,Event:vr.Event},html:{Styles:lb,Entities:wf,Node:wi,Schema:yu,SaxParser:bg,DomParser:vn,Writer:nlt,Serializer:ah},ui:{Factory:ydi},Env:s,AddOnManager:bt,Annotator:bct,Formatter:dwt,UndoManager:dpt,EditorCommands:tyt,WindowManager:byt,NotificationManager:wyt,EditorObservable:oyt,Shortcuts:hyt,Editor:sc,FocusManager:cdt,EditorManager:ctt,DOM:g.DOM,ScriptLoader:wr.ScriptLoader,PluginManager:bt.PluginManager,ThemeManager:bt.ThemeManager,trim:t.trim,isArray:t.isArray,is:t.is,toArray:t.toArray,makeMap:t.makeMap,each:t.each,map:t.map,grep:t.grep,inArray:t.inArray,extend:t.extend,create:t.create,walk:t.walk,createNS:t.createNS,resolve:t.resolve,explode:t.explode,_addCacheSuffix:t._addCacheSuffix,isOpera:s.opera,isWebKit:s.webkit,isIE:s.ie,isGecko:s.gecko,isMac:s.mac},tgt=ngt=t.extend(ngt,bdi);ktt=tgt;window.tinymce=ktt;window.tinyMCE=ktt,function(n){if("object"==typeof module)try{module.exports=n}catch(t){}}(tgt)}();!function(){var u,r,f,n,i,e=[],t,o;i="undefined"!=typeof global?global:window;n=i.jQuery;t=function(){return i.tinymce};n.fn.tinymce=function(u){var s,y,l,h=this,a="",v,c;return h.length?u?(h.css("visibility","hidden"),v=function(){var i=[],r=0;f||(o(),f=!0);h.each(function(n,f){var o,e=f.id,s=u.oninit;e||(f.id=e=t().DOM.uniqueId());t().get(e)||(o=t().createEditor(e,u),i.push(o),o.on("init",function(){var u,n=s;h.css("visibility","");s&&++r==i.length&&("string"==typeof n&&(u=-1===n.indexOf(".")?null:t().resolve(n.replace(/\.\w+$/,"")),n=t().resolve(n)),n.apply(u||t(),i))}))});n.each(i,function(n,t){t.render()})},!i.tinymce&&!r&&(s=u.script_url)?(r=1,y=s.substring(0,s.lastIndexOf("/")),-1!=s.indexOf(".min")&&(a=".min"),i.tinymce=i.tinyMCEPreInit||{base:y,suffix:a},-1!=s.indexOf("gzip")&&(l=u.language||"en",s=s+(/\?/.test(s)?"&":"?")+"js=true&core=true&suffix="+escape(a)+"&themes="+escape(u.theme||"modern")+"&plugins="+escape(u.plugins||"")+"&languages="+(l||""),i.tinyMCE_GZ||(i.tinyMCE_GZ={start:function(){var i=function(n){t().ScriptLoader.markDone(t().baseURI.toAbsolute(n))};i("langs/"+l+".js");i("themes/"+u.theme+"/theme"+a+".js");i("themes/"+u.theme+"/langs/"+l+".js");n.each(u.plugins.split(","),function(n,t){t&&(i("plugins/"+t+"/plugin"+a+".js"),i("plugins/"+t+"/langs/"+l+".js"))})},end:function(){}})),c=document.createElement("script"),c.type="text/javascript",c.onload=c.onreadystatechange=function(i){i=i||window.event;2!==r&&("load"==i.type||/complete|loaded/.test(c.readyState))&&(t().dom.Event.domLoaded=1,r=2,u.script_loaded&&u.script_loaded(),v(),n.each(e,function(n,t){t()}))},c.src=s,document.body.appendChild(c)):1===r?e.push(v):v(),h):t()?t().get(h[0].id):null:h};n.extend(n.expr[":"],{tinymce:function(n){var r;return!!(n.id&&"tinymce"in i&&(r=t().get(n.id))&&r.editorManager===t())}});o=function(){var o=function(n){"remove"===n&&this.each(function(n,t){var i=f(t);i&&i.remove()});this.find("span.mceEditor,div.mceEditor").each(function(n,i){var r=t().get(i.id.replace(/_parent$/,""));r&&r.remove()})},s=function(n){var r,i=this;if(null!=n)o.call(i),i.each(function(i,r){var u;(u=t().get(r.id))&&u.setContent(n)});else if(0<i.length&&(r=t().get(i[0].id)))return r.getContent()},f=function(n){var r=null;return n&&n.id&&i.tinymce&&(r=t().get(n.id)),r},e=function(n){return!!(n&&n.length&&i.tinymce&&n.is(":tinymce"))},r={};n.each(["text","html","val"],function(t,i){var o=r[i]=n.fn[i],h="text"===i;n.fn[i]=function(t){var i=this,r,c;return e(i)?t!==u?(s.call(i.filter(":tinymce"),t),o.apply(i.not(":tinymce"),arguments),i):(r="",c=arguments,(h?i:i.eq(0)).each(function(t,i){var u=f(i);r+=u?h?u.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):u.getContent({save:!0}):o.apply(n(i),c)}),r):o.apply(i,arguments)}});n.each(["append","prepend"],function(t,i){var o=r[i]=n.fn[i],s="prepend"===i;n.fn[i]=function(n){var t=this;return e(t)?n!==u?("string"==typeof n&&t.filter(":tinymce").each(function(t,i){var r=f(i);r&&r.setContent(s?n+r.getContent():r.getContent()+n)}),o.apply(t.not(":tinymce"),arguments),t):void 0:o.apply(t,arguments)}});n.each(["remove","replaceWith","replaceAll","empty"],function(t,i){var u=r[i]=n.fn[i];n.fn[i]=function(){return o.call(this,i),u.apply(this,arguments)}});r.attr=n.fn.attr;n.fn.attr=function(t,i){var o=this,h=arguments,c,l;return!t||"value"!==t||!e(o)?r.attr.apply(o,h):i!==u?(s.call(o.filter(":tinymce"),i),r.attr.apply(o.not(":tinymce"),h),o):(c=o[0],l=f(c),l?l.getContent({save:!0}):r.attr.apply(n(c),h))}}}();!function(){"use strict";function ne(n,t,r){var a,v,u,f,e,o,h,c,l,s;return l=te(),u=(v=i.getPos(t,p.getUiContainer(n))).x,f=v.y,fi(n)&&gf(document.body)&&(u-=l.x,f-=l.y),a=n.getEl(),e=(s=i.getSize(a)).width,o=s.height,h=(s=i.getSize(t)).width,c=s.height,"b"===(r=(r||"").split(""))[0]&&(f+=c),"r"===r[1]&&(u+=h),"c"===r[0]&&(f+=Math.round(c/2)),"c"===r[1]&&(u+=Math.round(h/2)),"b"===r[3]&&(f-=o),"r"===r[4]&&(u-=e),"c"===r[3]&&(f-=Math.round(o/2)),"c"===r[4]&&(u-=Math.round(e/2)),{x:u,y:f,w:e,h:o}}function nc(){}function oi(n){this.cls=[];this.cls._map={};this.onchange=n||nc;this.prefix=""}function oe(n){return 0<n.nodeType}function hi(n){return n._eventDispatcher||(n._eventDispatcher=new re({scope:n,toggleEvent:function(t,i){i&&re.isNative(t)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[t]=!0,n.state.get("rendered")&&ce(n))}})),n._eventDispatcher}function ce(n){function c(t){var i=n.getParentCtrl(t.target);i&&i.fire(t.type,t)}function l(){var n=i._lastHoverCtrl;n&&(n.fire("mouseleave",{target:n.getEl()}),n.parents().each(function(n){n.fire("mouseleave",{target:n.getEl()})}),i._lastHoverCtrl=null)}function a(t){var r,s,e,o=n.getParentCtrl(t.target),f=i._lastHoverCtrl,u=0;if(o!==f){if((s=(i._lastHoverCtrl=o).parents().toArray().reverse()).push(o),f){for((e=f.parents().toArray().reverse()).push(f),u=0;u<e.length&&s[u]===e[u];u++);for(r=e.length-1;u<=r;r--)(f=e[r]).fire("mouseleave",{target:f.getEl()})}for(r=u;r<s.length;r++)(o=s[r]).fire("mouseenter",{target:o.getEl()})}}function h(t){t.preventDefault();"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail);t=n.fire("wheel",t)}var r,o,f,i,s,u,e;if(s=n._nativeEvents){for((f=n.parents().toArray()).unshift(n),r=0,o=f.length;!i&&r<o;r++)i=f[r]._eventsRoot;for(i||(i=f[f.length-1]||n),n._eventsRoot=i,o=r,r=0;r<o;r++)f[r]._eventsRoot=i;e=i._delegates;for(u in e||(e=i._delegates={}),s){if(!s)return!1;"wheel"!==u||fc?("mouseenter"===u||"mouseleave"===u?i._hasMouseEnter||(t(i.getEl()).on("mouseleave",l).on("mouseover",a),i._hasMouseEnter=1):e[u]||(t(i.getEl()).on(u,c),e[u]=!0),s[u]=!1):uc?t(n.getEl()).on("mousewheel",h):t(n.getEl()).on("DOMMouseScroll",h)}}}function le(n){function c(n){return n&&1===n.nodeType}function u(n){return c(n=n||t)?n.getAttribute("role"):null}function o(n){for(var r,i=n||t;i=i.parentNode;)if(r=u(i))return r}function l(n){var i=t;if(c(i))return i.getAttribute("aria-"+n)}function a(n){var t=n.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function f(n){var t=[];return function i(n){var r,f;if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled)for((a(r=n)&&!r.hidden||kr(r)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(u(r)))&&t.push(n),f=0;f<n.childNodes.length;f++)i(n.childNodes[f])}(n||e.getEl()),t}function v(n){var u,r,t;for((r=(n=n||i).parents().toArray()).unshift(n),t=0;t<r.length&&!(u=r[t]).settings.ariaRoot;t++);return u}function h(n,t){return n<0?n=t.length-1:n>=t.length&&(n=0),t[n]&&t[n].focus(),n}function r(n,i){var u=-1,e=v(),r;for(i=i||f(e.getEl()),r=0;r<i.length;r++)i[r]===t&&(u=r);u+=n;e.lastAriaIndex=h(u,i)}function p(){"tablist"===o()?r(-1,f(t.parentNode)):i.parent().submenu?y():r(-1)}function w(){var i=u(),n=o();"tablist"===n?r(1,f(t.parentNode)):"menuitem"===i&&"menu"===n&&l("haspopup")?s():r(1)}function b(){r(-1)}function k(){var n=u(),t=o();"menuitem"===n&&"menubar"===t?s():"button"===n&&l("haspopup")?s({key:"down"}):r(1)}function y(){i.fire("cancel")}function s(n){n=n||{};i.fire("click",{target:t,aria:n})}var t,i,e=n.root;try{t=document.activeElement}catch(d){t=document.body}return i=e.getParentCtrl(t),e.on("keydown",function(n){function e(n,i){a(t)||kr(t)||"slider"!==u(t)&&!1!==i(n)&&n.preventDefault()}if(!n.isDefaultPrevented())switch(n.keyCode){case 37:e(n,p);break;case 39:e(n,w);break;case 38:e(n,b);break;case 40:e(n,k);break;case 27:y();break;case 14:case 13:case 32:e(n,s);break;case 9:!function(n){if("tablist"===o()){var t=f(i.getEl("body"))[0];t&&t.focus()}else r(n.shiftKey?-1:1)}(n);n.preventDefault()}}),e.on("focusin",function(n){t=n.target;i=n.control}),{focusFirst:function(n){var t=v(n),i=f(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?h(t.lastAriaIndex,i):h(0,i)}}}function gr(n){var i,t;if(n.changedTouches)for(i="screenX screenY pageX pageY clientX clientY".split(" "),t=0;t<i.length;t++)n[i[t]]=n.changedTouches[0][i[t]]}function ft(n,i){var o,s,h,u,e,c,l,r=i.document||document,f;i=i||{};f=r.getElementById(i.handle||n);h=function(n){var y,h,a,p,k,d,w,g,v,b,nt,tt=(y=r,v=Math.max,h=y.documentElement,a=y.body,p=v(h.scrollWidth,a.scrollWidth),k=v(h.clientWidth,a.clientWidth),d=v(h.offsetWidth,a.offsetWidth),w=v(h.scrollHeight,a.scrollHeight),g=v(h.clientHeight,a.clientHeight),{width:p<d?k:p,height:w<v(h.offsetHeight,a.offsetHeight)?g:w});gr(n);n.preventDefault();s=n.button;b=f;c=n.screenX;l=n.screenY;nt=window.getComputedStyle?window.getComputedStyle(b,null).getPropertyValue("cursor"):b.runtimeStyle.cursor;o=t("<div><\/div>").css({position:"absolute",top:0,left:0,width:tt.width,height:tt.height,zIndex:2147483647,opacity:.0001,cursor:nt}).appendTo(r.body);t(r).on("mousemove touchmove",e).on("mouseup touchend",u);i.start(n)};e=function(n){if(gr(n),n.button!==s)return u(n);n.deltaX=n.screenX-c;n.deltaY=n.screenY-l;n.preventDefault();i.drag(n)};u=function(n){gr(n);t(r).off("mousemove touchmove",e).off("mouseup touchend",u);o.remove();i.stop&&i.stop(n)};this.destroy=function(){t(f).off()};t(f).on("mousedown touchstart",h)}function oc(n,t){for(;n;){if(n===t)return!0;n=n.parent()}}function sc(){nu||(nu=function(n){2!==n.button&&function(n){for(var t,i,r=e.length;r--;)if(t=e[r],i=t.getParentCtrl(n.target),t.settings.autohide){if(i&&(oc(i,t)||t.parent()===i))continue;(n=t.fire("autohide",{target:n.target})).isDefaultPrevented()||t.hide()}}(n)},t(document).on("click touchstart",nu))}function ye(n){function r(t,i){for(var r,u=0;u<e.length;u++)if(e[u]!==n)for(r=e[u].parent();r&&(r=r.parent());)r===n&&e[u].fixed(t).moveBy(0,i).repaint()}var t=i.getViewPort().y;n.settings.autofix&&(n.state.get("fixed")?n._autoFixY>t&&(n.fixed(!1).layoutRect({y:n._autoFixY}).repaint(),r(!1,n._autoFixY-t)):(n._autoFixY=n.layoutRect().y,n._autoFixY<t&&(n.fixed(!0).layoutRect({y:0}).repaint(),r(!0,t-n._autoFixY))))}function uu(n,i){var r,e,u=l.zIndex||65535,f;if(n)c.push(i);else for(r=c.length;r--;)c[r]===i&&c.splice(r,1);if(c.length)for(r=0;r<c.length;r++)c[r].modal&&(u++,e=c[r]),c[r].getEl().style.zIndex=u,c[r].zIndex=u,u++;f=t("#"+i.classPrefix+"modal-block",i.getContainerElm())[0];e?t(f).css("z-index",e.zIndex-1):f&&(f.parentNode.removeChild(f),ru=!1);l.currentZIndex=u}function pe(n){for(var t=e.length;t--;)e[t]===n&&e.splice(t,1);for(t=c.length;t--;)c[t]===n&&c.splice(t,1)}function eu(n,i){var u,f,r=this,e=o.classPrefix;r.show=function(o,s){function h(){u&&(t(n).append('<div class="'+e+"throbber"+(i?" "+e+"throbber-inline":"")+'"><\/div>'),s&&s())}return r.hide(),u=!0,o?f=v.setTimeout(h,o):h(),r};r.hide=function(){var t=n.lastChild;return v.clearTimeout(f),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),u=!1,r}}function lc(t){var r=function(n){return n.inline?n.getElement():n.getContentAreaContainer()};return{open:function(u,f){var s,o=n.extend(u,{maxWidth:(s=r(t),i.getSize(s).width)}),e=new de(o);return 0<(e.args=o).timeout&&(e.timer=setTimeout(function(){e.close();f()},o.timeout)),e.on("close",function(){f()}),e.renderTo(),e},close:function(n){n.close()},reposition:function(n){cr(n,function(n){n.moveTo(0,0)}),function(n){if(0<n.length){var i=n.slice(0,1)[0],u=r(t);i.moveRel(u,"tc-tc");cr(n,function(t,i){0<i&&t.moveRel(n[i-1].getEl(),"bc-tc")})}}(n)},getArgs:function(n){return n.args}}}function ge(n){var r,i=t("meta[name=viewport]")[0];!1!==b.overrideViewPort&&(i||((i=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(i)),(r=i.getAttribute("content"))&&void 0!==li&&(li=r),i.setAttribute("content",n?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":li))}function ac(n,i){(function(){for(var n=0;n<a.length;n++)if(a[n]._fullscreen)return!0;return!1})()&&!1===i&&t([document.documentElement,document.body]).removeClass(n+"fullscreen")}function ds(n){var i="",t;if(n)for(t=0;t<n.length;t++)i+='<option value="'+n[t]+'">'+n[t]+"<\/option>";return i}function nh(n,t,i){return n<t&&(n=t),i<n&&(n=i),n}function ki(n,t,i){n.setAttribute("aria-"+t,i)}function th(n,t){var u,f,e,o,r;"v"===n.settings.orientation?(e="top",f="height",u="h"):(e="left",f="width",u="w");r=n.getEl("handle");o=((n.layoutRect()[u]||100)-i.getSize(r)[f])*((t-n._minValue)/(n._maxValue-n._minValue))+"px";r.style[e]=o;r.style.height=n.layoutRect().h+"px";ki(r,"valuenow",t);ki(r,"valuetext",""+n.settings.previewFilter(t));ki(r,"valuemin",n._minValue);ki(r,"valuemax",n._maxValue)}var bu,ku,du,di,gu,ih=tinymce.util.Tools.resolve("tinymce.ThemeManager"),gi=tinymce.util.Tools.resolve("tinymce.EditorManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),nf=function(n){return!1!==tf(n)},tf=function(n){return n.getParam("menubar")},rf=function(n){return n.getParam("toolbar_items_size")},uf=function(n){return n.getParam("menu")},nr=function(n){return!1===n.settings.skin},tr=function(n){var t=n.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=tinymce.util.Tools.resolve("tinymce.ui.Factory"),rh=tinymce.util.Tools.resolve("tinymce.util.I18n"),uh=function(n){return n.fire("SkinLoaded")},ff=function(n){return n.fire("ResizeEditor")},ef=function(n){return n.fire("BeforeRenderUI")},ir=function(n,t){return function(){var i=n.find(t)[0];i&&i.focus(!0)}},of=function(n,t){n.shortcuts.add("Alt+F9","",ir(t,"menubar"));n.shortcuts.add("Alt+F10,F10","",ir(t,"toolbar"));n.shortcuts.add("Alt+F11","",ir(t,"elementpath"));t.on("cancel",function(){n.focus()})},tt=tinymce.util.Tools.resolve("tinymce.geom.Rect"),v=tinymce.util.Tools.resolve("tinymce.util.Delay"),rr=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},r=function(n){return function(){return n}},fh=r(!1),eh=r(!0),at=fh,ur=eh,it=function(){return fr},fr=(di={fold:function(n){return n()},is:at,isSome:at,isNone:ur,getOr:du=function(n){return n},getOrThunk:ku=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:du,orThunk:ku,map:it,ap:it,each:function(){},bind:it,flatten:it,exists:at,forall:ur,filter:it,equals:bu=function(n){return n.isNone()},equals_:bu,toArray:function(){return[]},toString:r("none()")},Object.freeze&&Object.freeze(di),di),ii=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:ur,isNone:at,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:u,orThunk:u,map:function(t){return ii(t(n))},ap:function(t){return t.fold(it,function(t){return ii(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:fr},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(at,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},y={some:ii,none:it,from:function(n){return null===n||n===undefined?fr:ii(n)}},er=function(n){return n?n.getRoot().uiContainer:null},p={getUiContainerDelta:function(n){var t=er(n);if(t&&"static"!==u.DOM.getStyle(t,"position",!0)){var i=u.DOM.getPos(t),r=t.scrollLeft-i.x,f=t.scrollTop-i.y;return y.some({x:r,y:f})}return y.none()},setUiContainer:function(n,t){var i=u.DOM.select(n.settings.ui_container)[0];t.getRoot().uiContainer=i},getUiContainer:er,inheritUiContainer:function(n,t){return t.uiContainer=er(n)}},sf=function(t,i,r){var u,f=[];if(i)return n.each(i.split(/[ ,]/),function(n){var i,e=function(){var i=t.selection;n.settings.stateSelector&&i.selectorChanged(n.settings.stateSelector,function(t){n.active(t)},!0);n.settings.disabledStateSelector&&i.selectorChanged(n.settings.disabledStateSelector,function(t){n.disabled(t)})};"|"===n?u=null:(u||(u={type:"buttongroup",items:[]},f.push(u)),t.buttons[n]&&(i=n,"function"==typeof(n=t.buttons[i])&&(n=n()),n.type=n.type||"button",n.size=r,n=h.create(n),u.items.push(n),t.initialized?e():t.on("init",e)))}),{type:"toolbar",layout:"flow",items:f}},oh=sf,hf=function(t,i){var f,r,u=[];if(n.each(!1===(r=(f=t).getParam("toolbar"))?[]:n.isArray(r)?n.grep(r,function(n){return 0<n.length}):function(n,t){for(var u,f,i=[],r=1;r<10;r++){if(u=n["toolbar"+r],!u)break;i.push(u)}return f=n.toolbar?[n.toolbar]:[t],0<i.length?i:f}(f.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),function(n){var r;(r=n)&&u.push(sf(t,r,i))}),u.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:u}},g=u.DOM,or=function(n){return{left:n.x,top:n.y,width:n.w,height:n.h,right:n.x+n.w,bottom:n.y+n.h}},sr=function(n,t){n.moveTo(t.left,t.top)},hr=function(n,t,i,r,u,f){return f=or({x:t,y:i,w:f.w,h:f.h}),n&&(f=n({elementRect:or(r),contentAreaRect:or(u),panelRect:f})),f},cf=function(t){var i,u=function(){return t.contextToolbars||[]},f=function(i,r){var h,e,u,f,o,c,nt,y=t.getParam("inline_toolbar_position_handler"),it,rt,w,l,a,b,v,k,s,d;if(!t.removed){if(!i||!i.toolbar.panel)return it=t,void n.each(it.contextToolbars,function(n){n.panel&&n.panel.hide()});nt=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"];o=i.toolbar.panel;r&&o.show();rt=i.element;w=g.getPos(t.getContentAreaContainer());l=t.dom.getRect(rt);"BODY"===(a=t.dom.getRoot()).nodeName&&(l.x-=a.ownerDocument.documentElement.scrollLeft||a.scrollLeft,l.y-=a.ownerDocument.documentElement.scrollTop||a.scrollTop);l.x+=w.x;l.y+=w.y;u=l;e=g.getRect(o.getEl());f=g.getRect(t.getContentAreaContainer()||t.getBody());s=p.getUiContainerDelta(o).getOr({x:0,y:0});(u.x+=s.x,u.y+=s.y,e.x+=s.x,e.y+=s.y,f.x+=s.x,f.y+=s.y,"inline"!==g.getStyle(i.element,"display",!0))&&(d=i.element.getBoundingClientRect(),u.w=d.width,u.h=d.height);t.inline||(f.w=t.getDoc().documentElement.offsetWidth);t.selection.controlSelection.isResizable(i.element)&&u.w<25&&(u=tt.inflate(u,0,8));h=tt.findBestRelativePosition(e,u,f,nt);u=tt.clamp(u,f);h?(c=tt.relativePosition(e,u,h),sr(o,hr(y,c.x,c.y,u,f,e))):(f.h+=e.h,(u=tt.intersect(f,u))?(h=tt.findBestRelativePosition(e,u,f,["bc-tc","bl-tl","br-tr"]))?(c=tt.relativePosition(e,u,h),sr(o,hr(y,c.x,c.y,u,f,e))):sr(o,hr(y,u.x,u.y,u,f,e)):o.hide());b=o;k=function(n,t){return n===t};v=(v=h)?v.substr(0,2):"";n.each({t:"down",b:"up"},function(n,t){b.classes.toggle("arrow-"+n,k(t,v.substr(0,1)))});n.each({l:"left",r:"right"},function(n,t){b.classes.toggle("arrow-"+n,k(t,v.substr(1,1)))})}},e=function(n){return function(){v.requestAnimationFrame(function(){t.selection&&f(r(t.selection.getNode()),n)})}},s=function(n){var r;if(n.toolbar.panel)return n.toolbar.panel.show(),void f(n);r=h.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:oh(t,n.toolbar.items),oncancel:function(){t.focus()}});p.setUiContainer(t,r),function(n){if(!i){var r=e(!0),u=p.getUiContainer(n);i=t.selection.getScrollContainer()||t.getWin();g.bind(i,"scroll",r);g.bind(u,"scroll",r);t.on("remove",function(){g.unbind(i,"scroll",r);g.unbind(u,"scroll",r)})}}(r);(n.toolbar.panel=r).renderTo().reflow();f(n)},o=function(){n.each(u(),function(n){n.panel&&n.panel.hide()})},r=function(n){for(var r,f,e=u(),i=(f=t.$(n).parents().add(n)).length-1;0<=i;i--)for(r=e.length-1;0<=r;r--)if(e[r].predicate(f[i]))return{toolbar:e[r],element:f[i]};return null};t.on("click keyup setContent ObjectResized",function(n){("setcontent"!==n.type||n.selection)&&v.setEditorTimeout(t,function(){var n;(n=r(t.selection.getNode()))?(o(),s(n)):o()})});t.on("blur hide contextmenu",o);t.on("ObjectResizeStart",function(){var n=r(t.selection.getNode());n&&n.toolbar.panel&&n.toolbar.panel.hide()});t.on("ResizeEditor ResizeWindow",e(!0));t.on("nodeChange",e(!1));t.on("remove",function(){n.each(u(),function(n){n.panel&&n.panel.remove()});t.contextToolbars={}});t.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var n=r(t.selection.getNode());n&&n.toolbar.panel&&n.toolbar.panel.items()[0].focus()})},lf=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},sh=lf("function"),af=lf("number"),hh=(gu=Array.prototype.indexOf)===undefined?function(n,t){return ah(n,t)}:function(n,t){return gu.call(n,t)},ch=function(n,t){return vf(n,t).isSome()},vt=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},cr=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},w=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},lh=function(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],t(r,i,n))return y.some(r);return y.none()},vf=function(n,t){for(var i=0,r=n.length;i<r;i++)if(t(n[i],i,n))return y.some(i);return y.none()},ah=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},vh=Array.prototype.push,yf=(Array.prototype.slice,sh(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),lr=function(n,t){return"|"===n?{name:"|",item:{text:"|"}}:t?{name:n,item:t}:null},ar=function(n){return n&&"|"===n.item.text},yh=function(t,i,r,u){var o,e,f,s,h,c,l;return i?(e=i[u],s=!0):e=yf[u],e&&(o={text:e.title},f=[],n.each((e.items||"").split(/[ ,]/),function(n){var i=lr(n,t[n]);i&&f.push(i)}),s||n.each(t,function(n,t){var i;n.context!==u||(i=t,vf(f,function(n){return n.name===i}).isSome())||("before"===n.separator&&f.push({name:"|",item:{text:"|"}}),n.prependToContext?f.unshift(lr(t,n)):f.push(lr(t,n)),"after"===n.separator&&f.push({name:"|",item:{text:"|"}}))}),o.menu=vt((h=r,c=w(f,function(n){return!1===h.hasOwnProperty(n.name)}),l=w(c,function(n,t,i){return!ar(n)||!ar(i[t-1])}),w(l,function(n,t,i){return!ar(n)||0<t&&t<i.length-1})),function(n){return n.item}),!o.menu.length)?null:o},pf=function(t){for(var s,r,u,f=[],h=function(n){var t,i=[],r=uf(n);if(r)for(t in r)i.push(t);else for(t in yf)i.push(t);return i}(t),c=n.makeMap((u=t,u.getParam("removed_menuitems","")).split(/[ ,]/)),e=tf(t),o="string"==typeof e?e.split(/[ ,]/):h,i=0;i<o.length;i++)s=o[i],r=yh(t.menuItems,uf(t),c,s),r&&f.push(r);return f},vr=u.DOM,wf=function(n){return{width:n.clientWidth,height:n.clientHeight}},bf=function(n,t,i){var u,r,f,e;u=n.getContainer();r=n.getContentAreaContainer().firstChild;f=wf(u);e=wf(r);null!==t&&(t=Math.max(n.getParam("min_width",100,"number"),t),t=Math.min(n.getParam("max_width",65535,"number"),t),vr.setStyle(u,"width",t+(f.width-e.width)),vr.setStyle(r,"width",t));i=Math.max(n.getParam("min_height",100,"number"),i);i=Math.min(n.getParam("max_height",65535,"number"),i);vr.setStyle(r,"height",i);ff(n)},yr=bf,ph=function(n,t,i){var r=n.getContentAreaContainer();bf(n,r.clientWidth+t,r.clientHeight+i)},b=tinymce.util.Tools.resolve("tinymce.Env"),ri=function(n,t,i){var r,u=n.settings[i];u&&u((r=t.getEl("body"),{element:function(){return r}}))},wh=function(t,i,r){return function(u){var c,l,a,v,y,e=u.control,o=e.parents().filter("panel")[0],f=o.find("#"+i)[0],s=(c=r,l=i,n.grep(c,function(n){return n.name===l})[0]);a=i;v=o;y=r;n.each(y,function(n){var t=v.items().filter("#"+n.name)[0];t&&t.visible()&&n.name!==a&&(ri(n,t,"onhide"),t.visible(!1))});e.parent().items().each(function(n){n.active(!1)});f&&f.visible()?(ri(s,f,"onhide"),f.hide(),e.active(!1)):(f?f.show():(f=h.create({type:"container",name:i,layout:"stack",classes:"sidebar-panel",html:""}),o.prepend(f),ri(s,f,"onrender")),ri(s,f,"onshow"),e.active(!0));ff(t)}},bh=function(n){return!(b.ie&&!(11<=b.ie)||!n.sidebars)&&0<n.sidebars.length},kh=function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:n.map(t.sidebars,function(n){var i=n.settings;return{type:"button",icon:i.icon,image:i.image,tooltip:i.tooltip,onclick:wh(t,n.name,t.sidebars)}})}]}},ui=function(n){var t=function(){n._skinLoaded=!0;uh(n)};return function(){n.initialized?t():n.on("init",t)}},kf=u.DOM,df=function(n){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:n,html:""}},dh=function(n,t,i){var r,f,u,e,o,s,c;return(!1===nr(n)&&i.skinUiCss?kf.styleSheetLoader.load(i.skinUiCss,ui(n)):ui(n)(),r=t.panel=h.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===nf(n)?null:{type:"menubar",border:"0 0 1 0",items:pf(n)},hf(n,rf(n))]},bh(n)?(e=n,{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[df("0"),kh(e)]}):df("1 0 0 0")]}),p.setUiContainer(n,r),"none"!==tr(n)&&(f={type:"resizehandle",direction:tr(n),onResizeStart:function(){var t=n.getContentAreaContainer().firstChild;u={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===tr(n)?yr(n,u.width+t.deltaX,u.height+t.deltaY):yr(n,null,u.height+t.deltaY)}}),n.getParam("statusbar",!0,"boolean"))&&(s=rh.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce<\/a>']),c=n.getParam("branding",!0,"boolean")?{type:"label",classes:"branding",html:" "+s}:null,r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:n},f,c]})),ef(n),n.on("SwitchMode",(o=r,function(n){o.find("*").disabled("readonly"===n.mode)})),r.renderBefore(i.targetNode).reflow(),n.getParam("readonly",!1,"boolean")&&n.setMode("readonly"),i.width&&kf.setStyle(r.getEl(),"width",i.width),n.on("remove",function(){r.remove();r=null}),of(n,r),cf(n),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},t=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),gh=0,i={id:function(){return"mceu_"+gh++},create:function(t,i,r){var f=document.createElement(t);return u.DOM.setAttribs(f,i),"string"==typeof r?f.innerHTML=r:n.each(r,function(n){n.nodeType&&f.appendChild(n)}),f},createFragment:function(n){return u.DOM.createFragment(n)},getWindowSize:function(){return u.DOM.getViewPort()},getSize:function(n){var i,r,t;return n.getBoundingClientRect?(t=n.getBoundingClientRect(),i=Math.max(t.width||t.right-t.left,n.offsetWidth),r=Math.max(t.height||t.bottom-t.bottom,n.offsetHeight)):(i=n.offsetWidth,r=n.offsetHeight),{width:i,height:r}},getPos:function(n,t){return u.DOM.getPos(n,t||i.getContainer())},getContainer:function(){return b.container?b.container:document.body},getViewPort:function(n){return u.DOM.getViewPort(n)},get:function(n){return document.getElementById(n)},addClass:function(n,t){return u.DOM.addClass(n,t)},removeClass:function(n,t){return u.DOM.removeClass(n,t)},hasClass:function(n,t){return u.DOM.hasClass(n,t)},toggleClass:function(n,t,i){return u.DOM.toggleClass(n,t,i)},css:function(n,t,i){return u.DOM.setStyle(n,t,i)},getRuntimeStyle:function(n,t){return u.DOM.getStyle(n,t,!0)},on:function(n,t,i,r){return u.DOM.bind(n,t,i,r)},off:function(n,t,i){return u.DOM.unbind(n,t,i)},fire:function(n,t,i){return u.DOM.fire(n,t,i)},innerHtml:function(n,t){u.DOM.setHTML(n,t)}},gf=function(n){return"static"===i.getRuntimeStyle(n,"position")},fi=function(n){return n.state.get("fixed")},te=function(){var n=window,t=Math.max(n.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),i=Math.max(n.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:i,w:t+(n.innerWidth||document.documentElement.clientWidth),h:i+(n.innerHeight||document.documentElement.clientHeight)}},ie=function(n){var t,i=p.getUiContainer(n);return i&&!fi(n)?{x:0,y:0,w:(t=i).scrollWidth-1,h:t.scrollHeight-1}:te()},ei={testMoveRel:function(n,t){for(var i,r=ie(this),u=0;u<t.length;u++)if(i=ne(this,n,t[u]),fi(this)){if(0<i.x&&i.x+i.w<r.w&&0<i.y&&i.y+i.h<r.h)return t[u]}else if(i.x>r.x&&i.x+i.w<r.w&&i.y>r.y&&i.y+i.h<r.h)return t[u];return t[0]},moveRel:function(n,t){"string"!=typeof t&&(t=this.testMoveRel(n,t));var i=ne(this,n,t);return this.moveTo(i.x,i.y)},moveBy:function(n,t){var i=this.layoutRect();return this.moveTo(i.x+n,i.y+t),this},moveTo:function(n,t){function e(n,t,i){return n<0?0:t<n+i&&(n=t-i)<0?0:n}var i=this,u,f,r;return i.settings.constrainToViewport&&(u=ie(this),f=i.layoutRect(),n=e(n,u.w,f.w),t=e(t,u.h,f.h)),r=p.getUiContainer(i),r&&gf(r)&&!fi(i)&&(n-=r.scrollLeft,t-=r.scrollTop),r&&(n+=1,t+=1),i.state.get("rendered")?i.layoutRect({x:n,y:t}).repaint():(i.settings.x=n,i.settings.y=t),i.fire("move",{x:n,y:t}),i}},yt=tinymce.util.Tools.resolve("tinymce.util.Class"),re=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),pt=function(n){var t;if(n)return"number"==typeof n?{top:n=n||0,left:n,bottom:n,right:n}:(1===(t=(n=n.split(" ")).length)?n[1]=n[2]=n[3]=n[0]:2===t?(n[2]=n[0],n[3]=n[1]):3===t&&(n[3]=n[1]),{top:parseInt(n[0],10)||0,right:parseInt(n[1],10)||0,bottom:parseInt(n[2],10)||0,left:parseInt(n[3],10)||0})},pr=function(n,t){function i(t){var i=parseFloat(function(t){var r=n.ownerDocument.defaultView,i;return r?(i=r.getComputedStyle(n,null),i?(t=t.replace(/[A-Z]/g,function(n){return"-"+n}),i.getPropertyValue(t)):null):n.currentStyle[t]}(t));return isNaN(i)?0:i}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}},bt,st,ee,o,kr,dr,ut,l,fu,we,a,li,gt,gs;n.extend(oi.prototype,{add:function(n){return n&&!this.contains(n)&&(this.cls._map[n]=!0,this.cls.push(n),this._change()),this},remove:function(n){if(this.contains(n)){for(var t=void 0,t=0;t<this.cls.length&&this.cls[t]!==n;t++);this.cls.splice(t,1);delete this.cls._map[n];this._change()}return this},toggle:function(n,t){var i=this.contains(n);return i!==t&&(i?this.remove(n):this.add(n),this._change()),this},contains:function(n){return!!this.cls._map[n]},_change:function(){delete this.clsValue;this.onchange.call(this)}});oi.prototype.toString=function(){var t,n;if(this.clsValue)return this.clsValue;for(t="",n=0;n<this.cls.length;n++)0<n&&(t+=" "),t+=this.prefix+this.cls[n];return t};var wr,ot,si,tc=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,ue=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,ic=/^\s*|\s*$/g,wt=yt.extend({init:function(n){function r(n,r,u){function e(n){n&&r.push(n)}var f;return e(function(n){if(n)return n=n.toLowerCase(),function(t){return"*"===n||t.type===n}}((f=tc.exec(n.replace(ic,"")))[1])),e(function(n){if(n)return function(t){return t._name===n}}(f[2])),e(function(n){if(n)return n=n.split("."),function(t){for(var i=n.length;i--;)if(!t.classes.contains(n[i]))return!1;return!0}}(f[3])),e(function(n,t,i){if(n)return function(r){var u=r[n]?r[n]():"";return t?"="===t?u===i:"*="===t?0<=u.indexOf(i):"~="===t?0<=(" "+u+" ").indexOf(" "+i+" "):"!="===t?u!==i:"^="===t?0===u.indexOf(i):"$="===t&&u.substr(u.length-i.length)===i:!!i}}(f[4],f[5],f[6])),e(function(n){var r;if(n)return(n=/(?:not\((.+)\))|(.+)/i.exec(n))[1]?(r=t(n[1],[]),function(n){return!i(n,r)}):(n=n[2],function(t,i,r){return"first"===n?0===i:"last"===n?i===r-1:"even"===n?i%2==0:"odd"===n?i%2==1:!!t[n]&&t[n]()})}(f[7])),r.pseudo=!!f[7],r.direct=u,r}function t(n,i){var o,u,f,e=[];do if(ue.exec(""),(u=ue.exec(n))&&(n=u[3],e.push(u[1]),u[2])){o=u[3];break}while(u);for(o&&t(o,i),n=[],f=0;f<e.length;f++)">"!==e[f]&&n.push(r(e[f],[],">"===e[f-1]));return i.push(n),i}var i=this.match;this._selectors=t(n,[])},match:function(n,t){for(var u,h,a,r,e,o,s,v,y,c,i,f=0,l=(t=t||this._selectors).length;f<l;f++){for(i=n,c=0,u=(h=(a=t[f]).length)-1;0<=u;u--)for(o=a[u];i;){if(o.pseudo)for(s=v=(y=i.parent().items()).length;s--&&y[s]!==i;);for(r=0,e=o.length;r<e;r++)if(!o[r](i,s,v)){r=e+1;break}if(r===e){c++;break}if(u===h-1)break;i=i.parent()}if(c===h)return!0}return!1},find:function(n){function u(n,t,r){for(var e,s,f,c=t[r],o=0,h=n.length;o<h;o++){for(f=n[o],e=0,s=c.length;e<s;e++)if(!c[e](f,o,h)){e=s+1;break}if(e===s)r===t.length-1?i.push(f):f.items&&u(f.items(),t,r+1);else if(c.direct)return;f.items&&u(f.items(),t,r)}}var t,r,i=[],f=this._selectors;if(n.items){for(t=0,r=f.length;t<r;t++)u(n.items(),f[t],0);1<r&&(i=function(n){for(var r,i=[],t=n.length;t--;)(r=n[t]).__checked||(i.push(r),r.__checked=1);for(t=i.length;t--;)delete i[t].__checked;return i}(i))}return wr||(wr=wt.Collection),new wr(i)}}),fe=Array.prototype.push,rc=Array.prototype.slice;si={length:0,init:function(n){n&&this.add(n)},add:function(t){return n.isArray(t)?fe.apply(this,t):t instanceof ot?this.add(t.toArray()):fe.call(this,t),this},set:function(n){var i,t=this,r=t.length;for(t.length=0,t.add(n),i=t.length;i<r;i++)delete t[i];return t},filter:function(n){var t,r,u,i,f=[];for("string"==typeof n?(n=new wt(n),i=function(t){return n.match(t)}):i=n,t=0,r=this.length;t<r;t++)i(u=this[t])&&f.push(u);return new ot(f)},slice:function(){return new ot(rc.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},each:function(t){return n.each(this,t),this},toArray:function(){return n.toArray(this)},indexOf:function(n){for(var t=this.length;t--&&this[t]!==n;);return t},reverse:function(){return new ot(n.toArray(this).reverse())},hasClass:function(n){return!!this[0]&&this[0].classes.contains(n)},prop:function(n,t){var i;return t!==undefined?(this.each(function(i){i[n]&&i[n](t)}),this):(i=this[0])&&i[n]?i[n]():void 0},exec:function(t){var i=n.toArray(arguments).slice(1);return this.each(function(n){n[t]&&n[t].apply(n,i)}),this},remove:function(){for(var n=this.length;n--;)this[n].remove();return this},addClass:function(n){return this.each(function(t){t.classes.add(n)})},removeClass:function(n){return this.each(function(t){t.classes.remove(n)})}};n.each("fire on off show hide append prepend before after reflow".split(" "),function(t){si[t]=function(){var i=n.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,i)}),this}});n.each("text name disabled active selected checked visible parent value data".split(" "),function(n){si[n]=function(t){return this.prop(n,t)}});ot=yt.extend(si);bt=wt.Collection=ot;st=function(n){this.create=n.create};st.create=function(n,t){return new st({create:function(i,r){var u,f=function(n){i.set(r,n.value)};return i.on("change:"+r,function(i){n.set(t,i.value)}),n.on("change:"+t,f),(u=i._bindings)||(u=i._bindings=[],i.on("destroy",function(){for(var n=u.length;n--;)u[n]()})),u.push(function(){n.off("change:"+t,f)}),n.get(t)}})};ee=tinymce.util.Tools.resolve("tinymce.util.Observable");var br,kt,se=yt.extend({Mixins:[ee],init:function(n){var t,i;for(t in n=n||{})(i=n[t])instanceof st&&(n[t]=i.create(this,t));this.data=n},set:function(t,i){var r,u,e=this.data[t];if(i instanceof st&&(i=i.create(this,t)),"object"==typeof t){for(r in t)this.set(r,t[r]);return this}return function f(t,i){var r,u;if(t===i)return!0;if(null===t||null===i||"object"!=typeof t||"object"!=typeof i)return t===i;if(n.isArray(i)){if(t.length!==i.length)return!1;for(r=t.length;r--;)if(!f(t[r],i[r]))return!1}if(oe(t)||oe(i))return t===i;for(r in u={},i){if(!f(t[r],i[r]))return!1;u[r]=!0}for(r in t)if(!u[r]&&!f(t[r],i[r]))return!1;return!0}(e,i)||(this.data[t]=i,u={target:this,name:t,value:i,oldValue:e},this.fire("change:"+t,u),this.fire("change",u)),this},get:function(n){return this.data[n]},has:function(n){return n in this.data},bind:function(n){return st.create(this,n)},destroy:function(){this.fire("destroy")}}),rt={},dt={add:function(n){var t=n.parent();if(t){if(!t._layout||t._layout.isNative())return;rt[t._id]||(rt[t._id]=t);br||(br=!0,v.requestAnimationFrame(function(){var n,t;for(n in br=!1,rt)(t=rt[n]).state.get("rendered")&&t.reflow();rt={}},document.body))}},remove:function(n){rt[n._id]&&delete rt[n._id]}},uc="onmousewheel"in document,fc=!1,ec=0,he={Statics:{classPrefix:"mce-"},isRtl:function(){return kt.rtl},classPrefix:"mce-",init:function(i){function e(n){var t;for(n=n.split(" "),t=0;t<n.length;t++)r.classes.add(n[t])}var u,f,r=this;r.settings=i=n.extend({},r.Defaults,i);r._id=i.id||"mceu_"+ec++;r._aria={role:i.role};r._elmCache={};r.$=t;r.state=new se({visible:!0,active:!1,disabled:!1,value:""});r.data=new se(i.data);r.classes=new oi(function(){r.state.get("rendered")&&(r.getEl().className=this.toString())});r.classes.prefix=r.classPrefix;(u=i.classes)&&(r.Defaults&&(f=r.Defaults.classes)&&u!==f&&e(f),e(u));n.each("title text name visible disabled active value".split(" "),function(n){n in i&&r[n](i[n])});r.on("click",function(){if(r.disabled())return!1});r.settings=i;r.borderBox=pt(i.border);r.paddingBox=pt(i.padding);r.marginBox=pt(i.margin);i.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){var n=p.getUiContainer(this);return n||i.getContainer()},getParentCtrl:function(n){for(var t,i=this.getRoot().controlIdLookup;n&&i&&!(t=i[n.id]);)n=n.parentNode;return t},initLayoutRect:function(){var f,p,r,u,s,h,e,c,l,a,n=this,t=n.settings,o=n.getEl();f=n.borderBox=n.borderBox||pr(o,"border");n.paddingBox=n.paddingBox||pr(o,"padding");n.marginBox=n.marginBox||pr(o,"margin");a=i.getSize(o);c=t.minWidth;l=t.minHeight;s=c||a.width;h=l||a.height;r=t.width;u=t.height;e=void 0!==(e=t.autoResize)?e:!r&&!u;r=r||s;u=u||h;var v=f.left+f.right,y=f.top+f.bottom,w=t.maxWidth||65535,b=t.maxHeight||65535;return n._layoutRect=p={x:t.x||0,y:t.y||0,w:r,h:u,deltaW:v,deltaH:y,contentW:r-v,contentH:u-y,innerW:r-v,innerH:u-y,startMinWidth:c||0,startMinHeight:l||0,minW:Math.min(s,w),minH:Math.min(h,b),maxW:w,maxH:b,autoResize:e,scrollW:0},n._lastLayoutRect={},p},layoutRect:function(n){var r,i,u,f,o,e=this,t=e._layoutRect;return t||(t=e.initLayoutRect()),n?(u=t.deltaW,f=t.deltaH,n.x!==undefined&&(t.x=n.x),n.y!==undefined&&(t.y=n.y),n.minW!==undefined&&(t.minW=n.minW),n.minH!==undefined&&(t.minH=n.minH),(i=n.w)!==undefined&&(i=(i=i<t.minW?t.minW:i)>t.maxW?t.maxW:i,t.w=i,t.innerW=i-u),(i=n.h)!==undefined&&(i=(i=i<t.minH?t.minH:i)>t.maxH?t.maxH:i,t.h=i,t.innerH=i-f),(i=n.innerW)!==undefined&&(i=(i=i<t.minW-u?t.minW-u:i)>t.maxW-u?t.maxW-u:i,t.innerW=i,t.w=i+u),(i=n.innerH)!==undefined&&(i=(i=i<t.minH-f?t.minH-f:i)>t.maxH-f?t.maxH-f:i,t.innerH=i,t.h=i+f),n.contentW!==undefined&&(t.contentW=n.contentW),n.contentH!==undefined&&(t.contentH=n.contentH),(r=e._lastLayoutRect).x===t.x&&r.y===t.y&&r.w===t.w&&r.h===t.h||((o=kt.repaintControls)&&o.map&&!o.map[e._id]&&(o.push(e),o.map[e._id]=!0),r.x=t.x,r.y=t.y,r.w=t.w,r.h=t.h),e):t},repaint:function(){var f,s,e,n,o,h,c,t,u,i,r=this;u=document.createRange?function(n){return n}:Math.round;f=r.getEl().style;n=r._layoutRect;t=r._lastRepaintRect||{};h=(o=r.borderBox).left+o.right;c=o.top+o.bottom;n.x!==t.x&&(f.left=u(n.x)+"px",t.x=n.x);n.y!==t.y&&(f.top=u(n.y)+"px",t.y=n.y);n.w!==t.w&&(i=u(n.w-h),f.width=(0<=i?i:0)+"px",t.w=n.w);n.h!==t.h&&(i=u(n.h-c),f.height=(0<=i?i:0)+"px",t.h=n.h);r._hasBody&&n.innerW!==t.innerW&&(i=u(n.innerW),(e=r.getEl("body"))&&((s=e.style).width=(0<=i?i:0)+"px"),t.innerW=n.innerW);r._hasBody&&n.innerH!==t.innerH&&(i=u(n.innerH),(e=e||r.getEl("body"))&&((s=s||e.style).height=(0<=i?i:0)+"px"),t.innerH=n.innerH);r._lastRepaintRect=t;r.fire("repaint",{},!1)},updateLayoutRect:function(){var n=this;n.parent()._lastRect=null;i.css(n.getEl(),{width:"",height:""});n._layoutRect=n._lastRepaintRect=n._lastLayoutRect=null;n.initLayoutRect()},on:function(n,t){var i,r,f,u=this;return hi(u).on(n,"string"!=typeof(i=t)?i:function(n){return r||u.parentsAndSelf().each(function(n){var t=n.settings.callbacks;if(t&&(r=t[i]))return f=n,!1}),r?r.call(f,n):(n.action=i,void this.fire("execute",n))}),u},off:function(n,t){return hi(this).off(n,t),this},fire:function(n,t,i){if((t=t||{}).control||(t.control=this),t=hi(this).fire(n,t),!1!==i&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(n,t,!1),r=r.parent();return t},hasEventListeners:function(n){return hi(this).has(n)},parents:function(n){for(var i=new bt,t=this.parent();t;t=t.parent())i.add(t);return n&&(i=i.filter(n)),i},parentsAndSelf:function(n){return new bt(this).add(this.parents(n))},next:function(){var n=this.parent().items();return n[n.indexOf(this)+1]},prev:function(){var n=this.parent().items();return n[n.indexOf(this)-1]},innerHtml:function(n){return this.$el.html(n),this},getEl:function(n){var i=n?this._id+"-"+n:this._id;return this._elmCache[i]||(this._elmCache[i]=t("#"+i)[0]),this._elmCache[i]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(n){}return this},blur:function(){return this.getEl().blur(),this},aria:function(n,t){var i=this,r=i.getEl(i.ariaTarget);return void 0===t?i._aria[n]:(i._aria[n]=t,i.state.get("rendered")&&r.setAttribute("role"===n?n:"aria-"+n,t),i)},encode:function(n,t){return!1!==t&&(n=this.translate(n)),(n||"").replace(/[&<>"]/g,function(n){return"&#"+n.charCodeAt(0)+";"})},translate:function(n){return kt.translate?kt.translate(n):n},before:function(n){var t=this.parent();return t&&t.insert(n,t.items().indexOf(this),!0),this},after:function(n){var t=this.parent();return t&&t.insert(n,t.items().indexOf(this)),this},remove:function(){var u,f,n=this,i=n.getEl(),r=n.parent(),e,o;if(n.items)for(e=n.items().toArray(),f=e.length;f--;)e[f].remove();return r&&r.items&&(u=[],r.items().each(function(t){t!==n&&u.push(t)}),r.items().set(u),r._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&t(i).off(),o=n.getRoot().controlIdLookup,o&&delete o[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(n){return t(n).before(this.renderHtml()),this.postRender(),this},renderTo:function(n){return t(n||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"><\/div>'},postRender:function(){var s,r,u,i,e,n=this,f=n.settings,o,h;for(i in n.$el=t(n.getEl()),n.state.set("rendered",!0),f)0===i.indexOf("on")&&n.on(i.substr(2),f[i]);if(n._eventsRoot){for(u=n.parent();!e&&u;u=u.parent())e=u._eventsRoot;if(e)for(i in e._nativeEvents)n._nativeEvents[i]=!0}ce(n);f.style&&(s=n.getEl())&&(s.setAttribute("style",f.style),s.style.cssText=f.style);n.settings.border&&(r=n.borderBox,n.$el.css({"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));o=n.getRoot();for(h in o.controlIdLookup||(o.controlIdLookup={}),(o.controlIdLookup[n._id]=n)._aria)n.aria(h,n._aria[h]);!1===n.state.get("visible")&&(n.getEl().style.display="none");n.bindStates();n.state.on("change:visible",function(t){var i,r=t.value;n.state.get("rendered")&&(n.getEl().style.display=!1===r?"none":"",n.getEl().getBoundingClientRect());(i=n.parent())&&(i._lastRect=null);n.fire(r?"show":"hide");dt.add(n)});n.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(n){var i,r,f,e,o,s,u=this.getEl(),t=u.parentNode,h=function(n,t){for(var u,i=n,r=u=0;i&&i!==t&&i.nodeType;)r+=i.offsetLeft||0,u+=i.offsetTop||0,i=i.offsetParent;return{x:r,y:u}}(u,t);return i=h.x,r=h.y,f=u.offsetWidth,e=u.offsetHeight,o=t.clientWidth,s=t.clientHeight,"end"===n?(i-=o-f,r-=s-e):"center"===n&&(i-=o/2-f/2,r-=s/2-e/2),t.scrollLeft=i,t.scrollTop=r,this},getRoot:function(){for(var t,r,n=this,i=[];n;){if(n.rootControl){t=n.rootControl;break}i.push(n);n=(t=n).parent()}for(t||(t=this),r=i.length;r--;)i[r].rootControl=t;return t},reflow:function(){dt.remove(this);var n=this.parent();return n&&n._layout&&!n._layout.isNative()&&n.reflow(),this}};n.each("text title visible disabled active value".split(" "),function(n){he[n]=function(t){return 0===arguments.length?this.state.get(n):(void 0!==t&&this.state.set(n,t),this)}});o=kt=yt.extend(he);kr=function(n){return!!n.getAttribute("data-mce-tabstop")};dr={};ut=o.extend({init:function(n){var t=this;t._super(n);(n=t.settings).fixed&&t.state.set("fixed",!0);t._items=new bt;t.isRtl()&&t.classes.add("rtl");t.bodyClasses=new oi(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())});t.bodyClasses.prefix=t.classPrefix;t.classes.add("container");t.bodyClasses.add("container-body");n.containerCls&&t.classes.add(n.containerCls);t._layout=h.create((n.layout||"")+"layout");t.settings.items?t.add(t.settings.items):t.add(t.render());t._hasBody=!0},items:function(){return this._items},find:function(n){return(n=dr[n]=dr[n]||new wt(n)).find(this)},add:function(n){return this.items().add(this.create(n)).parent(this),this},focus:function(n){var i,u,r,t=this;if(!n||!(u=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav))return r=t.find("*"),t.statusbar&&r.add(t.statusbar.items()),r.each(function(n){if(n.settings.autofocus)return i=null,!1;n.canFocus&&(i=i||n)}),i&&i.focus(),t;u.focusFirst(t)},replace:function(n,t){for(var i,u=this.items(),r=u.length;r--;)if(u[r]===n){u[r]=t;break}0<=r&&((i=t.getEl())&&i.parentNode.removeChild(i),(i=n.getEl())&&i.parentNode.removeChild(i));t.parent(this)},create:function(t){var i,r=this,u=[];return n.isArray(t)||(t=[t]),n.each(t,function(t){t&&(t instanceof o||("string"==typeof t&&(t={type:t}),i=n.extend({},r.settings.defaults,t),t.type=i.type=i.type||t.type||r.settings.defaultType||(i.defaults?i.defaults.type:null),t=h.create(i)),u.push(t))}),u},renderNew:function(){var n=this;return n.items().each(function(i,r){var u;i.parent(n);i.state.get("rendered")||((u=n.getEl("body")).hasChildNodes()&&r<=u.childNodes.length-1?t(u.childNodes[r]).before(i.renderHtml()):t(u).append(i.renderHtml()),i.postRender(),dt.add(i))}),n._layout.applyClasses(n.items().filter(":visible")),n._lastRect=null,n},append:function(n){return this.add(n).renderNew()},prepend:function(n){return this.items().set(this.create(n).concat(this.items().toArray())),this.renderNew()},insert:function(n,t,i){var r,u,f;return n=this.create(n),r=this.items(),!i&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(u=r.slice(0,t).toArray(),f=r.slice(t).toArray(),r.set(u.concat(n,f))),this.renderNew()},fromJSON:function(n){for(var t in n)this.find("#"+t).value(n[t]);return this},toJSON:function(){var n={};return this.find("*").each(function(t){var i=t.name(),r=t.value();i&&void 0!==r&&(n[i]=r)}),n},renderHtml:function(){var n=this,t=n._layout,i=this.settings.role;return n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'"'+(i?' role="'+this.settings.role+'"':"")+'><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var t,n=this;return n.items().exec("postRender"),n._super(),n._layout.postRender(n),n.state.set("rendered",!0),n.settings.style&&n.$el.css(n.settings.style),n.settings.border&&(t=n.borderBox,n.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),n.parent()||(n.keyboardNav=le({root:n})),n},initLayoutRect:function(){var n=this._super();return this._layout.recalc(this),n},recalc:function(){var t=this,n=t._layoutRect,i=t._lastRect;if(!i||i.w!==n.w||i.h!==n.h)return t._layout.recalc(t),n=t.layoutRect(),t._lastRect={x:n.x,y:n.y,w:n.w,h:n.h},!0},reflow:function(){var n;if(dt.remove(this),this.visible()){for(o.repaintControls=[],o.repaintControls.map={},this.recalc(),n=o.repaintControls.length;n--;)o.repaintControls[n].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint();o.repaintControls=[]}return this}});var nu,tu,iu,ru,ae={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){function r(){function e(r,e,o,s,h,c){var a,v,k,y,w,l,p,b;if(v=n.getEl("scroll"+r)){if(p=e.toLowerCase(),b=o.toLowerCase(),t(n.getEl("absend")).css(p,n.layoutRect()[s]-1),!h)return void t(v).css("display","none");t(v).css("display","block");a=n.getEl("body");k=n.getEl("scroll"+r+"t");y=a["client"+o]-2*i;w=(y-=u&&f?v["client"+c]:0)/a["scroll"+o];(l={})[p]=a["offset"+e]+i;l[b]=y;t(v).css(l);(l={})[p]=a["scroll"+e]*w;l[b]=y*w;t(k).css(l)}}var u,f,r;r=n.getEl("body");u=r.scrollWidth>r.clientWidth;f=r.scrollHeight>r.clientHeight;e("h","Left","Width","contentW",u,"Height");e("v","Top","Height","contentH",f,"Width")}var n=this,i=2;n.settings.autoScroll&&(n._hasScroll||(n._hasScroll=!0,function(){function r(r,u,f,e,o){var c,s=n._id+"-scroll"+r,h=n.classPrefix;t(n.getEl()).append('<div id="'+s+'" class="'+h+"scrollbar "+h+"scrollbar-"+r+'"><div id="'+s+'t" class="'+h+'scrollbar-thumb"><\/div><\/div>');n.draghelper=new ft(s+"t",{start:function(){c=n.getEl("body")["scroll"+u];t("#"+s).addClass(h+"active")},drag:function(t){var h,l,a,v,s=n.layoutRect();l=s.contentW>s.innerW;a=s.contentH>s.innerH;v=n.getEl("body")["client"+f]-2*i;h=(v-=l&&a?n.getEl("scroll"+r)["client"+o]:0)/n.getEl("body")["scroll"+f];n.getEl("body")["scroll"+u]=c+t["delta"+e]/h},stop:function(){t("#"+s).removeClass(h+"active")}})}n.classes.add("scroll");r("v","Top","Height","Y","Width");r("h","Left","Width","X","Height")}(),n.on("wheel",function(t){var i=n.getEl("body");i.scrollLeft+=10*(t.deltaX||0);i.scrollTop+=10*t.deltaY;r()}),t(n.getEl("body")).on("scroll",r)),r())}},ci=ut.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[ae],renderHtml:function(){var n=this,i=n._layout,t=n.settings.html;return n.preRender(),i.preRender(n),void 0===t?t='<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+i.renderHtml(n)+"<\/div>":("function"==typeof t&&(t=t.call(n)),n._hasBody=!1),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1" role="group">'+(n._preBodyHtml||"")+t+"<\/div>"}}),ve={resizeToContent:function(){this._layoutRect.autoResize=!0;this._lastRect=null;this.reflow()},resizeTo:function(n,t){if(n<=1||t<=1){var r=i.getWindowSize();n=n<=1?n*r.w:n;t=t<=1?t*r.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:n,minH:t,w:n,h:t}).reflow()},resizeBy:function(n,t){var i=this.layoutRect();return this.resizeTo(i.w+n,i.h+t)}},e=[],c=[];l=ci.extend({Mixins:[ei,ve],init:function(n){var i=this;i._super(n);(i._eventsRoot=i).classes.add("floatpanel");n.autohide&&(sc(),function(){if(!iu){var n=document.documentElement,i=n.clientWidth,r=n.clientHeight;iu=function(){document.all&&i===n.clientWidth&&r===n.clientHeight||(i=n.clientWidth,r=n.clientHeight,l.hideAll())};t(window).on("resize",iu)}}(),e.push(i));n.autofix&&(tu||(tu=function(){for(var n=e.length;n--;)ye(e[n])},t(window).on("scroll",tu)),i.on("move",function(){ye(this)}));i.on("postrender show",function(n){if(n.control===i){var u,r=i.classPrefix;i.modal&&!ru&&((u=t("#"+r+"modal-block",i.getContainerElm()))[0]||(u=t('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"><\/div>').appendTo(i.getContainerElm())),v.setTimeout(function(){u.addClass(r+"in");t(i.getEl()).addClass(r+"in")}),ru=!0);uu(!0,i)}});i.on("show",function(){i.parents().each(function(n){if(n.state.get("fixed"))return i.fixed(!0),!1})});n.popover&&(i._preBodyHtml='<div class="'+i.classPrefix+'arrow"><\/div>',i.classes.add("popover").add("bottom").add(i.isRtl()?"end":"start"));i.aria("label",n.ariaLabel);i.aria("labelledby",i._id);i.aria("describedby",i.describedBy||i._id+"-none")},fixed:function(n){var t=this,r;return t.state.get("fixed")!==n&&(t.state.get("rendered")&&(r=i.getViewPort(),n?t.layoutRect().y-=r.y:t.layoutRect().y+=r.y),t.classes.toggle("fixed",n),t.state.set("fixed",n)),t},show:function(){for(var t=this._super(),n=e.length;n--&&e[n]!==this;);return-1===n&&e.push(this),t},hide:function(){return pe(this),uu(!1,this),this._super()},hideAll:function(){l.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),uu(!1,this)),this},remove:function(){pe(this);this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});l.hideAll=function(){for(var t,n=e.length;n--;)t=e[n],t&&t.settings.autohide&&(t.hide(),e.splice(n,1))};fu=function(n,t){return!(!n||t.settings.ui_container)};we=function(n,t,i){var r,e,f=u.DOM,a=n.getParam("fixed_toolbar_container");a&&(e=f.select(a)[0]);var o=function(){var t,i;if(r&&r.moveRel&&r.visible()&&!r._fixed){var u=n.selection.getScrollContainer(),e=n.getBody(),o=0,s=0;u&&(t=f.getPos(e),i=f.getPos(u),o=Math.max(0,i.x-t.x),s=Math.max(0,i.y-t.y));r.fixed(!1).moveRel(e,n.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,s)}},s=function(){r&&(r.show(),o(),f.addClass(n.getBody(),"mce-edit-focus"))},v=function(){r&&(r.hide(),l.hideAll(),f.removeClass(n.getBody(),"mce-edit-focus"))},c=function(){r?r.visible()||s():(r=t.panel=h.create({type:e?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:fu(e,n),fixed:fu(e,n),border:1,items:[!1===nf(n)?null:{type:"menubar",border:"0 0 1 0",items:pf(n)},hf(n,rf(n))]}),p.setUiContainer(n,r),ef(n),e?r.renderTo(e).reflow():r.renderTo().reflow(),of(n,r),s(),cf(n),n.on("nodeChange",o),n.on("ResizeWindow",o),n.on("activate",s),n.on("deactivate",v),n.nodeChanged())};return n.settings.content_editable=!0,n.on("focus",function(){!1===nr(n)&&i.skinUiCss?f.styleSheetLoader.load(i.skinUiCss,c,c):c()}),n.on("blur hide",v),n.on("remove",function(){r&&(r.remove(),r=null)}),!1===nr(n)&&i.skinUiCss?f.styleSheetLoader.load(i.skinUiCss,ui(n)):ui(n)(),{}};var hc=function(n,t){var i;n.on("ProgressState",function(n){i=i||new eu(t.panel.getEl("body"));n.state?i.show(n.time):i.hide()})},cc=function(n,t,i){var r=function(n){var i=n.settings,r=i.skin,t=i.skin_url,u;return!1!==r&&(u=r||"lightgray",t=t?n.documentBaseURI.toAbsolute(t):gi.baseURL+"/skins/"+u),t}(n);return r&&(i.skinUiCss=r+"/skin.min.css",n.contentCSS.push(r+"/content"+(n.inline?".inline":"")+".min.css")),hc(n,t),n.getParam("inline",!1,"boolean")?we(n,t,i):dh(n,t,i)},be=o.extend({Mixins:[ei],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var n=this,t=n.classPrefix;return'<div id="'+n._id+'" class="'+n.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"><\/div><div class="'+t+'tooltip-inner">'+n.encode(n.state.get("text"))+"<\/div><\/div>"},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl().lastChild.innerHTML=n.encode(t.value)}),n._super()},repaint:function(){var n,t;n=this.getEl().style;t=this._layoutRect;n.left=t.x+"px";n.top=t.y+"px";n.zIndex=131070}}),f=o.extend({init:function(n){var t=this;t._super(n);n=t.settings;t.canFocus=!0;n.tooltip&&!1!==f.tooltips&&(t.on("mouseenter",function(i){var r=t.tooltip().moveTo(-65535),u;i.control===t?(u=r.text(n.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]),r.classes.toggle("tooltip-n","bc-tc"===u),r.classes.toggle("tooltip-nw","bc-tl"===u),r.classes.toggle("tooltip-ne","bc-tr"===u),r.moveRel(t.getEl(),u)):r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove();t._tooltip=null}));t.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new be({type:"tooltip"}),p.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var n=this,t=n.settings;n._super();n.parent()||!t.width&&!t.height||(n.initLayoutRect(),n.repaint());t.autofocus&&n.focus()},bindStates:function(){function t(t){n.aria("disabled",t);n.classes.toggle("disabled",t)}function i(t){n.aria("pressed",t);n.classes.toggle("active",t)}var n=this;return n.state.on("change:disabled",function(n){t(n.value)}),n.state.on("change:active",function(n){i(n.value)}),n.state.get("disabled")&&t(!0),n.state.get("active")&&i(!0),n._super()},remove:function(){this._super();this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),ke=f.extend({Defaults:{value:0},init:function(n){this._super(n);this.classes.add("progress");this.settings.filter||(this.settings.filter=function(n){return Math.round(n)})},renderHtml:function(){var t=this._id,n=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"><\/div><\/div><div class="'+n+'text">0%<\/div><\/div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){function t(t){t=n.settings.filter(t);n.getEl().lastChild.innerHTML=t+"%";n.getEl().firstChild.firstChild.style.width=t+"%"}var n=this;return n.state.on("change:value",function(n){t(n.value)}),t(n.state.get("value")),n._super()}}),ou=function(n,t){n.getEl().lastChild.textContent=t+(n.progressBar?" "+n.progressBar.value()+"%":"")},de=o.extend({Mixins:[ei],Defaults:{classes:"widget notification"},init:function(n){var t=this;t._super(n);t.maxWidth=n.maxWidth;n.text&&t.text(n.text);n.icon&&(t.icon=n.icon);n.color&&(t.color=n.color);n.type&&t.classes.add("notification-"+n.type);n.timeout&&(n.timeout<0||0<n.timeout)&&!n.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0);n.progressBar&&(t.progressBar=new ke);t.on("click",function(n){-1!==n.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var i,n=this,t=n.classPrefix,r="",u="",f="";return n.icon&&(r='<i class="'+t+"ico "+t+"i-"+n.icon+'"><\/i>'),i=' style="max-width: '+n.maxWidth+"px;"+(n.color?"background-color: "+n.color+';"':'"'),n.closeButton&&(u='<button type="button" class="'+t+'close" aria-hidden="true">×<\/button>'),n.progressBar&&(f=n.progressBar.renderHtml()),'<div id="'+n._id+'" class="'+n.classes+'"'+i+' role="presentation">'+r+'<div class="'+t+'notification-inner">'+n.state.get("text")+"<\/div>"+f+u+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"><\/div><\/div>'},postRender:function(){var n=this;return v.setTimeout(function(){n.$el.addClass(n.classPrefix+"in");ou(n,n.state.get("text"))},100),n._super()},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl().firstChild.innerHTML=t.value;ou(n,t.value)}),n.progressBar&&(n.progressBar.bindStates(),n.progressBar.state.on("change:value",function(){ou(n,n.state.get("text"))})),n._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var n,t;n=this.getEl().style;t=this._layoutRect;n.left=t.x+"px";n.top=t.y+"px";n.zIndex=65534}});a=[];li="";gt=l.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(n){var t=this;t._super(n);t.isRtl()&&t.classes.add("rtl");t.classes.add("window");t.bodyClasses.add("window-body");t.state.set("fixed",!0);n.buttons&&(t.statusbar=new ci({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:n.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t));t.on("click",function(n){var r=t.classPrefix+"close";(i.hasClass(n.target,r)||i.hasClass(n.target.parentNode,r))&&t.close()});t.on("cancel",function(){t.close()});t.on("move",function(n){n.control===t&&l.hideAll()});t.aria("describedby",t.describedBy||t._id+"-none");t.aria("label",n.title);t._fullscreen=!1},recalc:function(){var t,r,u,f,n=this,e=n.statusbar;n._fullscreen&&(n.layoutRect(i.getWindowSize()),n.layoutRect().contentH=n.layoutRect().innerH);n._super();t=n.layoutRect();n.settings.title&&!n._fullscreen&&(r=t.headerW)>t.w&&(u=t.x-Math.max(0,r/2),n.layoutRect({w:r,x:u}),f=!0);e&&(e.layoutRect({w:n.layoutRect().innerW}).recalc(),(r=e.layoutRect().minW+t.deltaW)>t.w&&(u=t.x-Math.max(0,r-t.w),n.layoutRect({w:r,x:u}),f=!0));f&&n.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0,u,f;return t.settings.title&&!t._fullscreen&&(e=t.getEl("head"),u=i.getSize(e),n.headerW=u.width,n.headerH=u.height,r+=n.headerH),t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r,f=i.getWindowSize(),n.x=t.settings.x||Math.max(0,f.w/2-n.w/2),n.y=t.settings.y||Math.max(0,f.h/2-n.h/2),n},renderHtml:function(){var n=this,f=n._layout,t=n._id,r=n.classPrefix,i=n.settings,e="",o="",u=i.html;return n.preRender(),f.preRender(n),i.title&&(e='<div id="'+t+'-head" class="'+r+'window-head"><div id="'+t+'-title" class="'+r+'title">'+n.encode(i.title)+'<\/div><div id="'+t+'-dragh" class="'+r+'dragh"><\/div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"><\/i><\/button><\/div>'),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"><\/iframe>'),void 0===u&&(u=f.renderHtml(n)),n.statusbar&&(o=n.statusbar.renderHtml()),'<div id="'+t+'" class="'+n.classes+'" hidefocus="1"><div class="'+n.classPrefix+'reset" role="application">'+e+'<div id="'+t+'-body" class="'+n.bodyClasses+'">'+u+"<\/div>"+o+"<\/div><\/div>"},fullscreen:function(n){var e,u,r=this,o=document.documentElement,s=r.classPrefix,f;return n!==r._fullscreen&&((t(window).on("resize",function(){var t,n;r._fullscreen&&(e?r._timer||(r._timer=v.setTimeout(function(){var n=i.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h);r._timer=0},50)):(t=(new Date).getTime(),n=i.getWindowSize(),r.moveTo(0,0).resizeTo(n.w,n.h),50<(new Date).getTime()-t&&(e=!0)))}),u=r.layoutRect(),r._fullscreen=n)?(r._initial={x:u.x,y:u.y,w:u.w,h:u.h},r.borderBox=pt("0"),r.getEl("head").style.display="none",u.deltaH-=u.headerH+2,t([o,document.body]).addClass(s+"fullscreen"),r.classes.add("fullscreen"),f=i.getWindowSize(),r.moveTo(0,0).resizeTo(f.w,f.h)):(r.borderBox=pt(r.settings.border),r.getEl("head").style.display="",u.deltaH+=u.headerH,t([o,document.body]).removeClass(s+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h))),r.reflow()},postRender:function(){var t,n=this;setTimeout(function(){n.classes.add("in");n.fire("open")},0);n._super();n.statusbar&&n.statusbar.postRender();n.focus();this.dragHelper=new ft(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(i){n.moveTo(t.x+i.deltaX,t.y+i.deltaY)}});n.on("submit",function(t){t.isDefaultPrevented()||n.close()});a.push(n);ge(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,n=this;for(n.dragHelper.destroy(),n._super(),n.statusbar&&this.statusbar.remove(),ac(n.classPrefix,!1),t=a.length;t--;)a[t]===n&&a.splice(t,1);ge(0<a.length)},getContentWindow:function(){var n=this.getEl().getElementsByTagName("iframe")[0];return n?n.contentWindow:null}});!function(){if(!b.desktop){var n={w:window.innerWidth,h:window.innerHeight};v.setInterval(function(){var i=window.innerWidth,r=window.innerHeight;n.w===i&&n.h===r||(n={w:i,h:r},t(window).trigger("resize"))},100)}t(window).on("resize",function(){for(var t,r=i.getWindowSize(),n=0;n<a.length;n++)t=a[n].layoutRect(),a[n].moveTo(a[n].settings.x||Math.max(0,r.w/2-t.w/2),a[n].settings.y||Math.max(0,r.h/2-t.h/2))})}();var k=gt.extend({init:function(n){n={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}};this._super(n)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function t(n,t,i){return{type:"button",text:n,subtype:i?"primary":"",onClick:function(n){n.control.parents()[1].close();r(t)}}}var i,r=n.callback||function(){};switch(n.buttons){case k.OK_CANCEL:i=[t("Ok",!0,!0),t("Cancel",!1)];break;case k.YES_NO:case k.YES_NO_CANCEL:i=[t("Yes",1,!0),t("No",0)];n.buttons===k.YES_NO_CANCEL&&i.push(t("Cancel",-1));break;default:i=[t("Ok",!0,!0)]}return new gt({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:i,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(n,t){return"string"==typeof n&&(n={text:n}),n.callback=t,k.msgBox(n)},confirm:function(n,t){return"string"==typeof n&&(n={text:n}),n.callback=t,n.buttons=k.OK_CANCEL,k.msgBox(n)}}}),vc=function(n){return{renderUI:function(t){return cc(n,this,t)},resizeTo:function(t,i){return yr(n,t,i)},resizeBy:function(t,i){return ph(n,t,i)},getNotificationManagerImpl:function(){return lc(n)},getWindowManagerImpl:function(){return{open:function(n,t,i){var r;return n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new gt(n)).on("close",function(){i(r)}),n.data&&r.on("postRender",function(){this.find("*").each(function(t){var i=t.name();i in n.data&&t.value(n.data[i])})}),r.features=n||{},r.params=t||{},r=r.renderTo(document.body).reflow()},alert:function(n,t,i){var r;return(r=k.alert(n,function(){t()})).on("close",function(){i(r)}),r},confirm:function(n,t,i){var r;return(r=k.confirm(n,function(n){t(n)})).on("close",function(){i(r)}),r},close:function(n){n.close()},getParams:function(n){return n.params},setParams:function(n,t){n.params=t}}}}},su=yt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=n.extend({},this.Defaults,t)},preRender:function(n){n.bodyClasses.add(this.settings.containerClass)},applyClasses:function(n){var i,r,t,u,f=this.settings;i=f.firstControlClass;r=f.lastControlClass;n.each(function(n){n.classes.remove(i).remove(r).add(f.controlClass);n.visible()&&(t||(t=n),u=n)});t&&t.classes.add(i);u&&u.classes.add(r)},renderHtml:function(n){var t="";return this.applyClasses(n.items()),n.items().each(function(n){t+=n.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),ai=su.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(n){n.items().filter(":visible").each(function(n){var t=n.settings;n.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h});n.recalc&&n.recalc()})},renderHtml:function(n){return'<div id="'+n._id+'-absend" class="'+n.classPrefix+'abs-end"><\/div>'+this._super(n)}}),vi=f.extend({Defaults:{classes:"widget btn",role:"button"},init:function(n){var i,t=this;t._super(n);n=t.settings;i=t.settings.size;t.on("click mousedown",function(n){n.preventDefault()});t.on("touchstart",function(n){t.fire("click",n);n.preventDefault()});n.subtype&&t.classes.add(n.subtype);i&&t.classes.add("btn-"+i);n.icon&&t.icon(n.icon)},icon:function(n){return arguments.length?(this.state.set("icon",n),this):this.state.get("icon")},repaint:function(){var n,t=this.getEl().firstChild;t&&((n=t.style).width=n.height="100%");this._super()},renderHtml:function(){var n,f,t=this,e=t._id,r=t.classPrefix,i=t.state.get("icon"),o=t.state.get("text"),s="",u=t.settings;return(n=u.image)?(i="none","string"!=typeof n&&(n=window.getSelection?n[0]:n[1]),n=" style=\"background-image: url('"+n+"')\""):n="",o&&(t.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+t.encode(o)+"<\/span>"),i=i?r+"ico "+r+"i-"+i:"",f="boolean"==typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+e+'" class="'+t.classes+'" tabindex="-1"'+f+'><button id="'+e+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+n+"><\/i>":"")+s+"<\/button><\/div>"},bindStates:function(){function r(r){var u=t("span."+i,n.getEl());r?(u[0]||(t("button:first",n.getEl()).append('<span class="'+i+'"><\/span>'),u=t("span."+i,n.getEl())),u.html(n.encode(r))):u.remove();n.classes.toggle("btn-has-text",!!r)}var n=this,t=n.$,i=n.classPrefix+"txt";return n.state.on("change:text",function(n){r(n.value)}),n.state.on("change:icon",function(t){var f=t.value,e=n.classPrefix,u,i;f=(n.settings.icon=f)?e+"ico "+e+"i-"+n.settings.icon:"";u=n.getEl().firstChild;i=u.getElementsByTagName("i")[0];f?(i&&i===u.firstChild||(i=document.createElement("i"),u.insertBefore(i,u.firstChild)),i.className=f):i&&u.removeChild(i);r(n.state.get("text"))}),n._super()}}),yc=vi.extend({init:function(t){t=n.extend({text:"Browse...",multiple:!1,accept:null},t);this._super(t);this.classes.add("browsebutton");t.multiple&&this.classes.add("multiple")},postRender:function(){var n=this,r=i.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super();t(r).on("change",function(t){var i=t.target.files;n.value=function(){return i.length?n.settings.multiple?i:i[0]:null};t.preventDefault();i.length&&n.fire("change",t)});t(r).on("click",function(n){n.stopPropagation()});t(n.getEl("button")).on("click",function(n){n.stopPropagation();r.click()});n.getEl().appendChild(r)},remove:function(){t(this.getEl("button")).off();t(this.getEl("input")).off();this._super()}}),pc=ut.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var n=this,t=n._layout;return n.classes.add("btn-group"),n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'"><div id="'+n._id+'-body">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}}),no=f.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(n){var t=this;t._super(n);t.on("click mousedown",function(n){n.preventDefault()});t.on("click",function(n){n.preventDefault();t.disabled()||t.checked(!t.checked())});t.checked(t.settings.checked)},checked:function(n){return arguments.length?(this.state.set("checked",n),this):this.state.get("checked")},value:function(n){return arguments.length?this.checked(n):this.checked()},renderHtml:function(){var n=this,t=n._id,i=n.classPrefix;return'<div id="'+t+'" class="'+n.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+i+"ico "+i+'i-checkbox"><\/i><span id="'+t+'-al" class="'+i+'label">'+n.encode(n.state.get("text"))+"<\/span><\/div>"},bindStates:function(){function t(t){n.classes.toggle("checked",t);n.aria("checked",t)}var n=this;return n.state.on("change:text",function(t){n.getEl("al").firstChild.data=n.translate(t.value)}),n.state.on("change:checked change:value",function(i){n.fire("change");t(i.value)}),n.state.on("change:icon",function(t){var u=t.value,f=n.classPrefix,r,i;if(void 0===u)return n.settings.icon;u=(n.settings.icon=u)?f+"ico "+f+"i-"+n.settings.icon:"";r=n.getEl().firstChild;i=r.getElementsByTagName("i")[0];u?(i&&i===r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=u):i&&r.removeChild(i)}),n.state.get("checked")&&t(!0),n._super()}}),to=tinymce.util.Tools.resolve("tinymce.util.VK"),hu=f.extend({init:function(n){var i=this;i._super(n);n=i.settings;i.classes.add("combobox");i.subinput=!0;i.ariaTarget="inp";n.menu=n.menu||n.values;n.menu&&(n.icon="caret");i.on("click",function(r){var u=r.target,f=i.getEl();if(t.contains(f,u)||u===f)for(;u&&u!==f;)u.id&&-1!==u.id.indexOf("-open")&&(i.fire("action"),n.menu&&(i.showMenu(),r.aria&&i.menu.items()[0].focus())),u=u.parentNode});i.on("keydown",function(n){var t;13===n.keyCode&&"INPUT"===n.target.nodeName&&(n.preventDefault(),i.parents().reverse().each(function(n){if(n.toJSON)return t=n,!1}),i.fire("submit",{data:t.toJSON()}))});i.on("keyup",function(n){if("INPUT"===n.target.nodeName){var r=i.state.get("value"),t=n.target.value;t!==r&&(i.state.set("value",t),i.fire("autocomplete",n))}});i.on("mouseover",function(n){var t=i.tooltip().moveTo(-65535),u,r;i.statusLevel()&&-1!==n.target.className.indexOf(i.classPrefix+"status")&&(u=i.statusMessage()||"Ok",r=t.text(u).show().testMoveRel(n.target,["bc-tc","bc-tl","bc-tr"]),t.classes.toggle("tooltip-n","bc-tc"===r),t.classes.toggle("tooltip-nw","bc-tl"===r),t.classes.toggle("tooltip-ne","bc-tr"===r),t.moveRel(n.target,r))})},statusLevel:function(n){return 0<arguments.length&&this.state.set("statusLevel",n),this.state.get("statusLevel")},statusMessage:function(n){return 0<arguments.length&&this.state.set("statusMessage",n),this.state.get("statusMessage")},showMenu:function(){var t,n=this,i=n.settings;n.menu||((t=i.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",n.menu=h.create(t).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control===n.menu&&n.focus()}),n.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()===n.value())})}).fire("show"),n.menu.on("select",function(t){n.value(t.control.value())}),n.on("focusin",function(t){"INPUT"===t.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0));n.menu.show();n.menu.layoutRect({w:n.layoutRect().w});n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var f,e,n=this,c=n.getEl(),o=n.getEl("open"),s=n.layoutRect(),h=0,u=c.firstChild,r;return n.statusLevel()&&"none"!==n.statusLevel()&&(h=parseInt(i.getRuntimeStyle(u,"padding-right"),10)-parseInt(i.getRuntimeStyle(u,"padding-left"),10)),f=o?s.w-i.getSize(o).width-10:s.w-10,r=document,r.all&&(!r.documentMode||r.documentMode<=8)&&(e=n.layoutRect().h-2+"px"),t(u).css({width:f-h,lineHeight:e}),n._super(),n},postRender:function(){var n=this;return t(this.getEl("inp")).on("change",function(t){n.state.set("value",t.target.value);n.fire("change",t)}),n._super()},renderHtml:function(){var i,e,o,t=this,f=t._id,n=t.settings,r=t.classPrefix,h=t.state.get("value")||"",s="",u="";return"spellcheck"in n&&(u+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(u+=' maxlength="'+n.maxLength+'"'),n.size&&(u+=' size="'+n.size+'"'),n.subtype&&(u+=' type="'+n.subtype+'"'),o='<i id="'+f+'-status" class="mce-status mce-ico" style="display: none"><\/i>',t.disabled()&&(u+=' disabled="disabled"'),(i=n.icon)&&"caret"!==i&&(i=r+"ico "+r+"i-"+n.icon),e=t.state.get("text"),(i||e)&&(s='<div id="'+f+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+f+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==i?'<i class="'+i+'"><\/i>':'<i class="'+r+'caret"><\/i>')+(e?(i?" ":"")+e:"")+"<\/button><\/div>",t.classes.add("has-open")),'<div id="'+f+'" class="'+t.classes+'"><input id="'+f+'-inp" class="'+r+'textbox" value="'+t.encode(h,!1)+'" hidefocus="1"'+u+' placeholder="'+t.encode(n.placeholder)+'" />'+o+s+"<\/div>"},value:function(n){return arguments.length?(this.state.set("value",n),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,i){var r=this,u;0!==t.length?(r.menu?r.menu.items().remove():r.menu=h.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(r).renderTo(),n.each(t,function(n){var t,u;r.menu.add({text:n.title,url:n.previewUrl,match:i,classes:"menu-item-ellipsis",onclick:(t=n.value,u=n.title,function(){r.fire("selectitem",{title:u,value:t})})})}),r.menu.renderNew(),r.hideMenu(),r.menu.on("cancel",function(n){n.control.parent()===r.menu&&(n.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()}),u=r.layoutRect().w,r.menu.layoutRect({w:u,minW:0,maxW:u}),r.menu.repaint(),r.menu.reflow(),r.menu.show(),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])):r.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var n=this,t;return n.state.on("change:value",function(t){n.getEl("inp").value!==t.value&&(n.getEl("inp").value=t.value)}),n.state.on("change:disabled",function(t){n.getEl("inp").disabled=t.value}),n.state.on("change:statusLevel",function(t){var u=n.getEl("status"),f=n.classPrefix,r=t.value;i.css(u,"display","none"===r?"none":"");i.toggleClass(u,f+"i-checkmark","ok"===r);i.toggleClass(u,f+"i-warning","warn"===r);i.toggleClass(u,f+"i-error","error"===r);n.classes.toggle("has-status","none"!==r);n.repaint()}),i.on(n.getEl("status"),"mouseleave",function(){n.tooltip().hide()}),n.on("cancel",function(t){n.menu&&n.menu.visible()&&(t.stopPropagation(),n.hideMenu())}),t=function(n,t){t&&0<t.items().length&&t.items().eq(n)[0].focus()},n.on("keydown",function(i){var r=i.keyCode;"INPUT"===i.target.nodeName&&(r===to.DOWN?(i.preventDefault(),n.fire("autocomplete"),t(0,n.menu)):r===to.UP&&(i.preventDefault(),t(-1,n.menu)))}),n._super()},remove:function(){t(this.getEl("inp")).off();this.menu&&this.menu.remove();this._super()}}),wc=hu.extend({init:function(n){var t=this;n.spellcheck=!1;n.onaction&&(n.icon="none");t._super(n);t.classes.add("colorbox");t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(n){var t=this.getEl("open"),i=t?t.getElementsByTagName("i")[0]:null;if(i)try{i.style.background=n}catch(r){}},bindStates:function(){var n=this;return n.state.on("change:value",function(t){n.state.get("rendered")&&n.repaintColor(t.value)}),n._super()}}),io=vi.extend({showPanel:function(){var n=this,u=n.settings,t,i,r;(n.classes.add("opened"),n.panel)?n.panel.show():(t=u.panel,t.type&&(t={layout:"grid",items:t}),t.role=t.role||"dialog",t.popover=!0,t.autohide=!0,t.ariaRoot=!0,n.panel=new l(t).on("hide",function(){n.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation();n.focus();n.hidePanel()}).parent(n).renderTo(n.getContainerElm()),n.panel.fire("show"),n.panel.reflow());i=n.panel.testMoveRel(n.getEl(),u.popoverAlign||(n.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));n.panel.classes.toggle("start","l"===i.substr(-1));n.panel.classes.toggle("end","r"===i.substr(-1));r="t"===i.substr(0,1);n.panel.classes.toggle("bottom",!r);n.panel.classes.toggle("top",r);n.panel.moveRel(n.getEl(),i)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var n=this;return n.aria("haspopup",!0),n.on("click",function(t){t.control===n&&(n.panel&&n.panel.visible()?n.hidePanel():(n.showPanel(),n.panel.focus(!!t.aria)))}),n._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),bc=u.DOM,kc=io.extend({init:function(n){this._super(n);this.classes.add("splitbtn");this.classes.add("colorbutton")},color:function(n){return n?(this._color=n,this.getEl("preview").style.backgroundColor=n,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var n=this,i=n._id,t=n.classPrefix,r=n.state.get("text"),u=n.settings.icon?t+"ico "+t+"i-"+n.settings.icon:"",e=n.settings.image?" style=\"background-image: url('"+n.settings.image+"')\"":"",f="";return r&&(n.classes.add("btn-has-text"),f='<span class="'+t+'txt">'+n.encode(r)+"<\/span>"),'<div id="'+i+'" class="'+n.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(u?'<i class="'+u+'"'+e+"><\/i>":"")+'<span id="'+i+'-preview" class="'+t+'preview"><\/span>'+f+'<\/button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1"> <i class="'+t+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this,t=n.settings.onclick;return n.on("click",function(i){i.aria&&"down"===i.aria.key||i.control!==n||bc.getParent(i.target,"."+n.classPrefix+"open")||(i.stopImmediatePropagation(),t.call(n,i))}),delete n.settings.onclick,n._super()}}),ro=tinymce.util.Tools.resolve("tinymce.util.Color"),dc=f.extend({Defaults:{classes:"widget colorpicker"},init:function(n){this._super(n)},postRender:function(){function h(n,t){var r,u,f=i.getPos(n);return r=t.pageX-f.x,u=t.pageY-f.y,{x:r=Math.max(0,Math.min(r/n.clientWidth,1)),y:u=Math.max(0,Math.min(u/n.clientHeight,1))}}function u(t,u){var f=(360-t.h)/360;i.css(e,{top:100*f+"%"});u||i.css(o,{left:t.s+"%",top:100-t.v+"%"});r.style.background=ro({s:100,v:100,h:t.h}).toHex();n.color().parse({s:t.s,v:t.v,h:t.h})}function c(i){var f;f=h(r,i);t.s=100*f.x;t.v=100*(1-f.y);u(t);n.fire("change")}function l(i){var r;r=h(f,i);(t=s.toHsv()).h=360*(1-r.y);u(t,!0);n.fire("change")}var t,f,e,r,o,n=this,s=n.color();f=n.getEl("h");e=n.getEl("hp");r=n.getEl("sv");o=n.getEl("svp");n._repaint=function(){u(t=s.toHsv())};n._super();n._svdraghelper=new ft(n._id+"-sv",{start:c,drag:c});n._hdraghelper=new ft(n._id+"-h",{start:l,drag:l});n._repaint()},rgb:function(){return this.color().toRgb()},value:function(n){if(!arguments.length)return this.color().toHex();this.color().parse(n);this._rendered&&this._repaint()},color:function(){return this._color||(this._color=ro()),this._color},renderHtml:function(){var r,t=this._id,n=this.classPrefix,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return r='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+i+");background: linear-gradient(to bottom,"+i+');">'+function(){var t,u,f,r,e="";for(f="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,u=(r=i.split(",")).length-1;t<u;t++)e+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/u+"%;"+f+r[t]+",endColorstr="+r[t+1]+");-ms-"+f+r[t]+",endColorstr="+r[t+1]+')"><\/div>';return e}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"><\/div><\/div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"><\/div><\/div><\/div><\/div><\/div>'+r+"<\/div>"}}),gc=f.extend({init:function(t){t=n.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t);this._super(t);this.classes.add("dropzone");t.multiple&&this.classes.add("multiple")},renderHtml:function(){var r,n,t=this.settings;return r={id:this._id,hidefocus:"1"},n=i.create("div",r,"<span>"+this.translate(t.text)+"<\/span>"),t.height&&i.css(n,"height",t.height+"px"),t.width&&i.css(n,"width",t.width+"px"),n.className=this.classes,n.outerHTML},postRender:function(){var t=this,i=function(n){n.preventDefault();t.classes.toggle("dragenter");t.getEl().className=t.classes};t._super();t.$el.on("dragover",function(n){n.preventDefault()});t.$el.on("dragenter",i);t.$el.on("dragleave",i);t.$el.on("drop",function(i){if(i.preventDefault(),!t.state.get("disabled")){var r=function(i){var r=t.settings.accept,u;return"string"!=typeof r?i:(u=new RegExp("("+r.split(/\s*,\s*/).join("|")+")$","i"),n.grep(i,function(n){return u.test(n.name)}))}(i.dataTransfer.files);t.value=function(){return r.length?t.settings.multiple?r:r[0]:null};r.length&&t.fire("change",i)}})},remove:function(){this.$el.off();this._super()}}),uo=f.extend({init:function(n){var t=this;n.delimiter||(n.delimiter="»");t._super(n);t.classes.add("path");t.canFocus=!0;t.on("click",function(n){var i;(i=n.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[i],index:i})});t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(n){return arguments.length?(this.state.set("row",n),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"<\/div>"},bindStates:function(){var n=this;return n.state.on("change:row",function(t){n.innerHtml(n._getDataPathHtml(t.value))}),n._super()},_getDataPathHtml:function(n){for(var f=n||[],i="",r=this.classPrefix,t=0,u=f.length;t<u;t++)i+=(0<t?'<div class="'+r+'divider" aria-hidden="true"> '+this.settings.delimiter+" <\/div>":"")+'<div role="button" class="'+r+"path-item"+(t===u-1?" "+r+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+f[t].name+"<\/div>";return i||(i='<div class="'+r+'path-item"> <\/div>'),i}}),nl=uo.extend({postRender:function(){function i(n){return 1===n.nodeType&&("BR"===n.nodeName||n.getAttribute("data-mce-bogus")||"bookmark"===n.getAttribute("data-mce-type"))?!0:!1}var t=this,n=t.settings.editor;return!1!==n.settings.elementpath&&(t.on("select",function(t){n.focus();n.selection.select(this.row()[t.index].element);n.nodeChanged()}),n.on("nodeChange",function(r){for(var e,o=[],u=r.parents,f=u.length;f--;)if(1===u[f].nodeType&&!i(u[f])&&(e=n.fire("ResolveName",{name:u[f].nodeName.toLowerCase(),target:u[f]}),e.isDefaultPrevented()||o.push({name:e.name,element:u[f]}),e.isPropagationStopped()))break;t.row(o)})),t._super()}}),fo=ut.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.classes.add("formitem"),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<div id="'+n._id+'-title" class="'+i+'title">'+n.settings.title+"<\/div>":"")+'<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}}),eo=ut.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,i=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}});i.each(function(i){var r,u=i.settings.label;u&&((r=new fo(n.extend({items:{type:"label",id:i._id+"-l",text:u,flex:0,forId:i._id,disabled:i.disabled()}},t.settings.formItemDefaults))).type="formitem",i.aria("labelledby",i._id+"-l"),"undefined"==typeof i.settings.flex&&(i.settings.flex=1),t.replace(i,r),r.add(i))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super();this.fromJSON(this.settings.data)},bindStates:function(){function t(){var i,u,t=0,r=[];if(!1!==n.settings.labelGapCalc)for(("children"===n.settings.labelGapCalc?n.find("formitem"):n.items()).filter("formitem").each(function(n){var i=n.items()[0],u=i.getEl().clientWidth;t=t<u?u:t;r.push(i)}),u=n.settings.labelGap||0,i=r.length;i--;)r[i].settings.minWidth=t+u}var n=this;n._super();n.on("show",t);t()}}),tl=eo.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.preRender(),t.preRender(n),'<fieldset id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<legend id="'+n._id+'-title" class="'+i+'fieldset-title">'+n.settings.title+"<\/legend>":"")+'<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/fieldset>"}}),il=0,ni=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:r(n)}},ht={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return ni(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return ni(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return ni(i)},fromDom:ni,fromPoint:function(n,t,i){var r=n.dom();return y.from(r.elementFromPoint(t,i)).map(ni)}},oo=function(n){var t,i=!1;return function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];return i||(i=!0,t=n.apply(null,u)),t}},ti={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},rl=function(n){return n.dom().nodeType},cu=function(n){return function(t){return rl(t)===n}},ul=(cu(ti.ELEMENT),cu(ti.TEXT),cu(ti.DOCUMENT),oo(function(){return ul(ht.fromDom(document))}),function(n){var t=n.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return ht.fromDom(t)}),fl=("undefined"!=typeof window?window:Function("return this;")(),function(n,t){var r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined}(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},lu(i(1),i(2))):{major:0,minor:0}}),so=function(){return lu(0,0)},lu=function(n,t){return{major:n,minor:t}},yi={nu:lu,detect:function(n,t){var i=String(t).toLowerCase();return 0===n.length?so():fl(n,i)},unknown:so},ho="Firefox",ct=function(n,t){return function(){return t===n}},co=function(n){var t=n.current;return{current:t,version:n.version,isEdge:ct("Edge",t),isChrome:ct("Chrome",t),isIE:ct("IE",t),isOpera:ct("Opera",t),isFirefox:ct(ho,t),isSafari:ct("Safari",t)}},lo={unknown:function(){return co({current:undefined,version:yi.unknown()})},nu:co,edge:r("Edge"),chrome:r("Chrome"),ie:r("IE"),opera:r("Opera"),firefox:r(ho),safari:r("Safari")},ao="Windows",vo="Android",yo="Solaris",po="FreeBSD",et=function(n,t){return function(){return t===n}},wo=function(n){var t=n.current;return{current:t,version:n.version,isWindows:et(ao,t),isiOS:et("iOS",t),isAndroid:et(vo,t),isOSX:et("OSX",t),isLinux:et("Linux",t),isSolaris:et(yo,t),isFreeBSD:et(po,t)}},bo={unknown:function(){return wo({current:undefined,version:yi.unknown()})},nu:wo,windows:r(ao),ios:r("iOS"),android:r(vo),linux:r("Linux"),osx:r("OSX"),solaris:r(yo),freebsd:r(po)},ko=function(n,t){var i=String(t).toLowerCase();return lh(n,function(n){return n.search(i)})},el=function(n,t){return ko(n,t).map(function(n){var i=yi.detect(n.versionRegexes,t);return{current:n.name,version:i}})},ol=function(n,t){return ko(n,t).map(function(n){var i=yi.detect(n.versionRegexes,t);return{current:n.name,version:i}})},s=function(n,t){return-1!==n.indexOf(t)},au=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nt=function(n){return function(t){return s(t,n)}},sl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return s(n,"edge/")&&s(n,"chrome")&&s(n,"safari")&&s(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,au],search:function(n){return s(n,"chrome")&&!s(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return s(n,"msie")||s(n,"trident")}},{name:"Opera",versionRegexes:[au,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nt("firefox")},{name:"Safari",versionRegexes:[au,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(s(n,"safari")||s(n,"mobile/"))&&s(n,"applewebkit")}}],hl=[{name:"Windows",search:nt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return s(n,"iphone")||s(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:nt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nt("linux"),versionRegexes:[]},{name:"Solaris",search:nt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nt("freebsd"),versionRegexes:[]}],go={browsers:r(sl),oses:r(hl)},cl=function(n){var t,o,i,u,s,h,c,f,e,l,a,p=go.browsers(),w=go.oses(),v=el(p,n).fold(lo.unknown,lo.nu),y=ol(w,n).fold(bo.unknown,bo.nu);return{browser:v,os:y,deviceType:(o=v,i=n,u=(t=y).isiOS()&&!0===/ipad/i.test(i),s=t.isiOS()&&!u,h=t.isAndroid()&&3===t.version.major,c=t.isAndroid()&&4===t.version.major,f=u||h||c&&!0===/mobile/i.test(i),e=t.isiOS()||t.isAndroid(),l=e&&!f,a=o.isSafari()&&t.isiOS()&&!1===/safari/i.test(i),{isiPad:r(u),isiPhone:r(s),isTablet:r(f),isPhone:r(l),isTouch:r(e),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:r(a)})}},ll=oo(function(){var n=navigator.userAgent;return cl(n)}),ns=ti.ELEMENT,al=ti.DOCUMENT,ts=function(n){return n.nodeType!==ns&&n.nodeType!==al||0===n.childElementCount},is={all:function(n,t){var i=t===undefined?document:t.dom();return ts(i)?[]:vt(i.querySelectorAll(n),ht.fromDom)},is:function(n,t){var i=n.dom();if(i.nodeType!==ns)return!1;if(i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},one:function(n,t){var i=t===undefined?document:t.dom();return ts(i)?y.none():y.from(i.querySelector(n)).map(ht.fromDom)}},vl=(ll().browser.isIE(),function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]}("element","offset"),function(n,t){return is.all(t,n)}),yl=n.trim,rs=function(n){return function(t){return t&&1===t.nodeType&&(t.contentEditable===n||t.getAttribute("data-mce-contenteditable")===n)?!0:!1}},pl=rs("true"),wl=rs("false"),us=function(n,t,i,r,u){return{type:n,title:t,url:i,level:r,attach:u}},fs=function(n){return n.innerText||n.textContent},bl=function(n){return n.id?n.id:(t="h",i=(new Date).getTime(),t+"_"+Math.floor(1e9*Math.random())+ ++il+String(i));var t,i},kl=function(n){return(t=n)&&"A"===t.nodeName&&(t.id||t.name)&&os(n);var t},es=function(n){return n&&/^(H[1-6])$/.test(n.nodeName)},os=function(n){return function(n){for(;n=n.parentNode;){var t=n.contentEditable;if(t&&"inherit"!==t)return pl(n)}return!1}(n)&&!wl(n)},dl=function(n){return es(n)&&os(n)},gl=function(n){var t,i=bl(n);return us("header",fs(n),"#"+i,es(t=n)?parseInt(t.nodeName.substr(1),10):0,function(){n.id=i})},na=function(n){var t=n.id||n.name,i=fs(n);return us("anchor",i||"#"+t,"#"+t,0,rr)},ta=function(n){var t,i;return t="h1,h2,h3,h4,h5,h6,a:not([href])",i=n,vt(vl(ht.fromDom(i),t),function(n){return n.dom()})},ia=function(n){return 0<yl(n.title).length},ra=function(n){var t,i=ta(n);return w((t=i,vt(w(t,dl),gl)).concat(vt(w(i,kl),na)),ia)},lt={},ua=function(n){return{title:n.title,value:{title:{raw:n.title},url:n.url,attach:n.attach}}},ss=function(n,t){return{title:n,value:{title:n,url:t,attach:rr}}},hs=function(n,t,i){var r=t in n?n[t]:i;return!1===r?null:r},fa=function(t,i,r,u){var h,c,f,e,o,s,v={title:"-"},l=function(t){var u=t.hasOwnProperty(r)?t[r]:[],f=w(u,function(n){return t=n,!ch(i,function(n){return n.url===t});var t});return n.map(f,function(n){return{title:n,value:{title:n,url:n,attach:rr}}})},a=function(t){var r,u=w(i,function(n){return n.type===t});return r=u,n.map(r,ua)};return!1===u.typeahead_urls?[]:"file"===r?(h=[pi(t,l(lt)),pi(t,a("header")),pi(t,(e=a("anchor"),o=hs(u,"anchor_top","#top"),s=hs(u,"anchor_bottom","#bottom"),null!==o&&e.unshift(ss("<top>",o)),null!==s&&e.push(ss("<bottom>",s)),e))],c=function(n,t){return 0===n.length||0===t.length?n.concat(t):n.concat(v,t)},f=[],cr(h,function(n){f=c(f,n)}),f):pi(t,l(lt))},ea=function(n,t){var u,f,i,r=lt[t];/^https?/.test(n)&&(r?(u=r,f=n,i=hh(u,f),-1===i?y.none():y.some(i)).isNone()&&(lt[t]=r.slice(0,5).concat(n)):lt[t]=[n])},pi=function(t,i){var u=t.toLowerCase(),r=n.grep(i,function(n){return-1!==n.title.toLowerCase().indexOf(u)});return 1===r.length&&r[0].title===t?[]:r},oa=function(n,t,i){var r=t.filepicker_validator_handler;r&&n.state.on("change:value",function(t){var u;0!==(u=t.value).length?r({url:u,type:i},function(t){var u,i,r,f=(i=(u=t).status,r=u.message,"valid"===i?{status:"ok",message:r}:"unknown"===i?{status:"warn",message:r}:"invalid"===i?{status:"warn",message:r}:{status:"none",message:""});n.statusMessage(f.message);n.statusLevel(f.status)}):n.statusLevel("none")})},sa=hu.extend({Statics:{clearHistory:function(){lt={}}},init:function(t){var o,s,r,i,a,v,h,c,u=this,l=window.tinymce?window.tinymce.activeEditor:gi.activeEditor,e=l.settings,f=t.filetype;t.spellcheck=!1;(r=e.file_picker_types||e.file_browser_callback_types)&&(r=n.makeMap(r,/[, ]/));r&&!r[f]||(!(s=e.file_picker_callback)||r&&!r[f]?!(s=e.file_browser_callback)||r&&!r[f]||(o=function(){s(u.getEl("inp").id,u.value(),f,window)}):o=function(){var t=u.fire("beforecall").meta;t=n.extend({filetype:f},t);s.call(l,function(n,t){u.value(n).fire("change",{meta:t})},u.value(),t)});o&&(t.icon="browse",t.onaction=o);u._super(t);u.classes.add("filepicker");i=u;a=e;v=l.getBody();h=f;c=function(n){var t=ra(v),r=fa(n,t,h,a);i.showAutoComplete(r,n)};i.on("autocomplete",function(){c(i.value())});i.on("selectitem",function(n){var t=n.value,r,u;i.value(t.url);u=(r=t.title).raw?r.raw:r;"image"===h?i.fire("change",{meta:{alt:u,attach:t.attach}}):i.fire("change",{meta:{text:u,attach:t.attach}});i.focus()});i.on("click",function(n){0===i.value().length&&"INPUT"===n.target.nodeName&&c("")});i.on("PostRender",function(){i.getRoot().on("submit",function(n){n.isDefaultPrevented()||ea(i.value(),h)})});oa(u,e,f)}}),ha=ai.extend({recalc:function(n){var i=n.layoutRect(),t=n.paddingBox;n.items().filter(":visible").each(function(n){n.layoutRect({x:t.left,y:t.top,w:i.innerW-t.right-t.left,h:i.innerH-t.top-t.bottom});n.recalc&&n.recalc()})}}),ca=ai.extend({recalc:function(n){var f,l,o,r,u,a,ut,ft,et,w,e,b,h,i,lt,v,dt,ot,t,y,g,at,c,vt,nt,s,p,st,yt,k,tt,it,rt,d,ht,pt,wt,bt=[],kt=Math.max,gt=Math.min,ct;for(o=n.items().filter(":visible"),r=n.layoutRect(),u=n.paddingBox,a=n.settings,b=n.isRtl()?a.direction||"row-reversed":a.direction,ut=a.align,ft=n.isRtl()?a.pack||"end":a.pack,et=a.spacing||0,"row-reversed"!==b&&"column-reverse"!==b||(o=o.set(o.toArray().reverse()),b=b.split("-")[0]),"column"===b?(vt="y",at="h",c="minH",nt="maxH",p="innerH",s="top",st="deltaH",yt="contentH",d="left",it="w",k="x",tt="innerW",rt="minW",ht="right",pt="deltaW",wt="contentW"):(vt="x",at="w",c="minW",nt="maxW",p="innerW",s="left",st="deltaW",yt="contentW",d="top",it="h",k="y",tt="innerH",rt="minH",ht="bottom",pt="deltaH",wt="contentH"),e=r[p]-u[s]-u[s],g=w=0,f=0,l=o.length;f<l;f++)i=(h=o[f]).layoutRect(),e-=f<l-1?et:0,0<(lt=h.settings.flex)&&(w+=lt,i[nt]&&bt.push(h),i.flex=lt),e-=i[c],g<(v=u[d]+i[rt]+u[ht])&&(g=v);if((t={})[c]=e<0?r[c]-e+r[st]:r[p]-e+r[st],t[rt]=g+r[pt],t[yt]=r[p]-e,t[wt]=g,t.minW=gt(t.minW,r.maxW),t.minH=gt(t.minH,r.maxH),t.minW=kt(t.minW,r.startMinWidth),t.minH=kt(t.minH,r.startMinHeight),r.autoResize&&(t.minW!==r.minW||t.minH!==r.minH))(t.w=t.minW,t.h=t.minH,n.layoutRect(t),this.recalc(n),null===n._lastRect)&&(ct=n.parent(),ct&&(ct._lastRect=null,ct.recalc()));else{for(ot=e/w,f=0,l=bt.length;f<l;f++)(dt=(i=(h=bt[f]).layoutRect())[nt])<(v=i[c]+i.flex*ot)?(e-=i[nt]-i[c],w-=i.flex,i.flex=0,i.maxFlexSize=dt):i.maxFlexSize=0;for(ot=e/w,y=u[s],t={},0===w&&("end"===ft?y=e+u[s]:"center"===ft?(y=Math.round(r[p]/2-(r[p]-e)/2)+u[s])<0&&(y=u[s]):"justify"===ft&&(y=u[s],et=Math.floor(e/(o.length-1)))),t[k]=u[d],f=0,l=o.length;f<l;f++)v=(i=(h=o[f]).layoutRect()).maxFlexSize||i[c],"center"===ut?t[k]=Math.round(r[tt]/2-i[it]/2):"stretch"===ut?(t[it]=kt(i[rt]||0,r[tt]-u[d]-u[ht]),t[k]=u[d]):"end"===ut&&(t[k]=r[tt]-i[it]-u.top),0<i.flex&&(v+=i.flex*ot),t[at]=v,t[vt]=y,h.layoutRect(t),h.recalc&&h.recalc(),y+=v+et}}}),cs=su.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(n){n.items().filter(":visible").each(function(n){n.recalc&&n.recalc()})},isNative:function(){return!0}}),la=function(n,t){return is.one(t,n)},d=function(n,t){return function(){n.execCommand("mceToggleFormat",!1,t)}},ls=function(n,t,i){var r=function(n){i(n,t)};n.formatter?n.formatter.formatChanged(t,r):n.on("init",function(){n.formatter.formatChanged(t,r)})},vu=function(n,t){return function(i){ls(n,t,function(n){i.control.active(n)})}},aa=function(t){var i=["alignleft","aligncenter","alignright","alignjustify"],r="alignleft",u=[{text:"Left",icon:"alignleft",onclick:d(t,"alignleft")},{text:"Center",icon:"aligncenter",onclick:d(t,"aligncenter")},{text:"Right",icon:"alignright",onclick:d(t,"alignright")},{text:"Justify",icon:"alignjustify",onclick:d(t,"alignjustify")}];t.addMenuItem("align",{text:"Align",menu:u});t.addButton("align",{type:"menubutton",icon:r,menu:u,onShowMenu:function(r){var u=r.control.menu;n.each(i,function(n,i){u.items().eq(i).each(function(i){return i.active(t.formatter.match(n))})})},onPostRender:function(u){var f=u.control;n.each(i,function(n){ls(t,n,function(t){f.icon(r);t&&f.icon(n)})})}});n.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(n,i){t.addButton(i,{active:!1,tooltip:n[0],cmd:n[1],onPostRender:vu(t,i)})})},yu=function(n){return n?n.split(",")[0]:""},va=function(t,i){return function(){var r=this;r.state.set("value",null);t.on("init nodeChange",function(){var f,s,u,e,o=t.queryCommandValue("FontName"),h=(f=i,e=(s=o)?s.toLowerCase():"",n.each(f,function(n){n.value.toLowerCase()===e&&(u=n.value)}),n.each(f,function(n){u||yu(n.value).toLowerCase()!==yu(e).toLowerCase()||(u=n.value)}),u);r.value(h||null);!h&&o&&r.text(yu(o))})}},ya=function(t){t.addButton("fontselect",function(){var i,r=(i=function(n){for(var t=(n=n.replace(/;$/,"").split(";")).length;t--;)n[t]=n[t].split("=");return n}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),n.map(i,function(n){return{text:{raw:n[0]},value:n[1],textStyle:-1===n[1].indexOf("dings")?"font-family:"+n[1]:""}}));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:va(t,r),onselect:function(n){n.control.settings.value&&t.execCommand("FontName",!1,n.control.settings.value)}}})},pa=function(n){ya(n)},wa=function(n,t){return/[0-9.]+px$/.test(n)?(r=72*parseInt(n,10)/96,u=t||0,i=Math.pow(10,u),Math.round(r*i)/i+"pt"):n;var r,u,i},ba=function(t,i,r){var u;return n.each(t,function(n){n.value===r?u=r:n.value===i&&(u=i)}),u},ka=function(t){t.addButton("fontsizeselect",function(){var r,i,u,f=(r=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt",n.map(r.split(" "),function(n){var i=n,r=n,t=n.split("=");return 1<t.length&&(i=t[0],r=t[1]),{text:i,value:r}}));return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:f,fixedWidth:!0,onPostRender:(i=t,u=f,function(){var n=this;i.on("init nodeChange",function(){var f,e,t,r;if(f=i.queryCommandValue("FontSize"))for(t=3;!r&&0<=t;t--)e=wa(f,t),r=ba(u,e,f);n.value(r||null);r||n.text(e)})}),onclick:function(n){n.control.settings.value&&t.execCommand("FontSize",!1,n.control.settings.value)}}})},da=function(n){ka(n)},as=function(t,i){var r=i.length;return n.each(i,function(n){n.menu&&(n.hidden=0===as(t,n.menu));var i=n.format;i&&(n.hidden=!t.formatter.canApply(i));n.hidden&&r--}),r},vs=function(n,t){var i=t.items().length;return t.items().each(function(t){t.menu&&t.visible(0<vs(n,t.menu));!t.menu&&t.settings.menu&&t.visible(0<as(n,t.settings.menu));var r=t.settings.format;r&&t.visible(n.formatter.canApply(r));t.visible()||i--}),i},ga=function(t){var i,o,f,u,r,s,e,h,c=(o=0,f=[],u=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],r=function(t){var i=[];if(t)return n.each(t,function(n){var t={text:n.title,icon:n.icon},u;n.items?t.menu=r(n.items):(u=n.format||"custom"+o++,n.format||(n.name=u,f.push(n)),t.format=u,t.cmd=n.cmd);i.push(t)}),i},(i=t).on("init",function(){n.each(f,function(n){i.formatter.register(n.name,n)})}),{type:"menu",items:i.settings.style_formats_merge?i.settings.style_formats?r(u.concat(i.settings.style_formats)):r(u):r(i.settings.style_formats||u),onPostRender:function(n){i.fire("renderFormatsMenu",{control:n.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return i.formatter.getCssText(this.settings.format)},onPostRender:function(){var n=this;n.parent().on("show",function(){var t,r;(t=n.settings.format)&&(n.disabled(!i.formatter.canApply(t)),n.active(i.formatter.match(t)));(r=n.settings.cmd)&&n.active(i.queryCommandState(r))})},onclick:function(){this.settings.format&&d(i,this.settings.format)();this.settings.cmd&&i.execCommand(this.settings.cmd)}}});s=c;t.addMenuItem("formats",{text:"Formats",menu:s});h=c;(e=t).addButton("styleselect",{type:"menubutton",text:"Formats",menu:h,onShowMenu:function(){e.settings.style_formats_autohide&&vs(e,this.menu)}})},nv=function(t,i){return function(){var r,f,e,u=[];return n.each(i,function(n){u.push({text:n[0],value:n[1],textStyle:function(){return t.formatter.getCssText(n[1])}})}),{type:"listbox",text:i[0][0],values:u,fixedWidth:!0,onselect:function(n){if(n.control){var i=n.control.value();d(t,i)()}},onPostRender:(r=t,f=u,function(){var t=this;r.on("nodeChange",function(i){var o=r.formatter,u=null;n.each(i.parents,function(t){if(n.each(f,function(n){if(e?o.matchNode(t,e,{value:n.value})&&(u=n.value):o.matchNode(t,n.value)&&(u=n.value),u)return!1}),u)return!1});t.value(u)})})}}},tv=function(t){var i,r,u=function(n){for(var t=(n=n.replace(/;$/,"").split(";")).length;t--;)n[t]=n[t].split("=");return n}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:(i=t,r=u,n.map(r,function(n){return{text:n[0],onclick:d(i,n[1]),textStyle:function(){return i.formatter.getCssText(n[1])}}}))});t.addButton("formatselect",nv(t,u))},ys=function(t,i){var r,u;if("string"==typeof i)u=i.split(" ");else if(n.isArray(i))return function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!Array.prototype.isPrototypeOf(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);vh.apply(i,n[t])}return i}(n.map(i,function(n){return ys(t,n)}));return r=n.grep(u,function(n){return"|"===n||n in t.menuItems}),n.map(r,function(n){return"|"===n?{text:"-"}:t.menuItems[n]})},pu=function(n){return n&&"-"===n.text},iv=function(n){var t=w(n,function(n,t,i){return!pu(n)||!pu(i[t-1])});return w(t,function(n,t,i){return!pu(n)||0<t&&t<i.length-1})},rv=function(t){var r,u,i,f,e=t.settings.insert_button_items;return iv(e?ys(t,e):(r=t,u="insert",i=[{text:"-"}],f=n.grep(r.menuItems,function(n){return n.context===u}),n.each(f,function(n){"before"===n.separator&&i.push({text:"|"});n.prependToContext?i.unshift(n):i.push(n);"after"===n.separator&&i.push({text:"|"})}),i))},uv=function(n){var t;(t=n).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(rv(t));this.menu.renderNew()}})},fv=function(t){var i,u,r;i=t;n.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(n,t){i.addButton(t,{active:!1,tooltip:n,onPostRender:vu(i,t),onclick:d(i,t)})});u=t;n.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(n,t){u.addButton(t,{tooltip:n[0],cmd:n[1]})});r=t;n.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(n,t){r.addButton(t,{active:!1,tooltip:n[0],cmd:n[1],onPostRender:vu(r,t)})})},ev=function(t){var i;fv(t);i=t;n.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(n,t){i.addMenuItem(t,{text:n[0],icon:t,shortcut:n[2],cmd:n[1]})});i.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:d(i,"code")})},wi=function(n,t){return function(){var i=this,r=function(){var i="redo"===t?"hasRedo":"hasUndo";return!!n.undoManager&&n.undoManager[i]()};i.disabled(!r());n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){i.disabled(n.readonly||!r())})}},ov=function(n){var t,i;(t=n).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:wi(t,"undo"),cmd:"undo"});t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:wi(t,"redo"),cmd:"redo"});(i=n).addButton("undo",{tooltip:"Undo",onPostRender:wi(i,"undo"),cmd:"undo"});i.addButton("redo",{tooltip:"Redo",onPostRender:wi(i,"redo"),cmd:"redo"})},sv=function(n){var i,t;(i=n).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(t=i,function(){var n=this;t.on("VisualAid",function(t){n.active(t.hasVisual)});n.active(t.hasVisual)}),cmd:"mceToggleVisualAid"})},ps={setup:function(n){var t;n.rtl&&(o.rtl=!0);n.on("mousedown",function(){l.hideAll()});(t=n).settings.ui_container&&(b.container=la(ht.fromDom(document.body),t.settings.ui_container).fold(r(null),function(n){return n.dom()}));f.tooltips=!b.iOS;o.translate=function(n){return gi.translate(n)};tv(n);aa(n);ev(n);ov(n);da(n);pa(n);ga(n);sv(n);uv(n)}},hv=ai.extend({recalc:function(n){var e,y,o,b,u,k,d,i,f,h,t,r,g,nt,st,s,p,tt,it,c,l,rt,ut,ht,ct,lt,ft,vt,a=[],v=[],yt,et,w,at,ot;for(e=n.settings,b=n.items().filter(":visible"),u=n.layoutRect(),o=e.columns||Math.ceil(Math.sqrt(b.length)),y=Math.ceil(b.length/o),tt=e.spacingH||e.spacing||0,it=e.spacingV||e.spacing||0,c=e.alignH||e.align,l=e.alignV||e.align,s=n.paddingBox,vt=("reverseRows"in e)?e.reverseRows:n.isRtl(),c&&"string"==typeof c&&(c=[c]),l&&"string"==typeof l&&(l=[l]),t=0;t<o;t++)a.push(0);for(r=0;r<y;r++)v.push(0);for(r=0;r<y;r++)for(t=0;t<o&&(h=b[r*o+t]);t++)ht=(f=h.layoutRect()).minW,ct=f.minH,a[t]=ht>a[t]?ht:a[t],v[r]=ct>v[r]?ct:v[r];for(lt=u.innerW-s.left-s.right,t=rt=0;t<o;t++)rt+=a[t]+(0<t?tt:0),lt-=(0<t?tt:0)+a[t];for(ft=u.innerH-s.top-s.bottom,r=ut=0;r<y;r++)ut+=v[r]+(0<r?it:0),ft-=(0<r?it:0)+v[r];if(rt+=s.left+s.right,ut+=s.top+s.bottom,(i={}).minW=rt+(u.w-u.innerW),i.minH=ut+(u.h-u.innerH),i.contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH,i.minW=Math.min(i.minW,u.maxW),i.minH=Math.min(i.minH,u.maxH),i.minW=Math.max(i.minW,u.startMinWidth),i.minH=Math.max(i.minH,u.startMinHeight),u.autoResize&&(i.minW!==u.minW||i.minH!==u.minH))(i.w=i.minW,i.h=i.minH,n.layoutRect(i),this.recalc(n),null===n._lastRect)&&(ot=n.parent(),ot&&(ot._lastRect=null,ot.recalc()));else{if(u.autoResize&&((i=n.layoutRect(i)).contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH),yt="start"===e.packV?0:0<ft?Math.floor(ft/y):0,et=0,w=e.flexWidths,w)for(t=0;t<w.length;t++)et+=w[t];else et=o;for(at=lt/et,t=0;t<o;t++)a[t]+=w?w[t]*at:at;for(nt=s.top,r=0;r<y;r++){for(g=s.left,d=v[r]+yt,t=0;t<o&&(h=b[vt?r*o+o-1-t:r*o+t]);t++)st=h.settings,f=h.layoutRect(),k=Math.max(a[t],f.startMinWidth),f.x=g,f.y=nt,"center"===(p=st.alignH||(c?c[t]||c[0]:null))?f.x=g+k/2-f.w/2:"right"===p?f.x=g+k-f.w:"stretch"===p&&(f.w=k),"center"===(p=st.alignV||(l?l[t]||l[0]:null))?f.y=nt+d/2-f.h/2:"bottom"===p?f.y=nt+d-f.h:"stretch"===p&&(f.h=d),h.layoutRect(f),g+=k+tt,h.recalc&&h.recalc();nt+=d+it}}}}),cv=f.extend({renderHtml:function(){var n=this;return n.classes.add("iframe"),n.canFocus=!1,'<iframe id="'+n._id+'" class="'+n.classes+'" tabindex="-1" src="'+(n.settings.url||"javascript:''")+'" frameborder="0"><\/iframe>'},src:function(n){this.getEl().src=n},html:function(n,t){var r=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=n,t&&t()):v.setTimeout(function(){r.html(n)}),this}}),lv=f.extend({init:function(n){this._super(n);this.classes.add("widget").add("infobox");this.canFocus=!1},severity:function(n){this.classes.remove("error");this.classes.remove("warning");this.classes.remove("success");this.classes.add(n)},help:function(n){this.state.set("help",n)},renderHtml:function(){var n=this,t=n.classPrefix;return'<div id="'+n._id+'" class="'+n.classes+'"><div id="'+n._id+'-body">'+n.encode(n.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"><\/i><\/button><\/div><\/div>'},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl("body").firstChild.data=n.encode(t.value);n.state.get("rendered")&&n.updateLayoutRect()}),n.state.on("change:help",function(t){n.classes.toggle("has-help",t.value);n.state.get("rendered")&&n.updateLayoutRect()}),n._super()}}),av=f.extend({init:function(n){var t=this;t._super(n);t.classes.add("widget").add("label");t.canFocus=!1;n.multiline&&t.classes.add("autoscroll");n.strong&&t.classes.add("strong")},initLayoutRect:function(){var t=this,n=t._super();return t.settings.multiline&&(i.getSize(t.getEl()).width>n.maxW&&(n.minW=n.maxW,t.classes.add("multiline")),t.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,i.getSize(t.getEl()).height)),n},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(n){this.classes.remove("error");this.classes.remove("warning");this.classes.remove("success");this.classes.add(n)},renderHtml:function(){var i,r,n=this,t=n.settings.forId,u=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!t&&(r=n.settings.forName)&&(i=n.getRoot().find("#"+r)[0])&&(t=i._id),t?'<label id="'+n._id+'" class="'+n.classes+'"'+(t?' for="'+t+'"':"")+">"+u+"<\/label>":'<span id="'+n._id+'" class="'+n.classes+'">'+u+"<\/span>"},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.innerHtml(n.encode(t.value));n.state.get("rendered")&&n.updateLayoutRect()}),n._super()}}),ws=ut.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(n){this._super(n);this.classes.add("toolbar")},postRender:function(){return this.items().each(function(n){n.classes.add("toolbar-item")}),this._super()}}),bs=ws.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),bi=vi.extend({init:function(n){var t=this;t._renderOpen=!0;t._super(n);n=t.settings;t.classes.add("menubtn");n.fixedWidth&&t.classes.add("fixed-width");t.aria("haspopup",!0);t.state.set("menu",n.menu||t.render())},showMenu:function(n){var i,t=this;if(t.menu&&t.menu.visible()&&!1!==n)return t.hideMenu();t.menu||(i=t.state.get("menu")||[],t.classes.add("opened"),i.length?i={type:"menu",animate:!0,items:i}:(i.type=i.type||"menu",i.animate=!0),t.menu=i.renderTo?i.parent(t).show().renderTo():h.create(i).parent(t).renderTo(),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(n){n.control.parent()===t.menu&&(n.stopPropagation(),t.focus(),t.hideMenu())}),t.menu.on("select",function(){t.focus()}),t.menu.on("show hide",function(n){n.control===t.menu&&(t.activeMenu("show"===n.type),t.classes.toggle("opened","show"===n.type));t.aria("expanded","show"===n.type)}).fire("show"));t.menu.show();t.menu.layoutRect({w:t.layoutRect().w});t.menu.repaint();t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);t.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),this.menu.hide())},activeMenu:function(n){this.classes.toggle("active",n)},renderHtml:function(){var t,n=this,u=n._id,r=n.classPrefix,i=n.settings.icon,f=n.state.get("text"),e="";return(t=n.settings.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",f&&(n.classes.add("btn-has-text"),e='<span class="'+r+'txt">'+n.encode(f)+"<\/span>"),i=n.settings.icon?r+"ico "+r+"i-"+i:"",n.aria("role",n.parent()instanceof bs?"menuitem":"button"),'<div id="'+u+'" class="'+n.classes+'" tabindex="-1" aria-labelledby="'+u+'"><button id="'+u+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"><\/i>":"")+e+' <i class="'+r+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this;return n.on("click",function(t){t.control===n&&function(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1}(t.target,n.getEl())&&(n.focus(),n.showMenu(!t.aria),t.aria&&n.menu.items().filter(":visible")[0].focus())}),n.on("mouseenter",function(t){var u,i=t.control,r=n.parent();i&&r&&i instanceof bi&&i.parent()===r&&(r.items().filter("MenuButton").each(function(n){n.hideMenu&&n!==i&&(n.menu&&n.menu.visible()&&(u=!0),n.hideMenu())}),u&&(i.focus(),i.showMenu()))}),n._super()},bindStates:function(){var n=this;return n.state.on("change:menu",function(){n.menu&&n.menu.remove();n.menu=null}),n._super()},remove:function(){this._super();this.menu&&this.menu.remove()}}),ks=l.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var i=t.items,r=i.length;r--;)i[r]=n.extend({},t.itemDefaults,i[r]);this._super(t);this.classes.add("menu");t.animate&&11!==b.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll();this.fire("select")},load:function(){function i(){n.throbber&&(n.throbber.hide(),n.throbber=null)}var t,n=this;n.settings.itemsFactory&&(n.throbber||(n.throbber=new eu(n.getEl("body"),!0),0===n.items().length?(n.throbber.show(),n.fire("loading")):n.throbber.show(100,function(){n.items().remove();n.fire("loading")}),n.on("hide close",i)),n.requestTime=t=(new Date).getTime(),n.settings.itemsFactory(function(r){0!==r.length?n.requestTime===t&&(n.getEl().style.width="",n.getEl("body").style.width="",i(),n.items().remove(),n.getEl("body").innerHTML="",n.add(r),n.renderNew(),n.fire("loaded")):n.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var n=this;return n.items().each(function(t){var i=t.settings;if(i.icon||i.image||i.selectable)return!(n._hasIcons=!0)}),n.settings.itemsFactory&&n.on("postrender",function(){n.settings.itemsFactory&&n.load()}),n.on("show hide",function(t){t.control===n&&("show"===t.type?v.setTimeout(function(){n.classes.add("in")},0):n.classes.remove("in"))}),n._super()}}),vv=bi.extend({init:function(n){var i,f,r,u,t=this;t._super(n);n=t.settings;t._values=i=n.values;i&&("undefined"!=typeof n.value&&function e(i){for(var u=0;u<i.length;u++){if(f=i[u].selected||n.value===i[u].value)return r=r||i[u].text,t.state.set("value",i[u].value),!0;if(i[u].menu&&e(i[u].menu))return!0}}(i),!f&&0<i.length&&(r=i[0].text,t.state.set("value",i[0].value)),t.state.set("menu",i));t.state.set("text",n.text||r);t.classes.add("listbox");t.on("select",function(i){var r=i.control;u&&(i.lastControl=u);n.multiple?r.active(!r.active()):t.value(i.control.value());u=r})},value:function(t){return 0===arguments.length?this.state.get("value"):(void 0===t||(this.settings.values?0<n.grep(this.settings.values,function(n){return n.value===t}).length?this.state.set("value",t):null===t&&this.state.set("value",null):this.state.set("value",t)),this)},bindStates:function(){var n=this;return n.on("show",function(t){var i,r;i=t.control;r=n.value();i instanceof ks&&i.items().each(function(n){n.hasMenus()||n.active(n.value()===r)})}),n.state.on("change:value",function(t){var i=function r(n,t){var u,i;if(n)for(i=0;i<n.length;i++){if(n[i].value===t)return n[i];if(n[i].menu&&(u=r(n[i].menu,t)))return u}}(n.state.get("menu"),t.value);i?n.text(i.text):n.text(n.settings.text)}),n._super()}}),yv=f.extend({Defaults:{border:0,role:"menuitem"},init:function(n){var i,t=this;t._super(n);n=t.settings;t.classes.add("menu-item");n.menu&&t.classes.add("menu-item-expand");n.preview&&t.classes.add("menu-item-preview");"-"!==(i=t.state.get("text"))&&"|"!==i||(t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-"));n.selectable&&(t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),n.icon="selected");n.preview||n.selectable||t.classes.add("menu-item-normal");t.on("mousedown",function(n){n.preventDefault()});n.menu&&!n.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var n,t=this,u=t.settings,r=t.parent(),i;(r.items().each(function(n){n!==t&&n.hideMenu()}),u.menu)&&((n=t.menu)?n.show():((n=u.menu).length?n={type:"menu",items:n}:n.type=n.type||"menu",r.settings.itemDefaults&&(n.itemDefaults=r.settings.itemDefaults),(n=t.menu=h.create(n).parent(t).renderTo()).reflow(),n.on("cancel",function(i){i.stopPropagation();t.focus();n.hide()}),n.on("show hide",function(n){n.control.items&&n.control.items().each(function(n){n.active(n.settings.selected)})}).fire("show"),n.on("hide",function(i){i.control===n&&t.classes.remove("selected")}),n.submenu=!0),n._parentMenu=r,n.classes.add("menu-sub"),i=n.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),n.moveRel(t.getEl(),i),i="menu-sub-"+(n.rel=i),n.classes.remove(n._lastRel).add(i),n._lastRel=i,t.classes.add("selected"),t.aria("expanded",!0))},hideMenu:function(){var n=this;return n.menu&&(n.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),n.menu.hide(),n.aria("expanded",!1)),n},renderHtml:function(){function s(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(n){var i=t.match||"";return i?n.replace(new RegExp(s(i),"gi"),function(n){return"!mce~match["+n+"]mce~match!"}):n}function a(n){return n.replace(new RegExp(s("!mce~match["),"g"),"<b>").replace(new RegExp(s("]mce~match!"),"g"),"<\/b>")}var h,n=this,e=n._id,t=n.settings,i=n.classPrefix,r=n.state.get("text"),o=n.settings.icon,c="",u=t.shortcut,f=n.encode(t.url);return o&&n.parent().classes.add("menu-has-icons"),t.image&&(c=" style=\"background-image: url('"+t.image+"')\""),u&&(u=function(n){var t,i,r={};for(r=b.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},n=n.split("+"),t=0;t<n.length;t++)(i=r[n[t].toLowerCase()])&&(n[t]=i);return n.join("+")}(u)),o=i+"ico "+i+"i-"+(n.settings.icon||"none"),h="-"!==r?'<i class="'+o+'"'+c+"><\/i> ":"",r=a(n.encode(l(r))),f=a(n.encode(l(f))),'<div id="'+e+'" class="'+n.classes+'" tabindex="-1">'+h+("-"!==r?'<span id="'+e+'-text" class="'+i+'text">'+r+"<\/span>":"")+(u?'<div id="'+e+'-shortcut" class="'+i+'menu-shortcut">'+u+"<\/div>":"")+(t.menu?'<div class="'+i+'caret"><\/div>':"")+(f?'<div class="'+i+'menu-item-link">'+f+"<\/div>":"")+"<\/div>"},postRender:function(){var n=this,r=n.settings,t=r.textStyle,i;return("function"==typeof t&&(t=t.call(this)),t)&&(i=n.getEl("text"),i&&(i.setAttribute("style",t),n._textStyle=t)),n.on("mouseenter click",function(t){t.control===n&&(r.menu||"click"!==t.type?(n.showMenu(),t.aria&&n.menu.focus(!0)):(n.fire("select"),v.requestAnimationFrame(function(){n.parent().hideAll()})))}),n._super(),n},hover:function(){return this.parent().items().each(function(n){n.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(n){return function(n,t){var r=n._textStyle,i;r&&(i=n.getEl("text"),i.setAttribute("style",r),t&&(i.style.color="",i.style.backgroundColor=""))}(this,n),void 0!==n&&this.aria("checked",n),this._super(n)},remove:function(){this._super();this.menu&&this.menu.remove()}}),pv=no.extend({Defaults:{classes:"radio",role:"radio"}}),wv=f.extend({renderHtml:function(){var n=this,t=n.classPrefix;return n.classes.add("resizehandle"),"both"===n.settings.direction&&n.classes.add("resizehandle-both"),n.canFocus=!1,'<div id="'+n._id+'" class="'+n.classes+'"><i class="'+t+"ico "+t+'i-resize"><\/i><\/div>'},postRender:function(){var n=this;n._super();n.resizeDragHelper=new ft(this._id,{start:function(){n.fire("ResizeStart")},drag:function(t){"both"!==n.settings.direction&&(t.deltaX=0);n.fire("Resize",t)},stop:function(){n.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});gs=f.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(n){var t=this;t._super(n);t.settings.size&&(t.size=t.settings.size);t.settings.options&&(t._options=t.settings.options);t.on("keydown",function(n){var i;13===n.keyCode&&(n.preventDefault(),t.parents().reverse().each(function(n){if(n.toJSON)return i=n,!1}),t.fire("submit",{data:i.toJSON()}))})},options:function(n){return arguments.length?(this.state.set("options",n),this):this.state.get("options")},renderHtml:function(){var t,n=this,i="";return t=ds(n._options),n.size&&(i=' size = "'+n.size+'"'),'<select id="'+n._id+'" class="'+n.classes+'"'+i+">"+t+"<\/select>"},bindStates:function(){var n=this;return n.state.on("change:options",function(t){n.getEl().innerHTML=ds(t.value)}),n._super()}});var bv=f.extend({init:function(n){var t=this;n.previewFilter||(n.previewFilter=function(n){return Math.round(100*n)/100});t._super(n);t.classes.add("slider");"v"===n.orientation&&t.classes.add("vertical");t._minValue=af(n.minValue)?n.minValue:0;t._maxValue=af(n.maxValue)?n.maxValue:100;t._initValue=t.state.get("value")},renderHtml:function(){var n=this._id,t=this.classPrefix;return'<div id="'+n+'" class="'+this.classes+'"><div id="'+n+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"><\/div><\/div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,o,r,u,s,h,c,v,f,y,p,l,a,t,n=this;e=n._minValue;o=n._maxValue;"v"===n.settings.orientation?(r="screenY",u="top",s="height",h="h"):(r="screenX",u="left",s="width",h="w");n._super(),function(t,i){function r(r){var u,f,e,o;u=nh(u=(((u=n.value())+(o=f=t))/((e=i)-o)+.05*r)*(e-f)-f,t,i);n.value(u);n.fire("dragstart",{value:u});n.fire("drag",{value:u});n.fire("dragend",{value:u})}n.on("keydown",function(n){switch(n.keyCode){case 37:case 38:r(-1);break;case 39:case 40:r(1)}})}(e,o);c=e;v=o;f=n.getEl("handle");n._dragHelper=new ft(n._id,{handle:n._id+"-handle",start:function(e){y=e[r];p=parseInt(n.getEl("handle").style[u],10);l=(n.layoutRect()[h]||100)-i.getSize(f)[s];n.fire("dragstart",{value:t})},drag:function(i){var e=i[r]-y;a=nh(p+e,0,l);f.style[u]=a+"px";t=c+a/l*(v-c);n.value(t);n.tooltip().text(""+n.settings.previewFilter(t)).show().moveRel(f,"bc tc");n.fire("drag",{value:t})},stop:function(){n.tooltip().hide();n.fire("dragend",{value:t})}})},repaint:function(){this._super();th(this,this.value())},bindStates:function(){var n=this;return n.state.on("change:value",function(t){th(n,t.value)}),n._super()}}),kv=f.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><\/div>'}}),dv=bi.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var u,n,f=this.getEl(),r=this.layoutRect();return this._super(),u=f.firstChild,n=f.lastChild,t(u).css({width:r.w-i.getSize(n).width,height:r.h-2}),t(n).css({height:r.h-2}),this},activeMenu:function(n){t(this.getEl().lastChild).toggleClass(this.classPrefix+"active",n)},renderHtml:function(){var t,f,n=this,s=n._id,r=n.classPrefix,i=n.state.get("icon"),e=n.state.get("text"),u=n.settings,o="";return(t=u.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i=u.icon?r+"ico "+r+"i-"+i:"",e&&(n.classes.add("btn-has-text"),o='<span class="'+r+'txt">'+n.encode(e)+"<\/span>"),f="boolean"==typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+s+'" class="'+n.classes+'" role="button"'+f+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"><\/i>":"")+o+'<\/button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(i?" ":"")+n._menuBtnText:"")+' <i class="'+r+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(t){var i=t.target;if(t.control===this)for(;i;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===i.nodeName&&-1===i.className.indexOf("open"))return t.stopImmediatePropagation(),void(n&&n.call(this,t));i=i.parentNode}}),delete this.settings.onclick,this._super()}}),gv=cs.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),ny=ci.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var i;this.activeTabId&&(i=this.getEl(this.activeTabId),t(i).removeClass(this.classPrefix+"active"),i.setAttribute("aria-selected","false"));this.activeTabId="t"+n;(i=this.getEl("t"+n)).setAttribute("aria-selected","true");t(i).addClass(this.classPrefix+"active");this.items()[n].show().fire("showtab");this.reflow();this.items().each(function(t,i){n!==i&&t.hide()})},renderHtml:function(){var n=this,t=n._layout,i="",r=n.classPrefix;return n.preRender(),t.preRender(n),n.items().each(function(t,u){var f=n._id+"-t"+u;t.aria("role","tabpanel");t.aria("labelledby",f);i+='<div id="'+f+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+n.encode(t.settings.title)+"<\/div>"}),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+r+'tabs" role="tablist">'+i+'<\/div><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var n=this;n._super();n.settings.activeTab=n.settings.activeTab||0;n.activateTab(n.settings.activeTab);this.on("click",function(t){var i=t.target.parentNode,r;if(i&&i.id===n._id+"-head")for(r=i.childNodes.length;r--;)i.childNodes[r]===t.target&&n.activateTab(r)})},initLayoutRect:function(){var u,n,r,t=this,f;return n=(n=i.getSize(t.getEl("head")).width)<0?0:n,r=0,t.items().each(function(t){n=Math.max(n,t.layoutRect().minW);r=Math.max(r,t.layoutRect().minH)}),t.items().each(function(t){t.settings.x=0;t.settings.y=0;t.settings.w=n;t.settings.h=r;t.layoutRect({x:0,y:0,w:n,h:r})}),f=i.getSize(t.getEl("head")).height,t.settings.minWidth=n,t.settings.minHeight=r+f,(u=t._super()).deltaH+=f,u.innerH=u.h-u.deltaH,u}}),ty=f.extend({init:function(n){var t=this;t._super(n);t.classes.add("textbox");n.multiline?t.classes.add("multiline"):(t.on("keydown",function(n){var i;13===n.keyCode&&(n.preventDefault(),t.parents().reverse().each(function(n){if(n.toJSON)return i=n,!1}),t.fire("submit",{data:i.toJSON()}))}),t.on("keyup",function(n){t.state.set("value",n.target.value)}))},repaint:function(){var r,n,u,o,t,i=this,e=0,f;return r=i.getEl().style,n=i._layoutRect,t=i._lastRepaintRect||{},f=document,!i.settings.multiline&&f.all&&(!f.documentMode||f.documentMode<=8)&&(r.lineHeight=n.h-e+"px"),o=(u=i.borderBox).left+u.right+8,e=u.top+u.bottom+(i.settings.multiline?8:0),n.x!==t.x&&(r.left=n.x+"px",t.x=n.x),n.y!==t.y&&(r.top=n.y+"px",t.y=n.y),n.w!==t.w&&(r.width=n.w-o+"px",t.w=n.w),n.h!==t.h&&(r.height=n.h-e+"px",t.h=n.h),i._lastRepaintRect=t,i.fire("repaint",{},!1),i},renderHtml:function(){var t,f,r=this,u=r.settings;return t={id:r._id,hidefocus:"1"},n.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(n){t[n]=u[n]}),r.disabled()&&(t.disabled="disabled"),u.subtype&&(t.type=u.subtype),(f=i.create(u.multiline?"textarea":"input",t)).value=r.state.get("value"),f.className=r.classes.toString(),f.outerHTML},value:function(n){return arguments.length?(this.state.set("value",n),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var n=this;n.getEl().value=n.state.get("value");n._super();n.$el.on("change",function(t){n.state.set("value",t.target.value);n.fire("change",t)})},bindStates:function(){var n=this;return n.state.on("change:value",function(t){n.getEl().value!==t.value&&(n.getEl().value=t.value)}),n.state.on("change:disabled",function(t){n.getEl().disabled=t.value}),n._super()},remove:function(){this.$el.off();this._super()}}),wu=function(){return{Selector:wt,Collection:bt,ReflowQueue:dt,Control:o,Factory:h,KeyboardNavigation:le,Container:ut,DragHelper:ft,Scrollable:ae,Panel:ci,Movable:ei,Resizable:ve,FloatPanel:l,Window:gt,MessageBox:k,Tooltip:be,Widget:f,Progress:ke,Notification:de,Layout:su,AbsoluteLayout:ai,Button:vi,ButtonGroup:pc,Checkbox:no,ComboBox:hu,ColorBox:wc,PanelButton:io,ColorButton:kc,ColorPicker:dc,Path:uo,ElementPath:nl,FormItem:fo,Form:eo,FieldSet:tl,FilePicker:sa,FitLayout:ha,FlexLayout:ca,FlowLayout:cs,FormatControls:ps,GridLayout:hv,Iframe:cv,InfoBox:lv,Label:av,Toolbar:ws,MenuBar:bs,MenuButton:bi,MenuItem:yv,Throbber:eu,Menu:ks,ListBox:vv,Radio:pv,ResizeHandle:wv,SelectBox:gs,Slider:bv,Spacer:kv,SplitButton:dv,StackLayout:gv,TabPanel:ny,TextBox:ty,DropZone:gc,BrowseButton:yc}},iy=function(t){t.ui?n.each(wu(),function(n,i){t.ui[i]=n}):t.ui=wu()};n.each(wu(),function(n,t){h.add(t,n)});iy(window.tinymce?window.tinymce:{});ih.add("modern",function(n){return ps.setup(n),vc(n)})}();!function(){"use strict";var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(n,t,i){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";n.execCommand(r,!1,!1===i?null:{"list-style-type":i})},f=function(n){n.addCommand("ApplyUnorderedListStyle",function(i,r){t(n,"UL",r["list-style-type"])});n.addCommand("ApplyOrderedListStyle",function(i,r){t(n,"OL",r["list-style-type"])})},e=function(n){var t=n.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},o=function(n){var t=n.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]},s=function(n){return n&&/^(TH|TD)$/.test(n.nodeName)},h=function(n){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&(r=t,(i=n).$.contains(i.getBody(),r));var i,r}},c=function(n){var t=n.dom.getParent(n.selection.getNode(),"ol,ul");return n.dom.getStyle(t,"listStyleType")||""},l=function(t){return n.map(t,function(n){return{text:n.replace(/\-/g," ").replace(/\b\w/g,function(n){return n.toUpperCase()}),data:"default"===n?"":n}})},i=function(t,i){return function(r){var u=r.control;t.on("NodeChange",function(r){var f=function(n,t){for(var i=0;i<n.length;i++)if(t(n[i]))return i;return-1}(r.parents,s),o=-1!==f?r.parents.slice(0,f):r.parents,e=n.grep(o,h(t));u.active(0<e.length&&e[0].nodeName===i)})}},a=function(n,r,u,f,e,o){var s;n.addButton(r,{active:!1,type:"splitbutton",tooltip:u,menu:l(o),onPostRender:i(n,e),onshow:(s=n,function(n){var t=c(s);n.control.items().each(function(n){n.active(n.settings.data===t)})}),onselect:function(i){t(n,e,i.control.settings.data)},onclick:function(){n.execCommand(f)}})},r=function(n,t,r,u,f,e){var o,s,h,c,l;0<e.length?a(n,t,r,u,f,e):(s=t,h=r,c=u,l=f,(o=n).addButton(s,{active:!1,type:"button",tooltip:h,onPostRender:i(o,l),onclick:function(){o.execCommand(c)}}))},v=function(n){r(n,"numlist","Numbered list","InsertOrderedList","OL",e(n));r(n,"bullist","Bullet list","InsertUnorderedList","UL",o(n))};u.add("advlist",function(t){var i,r,u;r="lists";u=(i=t).settings.plugins?i.settings.plugins:"";-1!==n.inArray(u.split(/[ ,]/),r)&&(v(t),f(t))})}();!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(n,t){return n.fire("insertCustomChar",{chr:t})},n=function(n,t){var i=o(n,t).chr;n.execCommand("mceInsertContent",!1,i)},t=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(n){return n.settings.charmap},h=function(n){return n.settings.charmap_append},i=t.isArray,r=function(n){return i(n)?[].concat((r=n,t.grep(r,function(n){return i(n)&&2===n.length}))):"function"==typeof n?n():[];var r},u=function(n){return function(n,t){var u=s(n),i;return u&&(t=r(u)),i=h(n),i?[].concat(t).concat(r(i)):t}(n,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},c=function(t){return{getCharMap:function(){return u(t)},insertChar:function(i){n(t,i)}}},l=function(n){for(var i,f=Math.min(n.length,25),s=Math.ceil(n.length/f),e,t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<s;r++){for(t+="<tr>",i=0;i<f;i++)if(e=r*f+i,e<n.length){var u=n[e],o=parseInt(u[0],10),h=u?String.fromCharCode(o):"&nbsp;";t+='<td title="'+u[1]+'"><div tabindex="-1" title="'+u[1]+'" role="button" data-chr="'+o+'">'+h+"<\/div><\/td>"}else t+="<td />";t+="<\/tr>"}return t+"<\/tbody><\/table>"},f=function(n){for(;n;){if("TD"===n.nodeName)return n;n=n.parentNode}},a=function(t){var i,r={type:"container",html:l(u(t)),onclick:function(r){var o=r.target,u,s,e;/^(TD|DIV)$/.test(o.nodeName)&&(u=f(o).firstChild,u&&u.hasAttribute("data-chr")&&(s=u.getAttribute("data-chr"),e=parseInt(s,10),isNaN(e)||n(t,String.fromCharCode(e)),r.ctrlKey||i.close()))},onmouseover:function(n){var t=f(n.target);t&&t.firstChild?(i.find("#preview").text(t.firstChild.firstChild.data),i.find("#previewTitle").text(t.title)):(i.find("#preview").text(" "),i.find("#previewTitle").text(" "))}};i=t.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){i.close()}}]})},v=function(n){n.addCommand("mceShowCharmap",function(){a(n)})},y=function(n){n.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"});n.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};e.add("charmap",function(n){return v(n),y(n),c(n)})}();!function(){"use strict";var i=function(n){var t=n,r=function(){return t};return{get:r,set:function(n){t=n},clone:function(){return i(r())}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(n){return{isContextMenuVisible:function(){return n.get()}}},s=function(n){return n.settings.contextmenu_never_use_native},h=function(n){return n.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t=function(t){return n.DOM.select(t.settings.ui_container)[0]},r=function(n,t){return{x:n,y:t}},u=function(n,t,i){return r(n.x+t,n.y+i)},f=function(t,i){if(t&&"static"!==n.DOM.getStyle(t,"position",!0)){var r=n.DOM.getPos(t),f=r.x-t.scrollLeft,e=r.y-t.scrollTop;return u(i,-f,-e)}return u(i,0,0)},c=function(i,e){if(i.inline)return f(t(i),r((l=e).pageX,l.pageY));var s,h,o,c,l,a=(s=i.getContentAreaContainer(),h=r((c=e).clientX,c.clientY),o=n.DOM.getPos(s),u(h,o.x,o.y));return f(t(i),a)},l=tinymce.util.Tools.resolve("tinymce.ui.Factory"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),v=function(n,i,r,u){null===u.get()?u.set(function(n,i){var u,e,f=[],r;for(e=h(n),a.each(e.split(/[ ,]/),function(t){var i=n.menuItems[t];"|"===t&&(i={text:t});i&&(i.shortcut="",f.push(i))}),r=0;r<f.length;r++)"|"===f[r].text&&(0!==r&&r!==f.length-1||f.splice(r,1));return(u=l.create("menu",{items:f,context:"contextmenu",classes:"contextmenu"})).uiContainer=t(n),u.renderTo(t(n)),u.on("hide",function(n){n.control===this&&i.set(!1)}),n.on("remove",function(){u.remove();u=null}),u}(n,r)):u.get().show();u.get().moveTo(i.x,i.y);r.set(!0)},y=function(n,t,i){n.on("contextmenu",function(r){var u;u=n;(!r.ctrlKey||s(u))&&(r.preventDefault(),v(n,c(n,r),t,i))})};e.add("contextmenu",function(n){var r=i(null),t=i(!1);return y(n,t,r),o(t)})}();!function(){"use strict";function d(){return new(l.getOrDie("FileReader"))}function iu(){return new(l.getOrDie("XMLHttpRequest"))}function uu(n){var t=function(t,i,r,u){var f,e;(f=new iu).open("POST",n.url);f.withCredentials=n.credentials;f.upload.onprogress=function(n){u(n.loaded/n.total*100)};f.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+f.status)};f.onload=function(){var t,u,e;f.status<200||300<=f.status?r("HTTP Error: "+f.status):(t=JSON.parse(f.responseText))&&"string"==typeof t.location?i((u=n.basePath,e=t.location,u?u.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e)):r("Invalid JSON: "+f.responseText)};(e=new FormData).append("file",t.blob(),t.filename());f.send(e)};return n=e.extend({credentials:!1,handler:t},n),{upload:function(i){return n.url||n.handler!==t?(r=i,u=n.handler,new a(function(n,t){try{u(r,n,t,ru)}catch(i){t(i.message)}})):a.reject("Upload url missing from the settings.");var r,u}}}function p(n){function t(t){var i,r,u=dt(n),f;(t&&(r={type:"listbox",label:"Image list",name:"image-list",values:tt(t,function(t){t.value=n.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:u.src&&n.convertURL(u.src,"src"),onselect:function(n){var t=i.find("#alt");(!t.value()||n.lastControl&&t.value()===n.lastControl.text())&&t.value(n.control.text());i.find("#src").value(n.control.value()).fire("change")},onPostRender:function(){r=this}}),c(n)||b(n)||k(n))?(f=[kr(n,r)],c(n)&&f.push(vr(n)),(b(n)||k(n))&&f.push(fu(n)),i=n.windowManager.open({title:"Insert/edit image",data:u,bodyType:"tabpanel",body:f,onSubmit:si(hi,n)})):i=n.windowManager.open({title:"Insert/edit image",data:u,body:dr(n,r),onSubmit:si(hi,n)});ri(i)}return{open:function(){ur(n,t)}}}var li=tinymce.util.Tools.resolve("tinymce.PluginManager"),h=function(n){return!1!==n.settings.image_dimensions},c=function(n){return!0===n.settings.image_advtab},ai=function(n){return n.getParam("image_prepend_url","")},w=function(n){return n.getParam("image_class_list")},vi=function(n){return!1!==n.settings.image_description},yi=function(n){return!0===n.settings.image_title},pi=function(n){return!0===n.settings.image_caption},wi=function(n){return n.getParam("image_list",!1)},b=function(n){return n.getParam("images_upload_url",!1)},k=function(n){return n.getParam("images_upload_handler",!1)},bi=function(n){return n.getParam("images_upload_url")},ki=function(n){return n.getParam("images_upload_handler")},di=function(n){return n.getParam("images_upload_base_path")},gi=function(n){return n.getParam("images_upload_credentials")},nr="undefined"!=typeof window?window:Function("return this;")(),tr=function(n,t){return function(n,t){for(var i=t!==undefined&&null!==t?t:nr,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i}(n.split("."),t)},l={getOrDie:function(n,t){var i=tr(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i}},g,a=tinymce.util.Tools.resolve("tinymce.util.Promise"),e=tinymce.util.Tools.resolve("tinymce.util.Tools"),ir=tinymce.util.Tools.resolve("tinymce.util.XHR"),nt=function(n,t){return Math.max(parseInt(n,10),parseInt(t,10))},rr=function(n,t){function u(n,r){i.parentNode&&i.parentNode.removeChild(i);t({width:n,height:r})}var i=document.createElement("img"),r;i.onload=function(){u(nt(i.width,i.clientWidth),nt(i.height,i.clientHeight))};i.onerror=function(){u(0,0)};r=i.style;r.visibility="hidden";r.position="fixed";r.bottom=r.left="0px";r.width=r.height="auto";document.body.appendChild(i);i.src=n},tt=function(n,t,i){return function r(n,i){return i=i||[],e.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t(u));i.push(u)}),i}(n,i||[])},i=function(n){return n&&(n=n.replace(/px$/,"")),n},o=function(n){return 0<n.length&&/^[0-9]+$/.test(n)&&(n+="px"),n},it=function(n){if(n.margin){var t=n.margin.split(" ");switch(t.length){case 1:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[0];n["margin-bottom"]=n["margin-bottom"]||t[0];n["margin-left"]=n["margin-left"]||t[0];break;case 2:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[0];n["margin-left"]=n["margin-left"]||t[1];break;case 3:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[2];n["margin-left"]=n["margin-left"]||t[1];break;case 4:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[2];n["margin-left"]=n["margin-left"]||t[3]}delete n.margin}return n},ur=function(n,t){var i=wi(n);"string"==typeof i?ir.send({url:i,success:function(n){t(JSON.parse(n))}}):"function"==typeof i?i(t):t(i)},fr=function(n,t,i){function r(){i.onload=i.onerror=null;n.selection&&(n.selection.select(i),n.nodeChanged())}i.onload=function(){t.width||t.height||!h(n)||n.dom.setAttribs(i,{width:i.clientWidth,height:i.clientHeight});r()};i.onerror=r},er=function(n){return new a(function(t,i){var r=new d;r.onload=function(){t(r.result)};r.onerror=function(){i(d.error.message)};r.readAsDataURL(n)})},or=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),sr=Object.prototype.hasOwnProperty,v=(g=function(n,t){return t},function(){for(var r,u,f,i,n=new Array(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Can't merge zero objects");for(r={},u=0;u<n.length;u++){f=n[u];for(i in f)sr.call(f,i)&&(r[i]=g(r[i],f[i]))}return r}),r=or.DOM,rt=function(n){return n.style.marginLeft&&n.style.marginRight&&n.style.marginLeft===n.style.marginRight?i(n.style.marginLeft):""},ut=function(n){return n.style.marginTop&&n.style.marginBottom&&n.style.marginTop===n.style.marginBottom?i(n.style.marginTop):""},ft=function(n){return n.style.borderWidth?i(n.style.borderWidth):""},u=function(n,t){return n.hasAttribute(t)?n.getAttribute(t):""},et=function(n,t){return n.style[t]?n.style[t]:""},ot=function(n){return null!==n.parentNode&&"FIGURE"===n.parentNode.nodeName},t=function(n,t,i){n.setAttribute(t,i)},hr=function(n){var i,t,f,u;ot(n)?(u=(f=n).parentNode,r.insertAfter(f,u),r.remove(u)):(i=n,t=r.create("figure",{"class":"image"}),r.insertAfter(t,i),t.appendChild(i),t.appendChild(r.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false")},st=function(n,t){var r=n.getAttribute("style"),i=t(null!==r?r:"");0<i.length?(n.setAttribute("style",i),n.setAttribute("data-mce-style",i)):n.removeAttribute("style")},ht=function(n,i){return function(n,r,u){n.style[r]?(n.style[r]=o(u),st(n,i)):t(n,r,u)}},ct=function(n,t){return n.style[t]?i(n.style[t]):u(n,t)},lt=function(n,t){var i=o(t);n.style.marginLeft=i;n.style.marginRight=i},at=function(n,t){var i=o(t);n.style.marginTop=i;n.style.marginBottom=i},vt=function(n,t){var i=o(t);n.style.borderWidth=i},yt=function(n,t){n.style.borderStyle=t},pt=function(n){return"FIGURE"===n.nodeName},cr=function(n,i){var r=document.createElement("img");return t(r,"style",i.style),(rt(r)||""!==i.hspace)&&lt(r,i.hspace),(ut(r)||""!==i.vspace)&&at(r,i.vspace),(ft(r)||""!==i.border)&&vt(r,i.border),(et(r,"borderStyle")||""!==i.borderStyle)&&yt(r,i.borderStyle),n(r.getAttribute("style"))},wt=function(n,t){return{src:u(t,"src"),alt:u(t,"alt"),title:u(t,"title"),width:ct(t,"width"),height:ct(t,"height"),"class":u(t,"class"),style:n(u(t,"style")),caption:ot(t),hspace:rt(t),vspace:ut(t),border:ft(t),borderStyle:et(t,"borderStyle")}},n=function(n,t,i,r,u){i[r]!==t[r]&&u(n,r,i[r])},f=function(n,t){return function(i,r,u){n(i,u);st(i,t)}},bt=function(i,r,u){var e=wt(i,u);n(u,e,r,"caption",function(n){return hr(n)});n(u,e,r,"src",t);n(u,e,r,"alt",t);n(u,e,r,"title",t);n(u,e,r,"width",ht(0,i));n(u,e,r,"height",ht(0,i));n(u,e,r,"class",t);n(u,e,r,"style",f(function(n,i){return t(n,"style",i)},i));n(u,e,r,"hspace",f(lt,i));n(u,e,r,"vspace",f(at,i));n(u,e,r,"border",f(vt,i));n(u,e,r,"borderStyle",f(yt,i))},s=function(n,t){var i=n.dom.styles.parse(t),r=it(i),u=n.dom.styles.parse(n.dom.styles.serialize(r));return n.dom.styles.serialize(u)},y=function(n){var t=n.selection.getNode(),i=n.dom.getParent(t,"figure.image");return i?n.dom.select("img",i)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},kt=function(n,t){var i=n.dom,r=i.getParent(t.parentNode,function(t){return n.schema.getTextBlockElements()[t.nodeName]});return r?i.split(r,t):t},dt=function(n){var t=y(n);return t?wt(function(t){return s(n,t)},t):{src:"",alt:"",title:"",width:"",height:"","class":"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},lr=function(n,i){var f=function(n,i){var f=document.createElement("img"),u;return(bt(n,v(i,{caption:!1}),f),t(f,"alt",i.alt),i.caption)?(u=r.create("figure",{"class":"image"}),u.appendChild(f),u.appendChild(r.create("figcaption",{contentEditable:!0},"Caption")),u.contentEditable="false",u):f}(function(t){return s(n,t)},i),u,e;n.dom.setAttrib(f,"data-mce-id","__mcenew");n.focus();n.selection.setContent(f.outerHTML);u=n.dom.select('*[data-mce-id="__mcenew"]')[0];(n.dom.setAttrib(u,"data-mce-id",null),pt(u))?(e=kt(n,u),n.selection.select(e)):n.selection.select(u)},ar=function(n,t){var i=y(n);i?t.src?function(n,t){var r,i=y(n),u;(bt(function(t){return s(n,t)},t,i),r=i,n.dom.setAttrib(r,"src",r.getAttribute("src")),pt(i.parentNode))?(u=i.parentNode,kt(n,u),n.selection.select(i.parentNode)):(n.selection.select(i),fr(n,t,i))}(n,t):function(n,t){if(t){var i=n.dom.is(t.parentNode,"figure.image")?t.parentNode:t;n.dom.remove(i);n.focus();n.nodeChanged();n.dom.isEmpty(n.getBody())&&(n.setContent(""),n.selection.setCursorLocation())}}(n,i):t.src&&lr(n,t)},gt=function(n,t){t.find("#style").each(function(i){var r=cr(function(t){return s(n,t)},v({src:"",alt:"",title:"",width:"",height:"","class":"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""},t.toJSON()));i.value(r)})},vr=function(n){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:(t=n,function(n){var f=t.dom,u=n.control.rootControl,e,r;c(t)&&(e=u.toJSON(),r=f.parseStyle(e.style),u.find("#vspace").value(""),u.find("#hspace").value(""),((r=it(r))["margin-top"]&&r["margin-bottom"]||r["margin-right"]&&r["margin-left"])&&(r["margin-top"]===r["margin-bottom"]?u.find("#vspace").value(i(r["margin-top"])):u.find("#vspace").value(""),r["margin-right"]===r["margin-left"]?u.find("#hspace").value(i(r["margin-right"])):u.find("#hspace").value("")),r["border-width"]?u.find("#border").value(i(r["border-width"])):u.find("#border").value(""),r["border-style"]?u.find("#borderStyle").value(r["border-style"]):u.find("#borderStyle").value(""),u.find("#style").value(f.serializeStyle(f.parseStyle(f.serializeStyle(r)))))})},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){gt(n,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){gt(n,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]};var t},ni=function(n,t){n.state.set("oldVal",n.value());t.state.set("oldVal",t.value())},ti=function(n,t){var i=n.find("#width")[0],r=n.find("#height")[0],u=n.find("#constrain")[0];i&&r&&u&&t(i,r,u.checked())},yr=function(n,t,i){var f=n.state.get("oldVal"),e=t.state.get("oldVal"),r=n.value(),u=t.value();i&&f&&e&&r&&u&&(r!==f?(u=Math.round(r/f*u),isNaN(u)||t.value(u)):(r=Math.round(u/e*r),isNaN(r)||n.value(r)));ni(n,t)},ii=function(n){ti(n,yr)},pr=function(){var n=function(n){ii(n.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:n,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:n,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},ri=function(n){ti(n,ni)},wr=ii,br=function(n){n.meta=n.control.rootControl.toJSON()},ui=function(n,t){var i=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){var c,i,r,o,l,s,u,f,a;i=n;s=(c=t).meta||{};u=c.control;f=u.rootControl;(a=f.find("#image-list")[0])&&a.value(i.convertURL(u.value(),"src"));e.each(s,function(n,t){f.find("#"+t).value(n)});s.width||s.height||(r=i.convertURL(u.value(),"src"),o=ai(i),l=new RegExp("^(?:[a-z]+:)?//","i"),o&&!l.test(r)&&r.substring(0,o.length)!==o&&(r=o+r),u.value(r),rr(i.documentBaseURI.toAbsolute(u.value()),function(n){n.width&&n.height&&h(i)&&(f.find("#width").value(n.width),f.find("#height").value(n.height),ri(f))}))},onbeforecall:br},t];return vi(n)&&i.push({name:"alt",type:"textbox",label:"Image description"}),yi(n)&&i.push({name:"title",type:"textbox",label:"Image Title"}),h(n)&&i.push(pr()),w(n)&&i.push({name:"class",type:"listbox",label:"Class",values:tt(w(n),function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({inline:"img",classes:[t.value]})})})}),pi(n)&&i.push({name:"caption",type:"checkbox",label:"Caption"}),i},kr=function(n,t){return{title:"General",type:"form",items:ui(n,t)}},dr=ui,fi=function(){return l.getOrDie("URL")},gr=function(n){return fi().createObjectURL(n)},nu=function(n){fi().revokeObjectURL(n)},tu=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ru=function(){},ei=function(n){return function(t){var o=tu.get("Throbber"),r=t.control.rootControl,u=new o(r.getEl()),i=t.control.value(),f=gr(i),s=uu({url:bi(n),basePath:di(n),credentials:gi(n),handler:ki(n)}),e=function(){u.hide();nu(f)};return u.show(),er(i).then(function(t){var u=n.editorUpload.blobCache.create({blob:i,blobUri:f,name:i.name?i.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return s.upload(u).then(function(n){var t=r.find("#src");return t.value(n),r.find("tabpanel")[0].activateTab(0),t.fire("change"),e(),n})})["catch"](function(t){n.windowManager.alert(t);e()})}},oi=".jpg,.jpeg,.png,.gif",fu=function(n){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:oi,onchange:ei(n)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:oi,height:100,onchange:ei(n)}]}},si=function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},hi=function(n,t){var i=t.control.getRoot();wr(i);n.undoManager.transact(function(){var t=v(dt(n),i.toJSON());ar(n,t)});n.editorUpload.uploadImagesAuto()},eu=function(n){n.addCommand("mceImage",p(n).open)},ci=function(n){return function(t){for(var i,r,u=t.length,f=function(t){t.attr("contenteditable",n?"true":null)};u--;)i=t[u],(r=i.attr("class"))&&/\bimage\b/.test(r)&&(i.attr("contenteditable",n?"false":null),e.each(i.getAll("figcaption"),f))}},ou=function(n){n.on("preInit",function(){n.parser.addNodeFilter("figure",ci(!0));n.serializer.addNodeFilter("figure",ci(!1))})},su=function(n){n.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:p(n).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"});n.addMenuItem("image",{icon:"image",text:"Image",onclick:p(n).open,context:"insert",prependToContext:!0})};li.add("image",function(n){ou(n);su(n);eu(n)})}();!function(){"use strict";var rt=tinymce.util.Tools.resolve("tinymce.PluginManager"),ut=tinymce.util.Tools.resolve("tinymce.util.VK"),e=function(n){return n.target_list},o=function(n){return n.rel_list},s=function(n){return n.link_class_list},ft=function(n){return"boolean"==typeof n.link_assume_external_targets&&n.link_assume_external_targets},et=function(n){return"boolean"==typeof n.link_context_toolbar&&n.link_context_toolbar},ot=function(n){return n.link_list},st=function(n){return"string"==typeof n.default_link_target},ht=function(n){return n.default_link_target},h=e,ct=function(n,t){n.settings.target_list=t},lt=function(n){return!1!==e(n)},at=o,c=function(n){return o(n)!==undefined},vt=s,yt=function(n){return s(n)!==undefined},pt=function(n){return!1!==n.link_title},l=function(n){return"boolean"==typeof n.allow_unsafe_link_target&&n.allow_unsafe_link_target},wt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=tinymce.util.Tools.resolve("tinymce.Env"),bt=function(n){var t,f,i,r,u,e;!a.ie||10<a.ie?(t=document.createElement("a"),t.target="_blank",t.href=n,t.rel="noreferrer noopener",f=document.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),u=t,e=f,document.body.appendChild(u),u.dispatchEvent(e),document.body.removeChild(u)):(i=window.open("","_blank"),i&&(i.opener=null,r=i.document,r.open(),r.write('<meta http-equiv="refresh" content="0; url='+wt.DOM.encode(n)+'">'),r.close()))},n=tinymce.util.Tools.resolve("tinymce.util.Tools"),v=function(t,i){var u,e,f=["noopener"],r=t?t.split(/\s+/):[],o=function(t){return t.filter(function(t){return-1===n.inArray(f,t)})};return(r=i?(u=o(u=r)).length?u.concat(f):f:o(r)).length?(e=r,n.trim(e.sort().join(" "))):null},y=function(n,t){return t=t||n.selection.getNode(),r(t)?n.dom.select("a[href]",t)[0]:n.dom.getParent(t,"a[href]")},p=function(n){return n&&"A"===n.nodeName&&n.href},r=function(n){return n&&"FIGURE"===n.nodeName&&/\bimage\b/i.test(n.className)},kt=function(n,t){var i,r;(r=n.dom.select("img",t)[0])&&(i=n.dom.getParents(r,"a[href]",t)[0])&&(i.parentNode.insertBefore(r,i),n.dom.remove(i))},dt=function(n,t,i){var u,r;(r=n.dom.select("img",t)[0])&&(u=n.dom.create("a",i),r.parentNode.insertBefore(u,r),u.appendChild(r))},gt=function(n,t){return function(i){n.undoManager.transact(function(){var e=n.selection.getNode(),f=y(n,e),u={href:i.href,target:i.target?i.target:null,rel:i.rel?i.rel:null,"class":i["class"]?i["class"]:null,title:i.title?i.title:null};c(n.settings)||!1!==l(n.settings)||(u.rel=v(u.rel,"_blank"===u.target));i.href===t.href&&(t.attach(),t={});f?(n.focus(),i.hasOwnProperty("text")&&("innerText"in f?f.innerText=i.text:f.textContent=i.text),n.dom.setAttribs(f,u),n.selection.select(f),n.undoManager.add()):r(e)?dt(n,e,u):i.hasOwnProperty("text")?n.insertContent(n.dom.createHTML("a",u,n.dom.encode(i.text))):n.execCommand("mceInsertLink",!1,u)})}},u=function(n){return function(){n.undoManager.transact(function(){var t=n.selection.getNode();r(t)?kt(n,t):n.execCommand("unlink")})}},ni=p,w=function(t){return 0<n.grep(t,p).length},ti=function(n){return!(/</.test(n)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(n)||-1===n.indexOf("href=")))},b=y,ii=function(n,t){var i=t?t.innerText||t.textContent:n.getContent({format:"text"});return i.replace(/\uFEFF/g,"")},ri=v,ui=tinymce.util.Tools.resolve("tinymce.util.Delay"),fi=tinymce.util.Tools.resolve("tinymce.util.XHR"),k={},t=function(t,i,r){var u=function(t,r){return r=r||[],n.each(t,function(n){var t={text:n.text||n.title};n.menu?t.menu=u(n.menu):(t.value=n.value,i&&i(t));r.push(t)}),r};return u(t,r||[])},d=function(n,t,i){var r=n.selection.getRng();ui.setEditorTimeout(n,function(){n.windowManager.confirm(t,function(t){n.selection.setRng(r);i(t)})})},ei=function(i,r){var e,y,s,p,g,a,nt,tt,it,rt,o,f={},et=i.selection,v=i.dom,ut=function(n){var t=s.find("#text");(!t.value()||n.lastControl&&t.value()===n.lastControl.text())&&t.value(n.control.text());s.find("#href").value(n.control.value())},w=function(){y||!p||f.text||this.parent().parent().find("#text")[0].value(this.value())};p=ti(et.getContent());e=b(i);f.text=y=ii(i.selection,e);f.href=e?v.getAttrib(e,"href"):"";e?f.target=v.getAttrib(e,"target"):st(i.settings)&&(f.target=ht(i.settings));(o=v.getAttrib(e,"rel"))&&(f.rel=o);(o=v.getAttrib(e,"class"))&&(f["class"]=o);(o=v.getAttrib(e,"title"))&&(f.title=o);p&&(g={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){f.text=this.value()}});r&&(a={type:"listbox",label:"Link list",values:t(r,function(n){n.value=i.convertURL(n.value||n.url,"href")},[{text:"None",value:""}]),onselect:ut,value:i.convertURL(f.href,"href"),onPostRender:function(){a=this}});lt(i.settings)&&(h(i.settings)===undefined&&ct(i,[{text:"None",value:""},{text:"New window",value:"_blank"}]),tt={name:"target",type:"listbox",label:"Target",values:t(h(i.settings))});c(i.settings)&&(nt={name:"rel",type:"listbox",label:"Rel",values:t(at(i.settings),function(n){!1===l(i.settings)&&(n.value=ri(n.value,"_blank"===f.target))})});yt(i.settings)&&(it={name:"class",type:"listbox",label:"Class",values:t(vt(i.settings),function(n){n.value&&(n.textStyle=function(){return i.formatter.getCssText({inline:"a",classes:[n.value]})})})});pt(i.settings)&&(rt={name:"title",type:"textbox",label:"Title",value:f.title});s=i.windowManager.open({title:"Insert link",data:f,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(t){var r=t.meta||{};a&&a.value(i.convertURL(this.value(),"href"));n.each(t.meta,function(n,t){var i=s.find("#"+t);"text"===t?0===y.length&&(i.value(n),f.text=n):i.value(n)});r.attach&&(k={href:this.value(),attach:r.attach});r.text||w.call(this)},onkeyup:w,onpaste:w,onbeforecall:function(n){n.meta=s.toJSON()}},g,rt,function(t){var r=[];if(n.each(i.dom.select("a:not([href])"),function(n){var i=n.name||n.id;i&&r.push({text:i,value:"#"+i,selected:-1!==t.indexOf("#"+i)})}),r.length)return r.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:r,onselect:ut}}(f.href),a,nt,tt,it],onSubmit:function(t){var s=ft(i.settings),o=gt(i,k),h=u(i),r=n.extend({},f,t.data),e=r.href;e?(p&&r.text!==y||delete r.text,0<e.indexOf("@")&&-1===e.indexOf("//")&&-1===e.indexOf("mailto:")?d(i,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(n){n&&(r.href="mailto:"+e);o(r)}):!0===s&&!/^\w+:/i.test(e)||!1===s&&/^\s*www[\.|\d\.]/i.test(e)?d(i,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(n){n&&(r.href="http://"+e);o(r)}):o(r)):h()}})},oi=function(n){var i,r,t;r=ei;"string"==typeof(t=ot((i=n).settings))?fi.send({url:t,success:function(n){r(i,JSON.parse(n))}}):"function"==typeof t?t(function(n){r(i,n)}):r(i,t)},g=function(n,t){return n.dom.getParent(t,"a[href]")},nt=function(n){return g(n,n.selection.getStart())},f=function(n,t){var i,r,u;t&&(i=(u=t).getAttribute("data-mce-href")||u.getAttribute("href"),/^#/.test(i)?(r=n.$(i),r.length&&n.selection.scrollIntoView(r[0],!0)):bt(t.href))},i=function(n){return function(){oi(n)}},tt=function(n){return function(){f(n,nt(n))}},si=function(n){return function(t){var r,i,u,f;return!!(et(n.settings)&&(!(f=n.plugins.contextmenu)||!f.isContextMenuVisible())&&ni(t)&&3===(u=(i=(r=n.selection).getRng()).startContainer).nodeType&&r.isCollapsed()&&0<i.startOffset&&i.startOffset<u.data.length)}},hi=function(n){n.on("click",function(t){var i=g(n,t.target);i&&ut.metaKeyPressed(t)&&(t.preventDefault(),f(n,i))});n.on("keydown",function(t){var i,r=nt(n);r&&13===t.keyCode&&!0===(i=t).altKey&&!1===i.shiftKey&&!1===i.ctrlKey&&!1===i.metaKey&&(t.preventDefault(),f(n,r))})},it=function(n){return function(){var t=this;n.on("nodechange",function(i){t.active(!n.readonly&&!!b(n,i.element))})}},ci=function(n){return function(){var t=this,i=function(n){w(n.parents)?t.show():t.hide()};w(n.dom.getParents(n.selection.getStart()))||t.hide();n.on("nodechange",i);t.on("remove",function(){n.off("nodechange",i)})}},li=function(n){n.addCommand("mceLink",i(n))},ai=function(n){n.addShortcut("Meta+K","",i(n))},vi=function(n){n.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:i(n),onpostrender:it(n)});n.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:u(n),onpostrender:it(n)});n.addContextToolbar&&n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:tt(n)})},yi=function(n){n.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:tt(n),onPostRender:ci(n),prependToContext:!0});n.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:i(n),stateSelector:"a[href]",context:"insert",prependToContext:!0});n.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:u(n),stateSelector:"a[href]"})},pi=function(n){n.addContextToolbar&&n.addContextToolbar(si(n),"openlink | link unlink")};rt.add("link",function(n){vi(n);yi(n);pi(n);hi(n);li(n);ai(n)})}();!function(){"use strict";var si=tinymce.util.Tools.resolve("tinymce.PluginManager"),st=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),hi=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),p=tinymce.util.Tools.resolve("tinymce.util.VK"),ci=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),b=function(n){return n&&"BR"===n.nodeName},li=function(n){return n&&3===n.nodeType},t=function(n){return n&&/^(OL|UL|DL)$/.test(n.nodeName)},ht=function(n){return n&&/^(LI|DT|DD)$/.test(n.nodeName)},ai=function(n){return n&&/^(TH|TD)$/.test(n.nodeName)},a=b,k=function(n){return n.parentNode.firstChild===n},ct=function(n){return n.parentNode.lastChild===n},d=function(n,t){return t&&!!n.schema.getTextBlockElements()[t.nodeName]},lt=function(n,t){return n&&n.nodeName in t},vi=function(n,t){return!!b(t)&&!(!n.isBlock(t.nextSibling)||b(t.previousSibling))},u=function(n,t,i){var r=n.isEmpty(t);return!(i&&0<n.select("span[data-mce-type=bookmark]",t).length)&&r},at=function(n,t){return n.isChildOf(t,n.getRoot())},vt=function(n,t){var i=st.getNode(n,t);return ht(n)&&li(i)?{container:i,offset:t>=n.childNodes.length?i.data.length:0}:{container:n,offset:t}},g=function(n){var t=n.cloneRange(),r=vt(n.startContainer,n.startOffset),i;return t.setStart(r.container,r.offset),i=vt(n.endContainer,n.endOffset),t.setEnd(i.container,i.offset),t},c=h.DOM,f=function(n){var t={},i=function(i){var f,r,u;r=n[i?"startContainer":"endContainer"];u=n[i?"startOffset":"endOffset"];1===r.nodeType&&(f=c.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(u=Math.min(u,r.childNodes.length-1),i?r.insertBefore(f,r.childNodes[u]):c.insertAfter(f,r.childNodes[u])):r.appendChild(f),r=f,u=0);t[i?"startContainer":"endContainer"]=r;t[i?"startOffset":"endOffset"]=u};return i(!0),n.collapsed||i(),t},e=function(n){function i(t){var i,r,u;i=u=n[t?"startContainer":"endContainer"];r=n[t?"startOffset":"endOffset"];i&&(1===i.nodeType&&(r=function(n){for(var t=n.parentNode.firstChild,i=0;t;){if(t===n)return i;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||i++;t=t.nextSibling}return-1}(i),i=i.parentNode,c.remove(u),!i.hasChildNodes()&&c.isBlock(i)&&i.appendChild(c.create("br"))),n[t?"startContainer":"endContainer"]=i,n[t?"startOffset":"endOffset"]=r)}i(!0);i();var t=c.createRng();return t.setStart(n.startContainer,n.startOffset),n.endContainer&&t.setEnd(n.endContainer,n.endOffset),g(t)},yt=h.DOM,yi=function(n,i){var f,r=i.parentNode;"LI"===r.nodeName&&r.firstChild===i&&((f=r.previousSibling)&&"LI"===f.nodeName?(f.appendChild(i),u(n,r)&&yt.remove(r)):yt.setStyle(r,"listStyleType","none"));t(r)&&(f=r.previousSibling)&&"LI"===f.nodeName&&f.appendChild(i)},nt=function(t,i){n.each(n.grep(t.select("ol,ul",i)),function(n){yi(t,n)})},pi=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),pt=function(n){var t=n.selection.getStart(!0);return n.dom.getParent(t,"OL,UL,DL",tt(n,t))},tt=function(n,t){var i=n.dom.getParents(t,"TD,TH");return 0<i.length?i[0]:n.getBody()},i={getParentList:pt,getSelectedSubLists:function(i){var f,e,r,u=pt(i),o=i.selection.getSelectedBlocks();return r=o,(e=u)&&1===r.length&&r[0]===e?(f=u,n.grep(f.querySelectorAll("ol,ul,dl"),function(n){return t(n)})):n.grep(o,function(n){return t(n)&&u!==n})},getSelectedListItems:function(t){var i,r,u,f=t.selection.getSelectedBlocks();return n.grep((i=t,r=f,u=n.map(r,function(n){var t=i.dom.getParent(n,"li,dd,dt",tt(i,n));return t||n}),pi.unique(u)),function(n){return ht(n)})},getClosestListRootElm:tt},wt=tinymce.util.Tools.resolve("tinymce.Env"),l=h.DOM,s=function(n,t,i){var u,r,e,f=l.createFragment(),o=n.schema.getBlockElements(),s;if(n.settings.forced_root_block&&(i=i||n.settings.forced_root_block),i&&((r=l.create(i)).tagName===n.settings.forced_root_block&&l.setAttribs(r,n.settings.forced_root_block_attrs),lt(t.firstChild,o)||f.appendChild(r)),t)for(;u=t.firstChild;)s=u.nodeName,e||"SPAN"===s&&"bookmark"===u.getAttribute("data-mce-type")||(e=!0),lt(u,o)?(f.appendChild(u),r=null):i?(r||(r=l.create(i),f.appendChild(r)),r.appendChild(u)):f.appendChild(u);return n.settings.forced_root_block?e||wt.ie&&!(10<wt.ie)||r.appendChild(l.create("br",{"data-mce-bogus":"1"})):f.appendChild(l.create("br")),f},o=h.DOM,bt=function(t,i,r,f){var h,c,a,e,l;for(a=o.select('span[data-mce-type="bookmark"]',i),f=f||s(t,r),(h=o.createRng()).setStartAfter(r),h.setEndAfter(i),e=(c=h.extractContents()).firstChild;e;e=e.firstChild)if("LI"===e.nodeName&&t.dom.isEmpty(e)){o.remove(e);break}t.dom.isEmpty(c)||o.insertAfter(c,i);o.insertAfter(f,i);u(t.dom,r.parentNode)&&(l=r.parentNode,n.each(a,function(n){l.parentNode.insertBefore(n,r.parentNode)}),o.remove(l));o.remove(r);u(t.dom,i)&&o.remove(i)},r=h.DOM,it=function(n,t){u(n,t)&&r.remove(t)},kt=function(n,i){var u,e,f=i.parentNode;return f?(u=f.parentNode,f===n.getBody()||("DD"===i.nodeName?r.rename(i,"DT"):k(i)&&ct(i)?"LI"===u.nodeName?(r.insertAfter(i,u),it(n.dom,u),r.remove(f)):t(u)?r.remove(f,!0):(u.insertBefore(s(n,i),f),r.remove(f)):k(i)?"LI"===u.nodeName?(r.insertAfter(i,u),i.appendChild(f),it(n.dom,u)):t(u)?u.insertBefore(i,f):(u.insertBefore(s(n,i),f),r.remove(i)):ct(i)?"LI"===u.nodeName?r.insertAfter(i,u):t(u)?r.insertAfter(i,f):(r.insertAfter(s(n,i),f),r.remove(i)):("LI"===u.nodeName?(f=u,e=s(n,i,"LI")):e=t(u)?s(n,i,"LI"):s(n,i),bt(n,f,i,e),nt(n.dom,f.parentNode)))):it(n.dom,i),!0},wi=kt,dt=function(n){var r=i.getSelectedListItems(n),u;if(r.length){for(var s=f(n.selection.getRng()),t=void 0,o=void 0,h=i.getClosestListRootElm(n,n.selection.getStart(!0)),t=r.length;t--;)for(u=r[t].parentNode;u&&u!==h;){for(o=r.length;o--;)if(r[o]===u){r.splice(t,1);break}u=u.parentNode}for(t=0;t<r.length&&(kt(n,r[t])||0!==t);t++);return n.selection.setRng(e(s)),n.nodeChanged(),!0}},gt=function(t,i){n.each(i,function(n,i){t.setAttribute(i,n)})},w=function(t,i,r){var u,f,e,o,s,h,c;u=t;f=i;o=(e=r)["list-style-type"]?e["list-style-type"]:null;u.setStyle(f,"list-style-type",o);s=t;gt(h=i,(c=r)["list-attributes"]);n.each(s.select("li",h),function(n){gt(n,c["list-item-attributes"])})},ni=function(n,t,i,r){var u,f;for(u=t[i?"startContainer":"endContainer"],f=t[i?"startOffset":"endOffset"],1===u.nodeType&&(u=u.childNodes[Math.min(f,u.childNodes.length-1)]||u),!i&&a(u.nextSibling)&&(u=u.nextSibling);u.parentNode!==r;){if(d(n,u)||/^(TD|TH)$/.test(u.parentNode.nodeName))return u;u=u.parentNode}return u},bi=function(r,u,o){void 0===o&&(o={});var c,l=r.selection.getRng(!0),h="LI",v=i.getClosestListRootElm(r,r.selection.getStart(!0)),s=r.dom;"false"!==s.getContentEditable(r.selection.getNode())&&("DL"===(u=u.toUpperCase())&&(h="DT"),c=f(l),n.each(function(t,i,r){for(var u,e=[],o=t.dom,h=ni(t,i,!0,r),c=ni(t,i,!1,r),s=[],f=h;f&&(s.push(f),f!==c);f=f.nextSibling);return n.each(s,function(n){if(d(t,n))return e.push(n),void(u=null);if(o.isBlock(n)||a(n))return a(n)&&o.remove(n),void(u=null);var i=n.nextSibling;ci.isBookmarkNode(n)&&(d(t,i)||!i&&n.parentNode===r)?u=null:(u||(u=o.create("p"),n.parentNode.insertBefore(u,n),e.push(u)),u.appendChild(n))}),e}(r,l,v),function(i){var f,e,a,l,v,c,y,p,b;(e=i.previousSibling)&&t(e)&&e.nodeName===u&&(a=e,l=o,v=s.getStyle(a,"list-style-type"),c=l?l["list-style-type"]:"",v===(c=null===c?"":c))?(f=e,i=s.rename(i,h),e.appendChild(i)):(f=s.create(u),i.parentNode.insertBefore(f,i),f.appendChild(i),i=s.rename(i,h));y=s;p=i;b=["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"];n.each(b,function(n){var t;return y.setStyle(p,((t={})[n]="",t))});w(s,f,o);ut(r.dom,f)}),r.selection.setRng(e(c)))},rt=function(r){var s=f(r.selection.getRng(!0)),h=i.getClosestListRootElm(r,r.selection.getStart(!0)),o=i.getSelectedListItems(r),c=n.grep(o,function(n){return r.dom.isEmpty(n)});o=n.grep(o,function(n){return!r.dom.isEmpty(n)});n.each(c,function(n){u(r.dom,n)&&wi(r,n)});n.each(o,function(n){var i,u;if(n.parentNode!==r.getBody()){for(i=n;i&&i!==h;i=i.parentNode)t(i)&&(u=i);bt(r,u,n);nt(r.dom,u.parentNode)}});r.selection.setRng(e(s))},ti=function(n,i,r){return f=r,(u=i)&&f&&t(u)&&u.nodeName===f.nodeName&&(s=i,h=r,(o=n).getStyle(s,"list-style-type",!0)===o.getStyle(h,"list-style-type",!0))&&(e=r,i.className===e.className);var e,o,s,h,u,f},ut=function(n,t){var i,r;if(i=t.nextSibling,ti(n,t,i)){for(;r=i.firstChild;)t.appendChild(r);n.remove(i)}if(i=t.previousSibling,ti(n,t,i)){for(;r=i.lastChild;)t.insertBefore(r,t.firstChild);n.remove(i)}},ki=function(t,i,r,u,o){if(i.nodeName!==u||ii(o)){var s=f(t.selection.getRng(!0));n.each([i].concat(r),function(n){!function(n,t,i,r){if(t.nodeName!==i){var u=n.rename(t,i);w(n,u,r)}else w(n,t,r)}(t.dom,n,u,o)});t.selection.setRng(e(s))}else rt(t)},ii=function(n){return"list-style-type"in n},v={toggleList:function(n,t,r){var u=i.getParentList(n),o=i.getSelectedSubLists(n);r=r||{};u&&0<o.length?ki(n,u,o,t,r):function(n,t,i,r){if(t!==n.getBody())if(t)if(t.nodeName!==i||ii(r)){var u=f(n.selection.getRng(!0));w(n.dom,t,r);ut(n.dom,n.dom.rename(t,i));n.selection.setRng(e(u))}else rt(n);else bi(n,i,r)}(n,u,t,r)},removeList:rt,mergeWithAdjacentLists:ut},ri=function(n,t,i,r){var o,f,u=t.startContainer,e=t.startOffset;if(3===u.nodeType&&(i?e<u.data.length:0<e))return u;for(o=n.schema.getNonEmptyElements(),1===u.nodeType&&(u=st.getNode(u,e)),f=new hi(u,r),i&&vi(n.dom,u)&&f.next();u=f[i?"next":"prev2"]();)if("LI"===u.nodeName&&!u.hasChildNodes()||o[u.nodeName]||3===u.nodeType&&0<u.data.length)return u},ui=function(n,i){var r=i.childNodes;return 1===r.length&&!t(r[0])&&n.isBlock(r[0])},di=function(n,t,i){var r,f,e,o;if(f=ui(n,i)?i.firstChild:i,ui(e=n,o=t)&&e.remove(o.firstChild,!0),!u(n,t,!0))for(;r=t.firstChild;)f.appendChild(r)},ft=function(n,i,r){var e,o,f=i.parentNode;at(n,i)&&at(n,r)&&(t(r.lastChild)&&(o=r.lastChild),f===r.lastChild&&a(f.previousSibling)&&n.remove(f.previousSibling),(e=r.lastChild)&&a(e)&&i.hasChildNodes()&&n.remove(e),u(n,r,!0)&&n.$(r).empty(),di(n,i,r),o&&r.appendChild(o),n.remove(i),u(n,f)&&f!==n.getRoot()&&n.remove(f))},gi=function(n,t,i,r){var o,s,u,h=n.dom,c;h.isEmpty(r)?(s=i,u=r,(o=n).dom.$(u).empty(),ft(o.dom,s,u),o.selection.setCursorLocation(u)):(c=f(t),ft(h,i,r),n.selection.setRng(e(c)))},nr=function(n,t){var a,s,r,h=n.dom,c=n.selection,y=c.getStart(),l=i.getClosestListRootElm(n,y),o=h.getParent(c.getStart(),"LI",l);if(o){if((a=o.parentNode)===n.getBody()&&u(h,a))return!0;if(s=g(c.getRng(!0)),(r=h.getParent(ri(n,s,t,l),"LI",l))&&r!==o)return t?gi(n,s,r,o):function(n,t,i,r){var o=f(t),u;ft(n.dom,i,r);u=e(o);n.selection.setRng(u)}(n,s,o,r),!0;if(!r&&!t)return v.removeList(n),!0}return!1},tr=function(n,t){return nr(n,t)||function(n,t){var r=n.dom,o=n.selection.getStart(),u=i.getClosestListRootElm(n,o),e=r.getParent(o,r.isBlock,u),s,f;return e&&r.isEmpty(e)&&(s=g(n.selection.getRng(!0)),f=r.getParent(ri(n,s,t,u),"LI",u),f)?(n.undoManager.transact(function(){var i,s,h,o;s=e;h=u;o=(i=r).getParent(s.parentNode,i.isBlock,h);i.remove(s);o&&i.isEmpty(o)&&i.remove(o);v.mergeWithAdjacentLists(r,f.parentNode);n.selection.select(f,!0);n.selection.collapse(t)}),!0):!1}(n,t)},et=function(n,t){return n.selection.isCollapsed()?tr(n,t):(u=(r=n).selection.getStart(),f=i.getClosestListRootElm(r,u),!!(r.dom.getParent(u,"LI,DT,DD",f)||0<i.getSelectedListItems(r).length)&&(r.undoManager.transact(function(){r.execCommand("Delete");nt(r.dom,r.getBody())}),!0));var r,u,f},ir=function(n){n.on("keydown",function(t){t.keyCode===p.BACKSPACE?et(n,!1)&&t.preventDefault():t.keyCode===p.DELETE&&et(n,!0)&&t.preventDefault()})},rr=et,ur=function(n){return{backspaceDelete:function(t){rr(n,t)}}},y=h.DOM,fi=function(n,i){var r;if(t(n)){for(;r=n.firstChild;)i.appendChild(r);y.remove(n)}},ei=function(n){var u,r,o,h,c=i.getSelectedListItems(n),l,s;if(c.length){for(l=f(n.selection.getRng(!0)),s=0;s<c.length&&(u=c[s],h=o=r=void 0,("DT"===u.nodeName?(y.rename(u,"DD"),1):(r=u.previousSibling)&&t(r)?(r.appendChild(u),1):r&&"LI"===r.nodeName&&t(r.lastChild)?(r.lastChild.appendChild(u),fi(u.lastChild,r.lastChild),1):(r=u.nextSibling)&&t(r)?(r.insertBefore(u,r.firstChild),1):(r=u.previousSibling)&&"LI"===r.nodeName&&(o=y.create(u.parentNode.nodeName),(h=y.getStyle(u.parentNode,"listStyleType"))&&y.setStyle(o,"listStyleType",h),r.appendChild(o),o.appendChild(u),fi(u.lastChild,o),1))||0!==s);s++);return n.selection.setRng(e(l)),n.nodeChanged(),!0}},ot=function(n,t){return function(){var i=n.dom.getParent(n.selection.getStart(),"UL,OL,DL");return i&&i.nodeName===t}},fr=function(n){n.on("BeforeExecCommand",function(t){var i,r=t.command.toLowerCase();if("indent"===r?ei(n)&&(i=!0):"outdent"===r&&dt(n)&&(i=!0),i)return n.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0});n.addCommand("InsertUnorderedList",function(t,i){v.toggleList(n,"UL",i)});n.addCommand("InsertOrderedList",function(t,i){v.toggleList(n,"OL",i)});n.addCommand("InsertDefinitionList",function(t,i){v.toggleList(n,"DL",i)});n.addQueryStateHandler("InsertUnorderedList",ot(n,"UL"));n.addQueryStateHandler("InsertOrderedList",ot(n,"OL"));n.addQueryStateHandler("InsertDefinitionList",ot(n,"DL"))},er=function(n){return n.getParam("lists_indent_on_tab",!0)},or=function(n){var t;er(n)&&(t=n).on("keydown",function(n){n.keyCode!==p.TAB||p.metaKeyPressed(n)||t.dom.getParent(t.selection.getStart(),"LI,DT,DD")&&(n.preventDefault(),n.shiftKey?dt(t):ei(t))});ir(n)},oi=function(i,r){return function(u){var f=u.control;i.on("NodeChange",function(i){var u=function(n,t){for(var i=0;i<n.length;i++)if(t(n[i]))return i;return-1}(i.parents,ai),o=-1!==u?i.parents.slice(0,u):i.parents,e=n.grep(o,t);f.active(0<e.length&&e[0].nodeName===r)})}},sr=function(t){var u,f,e,r;f="advlist";e=(u=t).settings.plugins?u.settings.plugins:"";-1===n.inArray(e.split(/[ ,]/),f)&&(t.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:oi(t,"OL")}),t.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:oi(t,"UL")}));t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:(r=t,function(n){var t=n.control;r.on("nodechange",function(){var n=i.getSelectedListItems(r),u=0<n.length&&k(n[0]);t.disabled(u)})})})};si.add("lists",function(n){return or(n),sr(n),fr(n),ur(n)})}();!function(){"use strict";function l(n,i){return t.each(i,function(t){n=t.constructor===RegExp?n.replace(t,""):n.replace(t[0],t[1])}),n}function li(n){var i,r;return r=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],n=n.replace(/^[\u00a0 ]+/,""),t.each(r,function(t){if(t.test(n))return!(i=!0)}),i}function ai(n){function v(n){var t="";if(3===n.type)return n.value;if(n=n.firstChild)for(;t+=v(n),n=n.next;);return t}function f(n,t){if(3===n.type&&t.test(n.value))return n.value=n.value.replace(t,""),!1;if(n=n.firstChild)do if(!f(n,t))return!1;while(n=n.next);return!0}function s(n,i,e){var o=n._listLevel||u;o!==u&&(o<u?t&&(t=t.parent.parent):(r=t,t=null));t&&t.name===i?t.append(n):(r=r||t,t=new c(i,1),1<e&&t.attr("start",""+e),n.wrap(t));n.name="li";u<o&&r&&r.lastChild.append(t);u=o,function s(n){if(n._listIgnore)n.remove();else if(n=n.firstChild)for(;s(n),n=n.next;);}(n);f(n,/^\u00a0+/);f(n,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);f(n,/^\u00a0+/)}for(var e,o,l,a,t,r,u=1,h=[],i=n.firstChild;null!=i;)if(h.push(i),null!==(i=i.walk()))for(;void 0!==i&&i.parent!==n;)i=i.walk();for(e=0;e<h.length;e++)if("p"===(n=h[e]).name&&n.firstChild){if(o=v(n),/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(o)){s(n,"ul");continue}if(li(o)){l=/([0-9]+)\./.exec(o);a=1;l&&(a=parseInt(l[1],10));s(n,"ol",a);continue}if(n._listLevel){s(n,"ul",1);continue}t=null}else r=t,t=null}function vi(i,r,u,f){var o,e={},s=i.dom.parseStyle(f);return t.each(s,function(t,s){switch(s){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(f))&&(u._listLevel=parseInt(o[1],10));/Ignore/i.test(t)&&u.firstChild&&(u._listIgnore=!0,u.firstChild._listIgnore=!0);break;case"horiz-align":s="text-align";break;case"vert-align":s="vertical-align";break;case"font-color":case"mso-foreground":s="color";break;case"mso-background":case"mso-highlight":s="background";break;case"font-weight":case"font-style":return void("normal"!==t&&(e[s]=t));case"mso-element":if(/^(comment|comment-list)$/i.test(t))return void u.remove()}0!==s.indexOf("mso-comment")?0!==s.indexOf("mso-")&&("all"===n.getRetainStyleProps(i)||r&&r[s])&&(e[s]=t):u.remove()}),/(bold)/i.test(e["font-weight"])&&(delete e["font-weight"],u.wrap(new c("b",1))),/(italic)/i.test(e["font-style"])&&(delete e["font-style"],u.wrap(new c("i",1))),(e=i.dom.serializeStyle(e,u.name))||null}function pt(n,t){n.on("PastePreProcess",function(i){i.content=t(n,i.content,i.internal,i.wordContent)})}function lr(n,i){var u,f;return a.isWordContent(i)?(u=[],t.each(n.schema.getBlockElements(),function(n,t){u.push(t)}),f=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+u.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),i=r.filter(i,[[f,"$1"]]),i=r.filter(i,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])):i}function ar(t,i,r,u){var f,o,e,s;return u||r?i:(o=n.getWebkitStyles(t),!1===n.shouldRemoveWebKitStyles(t)||"all"===o)?i:((o&&(f=o.split(/[, ]/)),f)?(e=t.dom,s=t.selection.getNode(),i=i.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(n,t,i,r){var l=e.parseStyle(e.decode(i)),h={},u,o,c;if("none"===f)return t+r;for(u=0;u<f.length;u++)o=l[f[u]],c=e.getStyle(s,f[u],!0),/color/.test(f[u])&&(o=e.toHex(o),c=e.toHex(c)),c!==o&&(h[f[u]]=o);return(h=e.serializeStyle(h,"span"))?t+' style="'+h+'"'+r:t+r})):i=i.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3"),i.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(n,t,i,r){return t+' style="'+i+'"'+r}))}function vr(n,t){n.$("a",t).find("font,u").each(function(t,i){n.dom.remove(i,!0)})}var f=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return f(i())}}},w=tinymce.util.Tools.resolve("tinymce.PluginManager"),wt=function(n){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(n.settings.plugins)||!w.get("powerpaste")||("undefined"!=typeof console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},bt=function(n,t){return{clipboard:n,quirks:t}},kt=function(n,t,i,r){return n.fire("PastePreProcess",{content:t,internal:i,wordContent:r})},dt=function(n,t,i,r){return n.fire("PastePostProcess",{node:t,internal:i,wordContent:r})},b=function(n,t){return n.fire("PastePlainTextToggle",{state:t})},gt=function(n,t){return n.fire("paste",{ieFake:t})},n={shouldPlainTextInform:function(n){return n.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(n){return n.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(n){return n.getParam("paste_data_images",!1)},shouldFilterDrop:function(n){return n.getParam("paste_filter_drop",!0)},getPreProcess:function(n){return n.getParam("paste_preprocess")},getPostProcess:function(n){return n.getParam("paste_postprocess")},getWebkitStyles:function(n){return n.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(n){return n.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(n){return n.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(n){return n.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(n){return n.getParam("paste_as_text",!1)},getRetainStyleProps:function(n){return n.getParam("paste_retain_style_properties")},getWordValidElements:function(n){return n.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(n){return n.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(n){return n.getParam("paste_enable_default_filters",!0)}},ni=function(t,i,r){var u,f,e;"text"===i.pasteFormat.get()?(i.pasteFormat.set("html"),b(t,!1)):(i.pasteFormat.set("text"),b(t,!0),e=t,!1===r.get()&&n.shouldPlainTextInform(e)&&(f="Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.",(u=t).notificationManager.open({text:u.translate(f),type:"info"}),r.set(!0)));t.focus()},ti=function(n,t,i){n.addCommand("mceTogglePlainTextPaste",function(){ni(n,t,i)});n.addCommand("mceInsertClipboardContent",function(n,i){i.content&&t.pasteHtml(i.content,i.internal);i.text&&t.pasteText(i.text)})},i=tinymce.util.Tools.resolve("tinymce.Env"),k=tinymce.util.Tools.resolve("tinymce.util.Delay"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),ii=tinymce.util.Tools.resolve("tinymce.util.VK"),d="x-tinymce/html",o="<!-- "+d+" -->",ri=function(n){return o+n},ui=function(n){return n.replace(o,"")},s=function(n){return-1!==n.indexOf(o)},h=function(){return d},fi=tinymce.util.Tools.resolve("tinymce.html.Entities"),ei=function(n){return n.replace(/\r?\n/g,"<br>")},oi=function(n,i,r){var f=n.split(/\n\n/),e=function(n,t){var i,r=[],u="<"+n;if("object"==typeof t){for(i in t)t.hasOwnProperty(i)&&r.push(i+'="'+fi.encodeAllRaw(t[i])+'"');r.length&&(u+=" "+r.join(" "))}return u+">"}(i,r),o="<\/"+i+">",u=t.map(f,function(n){return n.split(/\n/).join("<br />")});return 1===u.length?u[0]:t.map(u,function(n){return e+n+o}).join("")},si=function(n){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(n)},hi=function(n,t,i){return t?oi(n,t,i):ei(n)},g=tinymce.util.Tools.resolve("tinymce.html.DomParser"),c=tinymce.util.Tools.resolve("tinymce.html.Node"),nt=tinymce.util.Tools.resolve("tinymce.html.Schema"),ci=tinymce.util.Tools.resolve("tinymce.html.Serializer"),r={filter:l,innerText:function(n){var r=nt(),u=g({},r),i="",f=r.getShortEndedElements(),e=t.makeMap("script noscript style textarea video audio iframe object"," "),o=r.getBlockElements();return n=l(n,[/<!\[[^\]]+\]>/g]),function s(n){var t=n.name,r=n;if("br"!==t)if(f[t]&&(i+=" "),e[t])i+=" ";else{if(3===n.type&&(i+=n.value),!n.shortEnded&&(n=n.firstChild))for(;s(n),n=n.next;);o[t]&&r.next&&(i+="\n","p"===t&&(i+="\n"))}else i+="\n"}(u.parse(n)),i},trimHtml:function(n){return l(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(n,t,i){return t||i?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(n){var t=0;return function(){return n+t++}},isMsEdge:function(){return-1!==navigator.userAgent.indexOf(" Edge/")}},a={preProcess:function(i,u){return n.shouldUseDefaultFilters(i)?function(i,u){var s,h,c,e,f,o;return(s=n.getRetainStyleProps(i))&&(h=t.makeMap(s.split(/[, ]/))),u=r.filter(u,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(n,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]),c=n.getWordValidElements(i),e=nt({valid_elements:c,valid_children:"-li[p]"}),t.each(e.elements,function(n){n.attributes["class"]||(n.attributes["class"]={},n.attributesOrder.push("class"));n.attributes.style||(n.attributes.style={},n.attributesOrder.push("style"))}),f=g({},e),f.addAttributeFilter("style",function(n){for(var t,r=n.length;r--;)(t=n[r]).attr("style",vi(i,h,t,t.attr("style"))),"span"===t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),f.addAttributeFilter("class",function(n){for(var t,i,r=n.length;r--;)i=(t=n[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(i)&&t.remove(),t.attr("class",null)}),f.addNodeFilter("del",function(n){for(var t=n.length;t--;)n[t].remove()}),f.addNodeFilter("a",function(n){for(var i,t,r,u=n.length;u--;)if(t=(i=n[u]).attr("href"),r=i.attr("name"),t&&-1!==t.indexOf("#_msocom_"))i.remove();else if(t&&0===t.indexOf("file://")&&(t=t.split("#")[1])&&(t="#"+t),t||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){i.unwrap();continue}i.attr({href:t,name:r})}else i.unwrap()}),o=f.parse(u),n.shouldConvertWordFakeLists(i)&&ai(o),u=ci({validate:i.settings.validate},e).serialize(o)}(i,u):u},isWordContent:function(n){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(n)||/class="OutlineElement/.test(n)||/id="?docs\-internal\-guid\-/.test(n)}},tt=function(n,t){return{content:n,cancelled:t}},yi=function(n,t,i,r){var f,o,s,h,c,e,u=kt(n,t,i,r);return n.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?(f=n,o=u.content,s=i,h=r,c=f.dom.create("div",{style:"display:none"},o),e=dt(f,c,s,h),tt(e.node.innerHTML,e.isDefaultPrevented())):tt(u.content,u.isDefaultPrevented())},pi=function(n,t,i){var r=a.isWordContent(t),u=r?a.preProcess(n,t):t;return yi(n,u,i,r)},v=function(t,i){return t.insertContent(i,{merge:n.shouldMergeFormats(t),paste:!0}),!0},it=function(n){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(n)},wi=function(n){return it(n)&&/.(gif|jpe?g|png)$/.test(n)},bi=function(n,t,i){return!(!1!==n.selection.isCollapsed()||!it(t)||(u=t,f=i,(r=n).undoManager.extra(function(){f(r,u)},function(){r.execCommand("mceInsertLink",!1,u)}),0));var r,u,f},ki=function(n,t,i){return!!wi(t)&&(u=t,f=i,(r=n).undoManager.extra(function(){f(r,u)},function(){r.insertContent('<img src="'+u+'">')}),!0);var r,u,f},di=function(i,r){var u,f;!1===n.isSmartPasteEnabled(i)?v(i,r):(u=i,f=r,t.each([bi,ki,v],function(n){return!0!==n(u,f,v)}))},e=function(n,t,i){var u=i||s(t),r=pi(n,ui(t),u);!1===r.cancelled&&di(n,r.content)},rt=function(n,t){t=n.dom.encode(t).replace(/\r\n/g,"\n");t=hi(t,n.settings.forced_root_block,n.settings.forced_root_block_attrs);e(n,t,!1)},ut=function(n){var i={},t,r,u;if(n&&(n.getData&&(t=n.getData("Text"),t&&0<t.length&&-1===t.indexOf("data:text/mce-internal,")&&(i["text/plain"]=t)),n.types))for(r=0;r<n.types.length;r++){u=n.types[r];try{i[u]=n.getData(u)}catch(f){i[u]=""}}return i},u=function(n,t){return t in n&&0<n[t].length},ft=function(n){return u(n,"text/html")||u(n,"text/plain")},gi=r.createIdGenerator("mceclip"),nr=function(n,t,i,r){var k,f,u;t&&(n.selection.setRng(t),t=null);var h,c,l,a,v,o,y,s=i.result,p=-1!==(c=(h=s).indexOf(","))?h.substr(c+1):null,w=gi(),d=n.settings.images_reuse_filename&&r.name?(l=n,a=r.name,(v=a.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?l.dom.encode(v[1]):null):w,b=new Image;(b.src=s,o=n.settings,y=b,!o.images_dataimg_filter||o.images_dataimg_filter(y))?(f=n.editorUpload.blobCache,u=void 0,(k=f.findFirst(function(n){return n.base64()===p}))?u=k:(u=f.create(w,r,p,d),f.add(u)),e(n,'<img src="'+u.blobUri()+'">',!1)):e(n,'<img src="'+s+'">',!1)},et=function(n,t,i){function u(r){var f,u,e,s=!1,o;if(r)for(f=0;f<r.length;f++)(u=r[f],/^image\/(jpeg|png|gif|bmp)$/.test(u.type))&&(o=u.getAsFile?u.getAsFile():u,(e=new window.FileReader).onload=nr.bind(null,n,i,e,o),e.readAsDataURL(o),t.preventDefault(),s=!0);return s}var r="paste"===t.type?t.clipboardData:t.dataTransfer;if(n.settings.paste_data_images&&r)return u(r.items)||u(r.files)},ot=function(n){return ii.metaKeyPressed(n)&&86===n.keyCode||n.shiftKey&&45===n.keyCode},tr=function(n,f,o){function a(t,i,o,h){var c,l;u(t,"text/html")?c=t["text/html"]:(c=f.getHtml(),h=h||s(c),f.isDefaultContent(c)&&(o=!0));c=r.trimHtml(c);f.remove();l=!1===h&&si(c);c.length&&!l||(o=!0);o&&(c=u(t,"text/plain")&&l?t["text/plain"]:r.innerText(c));f.isDefaultContent(c)?i||n.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?rt(n,c):e(n,c,h)}var c,l=0;n.on("keydown",function(t){function r(n){ot(n)&&!n.isDefaultPrevented()&&f.remove()}if(ot(t)&&!t.isDefaultPrevented()){if((c=t.shiftKey&&86===t.keyCode)&&i.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),l=(new Date).getTime(),i.ie&&c)return t.preventDefault(),void gt(n,!0);f.remove();f.create();n.once("keyup",r);n.once("paste",function(){n.off("keyup",r)})}});n.on("paste",function(e){var d,b,y,nt=(new Date).getTime(),v=(d=n,b=ut(e.clipboardData||d.getDoc().dataTransfer),r.isMsEdge()?t.extend(b,{"text/html":""}):b),tt=(new Date).getTime()-nt,p=(new Date).getTime()-l-tt<1e3,g="text"===o.get()||c,w=u(v,h());c=!1;e.isDefaultPrevented()||(y=e.clipboardData,-1!==navigator.userAgent.indexOf("Android")&&y&&y.items&&0===y.items.length)?f.remove():ft(v)||!et(n,e,f.getLastRng()||n.selection.getRng())?(p||e.preventDefault(),!i.ie||p&&!e.ieFake||u(v,"text/html")||(f.create(),n.dom.bind(f.getEl(),"paste",function(n){n.stopPropagation()}),n.getDoc().execCommand("Paste",!1,null),v["text/html"]=f.getHtml()),u(v,"text/html")?(e.preventDefault(),w||(w=s(v["text/html"])),a(v,p,g,w)):k.setEditorTimeout(n,function(){a(v,p,g,w)},0)):f.remove()})},y=function(n){return i.ie&&n.inline?document.body:n.getBody()},ir=function(n,t,i){var r;y(r=n)!==r.getBody()&&n.dom.bind(t,"paste keyup",function(){ht(n,i)||n.fire("paste")})},p=function(n){return n.dom.get("mcepastebin")},st=function(n,t){return t===n},ht=function(n,t){var i,r=p(n);return(i=r)&&"mcepastebin"===i.id&&st(t,r.innerHTML)},rr=function(n){var r=f(null),u="%MCEPASTEBIN%";return{create:function(){return s=r,o=u,e=(t=n).dom,h=t.getBody(),s.set(t.selection.getRng()),f=t.dom.add(y(t),"div",{id:"mcepastebin","class":"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},o),(i.ie||i.gecko)&&e.setStyle(f,"left","rtl"===e.getStyle(h,"direction",!0)?65535:-65535),e.bind(f,"beforedeactivate focusin focusout",function(n){n.stopPropagation()}),ir(t,f,o),f.focus(),void t.selection.select(f,!0);var t,s,o,f,e,h},remove:function(){return function(n,t){if(p(n)){for(var i=void 0,r=t.get();i=n.dom.get("mcepastebin");)n.dom.remove(i),n.dom.unbind(i);r&&n.selection.setRng(r)}t.set(null)}(n,r)},getEl:function(){return p(n)},getHtml:function(){return function(n){var i,u,r,f,e,o=function(t,i){t.appendChild(i);n.dom.remove(i,!0)};for(u=t.grep(y(n).childNodes,function(n){return"mcepastebin"===n.id}),i=u.shift(),t.each(u,function(n){o(i,n)}),r=(f=n.dom.select("div[id=mcepastebin]",i)).length-1;0<=r;r--)e=n.dom.create("div"),i.insertBefore(e,f[r]),o(e,f[r]);return i?i.innerHTML:""}(n)},getLastRng:function(){return r.get()},isDefault:function(){return ht(n,u)},isDefaultContent:function(n){return st(u,n)}}},ur=function(n,t){var r=rr(n);return n.on("preInit",function(){return tr(u=n,r,t),void u.parser.addNodeFilter("img",function(n,t,r){var o,s=function(n){n.attr("data-mce-object")||f===i.transparentSrc||n.remove()},e;if(!u.settings.paste_data_images&&(o=r).data&&!0===o.data.paste)for(e=n.length;e--;)(f=n[e].attributes.map.src)&&(0===f.indexOf("webkit-fake-url")?s(n[e]):u.settings.allow_html_data_urls||0!==f.indexOf("data:")||s(n[e]))});var u,f}),{pasteFormat:t,pasteHtml:function(t,i){return e(n,t,i)},pasteText:function(t){return rt(n,t)},pasteImageData:function(t,i){return et(n,t,i)},getDataTransferItems:ut,hasHtmlOrText:ft,hasContentType:u}},fr=function(){},er=function(n,t,u){if(f=n,!1!==i.iOS||f===undefined||"function"!=typeof f.setData||!0===r.isMsEdge())return!1;try{return n.clearData(),n.setData("text/html",t),n.setData("text/plain",u),n.setData(h(),t),!0}catch(e){return!1}var f},ct=function(n,t,i,r){er(n.clipboardData,t.html,t.text)?(n.preventDefault(),r()):i(t.html,r)},lt=function(n){return function(t,i){var o=ri(t),r=n.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),u=n.dom.create("div",{contenteditable:"true"},o),e,f;n.dom.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"});r.appendChild(u);n.dom.add(n.getBody(),r);e=n.selection.getRng();u.focus();f=n.dom.createRng();f.selectNodeContents(u);n.selection.setRng(f);setTimeout(function(){n.selection.setRng(e);r.parentNode.removeChild(r);i()},0)}},at=function(n){return{html:n.selection.getContent({contextual:!0}),text:n.selection.getContent({format:"text"})}},or=function(n){var t,i;n.on("cut",(t=n,function(n){!1===t.selection.isCollapsed()&&ct(n,at(t),lt(t),function(){setTimeout(function(){t.execCommand("Delete")},0)})}));n.on("copy",(i=n,function(n){!1===i.selection.isCollapsed()&&ct(n,at(i),lt(i),fr)}))},sr=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),vt=function(n,t){return sr.getCaretRangeFromPoint(t.clientX,t.clientY,n.getDoc())},yt=function(n,t){n.focus();n.selection.setRng(t)},hr=function(t,i,u){n.shouldBlockDrop(t)&&t.on("dragend dragover draggesture dragdrop drop drag",function(n){n.preventDefault();n.stopPropagation()});n.shouldPasteDataImages(t)||t.on("drop",function(n){var t=n.dataTransfer;t&&t.files&&0<t.files.length&&n.preventDefault()});t.on("drop",function(f){var e,s,c,l,o;(s=vt(t,f),f.isDefaultPrevented()||u.get())||(e=i.getDataTransferItems(f.dataTransfer),l=i.hasContentType(e,h()),(!i.hasHtmlOrText(e)||(c=e["text/plain"])&&0===c.indexOf("file://"))&&i.pasteImageData(f,s)||!s||!n.shouldFilterDrop(t)||(o=e["mce-internal"]||e["text/html"]||e["text/plain"],o&&(f.preventDefault(),k.setEditorTimeout(t,function(){t.undoManager.transact(function(){e["mce-internal"]&&t.execCommand("Delete");yt(t,s);o=r.trimHtml(o);e["text/html"]?i.pasteHtml(o,l):i.pasteText(o)})}))))});t.on("dragstart",function(){u.set(!0)});t.on("dragover dragend",function(i){n.shouldPasteDataImages(t)&&!1===u.get()&&(i.preventDefault(),yt(t,vt(t,i)));"dragend"===i.type&&u.set(!1)})},cr=function(t){var i=t.plugins.paste,u=n.getPreProcess(t),r;u&&t.on("PastePreProcess",function(n){u.call(i,i,n)});r=n.getPostProcess(t);r&&t.on("PastePostProcess",function(n){r.call(i,i,n)})},yr=function(n){var t,r;i.webkit&&pt(n,ar);i.ie&&(pt(n,lr),r=vr,(t=n).on("PastePostProcess",function(n){r(t,n.node)}))},pr=function(n,t,i){var r=i.control;r.active("text"===t.pasteFormat.get());n.on("PastePlainTextToggle",function(n){r.active(n.state)})},wr=function(n,t){var i=function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}}(pr,n,t);n.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:i});n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:i})};w.add("paste",function(t){if(!1===wt(t)){var r=f(!1),u=f(!1),e=f(n.isPasteAsTextEnabled(t)?"text":"html"),i=ur(t,e),o=yr(t);return wr(t,i),ti(t,i,r),cr(t),or(t),hr(t,i,u),bt(i,o)}})}();!function(){"use strict";function u(n){return n&&1===n.nodeType&&"false"===n.contentEditable}var o=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return o(i())}}},w=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),b={findAndReplaceDOMText:function(n,t,i,r,f){function y(n,t){var i,r;if(t=t||0,!n[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");if(i=n.index,0<t){if(r=n[t],!r)throw new Error("Invalid capture group");i+=n[0].indexOf(r);n[0]=r}return[i,i+n[0].length,[n[0]]]}var h,c,e,o,l,a,s=[],v=0;if(e=t.ownerDocument,o=f.getBlockElements(),l=f.getWhiteSpaceElements(),a=f.getShortEndedElements(),c=function p(n){var t;if(3===n.nodeType)return n.data;if(l[n.nodeName]&&!o[n.nodeName])return"";if(t="",u(n))return"\n";if((o[n.nodeName]||a[n.nodeName])&&(t+="\n"),n=n.firstChild)for(;t+=p(n),n=n.nextSibling;);return t}(t)){if(n.global)for(;h=n.exec(c);)s.push(y(h,r));else h=c.match(n),s.push(y(h,r));return s.length&&(v=s.length,function(n,t,i){var e,s,y,c,v=[],f=0,r=n,h=t.shift(),p=0;n:for(;;){if((o[r.nodeName]||a[r.nodeName]||u(r))&&f++,3===r.nodeType&&(!s&&r.length+f>=h[1]?(s=r,c=h[1]-f):e&&v.push(r),!e&&r.length+f>h[0]&&(e=r,y=h[0]-f),f+=r.length),e&&s){if(r=i({startNode:e,startNodeIndex:y,endNode:s,endNodeIndex:c,innerNodes:v,match:h[2],matchIndex:p}),f-=s.length-c,s=e=null,v=[],p++,!(h=t.shift()))break}else if((!l[r.nodeName]||o[r.nodeName])&&r.firstChild){if(!u(r)){r=r.firstChild;continue}}else if(r.nextSibling){r=r.nextSibling;continue}for(;;){if(r.nextSibling){r=r.nextSibling;break}if(r.parentNode===n)break n;r=r.parentNode}}}(t,s,function(n){var t,i;return"function"!=typeof n?(i=n.nodeType?n:e.createElement(n),t=function(n,t){var r=i.cloneNode(!1);return r.setAttribute("data-mce-index",t),n&&r.appendChild(e.createTextNode(n)),r}):t=n,function(n){var o,s,i,u=n.startNode,f=n.endNode,h=n.matchIndex,r,l,c,v,y;if(u===f)return r=u,i=r.parentNode,0<n.startNodeIndex&&(o=e.createTextNode(r.data.substring(0,n.startNodeIndex)),i.insertBefore(o,r)),l=t(n.match[0],h),i.insertBefore(l,r),n.endNodeIndex<r.length&&(s=e.createTextNode(r.data.substring(n.endNodeIndex)),i.insertBefore(s,r)),r.parentNode.removeChild(r),l;o=e.createTextNode(u.data.substring(0,n.startNodeIndex));s=e.createTextNode(f.data.substring(n.endNodeIndex));for(var p=t(u.data.substring(n.startNodeIndex),h),w=[],a=0,b=n.innerNodes.length;a<b;++a)c=n.innerNodes[a],v=t(c.data,h),c.parentNode.replaceChild(v,c),w.push(v);return y=t(f.data.substring(0,n.endNodeIndex),h),(i=u.parentNode).insertBefore(o,u),i.insertBefore(p,u),i.removeChild(u),(i=f.parentNode).insertBefore(y,f),i.insertBefore(s,f),i.removeChild(f),y}}(i))),v}}},i=function(n){var t=n.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},s=function(n){var t=n.parentNode;n.firstChild&&t.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)},r=function(n,r){var f,o=[],u,e;if((f=t.toArray(n.getBody().getElementsByTagName("span"))).length)for(u=0;u<f.length;u++)e=i(f[u]),null!==e&&e.length&&e===r.toString()&&o.push(f[u]);return o},f=function(n,t,i){var u=t.get(),e=n.dom,f;return(i=!1!==i)?u++:u--,e.removeClass(r(n,t.get()),"mce-match-marker-selected"),f=r(n,u),f.length?(e.addClass(r(n,u),"mce-match-marker-selected"),n.selection.scrollIntoView(f[0]),u):-1},h=function(n,t){var i=t.parentNode;n.remove(t);n.isEmpty(i)&&n.remove(i)},c=function(n,t){var i=f(n,t,!0);-1!==i&&t.set(i)},l=function(n,t){var i=f(n,t,!1);-1!==i&&t.set(i)},k=function(n){var t=i(n);return null!==t&&0<t.length},a=function(n,r,u){for(var h,c,l,o,e=t.toArray(n.getBody().getElementsByTagName("span")),f=0;f<e.length;f++)l=i(e[f]),null!==l&&l.length&&(l===r.get().toString()&&(h||(h=e[f].firstChild),c=e[f].firstChild),s(e[f]));if(h&&c)return o=n.dom.createRng(),o.setStart(h,0),o.setEnd(c,c.data.length),!1!==u&&n.selection.setRng(o),o},v=function(n,t){return 0<r(n,t.get()+1).length},y=function(n,t){return 0<r(n,t.get()-1).length},n={done:a,find:function(n,t,i,r,u){i=(i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"\\s");i=u?"\\b"+i+"\\b":i;var e,o,s,h,c,l=(e=n,o=t,s=new RegExp(i,r?"g":"gi"),(c=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",h=e.getBody(),a(e,o,!1),b.findAndReplaceDOMText(s,h,c,!1,e.schema));return l&&(t.set(-1),t.set(f(n,t,!0))),l},next:c,prev:l,replace:function(n,r,u,f,e){var o,a,d,w,p,b,g=r.get(),nt;for(f=!1!==f,d=n.getBody(),a=t.grep(t.toArray(d.getElementsByTagName("span")),k),o=0;o<a.length;o++)if(nt=i(a[o]),w=p=parseInt(nt,10),e||w===r.get()){for(u.length?(a[o].firstChild.nodeValue=u,s(a[o])):h(n.dom,a[o]);a[++o];){if((w=parseInt(i(a[o]),10))!==p){o--;break}h(n.dom,a[o])}f&&g--}else p>r.get()&&a[o].setAttribute("data-mce-index",p-1);return r.set(g),f?(b=v(n,r),c(n,r)):(b=y(n,r),l(n,r)),!e&&b},hasNext:v,hasPrev:y},d=function(t,i){return{done:function(r){return n.done(t,i,r)},find:function(r,u,f){return n.find(t,i,r,u,f)},next:function(){return n.next(t,i)},prev:function(){return n.prev(t,i)},replace:function(r,u,f){return n.replace(t,i,r,u,f)}}},p=function(i,r){function e(){u.statusbar.find("#next").disabled(!1===n.hasNext(i,r));u.statusbar.find("#prev").disabled(!1===n.hasPrev(i,r))}function s(){i.windowManager.alert("Could not find the specified string.",function(){u.find("#find")[0].focus()})}var o,f={},u;i.undoManager.add();o=t.trim(i.selection.getContent({format:"text"}));u=i.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){i.focus();n.done(i,r);i.undoManager.add()},onSubmit:function(t){var l,o,h,c;return t.preventDefault(),o=u.find("#case").checked(),c=u.find("#words").checked(),(h=u.find("#find").value()).length?f.text===h&&f.caseState===o&&f.wholeWord===c?n.hasNext(i,r)?(n.next(i,r),void e()):void s():((l=n.find(i,r,h,o,c))||s(),u.statusbar.items().slice(1).disabled(0===l),e(),void(f={text:h,caseState:o,wholeWord:c})):(n.done(i,r,!1),void u.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){u.submit()}},{text:"Replace",disabled:!0,onclick:function(){n.replace(i,r,u.find("#replace").value())||(u.statusbar.items().slice(1).disabled(!0),r.set(-1),f={})}},{text:"Replace all",disabled:!0,onclick:function(){n.replace(i,r,u.find("#replace").value(),!0,!0);u.statusbar.items().slice(1).disabled(!0);f={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){n.prev(i,r);e()}},{text:"Next",name:"next",disabled:!0,onclick:function(){n.next(i,r);e()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:o},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},g=function(n,t){n.addCommand("SearchReplace",function(){p(n,t)})},e=function(n,t){return function(){p(n,t)}},nt=function(n,t){n.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:e(n,t),separator:"before",context:"edit"});n.addButton("searchreplace",{tooltip:"Find and replace",onclick:e(n,t)});n.shortcuts.add("Meta+F","",e(n,t))};w.add("searchreplace",function(n){var t=o(-1);return g(n,t),nt(n,t),d(n,t)})}();!function(){"use strict";function ca(t,i,r,u,f){return t(r,u)?n.some(r):vu(f)&&f(r)?n.none():i(r,u,f)}function ys(){return{up:t({selector:a.ancestor,closest:a.closest,predicate:ei.ancestor,all:h.parents}),down:t({selector:it.descendants,predicate:bf.descendants}),styles:t({get:v.get,getRaw:v.getRaw,set:v.set,remove:v.remove}),attrs:t({get:r.get,set:r.set,remove:r.remove,copyTo:function(n,t){var i=r.clone(n);r.setAll(t,i)}}),insert:t({before:w.before,after:w.after,afterAll:ki.after,append:w.append,appendAll:ki.append,prepend:w.prepend,wrap:w.wrap}),remove:t({unwrap:st.unwrap,remove:st.remove}),create:t({nu:i.fromTag,clone:function(n){return i.fromDom(n.dom().cloneNode(!1))},text:i.fromText}),query:t({comparePosition:function(n,t){return n.dom().compareDocumentPosition(t.dom())},prevSibling:h.prevSibling,nextSibling:h.nextSibling}),property:t({children:h.children,name:c.name,parent:h.parent,isText:c.isText,isComment:c.isComment,isElement:c.isElement,getText:di.get,setText:di.set,isBoundary:function(n){return!!c.isElement(n)&&("body"===c.name(n)||ft(gn,c.name(n)))},isEmptyTag:function(n){return!!c.isElement(n)&&ft(["br","img","hr","input"],c.name(n))}}),eq:l.eq,is:l.is}}function kv(n,t){var i=function(i){var r=t(i),u;return r<=0||null===r?(u=v.get(i,n),parseFloat(u)||0):r},r=function(n,t){return ri(t,function(t,i){var r=v.get(n,i),u=r===undefined?0:parseInt(r,10);return isNaN(u)?t:t+u},0)};return{set:function(t,i){if(!rl(i)&&!i.match(/^[0-9]+$/))throw n+".set accepts only positive integer values. Value was "+i;var r=t.dom();bi(r)&&(r.style[n]=i+"px")},get:i,getOuter:i,aggregate:r,max:function(n,t,i){var u=r(n,i);return u<t?t-u:0}}}function py(n){var t=function(t){return n(t).isRtl()?yy.rtl:yy.ltr};return{delta:function(n,i){return t(i).delta(n,i)},edge:function(n){return t(n).edge(n)},positions:function(n,i){return t(i).positions(n,i)}}}function vb(n,t,i,r){function f(n,i,r){(1===t.length||r)&&e.setAttrib(n,i,r)}var e=n.dom,u;gh(n)&&rt.syncAdvancedStyleFields(n,r);u=r.control.rootControl.toJSON();n.undoManager.transact(function(){k.each(t,function(r){var y,p,l,s,c,a,o,v,h;f(r,"scope",u.scope);f(r,"style",u.style);f(r,"class",u["class"]);y=r;p="height";l=wt(u.height);(1===t.length||l)&&e.setStyle(y,p,l);u.type!==r.parentNode.nodeName.toLowerCase()&&(s=n.dom,c=r,a=u.type,o=s.getParent(c,"table"),v=c.parentNode,(h=s.select(a,o)[0])||(h=s.create(a),o.firstChild?"CAPTION"===o.firstChild.nodeName?s.insertAfter(h,o.firstChild):o.insertBefore(h,o.firstChild):o.appendChild(h)),h.appendChild(c),v.hasChildNodes()||s.remove(v));u.align!==i.align&&(rc(n,r),ic(n,r,u.align))});n.focus()})}function yb(n,t,i,r){if("TD"===t.tagName||"TH"===t.tagName)n.setStyle(t,i,r);else if(t.children)for(var u=0;u<t.children.length;u++)yb(n,t.children[u],i,r)}function bt(n){var i=y.apply(null,n),t=[];return{bind:function(n){if(n===undefined)throw"Event bind error: undefined handler";t.push(n)},unbind:function(n){t=lt(t,function(t){return t!==n})},trigger:function(){var n=i.apply(null,arguments);u(t,function(t){t(n)})}}}function yet(){var t=n.none(),i=nu.create({move:bt(["info"])});return{onEvent:function(r,u){u.extract(r).each(function(r){var e,f,o;(e=u,f=r,o=t.map(function(n){return e.compare(n,f)}),t=n.some(f),o).each(function(n){i.trigger.move(n)})})},reset:function(){t=n.none()},events:i.registry}}function pet(){var i={onEvent:function(){},reset:f},t=yet(),n=i;return{on:function(){n.reset();n=t},off:function(){n.reset();n=i},isOn:function(){return n===t},onEvent:function(t,i){n.onEvent(t,i)},events:t.events}}function ket(){var i,r=nu.create({drag:bt(["xDelta","yDelta","target"])}),t=n.none(),u={mutate:function(n,t){i.trigger.drag(n,t)},events:(i=nu.create({drag:bt(["xDelta","yDelta"])})).registry};return u.events.drag.bind(function(n){t.each(function(t){r.trigger.drag(n.xDelta(),n.yDelta(),t)})}),{assign:function(i){t=n.some(i)},get:function(){return t},mutate:u.mutate,events:r.registry}}function not(t,i){var o=fe.height,u=function(t,i,u){var o=ket(),f=bet.transform(o,{}),p=n.none(),s=function(t,i){return n.from(r.get(t,i))},y;o.events.drag.bind(function(n){s(n.target(),"data-row").each(function(){var t=ti.getInt(n.target(),"top");v.set(n.target(),"top",t+n.yDelta()+"px")});s(n.target(),"data-column").each(function(){var t=ti.getInt(n.target(),"left");v.set(n.target(),"left",t+n.xDelta()+"px")})});y=function(n,t){return ti.getInt(n,t)-parseInt(r.get(n,"data-initial-"+t),10)};f.events.stop.bind(function(){o.get().each(function(n){p.each(function(f){s(n,"data-row").each(function(t){var i=y(n,"top");r.remove(n,"data-initial-top");h.trigger.adjustHeight(f,i,parseInt(t,10))});s(n,"data-column").each(function(t){var i=y(n,"left");r.remove(n,"data-initial-left");h.trigger.adjustWidth(f,i,parseInt(t,10))});gt.refresh(t,f,u,i)})})});var w=function(n,i){h.trigger.startAdjust();o.assign(n);r.set(n,"data-initial-"+i,parseInt(v.get(n,i),10));at.add(n,get);v.set(n,"opacity","0.2");f.go(t.parent())},k=tu.bind(t.parent(),"mousedown",function(n){gt.isRowBar(n.target())&&w(n.target(),"top");gt.isColBar(n.target())&&w(n.target(),"left")}),b=function(n){return l.eq(n,t.view())},d=tu.bind(t.view(),"mouseover",function(r){"table"===c.name(r.target())||det.closest(r.target(),"table",b)?(p="table"===c.name(r.target())?n.some(r.target()):a.ancestor(r.target(),"table",b)).each(function(n){gt.refresh(t,n,u,i)}):yr.inBody(r.target())&&gt.destroy(t)}),h=nu.create({adjustHeight:bt(["table","delta","row"]),adjustWidth:bt(["table","delta","column"]),startAdjust:bt([])});return{destroy:function(){k.unbind();d.unbind();f.destroy();gt.destroy(t)},refresh:function(n){gt.refresh(t,n,u,i)},on:f.on,off:f.off,hideBars:e(gt.hide,t),showBars:e(gt.show,t),events:h.registry}}(t,i,o),f=nu.create({beforeResize:bt(["table"]),afterResize:bt(["table"]),startDrag:bt([])});return u.events.adjustHeight.bind(function(n){f.trigger.beforeResize(n.table());var t=o.delta(n.delta(),n.table());oft(n.table(),t,n.row(),o);f.trigger.afterResize(n.table())}),u.events.startAdjust.bind(function(){f.trigger.startDrag()}),u.events.adjustWidth.bind(function(n){f.trigger.beforeResize(n.table());var t=i.delta(n.delta(),n.table());eft(n.table(),t,n.column(),i);f.trigger.afterResize(n.table())}),{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:f.registry}}function dk(n){return{elementFromPoint:function(t,r){return i.fromPoint(i.fromDom(n.document),t,r)},getRect:function(n){return n.dom().getBoundingClientRect()},getRangedRect:function(t,i,r,u){var f=kt.exact(t,i,r,u);return cst(n,f).map(function(n){return lo(n,bd)})},getSelection:function(){return fst(n).map(function(t){return kk(n,t)})},fromSitus:function(t){var i=kt.relative(t.start(),t.finish());return kk(n,i)},situsFromPoint:function(i,r){return lst(n,i,r).map(function(n){return{start:t(tt.on(n.start(),n.soffset())),finish:t(tt.on(n.finish(),n.foffset()))}})},clearSelection:function(){hst(n)},setSelection:function(t){ust(n,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,i){est(n,t,i)},selectContents:function(t){sst(n,t)},getInnerHeight:function(){return n.innerHeight},getScrollY:function(){return nht(i.fromDom(n.document)).top()},scrollBy:function(t,r){tht(t,r,i.fromDom(n.document))}}}function rct(r,u){var s=vo(["mousedown","mouseover","mouseup","keyup","keydown"],[]),o=n.none(),e=ict.byAttr(nr);return r.on("init",function(){var c=r.getWin(),l=rr(r),v=tb(r),a=pd.mouse(c,l,v,e),y=pd.keyboard(c,l,v,e),p=function(n,t){!0===n.raw().shiftKey&&(t.kill()&&n.kill(),t.selection().each(function(n){var t=kt.relative(n.start(),n.finish()),i=hf.asLtrRange(c,t);r.selection.setRng(i)}))},w=function(n){var t=h(n);if(t.raw().shiftKey&&yt.isNavigation(t.raw().which)){var u=r.selection.getRng(),f=i.fromDom(u.startContainer),e=i.fromDom(u.endContainer);y.keyup(t,f,u.startOffset,e,u.endOffset).each(function(n){p(t,n)})}},b=function(n){var f=h(n);u().each(function(n){n.hideBars()});var t=r.selection.getRng(),e=i.fromDom(r.selection.getStart()),o=i.fromDom(t.startContainer),s=i.fromDom(t.endContainer),c=kh.directionAt(e).isRtl()?yt.rtl:yt.ltr;y.keydown(f,o,t.startOffset,s,t.endOffset,c).each(function(n){p(f,n)});u().each(function(n){n.showBars()})},k=function(n){return n.hasOwnProperty("x")&&n.hasOwnProperty("y")},h=function(n){var f=i.fromDom(n.target),r=function(){n.stopPropagation()},u=function(){n.preventDefault()},e=fo(u,r);return{target:t(f),x:t(k(n)?n.x:null),y:t(k(n)?n.y:null),stop:r,prevent:u,kill:e,raw:t(n)}},d=function(n){return 0===n.button},nt=function(n){d(n)&&dc(n)&&a.mousedown(h(n))},tt=function(n){var t;((t=n).buttons===undefined||0!=(1&t.buttons))&&dc(n)&&a.mouseover(h(n))},it=function(n){d(n)&&dc(n)&&a.mouseup(h(n))};r.on("mousedown",nt);r.on("mouseover",tt);r.on("mouseup",it);r.on("keyup",w);r.on("keydown",b);r.on("nodechange",function(){var n=r.selection,t=i.fromDom(n.getStart()),u=i.fromDom(n.getEnd());ne.sharedOne(g.table,[t,u]).fold(function(){e.clear(l)},f)});o=n.some(s({mousedown:nt,mouseover:tt,mouseup:it,keyup:w,keydown:b}))}),{clear:e.clear,destroy:function(){o.each(function(){})}}}var gc,nl,tl,uo,il,wd=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},fo=function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},t=function(n){return function(){return n}},dt=function(n){return n},e=function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},eo=function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},bd=function(n){return n()},cu=t(!1),ct=t(!0),lu=cu,oo=ct,pi=function(){return so},so=(uo={fold:function(n){return n()},is:lu,isSome:lu,isNone:oo,getOr:tl=function(n){return n},getOrThunk:nl=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:tl,orThunk:nl,map:pi,ap:pi,each:function(){},bind:pi,flatten:pi,exists:lu,forall:oo,filter:pi,equals:gc=function(n){return n.isNone()},equals_:gc,toArray:function(){return[]},toString:t("none()")},Object.freeze&&Object.freeze(uo),uo),vf=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:oo,isNone:lu,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:u,orThunk:u,map:function(t){return vf(t(n))},ap:function(t){return t.fold(pi,function(t){return vf(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:so},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(lu,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},n={some:vf,none:pi,from:function(n){return null===n||n===undefined?so:vf(n)}},au=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},er=au("string"),yf=au("array"),kd=au("boolean"),vu=au("function"),rl=au("number"),dd=(il=Array.prototype.indexOf)===undefined?function(n,t){return gd(n,t)}:function(n,t){return il.call(n,t)},ft=function(n,t){return-1<dd(n,t)},or=function(n,t){return fi(n,t).isSome()},s=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},u=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},lt=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},sr=function(n,t,i){return function(n,t){for(var i=n.length-1;0<=i;i--)t(n[i],i,n)}(n,function(n){i=t(i,n)}),i},ri=function(n,t,i){return u(n,function(n){i=t(i,n)}),i},ui=function(t,i){for(var u,r=0,f=t.length;r<f;r++)if(u=t[r],i(u,r,t))return n.some(u);return n.none()},fi=function(t,i){for(var r=0,u=t.length;r<u;r++)if(i(t[r],r,t))return n.some(r);return n.none()},gd=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},ng=Array.prototype.push,ho=function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!Array.prototype.isPrototypeOf(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);ng.apply(i,n[t])}return i},si=function(n,t){var i=s(n,t);return ho(i)},yu=function(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i,n))return!1;return!0},tg=Array.prototype.slice,co=function(n){var t=tg.call(n,0);return t.reverse(),t},pu=(vu(Array.from)&&Array.from,Object.keys),hr=function(n,t){for(var r,u=pu(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r,n)},lo=function(n,t){return ig(n,function(n,i,r){return{k:i,v:t(n,i,r)}})},ig=function(n,t){var i={};return hr(n,function(r,u){var f=t(r,u,n);i[f.k]=f.v}),i},y=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return function(){for(var f,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(n.length!==i.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+i.length+" arguments");return f={},u(n,function(n,r){f[n]=t(i[r])}),f}},wu=function(n){return n.slice(0).sort()},ul=function(n,t){throw new Error("All required keys ("+wu(n).join(", ")+") were not specified. Specified keys were: "+wu(t).join(", ")+".");},fl=function(n){throw new Error("Unsupported keys for object: "+wu(n).join(", "));},ao=function(n,t){if(!yf(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");u(t,function(t){if(!er(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.");})},el=function(n){var t=wu(n);ui(t,function(n,i){return i<t.length-1&&n===t[i+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].");})},vo=function(i,r){var f=i.concat(r);if(0===f.length)throw new Error("You must specify at least one required or optional field.");return ao("required",i),ao("optional",r),el(f),function(e){var s=pu(e),h,o;return yu(i,function(n){return ft(s,n)})||ul(i,s),h=lt(s,function(n){return!ft(f,n)}),0<h.length&&fl(h),o={},u(i,function(n){o[n]=t(e[n])}),u(r,function(i){o[i]=t(Object.prototype.hasOwnProperty.call(e,i)?n.some(e[i]):n.none())}),o}},rg=y("width","height"),ug=y("rows","columns"),fg=y("row","column"),eg=y("x","y"),og=y("element","rowspan","colspan"),sg=y("element","rowspan","colspan","isNew"),p={dimensions:rg,grid:ug,address:fg,coords:eg,extended:y("element","rowspan","colspan","row","column"),detail:og,detailnew:sg,rowdata:y("element","cells","section"),elementnew:y("element","isNew"),rowdatanew:y("element","cells","section","isNew"),rowcells:y("cells","section"),rowdetails:y("details","section"),bounds:y("startRow","startCol","finishRow","finishCol")},bu=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:t(n)}},i={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return bu(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return bu(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return bu(i)},fromDom:bu,fromPoint:function(t,i,r){var u=t.dom();return n.from(u.elementFromPoint(i,r)).map(bu)}},cr={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},ol=cr.ELEMENT,hg=cr.DOCUMENT,sl=function(n){return n.nodeType!==ol&&n.nodeType!==hg||0===n.childElementCount},ut={all:function(n,t){var r=t===undefined?document:t.dom();return sl(r)?[]:s(r.querySelectorAll(n),i.fromDom)},is:function(n,t){var i=n.dom();if(i.nodeType!==ol)return!1;if(i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},one:function(t,r){var u=r===undefined?document:r.dom();return sl(u)?n.none():n.from(u.querySelector(t)).map(i.fromDom)}},hl=function(n,t){for(var i=[],u=function(n){return i.push(n),t(n)},r=t(n);(r=r.bind(u)).isSome(););return i},cg="undefined"!=typeof window?window:Function("return this;")(),lg=function(n,t){return function(n,t){for(var i=t!==undefined&&null!==t?t:cg,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i}(n.split("."),t)},ag=function(n,t){var i=lg(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i},vg=function(){return ag("Node")},yg=function(n,t,i){return 0!=(n.compareDocumentPosition(t)&i)},pg=function(n,t){return yg(n,t,vg().DOCUMENT_POSITION_CONTAINED_BY)},lr=function(n){var t,i=!1;return function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];return i||(i=!0,t=n.apply(null,u)),t}},wg=function(n,t){var r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined}(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},yo(i(1),i(2))):{major:0,minor:0}},cl=function(){return yo(0,0)},yo=function(n,t){return{major:n,minor:t}},pf={nu:yo,detect:function(n,t){var i=String(t).toLowerCase();return 0===n.length?cl():wg(n,i)},unknown:cl},ll="Firefox",ar=function(n,t){return function(){return t===n}},al=function(n){var t=n.current;return{current:t,version:n.version,isEdge:ar("Edge",t),isChrome:ar("Chrome",t),isIE:ar("IE",t),isOpera:ar("Opera",t),isFirefox:ar(ll,t),isSafari:ar("Safari",t)}},vl={unknown:function(){return al({current:undefined,version:pf.unknown()})},nu:al,edge:t("Edge"),chrome:t("Chrome"),ie:t("IE"),opera:t("Opera"),firefox:t(ll),safari:t("Safari")},yl="Windows",pl="Android",wl="Solaris",bl="FreeBSD",wi=function(n,t){return function(){return t===n}},kl=function(n){var t=n.current;return{current:t,version:n.version,isWindows:wi(yl,t),isiOS:wi("iOS",t),isAndroid:wi(pl,t),isOSX:wi("OSX",t),isLinux:wi("Linux",t),isSolaris:wi(wl,t),isFreeBSD:wi(bl,t)}},dl={unknown:function(){return kl({current:undefined,version:pf.unknown()})},nu:kl,windows:t(yl),ios:t("iOS"),android:t(pl),linux:t("Linux"),osx:t("OSX"),solaris:t(wl),freebsd:t(bl)},gl=function(n,t){var i=String(t).toLowerCase();return ui(n,function(n){return n.search(i)})},bg=function(n,t){return gl(n,t).map(function(n){var i=pf.detect(n.versionRegexes,t);return{current:n.name,version:i}})},kg=function(n,t){return gl(n,t).map(function(n){var i=pf.detect(n.versionRegexes,t);return{current:n.name,version:i}})},ot=function(n,t){return-1!==n.indexOf(t)},po=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,hi=function(n){return function(t){return ot(t,n)}},dg=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return ot(n,"edge/")&&ot(n,"chrome")&&ot(n,"safari")&&ot(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,po],search:function(n){return ot(n,"chrome")&&!ot(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return ot(n,"msie")||ot(n,"trident")}},{name:"Opera",versionRegexes:[po,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:hi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:hi("firefox")},{name:"Safari",versionRegexes:[po,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(ot(n,"safari")||ot(n,"mobile/"))&&ot(n,"applewebkit")}}],gg=[{name:"Windows",search:hi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return ot(n,"iphone")||ot(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:hi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:hi("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:hi("linux"),versionRegexes:[]},{name:"Solaris",search:hi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:hi("freebsd"),versionRegexes:[]}],na={browsers:t(dg),oses:t(gg)},nn=function(n){var i,o,r,u,s,h,c,f,e,l,a,p=na.browsers(),w=na.oses(),v=bg(p,n).fold(vl.unknown,vl.nu),y=kg(w,n).fold(dl.unknown,dl.nu);return{browser:v,os:y,deviceType:(o=v,r=n,u=(i=y).isiOS()&&!0===/ipad/i.test(r),s=i.isiOS()&&!u,h=i.isAndroid()&&3===i.version.major,c=i.isAndroid()&&4===i.version.major,f=u||h||c&&!0===/mobile/i.test(r),e=i.isiOS()||i.isAndroid(),l=e&&!f,a=o.isSafari()&&i.isiOS()&&!1===/safari/i.test(r),{isiPad:t(u),isiPhone:t(s),isTablet:t(f),isPhone:t(l),isTouch:t(e),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:t(a)})}},vr={detect:lr(function(){var n=navigator.userAgent;return nn(n)})},ta=function(n,t){return n.dom()===t.dom()},tn=vr.detect().browser.isIE()?function(n,t){return pg(n.dom(),t.dom())}:function(n,t){var i=n.dom(),r=t.dom();return i!==r&&i.contains(r)},l={eq:ta,isEqualNode:function(n,t){return n.dom().isEqualNode(t.dom())},member:function(n,t){return or(t,e(ta,n))},contains:tn,is:ut.is},wo=function(t){var r=t.dom();return n.from(r.parentNode).map(i.fromDom)},ia=function(t){var r=t.dom();return n.from(r.previousSibling).map(i.fromDom)},ra=function(t){var r=t.dom();return n.from(r.nextSibling).map(i.fromDom)},wf=function(n){var t=n.dom();return s(t.childNodes,i.fromDom)},bo=function(t,r){var u=t.dom().childNodes;return n.from(u[r]).map(i.fromDom)},ua=y("element","offset"),h={owner:function(n){return i.fromDom(n.dom().ownerDocument)},defaultView:function(n){var t=n.dom().ownerDocument.defaultView;return i.fromDom(t)},documentElement:function(n){return i.fromDom(n.dom().ownerDocument.documentElement)},parent:wo,findIndex:function(n){return wo(n).bind(function(t){var i=wf(t);return fi(i,function(t){return l.eq(n,t)})})},parents:function(n,r){for(var f,e,s=vu(r)?r:t(!1),u=n.dom(),o=[];null!==u.parentNode&&u.parentNode!==undefined;){if(f=u.parentNode,e=i.fromDom(f),o.push(e),!0===s(e))break;u=f}return o},siblings:function(n){return wo(n).map(wf).map(function(t){return lt(t,function(t){return!l.eq(n,t)})}).getOr([])},prevSibling:ia,offsetParent:function(t){var r=t.dom();return n.from(r.offsetParent).map(i.fromDom)},prevSiblings:function(n){return co(hl(n,ia))},nextSibling:ra,nextSiblings:function(n){return hl(n,ra)},children:wf,child:bo,firstChild:function(n){return bo(n,0)},lastChild:function(n){return bo(n,n.dom().childNodes.length-1)},childNodesCount:function(n){return n.dom().childNodes.length},hasChildNodes:function(n){return n.dom().hasChildNodes()},leaf:function(n,t){var i=wf(n);return 0<i.length&&t<i.length?ua(i[t],0):ua(n,t)}},ko=function(n,t,i){return si(h.children(n),function(n){return ut.is(n,t)?i(n)?[n]:[]:ko(n,t,i)})},ku={firstLayer:function(n,i){return ko(n,i,t(!0))},filterFirstLayer:ko},fa=function(n){return n.dom().nodeName.toLowerCase()},go=function(n){return n.dom().nodeType},ns=function(n){return function(t){return go(t)===n}},rn=ns(cr.ELEMENT),un=ns(cr.TEXT),fn=ns(cr.DOCUMENT),c={name:fa,type:go,value:function(n){return n.dom().nodeValue},isElement:rn,isText:un,isDocument:fn,isComment:function(n){return go(n)===cr.COMMENT||"#comment"===fa(n)}},ea=function(n,t,i){if(!(er(i)||kd(i)||rl(i)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,i+"")},oa=function(n,t,i){ea(n.dom(),t,i)},sa=function(n,t){var i=n.dom().getAttribute(t);return null===i?undefined:i},ts=function(n,t){var i=n.dom();return!(!i||!i.hasAttribute)&&i.hasAttribute(t)},r={clone:function(n){return ri(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},set:oa,setAll:function(n,t){var i=n.dom();hr(t,function(n,t){ea(i,t,n)})},get:sa,has:ts,remove:function(n,t){n.dom().removeAttribute(t)},hasNone:function(n){var t=n.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(n,t,i){c.isElement(n)&&c.isElement(t)&&u(i,function(i){var f,u,r;u=t;ts(f=n,r=i)&&!ts(u,r)&&oa(u,r,sa(f,r))})}},en=lr(function(){return ha(i.fromDom(document))}),ha=function(n){var t=n.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return i.fromDom(t)},yr={body:en,getBody:ha,inBody:function(n){var t=c.isText(n)?n.dom().parentNode:n.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)}},is=function(n,t){var i=[];return u(h.children(n),function(n){t(n)&&(i=i.concat([n]));i=i.concat(is(n,t))}),i},bf={all:function(n){return is(yr.body(),n)},ancestors:function(n,t,i){return lt(h.parents(n,i),t)},siblings:function(n,t){return lt(h.siblings(n),t)},children:function(n,t){return lt(h.children(n),t)},descendants:is},it={all:function(n){return ut.all(n)},ancestors:function(n,t,i){return bf.ancestors(n,function(n){return ut.is(n,t)},i)},siblings:function(n,t){return bf.siblings(n,function(n){return ut.is(n,t)})},children:function(n,t){return bf.children(n,function(n){return ut.is(n,t)})},descendants:function(n,t){return ut.all(t,n)}},kf,du,rs,us,la,aa=function(r,u,f){for(var o,e=r.dom(),s=vu(f)?f:t(!1);e.parentNode;){if(e=e.parentNode,o=i.fromDom(e),u(o))return n.some(o);if(s(o))break}return n.none()},va=function(n,t){return ui(n.dom().childNodes,fo(t,i.fromDom)).map(i.fromDom)},ya=function(t,r){var u=function(t){for(var e,f=0;f<t.childNodes.length;f++){if(r(i.fromDom(t.childNodes[f])))return n.some(i.fromDom(t.childNodes[f]));if(e=u(t.childNodes[f]),e.isSome())return e}return n.none()};return u(t.dom())},ei={first:function(n){return ya(yr.body(),n)},ancestor:aa,closest:function(n,t,i){return ca(function(n){return t(n)},aa,n,t,i)},sibling:function(t,r){var u=t.dom();return u.parentNode?va(i.fromDom(u.parentNode),function(n){return!l.eq(t,n)&&r(n)}):n.none()},child:va,descendant:ya},pa=function(n,t,i){return ei.ancestor(n,function(n){return ut.is(n,t)},i)},a={first:function(n){return ut.one(n)},ancestor:pa,sibling:function(n,t){return ei.sibling(n,function(n){return ut.is(n,t)})},child:function(n,t){return ei.child(n,function(n){return ut.is(n,t)})},descendant:function(n,t){return ut.one(t,n)},closest:function(n,t,i){return ca(ut.is,pa,n,t,i)}},fs=function(i,r,u){var f=u!==undefined?u:t(!1);return f(r)?n.none():ft(i,c.name(r))?n.some(r):a.ancestor(r,i.join(","),function(n){return ut.is(n,"table")||f(n)})},wa=function(n,t){return h.parent(t).map(function(t){return it.children(t,n)})},on=e(wa,"th,td"),sn=e(wa,"tr"),es=function(n,t){return parseInt(r.get(n,t),10)},g={cell:function(n,t){return fs(["td","th"],n,t)},firstCell:function(n){return a.descendant(n,"th,td")},cells:function(n){return ku.firstLayer(n,"th,td")},neighbourCells:on,table:function(n,t){return a.closest(n,"table",t)},row:function(n,t){return fs(["tr"],n,t)},rows:function(n){return ku.firstLayer(n,"tr")},notCell:function(n,t){return fs(["caption","tr","tbody","tfoot","thead"],n,t)},neighbourRows:sn,attr:es,grid:function(n,t,i){var r=es(n,t),u=es(n,i);return p.grid(r,u)}},ci=function(n){var t=g.rows(n);return s(t,function(n){var t=n,i=h.parent(t).map(function(n){var t=c.name(n);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}).getOr("tbody"),u=s(g.cells(n),function(n){var t=r.has(n,"rowspan")?parseInt(r.get(n,"rowspan"),10):1,i=r.has(n,"colspan")?parseInt(r.get(n,"colspan"),10):1;return p.detail(n,t,i)});return p.rowdata(t,u,i)})},hn=function(n,t){return s(n,function(n){var i=s(g.cells(n),function(n){var t=r.has(n,"rowspan")?parseInt(r.get(n,"rowspan"),10):1,i=r.has(n,"colspan")?parseInt(r.get(n,"colspan"),10):1;return p.detail(n,t,i)});return p.rowdata(n,i,t.section())})},os=function(n,t){return n+","+t},ba=function(n,t){var i=si(n.all(),function(n){return n.cells()});return lt(i,t)},b={generate:function(n){var i={},f=[],o=n.length,r=0,e;return u(n,function(n,t){var e=[];u(n.cells(),function(n){for(var s,f,o,h,c,u=0;i[os(t,u)]!==undefined;)u++;for(s=p.extended(n.element(),n.rowspan(),n.colspan(),t,u),f=0;f<n.colspan();f++)for(o=0;o<n.rowspan();o++)h=u+f,c=os(t+o,h),i[c]=s,r=Math.max(r,h+1);e.push(s)});f.push(p.rowdata(n.element(),e,n.section()))}),e=p.grid(o,r),{grid:t(e),access:t(i),all:t(f)}},getAt:function(t,i,r){var u=t.access()[os(i,r)];return u!==undefined?n.some(u):n.none()},findItem:function(t,i,r){var u=ba(t,function(n){return r(i,n.element())});return 0<u.length?n.some(u[0]):n.none()},filterItems:ba,justCells:function(n){var t=s(n.all(),function(n){return n.cells()});return ho(t)}},bi=function(n){return n.style!==undefined},ss=function(n,t,i){if(!er(i))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);bi(n)&&n.style.setProperty(t,i)},ka=function(n,t){bi(n)&&n.style.removeProperty(t)},hs=function(n,t,i){var r=n.dom();ss(r,t,i)},da=function(n,t){return bi(n)?n.style.getPropertyValue(t):""},df=function(t,i){var r=t.dom(),u=da(r,i);return n.from(u).filter(function(n){return 0<n.length})},v={copy:function(n,t){var i=n.dom(),r=t.dom();bi(i)&&bi(r)&&(r.style.cssText=i.style.cssText)},set:hs,preserve:function(n,t){var i=r.get(n,"style"),u=t(n);return(i===undefined?r.remove:r.set)(n,"style",i),u},setAll:function(n,t){var i=n.dom();hr(t,function(n,t){ss(i,t,n)})},setOptions:function(n,t){var i=n.dom();hr(t,function(n,t){n.fold(function(){ka(i,t)},function(n){ss(i,t,n)})})},remove:function(n,t){var i=n.dom();ka(i,t);r.has(n,"style")&&""===r.get(n,"style").replace(/^\s+|\s+$/g,"")&&r.remove(n,"style")},get:function(n,t){var i=n.dom(),r=window.getComputedStyle(i).getPropertyValue(t),u=""!==r||yr.inBody(n)?r:da(i,t);return null===u?undefined:u},getRaw:df,getAllRaw:function(n){var u={},t=n.dom(),i,r;if(bi(t))for(i=0;i<t.style.length;i++)r=t.style.item(i),u[r]=t.style[r];return u},isValidValue:function(n,t,r){var u=i.fromTag(n);return hs(u,t,r),df(u,t).isSome()},reflow:function(n){return n.dom().offsetWidth},transfer:function(n,t,i){c.isElement(n)&&c.isElement(t)&&u(i,function(i){var r,u;r=t;df(n,u=i).each(function(n){df(r,u).isNone()&&hs(r,u,n)})})}},gf=function(n,t){h.parent(n).each(function(i){i.dom().insertBefore(t.dom(),n.dom())})},gu=function(n,t){n.dom().appendChild(t.dom())},w={before:gf,after:function(n,t){h.nextSibling(n).fold(function(){h.parent(n).each(function(n){gu(n,t)})},function(n){gf(n,t)})},prepend:function(n,t){h.firstChild(n).fold(function(){gu(n,t)},function(i){n.dom().insertBefore(t.dom(),i.dom())})},append:gu,appendAt:function(n,t,i){h.child(n,i).fold(function(){gu(n,t)},function(n){gf(n,t)})},wrap:function(n,t){gf(n,t);gu(t,n)}},ki={before:function(n,t){u(t,function(t){w.before(n,t)})},after:function(n,t){u(t,function(i,r){var u=0===r?n:t[r-1];w.after(u,i)})},prepend:function(n,t){u(t.slice().reverse(),function(t){w.prepend(n,t)})},append:function(n,t){u(t,function(t){w.append(n,t)})}},cs=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},st={empty:function(n){n.dom().textContent="";u(h.children(n),function(n){cs(n)})},remove:cs,unwrap:function(n){var t=h.children(n);0<t.length&&ki.before(n,t);cs(n)}},cn=y("minRow","minCol","maxRow","maxCol"),ln=function(n,t){var l,a,y,o,s,h,c,f,e,p,k=function(n){return ut.is(n.element(),t)},d=ci(n),g=b.generate(d),nt=(a=k,y=(l=g).grid().columns(),o=l.grid().rows(),s=y,c=h=0,hr(l.access(),function(n){if(a(n)){var t=n.row(),r=t+n.rowspan()-1,i=n.column(),u=i+n.colspan()-1;t<o?o=t:h<r&&(h=r);i<s?s=i:c<u&&(c=u)}}),cn(o,s,h,c)),tt="th:not("+t+"),td:not("+t+")",it=ku.filterFirstLayer(n,"th,td",function(n){return ut.is(n,tt)});return u(it,st.remove),function(n,t,r,u){for(var s,e,h,c,o,l=t.grid().columns(),a=t.grid().rows(),f=0;f<a;f++)for(s=!1,e=0;e<l;e++)f<r.minRow()||f>r.maxRow()||e<r.minCol()||e>r.maxCol()||(b.getAt(t,f,e).filter(u).isNone()?(h=s,c=n[f].element(),o=i.fromTag("td"),w.append(o,i.fromTag("br")),(h?w.append:w.prepend)(c,o)):s=!0)}(d,g,nt,k),f=n,e=nt,p=lt(ku.firstLayer(f,"tr"),function(n){return 0===n.dom().childElementCount}),u(p,st.remove),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||u(ku.firstLayer(f,"th,td"),function(n){r.remove(n,"rowspan");r.remove(n,"colspan")}),r.remove(f,"width"),r.remove(f,"height"),v.remove(f,"width"),v.remove(f,"height"),n},ga=function(n,t){return i.fromDom(n.dom().cloneNode(t))},nv=function(n){return ga(n,!0)},an=function(n,t){var u=i.fromTag(t),f=r.clone(n);return r.setAll(u,f),u},tv=function(n){return ga(n,!1)},ls=nv,vn=function(n,t){var i=an(n,t),r=h.children(nv(n));return ki.append(i,r),i},as=(kf=c.isText,du="text",rs=function(t){return kf(t)?n.from(t.dom().nodeValue):n.none()},us=vr.detect().browser,{get:function(n){if(!kf(n))throw new Error("Can only get "+du+" value of a "+du+" node");return la(n).getOr("")},getOption:la=us.isIE()&&10===us.version.major?function(t){try{return rs(t)}catch(i){return n.none()}}:rs,set:function(n,t){if(!kf(n))throw new Error("Can only set raw "+du+" value of a "+du+" node");n.dom().nodeValue=t}}),di={get:function(n){return as.get(n)},getOption:function(n){return as.getOption(n)},set:function(n,t){as.set(n,t)}},yn=function(n){return"img"===c.name(n)?1:di.getOption(n).fold(function(){return h.children(n).length},function(n){return n.length})},pn=["img","br"],li=yn,iv=function(n){return di.getOption(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf(" ")}).isSome()||ft(pn,c.name(n))},wn=function(t,i){var r=function(t){for(var f,o,e=h.children(t),u=e.length-1;0<=u;u--){if(f=e[u],i(f))return n.some(f);if(o=r(f),o.isSome())return o}return n.none()};return r(t)},gi={first:function(n){return ei.descendant(n,iv)},last:function(n){return wn(n,iv)}},vs=function(){var n=i.fromTag("td");return w.append(n,i.fromTag("br")),n},bn=function(n,t,i){var u=vn(n,t);return hr(i,function(n,t){null===n?r.remove(u,t):r.set(u,t,n)}),u},kn=function(n){return n},rv=function(n){return function(){return i.fromTag("tr",n.dom())}},uv=function(n,t,u){return{row:rv(t),cell:function(t){var e,o,s,y=h.owner(t.element()),f=i.fromTag(c.name(t.element()),y.dom()),a=u.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),p=0<a.length?(e=t.element(),o=f,s=a,gi.first(e).map(function(n){var t=s.join(","),i=it.ancestors(n,t,function(n){return l.eq(n,e)});return sr(i,function(n,t){var i=tv(t);return r.remove(i,"contenteditable"),w.append(n,i),i},o)}).getOr(o)):f;return w.append(p,i.fromTag("br")),v.copy(t.element(),f),v.remove(f,"height"),1!==t.colspan()&&v.remove(t.element(),"width"),n(t.element(),f),f},replace:bn,gap:vs}},fv=function(n){return{row:rv(n),cell:vs,replace:kn,gap:vs}},dn=function(n,t){var r=(t||document).createElement("div");return r.innerHTML=n,h.children(i.fromDom(r))},gn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ev=y("left","right"),ov=function(n,i,r){var u=n.property().children(i);return fi(u,e(n.eq,r)).map(function(n){return{before:t(u.slice(0,n)),after:t(u.slice(n+1))}})},ntt=function(n,t,i){return ov(n,t,i).map(function(r){var u=n.create().clone(t);return n.insert().appendAll(u,r.before().concat([i])),n.insert().appendAll(t,r.after()),n.insert().before(t,u),ev(u,t)})},ttt=function(n,t,i){return ov(n,t,i).map(function(i){var r=n.create().clone(t);return n.insert().appendAll(r,i.after()),n.insert().after(t,r),ev(t,r)})},itt=function(t,i,r,u){var f=y("first","second","splits"),e=function(i,o,s){var h=f(i,n.none(),s);return r(i)?f(i,o,s):t.property().parent(i).bind(function(f){return u(t,f,i).map(function(t){var i=[{first:t.left,second:t.right}],u=r(f)?f:t.left();return e(u,n.some(t.right()),s.concat(i))}).getOr(h)})};return e(i,n.none(),[])},rtt=function(n,t,i,r){var u=t(n,i);return sr(r,function(i,r){var u=t(n,r);return utt(n,i,u)},u)},utt=function(n,t,i){return t.bind(function(t){return i.filter(e(n.eq,t))})},ftt=function(t,i,r){return 0<r.length?rtt(t,i,(u=r)[0],u.slice(1)):n.none();var u},ps=function(n,t){return e(n.eq,t)},sv=function(n,i,r,u){var s=u!==undefined?u:t(!1),h=[i].concat(n.up().all(i)),c=[r].concat(n.up().all(r)),f=function(n){return fi(n,s).fold(function(){return n},function(t){return n.slice(0,t+1)})},e=f(h),o=f(c),l=ui(e,function(t){return or(o,ps(n,t))});return{firstpath:t(e),secondpath:t(o),shared:t(l)}},ett=function(t,i,r){var u=sv(t,i,r);return u.shared().bind(function(i){return function(t,i,r,u){var f=t.property().children(i);if(t.eq(i,r[0]))return n.some([r[0]]);if(t.eq(i,u[0]))return n.some([u[0]]);var e=function(n){var r=co(n),u=fi(r,ps(t,i)).getOr(-1),e=u<r.length-1?r[u+1]:r[u];return fi(f,ps(t,e))},o=e(r),s=e(u);return o.bind(function(n){return s.map(function(t){var i=Math.min(n,t),r=Math.max(n,t);return f.slice(i,r+1)})})}(t,i,u.firstpath(),u.secondpath())})},ott=sv,stt=function(n,t,i){return ftt(n,t,i)},htt=function(n,t,i){return ett(n,t,i)},ctt=function(n,t,i,r){return ott(n,t,i,r)},ltt=function(n,t,i){return ntt(n,t,i)},att=function(n,t,i){return ttt(n,t,i)},vtt=function(n,t,i,r){return itt(n,t,i,r)},pr=ys(),ne={sharedOne:function(n,t){return stt(pr,function(t,i){return n(i)},t)},subset:function(n,t){return htt(pr,n,t)},ancestors:function(n,t,i){return ctt(pr,n,t,i)},breakToLeft:function(n,t){return ltt(pr,n,t)},breakToRight:function(n,t){return att(pr,n,t)},breakPath:function(n,t,i){return vtt(pr,n,t,function(n,t,r){return i(t,r)})}},ytt=function(n,t){return t.column()>=n.startCol()&&t.column()+t.colspan()-1<=n.finishCol()&&t.row()>=n.startRow()&&t.row()+t.rowspan()-1<=n.finishRow()},ptt=function(n,t){var i=t.column(),r=t.column()+t.colspan()-1,u=t.row(),f=t.row()+t.rowspan()-1;return i<=n.finishCol()&&r>=n.startCol()&&u<=n.finishRow()&&f>=n.startRow()},wtt=function(t,i){for(var r,u=!0,o=e(ytt,i),f=i.startRow();f<=i.finishRow();f++)for(r=i.startCol();r<=i.finishCol();r++)u=u&&b.getAt(t,f,r).exists(o);return u?n.some(i):n.none()},hv=function(n,t,i){var r=b.findItem(n,t,l.eq),u=b.findItem(n,i,l.eq);return r.bind(function(n){return u.map(function(t){return i=n,r=t,p.bounds(Math.min(i.row(),r.row()),Math.min(i.column(),r.column()),Math.max(i.row()+i.rowspan()-1,r.row()+r.rowspan()-1),Math.max(i.column()+i.colspan()-1,r.column()+r.colspan()-1));var i,r})})},btt=hv,ktt=function(n,t,i){return hv(n,t,i).bind(function(t){return wtt(n,t)})},dtt=function(n,t,i,r){return b.findItem(n,t,l.eq).bind(function(t){var u=0<i?t.row()+t.rowspan()-1:t.row(),f=0<r?t.column()+t.colspan()-1:t.column();return b.getAt(n,u+i,f+r).map(function(n){return n.element()})})},cv=function(n,t,i){return btt(n,t,i).map(function(t){var i=b.filterItems(n,e(ptt,t));return s(i,function(n){return n.element()})})},lv=function(n,t){return b.findItem(n,t,function(n,t){return l.contains(t,n)}).bind(function(n){return n.element()})},te=function(n){var t=ci(n);return b.generate(t)},gtt=function(n,t,i){return g.table(n).bind(function(r){var u=te(r);return dtt(u,n,t,i)})},nit=function(n,t,i){var r=te(n);return cv(r,t,i)},ws=function(n,t,i,r,u){var f=te(n),e=l.eq(n,i)?t:lv(f,t),o=l.eq(n,u)?r:lv(f,r);return cv(f,e,o)},tit=function(n,t,i){var r=te(n);return ktt(r,t,i)},bs=function(n){return a.ancestor(n,"table")},nf=vo(["boxes","start","finish"],[]),av=function(t,i,r){var u=function(n){return function(t){return r(t)||l.eq(t,n)}};return l.eq(t,i)?n.some(nf({boxes:n.some([t]),start:t,finish:i})):bs(t).bind(function(f){return bs(i).bind(function(e){var s,o,h;return l.eq(f,e)?n.some(nf({boxes:nit(f,t,i),start:t,finish:i})):l.contains(f,e)?(s=0<(o=it.ancestors(i,"td,th",u(f))).length?o[o.length-1]:i,n.some(nf({boxes:ws(f,t,f,i,e),start:t,finish:s}))):l.contains(e,f)?(h=0<(o=it.ancestors(t,"td,th",u(e))).length?o[o.length-1]:t,n.some(nf({boxes:ws(e,t,f,i,e),start:t,finish:h}))):ne.ancestors(t,i).shared().bind(function(o){return a.closest(o,"table",r).bind(function(r){var o=it.ancestors(i,"td,th",u(r)),h=0<o.length?o[o.length-1]:i,s=it.ancestors(t,"td,th",u(r)),c=0<s.length?s[s.length-1]:t;return n.some(nf({boxes:ws(r,t,f,i,e),start:c,finish:h}))})})})})},vv=av,ks=function(t,i){var r=it.descendants(t,i);return 0<r.length?n.some(r):n.none()},iit=function(n,i,r,u,f){return(e=n,o=f,ui(e,function(n){return ut.is(n,o)})).bind(function(n){return gtt(n,i,r).bind(function(n){return i=n,r=u,a.ancestor(i,"table").bind(function(n){return a.descendant(n,r).bind(function(n){return av(n,i).bind(function(n){return n.boxes().map(function(i){return{boxes:t(i),start:t(n.start()),finish:t(n.finish())}})})})});var i,r})});var e,o},yv=function(n,i,r){return a.descendant(n,i).bind(function(i){return a.descendant(n,r).bind(function(n){return ne.sharedOne(bs,[i,n]).map(function(r){return{first:t(i),last:t(n),table:t(r)}})})})},rit=function(n,t){return ks(n,t)},uit=function(t,i,r){return yv(t,i,r).bind(function(i){var r=function(n){return l.eq(t,n)},u=a.ancestor(i.first(),"thead,tfoot,tbody,table",r),f=a.ancestor(i.last(),"thead,tfoot,tbody,table",r);return u.bind(function(t){return f.bind(function(r){return l.eq(t,r)?tit(i.table(),i.first(),i.last()):n.none()})})})},nr={selected:t("data-mce-selected"),selectedSelector:t("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:t("[data-mce-selected]"),firstSelected:t("data-mce-first-selected"),firstSelectedSelector:t("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:t("data-mce-last-selected"),lastSelectedSelector:t("td[data-mce-last-selected],th[data-mce-last-selected]")},wr=function(n){if(!yf(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],i={};return u(n,function(r,u){var o=pu(r),f,e;if(1!==o.length)throw new Error("one and only one name per case");if(f=o[0],e=r[f],i[f]!==undefined)throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!yf(e))throw new Error("case arguments must be an array");t.push(f);i[f]=function(){var o=arguments.length,i,r;if(o!==e.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+e.length+" ("+e+"), got "+o);for(i=new Array(o),r=0;r<i.length;r++)i[r]=arguments[r];return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);return arguments[u].apply(null,i)},match:function(n){var r=pu(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!yu(t,function(n){return ft(r,n)}))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[f].apply(null,i)},log:function(n){console.log(n,{constructors:t,constructor:f,params:i})}}}}),i},ds=wr([{none:[]},{multiple:["elements"]},{single:["selection"]}]),br={cata:function(n,t,i,r){return n.fold(t,i,r)},none:ds.none,multiple:ds.multiple,single:ds.single},pv=function(n,i){return br.cata(i.get(),t([]),dt,t([n]))},fit=function(i,r){return br.cata(r.get(),n.none,function(r){return 0===r.length?n.none():uit(i,nr.firstSelectedSelector(),nr.lastSelectedSelector()).bind(function(i){return 1<r.length?n.some({bounds:t(i),cells:t(r)}):n.none()})},n.none)},eit=function(t,i){var u=pv(t,i);return 0<u.length&&yu(u,function(n){return r.has(n,"rowspan")&&1<parseInt(r.get(n,"rowspan"),10)||r.has(n,"colspan")&&1<parseInt(r.get(n,"colspan"),10)})?n.some(u):n.none()},wv=pv,bv=function(i){return{element:t(i),mergable:n.none,unmergable:n.none,selection:t([i])}},oit=y("element","clipboard","generators"),kr={noMenu:bv,forMenu:function(n,i,r){return{element:t(r),mergable:t(fit(i,n)),unmergable:t(eit(r,n)),selection:t(wv(r,n))}},notCell:function(n){return bv(n)},paste:oit,pasteRows:function(i,r,u,f,e){return{element:t(u),mergable:n.none,unmergable:n.none,selection:t(wv(u,i)),clipboard:t(f),generators:t(e)}}},sit=function(t,r,u,e){t.on("BeforeGetContent",function(n){!0===n.selection&&br.cata(r.get(),f,function(i){var r;n.preventDefault();(r=i,g.table(r[0]).map(ls).map(function(n){return[ln(n,nr.attributeSelector())]})).each(function(i){n.content=s(i,function(n){return i=n,t.selection.serializer.serialize(i.dom(),{});var i}).join("")})},f)});t.on("BeforeSetContent",function(r){!0===r.selection&&!0===r.paste&&n.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(n){var f=i.fromDom(n);g.table(f).bind(function(n){var o=lt(dn(r.content),function(n){return"meta"!==c.name(n)});if(1===o.length&&"table"===c.name(o[0])){r.preventDefault();var s=i.fromDom(t.getDoc()),h=fv(s),l=kr.paste(f,o[0],h);u.pasteCells(n,l).each(function(i){t.selection.setRng(i);t.focus();e.clear(n)})}})})})},dv=kv("height",function(n){var t=n.dom();return yr.inBody(n)?t.getBoundingClientRect().height:t.offsetHeight}),gs=function(n){return dv.get(n)},gv=function(n){return dv.getOuter(n)},ny=kv("width",function(n){return n.dom().offsetWidth}),tr=function(n){return ny.get(n)},ty=function(n){return ny.getOuter(n)},iy=vr.detect(),tf=function(n,t,i){return u=v.get(n,t),f=i,r=parseFloat(u),isNaN(r)?f:r;var u,f,r},hit=function(n){return iy.browser.isIE()||iy.browser.isEdge()?(r=tf(t=n,"padding-top",0),u=tf(t,"padding-bottom",0),f=tf(t,"border-top-width",0),e=tf(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height,"border-box"===v.get(t,"box-sizing")?i:i-r-u-(f+e)):tf(n,"height",gs(n));var t,r,u,f,e,i},ry=/(\d+(\.\d+)?)(\w|%)*/,rf=/(\d+(\.\d+)?)%/,nh=/(\d+(\.\d+)?)px|em/,uy=function(n,t){v.set(n,"height",t+"px")},cit=function(n,t,i,r){var f,e,l,a,o,v,s,u,h,y=parseInt(n,10);return u=v="%",h=(s=n).length-v.length,""!==u&&(s.length<u.length||s.substr(h,h+u.length)!==u)||"table"===c.name(t)?y:(f=t,e=y,l=i,a=r,o=g.table(f).map(function(n){var t=l(n);return Math.floor(e/100*t)}).getOr(e),a(f,o),o)},lit=function(n){var t,i=(t=n,v.getRaw(t,"height").getOrThunk(function(){return hit(t)+"px"}));return i?cit(i,n,gs,uy):gs(n)},ait=function(n,t){return r.has(n,t)?parseInt(r.get(n,t),10):1},ie=function(t){return v.getRaw(t,"width").fold(function(){return n.from(r.get(t,"width"))},function(t){return n.some(t)})},fy=function(n,t){return n/t.pixelWidth()*100},nt={percentageBasedSizeRegex:t(rf),pixelBasedSizeRegex:t(nh),setPixelWidth:function(n,t){v.set(n,"width",t+"px")},setPercentageWidth:function(n,t){v.set(n,"width",t+"%")},setHeight:uy,getPixelWidth:function(n,t){return ie(n).fold(function(){return tr(n)},function(i){return function(n,t,i){var r,u,f;return nh.test(t)?(r=nh.exec(t),parseInt(r[1],10)):rf.test(t)?(u=rf.exec(t),f=parseFloat(u[1]),f/100*i.pixelWidth()):tr(n)}(n,i,t)})},getPercentageWidth:function(n,t){return ie(n).fold(function(){var i=tr(n);return fy(i,t)},function(i){return function(n,t,i){var r,u;return rf.test(t)?(r=rf.exec(t),parseFloat(r[1])):(u=tr(n),fy(u,i))}(n,i,t)})},getGenericWidth:function(i){return ie(i).bind(function(i){if(ry.test(i)){var r=ry.exec(i);return n.some({width:t(r[1]),unit:t(r[3])})}return n.none()})},setGenericWidth:function(n,t,i){v.set(n,"width",t+i)},getHeight:function(n){return i="rowspan",lit(t=n)/ait(t,i);var t,i},getRawWidth:ie},ey=function(n,t){nt.getGenericWidth(n).each(function(i){var r=i.width()/2;nt.setGenericWidth(n,r,i.unit());nt.setGenericWidth(t,r,i.unit())})},vit=function(n,t){var r=t||i.fromDom(document.documentElement);return ei.ancestor(n,e(l.eq,r)).isSome()},yit=function(n){var t=n.dom();return t===t.window&&n instanceof Window?n:c.isDocument(n)?t.defaultView||t.parentWindow:null},oy=function(n,i){return{left:t(n),top:t(i),translate:function(t,r){return oy(n+t,i+r)}}},ai=oy,re=function(n,t){return n!==undefined?n:t!==undefined?t:0},pit=function(n){var t,r=n.dom(),f=r.ownerDocument,u=f.body,e=i.fromDom(f.documentElement);return u===r?ai(u.offsetLeft,u.offsetTop):vit(n,e)?(t=r.getBoundingClientRect(),ai(t.left,t.top)):ai(0,0)},ue=function(n){var r=n.dom().ownerDocument,u=r.body,f=yit(i.fromDom(r)),t=r.documentElement,e=re(f.pageYOffset,t.scrollTop),o=re(f.pageXOffset,t.scrollLeft),s=re(t.clientTop,u.clientTop),h=re(t.clientLeft,u.clientLeft);return pit(n).translate(o-h,e-s)},sy=y("row","y"),hy=y("col","x"),cy=function(n){return ue(n).left()+ty(n)},ly=function(n){return ue(n).left()},ay=function(n,t){return hy(n,ly(t))},vy=function(n,t){return hy(n,cy(t))},th=function(n){return ue(n).top()},ih=function(n,t,i){if(0===i.length)return[];var r=s(i.slice(1),function(t,i){return t.map(function(t){return n(i,t)})}),u=i[i.length-1].map(function(n){return t(i.length-1,n)});return r.concat([u])},wit={delta:dt,positions:e(ih,function(n,t){return sy(n,th(t))},function(n,t){return sy(n,th(t)+gv(t))}),edge:th},bit={delta:dt,edge:ly,positions:e(ih,ay,vy)},fe={height:wit,rtl:{delta:function(n){return-n},edge:cy,positions:e(ih,vy,ay)},ltr:bit},yy={ltr:fe.ltr,rtl:fe.rtl},wy,by=function(n){var t=ci(n);return b.generate(t).grid()},uf=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return uf(i())}}},kit=function(n,t,i){if(0===t.length)throw new Error("You must specify at least one required field.");return ao("required",t),el(t),function(r){var u=pu(r),f;return yu(t,function(n){return ft(u,n)})||ul(t,u),n(t,u),f=lt(t,function(n){return!i.validate(r[n],n)}),0<f.length&&function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+wu(n).join(", ")+") were not.");}(f,i.label),r}},dit=function(n,t){var i=lt(t,function(t){return!ft(n,t)});0<i.length&&fl(i)},ee=function(n){return kit(dit,n,{validate:vu,label:"function"})},git=function(n){var i=r.has(n,"colspan")?parseInt(r.get(n,"colspan"),10):1,u=r.has(n,"rowspan")?parseInt(r.get(n,"rowspan"),10):1;return{element:t(n),colspan:t(i),rowspan:t(u)}},rh=ee(["cell","row","replace","gap"]),et=function(t,i){rh(t);var r=uf(n.none()),e=i!==undefined?i:git,o=function(n){var i,r=e(n);return i=r,t.cell(i)},u=function(t){var i=o(t);return r.get().isNone()&&r.set(n.some(i)),f=n.some({item:t,replacement:i}),i},f=n.none();return{getOrInit:function(n,t){return f.fold(function(){return u(n)},function(i){return t(n,i.item)?i.replacement:u(n)})},cursor:r.get}},oe=function(t,i){return function(r){var u=uf(n.none()),f,e;return rh(r),f=[],e=function(e){var o=r.replace(e,i,{scope:t});return f.push({item:e,sub:o}),u.get().isNone()&&u.set(n.some(o)),o},{replaceOrInit:function(n,t){return(i=n,r=t,ui(f,function(n){return r(n.item,i)})).fold(function(){return e(n)},function(i){return t(n,i.item)?i.sub:e(n)});var i,r},cursor:u.get}}},ky=function(i){rh(i);var r=uf(n.none());return{combine:function(u){return r.get().isNone()&&r.set(n.some(u)),function(){var n=i.cell({element:t(u),colspan:t(1),rowspan:t(1)});return v.remove(n,"width"),v.remove(u,"width"),n}},cursor:r.get}},nrt=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],trt=function(n,t){var i=n.property().name(t);return ft(nrt,i)},irt=function(n,t){return ft(["br","img","hr","input"],n.property().name(t))},rrt=trt,urt=function(n,t){var i=n.property().name(t);return ft(["ol","ul"],i)},frt=irt,uh=ys(),fh=function(n){return rrt(uh,n)},ert=function(n){return urt(uh,n)},ort=function(n){return frt(uh,n)},srt=function(n){var t,r=function(n){return"br"===c.name(n)},u=function(n){return gi.last(n).bind(function(t){var u,f=(u=t,h.nextSibling(u).map(function(n){return!!fh(n)||(ort(n)?"img"!==c.name(n):void 0)}).getOr(!1));return h.parent(t).map(function(u){return!0===f||(e=u,"li"===c.name(e)||ei.ancestor(e,ert).isSome())||r(t)||fh(u)&&!l.eq(n,u)?[]:[i.fromTag("br")];var e})}).getOr([])},f=0===(t=si(n,function(n){var t=h.children(n);return yu(t,function(n){return r(n)||c.isText(n)&&0===di.get(n).trim().length})?[]:t.concat(u(n))})).length?[i.fromTag("br")]:t;st.empty(n[0]);ki.append(n[0],f)},hrt=Object.prototype.hasOwnProperty,eh=(wy=function(n,t){return t},function(){for(var r,u,f,i,n=new Array(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Can't merge zero objects");for(r={},u=0;u<n.length;u++){f=n[u];for(i in f)hrt.call(f,i)&&(r[i]=wy(r[i],f[i]))}return r}),dy=function(n){for(var i=[],r=function(n){i.push(n)},t=0;t<n.length;t++)n[t].each(r);return i},dr=function(t,i){for(var u,r=0;r<t.length;r++)if(u=i(t[r],r),u.isSome())return u;return n.none()},gy=function(n,t){return p.rowcells(t,n.section())},np=function(n,t){return n.cells()[t]},o={addCell:function(n,t,i){var r=n.cells(),u=r.slice(0,t),f=r.slice(t),e=u.concat([i]).concat(f);return gy(n,e)},setCells:gy,mutateCell:function(n,t,i){n.cells()[t]=i},getCell:np,getCellElement:function(n,t){return np(n,t).element()},mapCells:function(n,t){var i=n.cells(),r=s(i,t);return p.rowcells(r,n.section())},cellLength:function(n){return n.cells().length}},tp=function(n,t){if(0===n.length)return 0;var i=n[0];return fi(n,function(n){return!t(i.element(),n.element())}).fold(function(){return n.length},function(n){return n})},crt=function(n,i,r,u){var f,e,h,c,l=(f=n,e=i,f[e]).cells().slice(r),a=tp(l,u),v=(h=n,c=r,s(h,function(n){return o.getCell(n,c)})).slice(i),y=tp(v,u);return{colspan:t(a),rowspan:t(y)}},lrt=function(n,t){var i=s(n,function(n){return s(n.cells(),function(){return!1})});return s(n,function(r,u){var f=si(r.cells(),function(r,f){if(!1===i[u][f]){var e=crt(n,u,f,t);return function(n,t,r,u){for(var e,f=n;f<n+r;f++)for(e=t;e<t+u;e++)i[f][e]=!0}(u,f,e.rowspan(),e.colspan()),[p.detailnew(r.element(),e.rowspan(),e.colspan(),r.isNew())]}return[]});return p.rowdetails(f,r.section())})},se=function(n,t,i){for(var e,u,o,s,f=[],r=0;r<n.grid().rows();r++){for(e=[],u=0;u<n.grid().columns();u++)o=b.getAt(n,r,u).map(function(n){return p.elementnew(n.element(),i)}).getOrThunk(function(){return p.elementnew(t.gap(),!0)}),e.push(o);s=p.rowcells(e,n.all()[r].section());f.push(s)}return f},he=function(n,t,i,u){i===u?r.remove(n,t):r.set(n,t,i)},art=function(n,r){var e=[],o=[],f=function(t,r){var f;0<t.length?function(t,r){var f=a.child(n,r).getOrThunk(function(){var t=i.fromTag(r,h.owner(n).dom());return w.append(n,t),t}),c;st.empty(f);c=s(t,function(n){n.isNew()&&e.push(n.element());var t=n.element();return st.empty(t),u(n.cells(),function(n){n.isNew()&&o.push(n.element());he(n.element(),"colspan",n.colspan(),1);he(n.element(),"rowspan",n.rowspan(),1);w.append(t,n.element())}),t});ki.append(f,c)}(t,r):(f=r,a.child(n,f).each(st.remove))},c=[],l=[],v=[];return u(r,function(n){switch(n.section()){case"thead":c.push(n);break;case"tbody":l.push(n);break;case"tfoot":v.push(n)}}),f(c,"thead"),f(l,"tbody"),f(v,"tfoot"),{newRows:t(e),newCells:t(o)}},vrt=function(n){return s(n,function(n){var t=tv(n.element());return u(n.cells(),function(n){var i=ls(n.element());he(i,"colspan",n.colspan(),1);he(i,"rowspan",n.rowspan(),1);w.append(t,i)}),t})},yrt=function(n,t){for(var r=[],i=0;i<n;i++)r.push(t(i));return r},ff=function(n,t){for(var r=[],i=n;i<t;i++)r.push(i);return r},ip=function(t,i){if(i<0||i>=t.length-1)return n.none();var r=t[i].fold(function(){var n=co(t.slice(0,i));return dr(n,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(t){return n.some({value:t,delta:0})}),u=t[i+1].fold(function(){var n=t.slice(i+1);return dr(n,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(t){return n.some({value:t,delta:1})});return r.bind(function(n){return u.map(function(t){var i=t.delta+n.delta;return Math.abs(t.value-n.value)/i})})},rp=function(t,i,r){var u=t();return ui(u,i).orThunk(function(){return n.from(u[0]).orThunk(r)}).map(function(n){return n.element()})},up=function(n){var i=n.grid(),r=ff(0,i.columns()),u=ff(0,i.rows());return s(r,function(i){return rp(function(){return si(u,function(r){return b.getAt(n,r,i).filter(function(n){return n.column()===i}).fold(t([]),function(n){return[n]})})},function(n){return 1===n.colspan()},function(){return b.getAt(n,0,i)})})},fp=function(n){var i=n.grid(),r=ff(0,i.rows()),u=ff(0,i.columns());return s(r,function(i){return rp(function(){return si(u,function(r){return b.getAt(n,i,r).filter(function(n){return n.row()===i}).fold(t([]),function(n){return[n]})})},function(n){return 1===n.rowspan()},function(){return b.getAt(n,i,0)})})},prt=function(n,t,u,f,e){var o=i.fromTag("div");return v.setAll(o,{position:"absolute",left:t-f/2+"px",top:u+"px",height:e+"px",width:f+"px"}),r.setAll(o,{"data-column":n,role:"presentation"}),o},wrt=function(n,t,u,f,e){var o=i.fromTag("div");return v.setAll(o,{position:"absolute",left:t+"px",top:u-e/2+"px",height:e+"px",width:f+"px"}),r.setAll(o,{"data-row":n,role:"presentation"}),o},ep=function(n){var t=n.replace(/\./g,"-");return{resolve:function(n){return t+"-"+n}}},ce={resolve:ep("ephox-snooker").resolve},oh=function(n,t){var i=r.get(n,t);return i===undefined||""===i?[]:i.split(" ")},brt=oh,krt=function(n,t,i){var u=oh(n,t).concat([i]);return r.set(n,t,u.join(" ")),!0},drt=function(n,t,i){var u=lt(oh(n,t),function(n){return n!==i});return 0<u.length?r.set(n,t,u.join(" ")):r.remove(n,t),!1},op=function(n){return brt(n,"class")},sp=function(n,t){return krt(n,"class",t)},hp=function(n,t){return drt(n,"class",t)},grt=op,cp=sp,lp=hp,nut=function(n,t){return ft(op(n),t)?hp(n,t):sp(n,t)},gr=function(n){return n.dom().classList!==undefined},ap=function(n,t){return gr(n)&&n.dom().classList.contains(t)},at={add:function(n,t){gr(n)?n.dom().classList.add(t):cp(n,t)},remove:function(n,t){var i;gr(n)?n.dom().classList.remove(t):lp(n,t);0===(gr(i=n)?i.dom().classList:grt(i)).length&&r.remove(i,"class")},toggle:function(n,t){return gr(n)?n.dom().classList.toggle(t):nut(n,t)},toggler:function(n,t){var r,u,f,i,e,o,s=gr(n),h=n.dom().classList;return r=function(){s?h.remove(t):lp(n,t)},u=function(){s?h.add(t):cp(n,t)},f=ap(n,t),i=f||!1,{on:e=function(){u();i=!0},off:o=function(){r();i=!1},toggle:function(){(i?o:e)()},isOn:function(){return i}}},has:ap},sh=ce.resolve("resizer-bar"),vp=ce.resolve("resizer-rows"),yp=ce.resolve("resizer-cols"),pp=function(n){var t=it.descendants(n.parent(),"."+sh);u(t,st.remove)},wp=function(n,t,i){var r=n.origin();u(t,function(t){t.each(function(t){var u=i(r,t);at.add(u,sh);w.append(n.parent(),u)})})},tut=function(n,t,i,r,u,f){var e,o,s,h,c=ue(t),w=0<i.length?u.positions(i,t):[],l,a,v,y,p;e=n;o=w;s=c;h=ty(t);wp(e,o,function(n,t){var i=wrt(t.row(),s.left()-n.left(),t.y()-n.top(),h,7);return at.add(i,vp),i});p=0<r.length?f.positions(r,t):[];l=n;a=p;v=c;y=gv(t);wp(l,a,function(n,t){var i=prt(t.col(),t.x()-n.left(),v.top()-n.top(),7,y);return at.add(i,yp),i})},bp=function(n,t){var i=it.descendants(n.parent(),"."+sh);u(i,t)},gt={refresh:function(n,t,i,r){pp(n);var f=ci(t),u=b.generate(f),e=fp(u),o=up(u);tut(n,t,e,o,i,r)},hide:function(n){bp(n,function(n){v.set(n,"display","none")})},show:function(n){bp(n,function(n){v.set(n,"display","block")})},destroy:pp,isRowBar:function(n){return at.has(n,vp)},isColBar:function(n){return at.has(n,yp)}},iut=function(n,t){return s(n,function(n){var i,r=(i=n.details(),dr(i,function(n){return h.parent(n.element()).map(function(n){var t=h.parent(n).isNone();return p.elementnew(n,t)})}).getOrThunk(function(){return p.elementnew(t.row(),!0)}));return p.rowdatanew(r.element(),n.details(),n.section(),r.isNew())})},kp=function(n,t){var i=lrt(n,l.eq);return iut(i,t)},le=function(n,t){var i=ho(s(n.all(),function(n){return n.cells()}));return ui(i,function(n){return l.eq(t,n.element())})},d=function(i,r,u,f,e){return function(o,s,h,c,a){var y=ci(s),v=b.generate(y);return r(v,h).map(function(n){var u=se(v,c,!1),r=i(u,n,l.eq,e(c)),f=kp(r.grid(),c);return{grid:t(f),cursor:r.cursor}}).fold(function(){return n.none()},function(t){var i=art(s,t.grid());return u(s,t.grid(),a),f(s),gt.refresh(o,s,fe.height,a),n.some({cursor:t.cursor,newRows:i.newRows,newCells:i.newCells})})}},rut=kp,ni=function(n,t){return g.cell(t.element()).bind(function(t){return le(n,t)})},ir=function(t,i){var u=s(i.selection(),function(n){return g.cell(n).bind(function(n){return le(t,n)})}),r=dy(u);return 0<r.length?n.some(r):n.none()},uut=function(n,t){return g.cell(t.element()).bind(function(i){return le(n,i).map(function(n){return eh(n,{generators:t.generators,clipboard:t.clipboard})})})},dp=function(t,i){var u=s(i.selection(),function(n){return g.cell(n).bind(function(n){return le(t,n)})}),r=dy(u);return 0<r.length?n.some(eh({cells:r},{generators:i.generators,clipboard:i.clipboard})):n.none()},fut=function(n,t){return t.mergable()},eut=function(n,t){return t.unmergable()},ae=function(i){return{is:function(n){return i===n},isValue:ct,isError:cu,getOr:t(i),getOrThunk:t(i),getOrDie:t(i),or:function(){return ae(i)},orThunk:function(){return ae(i)},fold:function(n,t){return t(i)},map:function(n){return ae(n(i))},each:function(n){n(i)},bind:function(n){return n(i)},exists:function(n){return n(i)},forall:function(n){return n(i)},toOption:function(){return n.some(i)}}},hh=function(t){return{is:cu,isValue:cu,isError:ct,getOr:dt,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(t),function(){throw new Error(n);}();var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n){return n(t)},map:function(){return hh(t)},each:f,bind:function(){return hh(t)},exists:cu,forall:ct,toOption:n.none}},gp={value:ae,error:hh},nw=function(n,t){return s(n,function(){return p.elementnew(t.cell(),!0)})},out=function(n,t,i){return n.concat(yrt(t,function(){return o.setCells(n[n.length-1],nw(n[n.length-1].cells(),i))}))},sut=function(n,t,i){return s(n,function(n){return o.setCells(n,n.cells().concat(nw(ff(0,t),i)))})},hut=function(n,i,r){if(n.row()>=i.length||n.column()>o.cellLength(i[0]))return gp.error("invalid start address out of table bounds, row: "+n.row()+", column: "+n.column());var u=i.slice(n.row()),f=u[0].cells().slice(n.column()),e=o.cellLength(r[0]),s=r.length;return gp.value({rowDelta:t(u.length-s),colDelta:t(f.length-e)})},tw=function(n,i){var r=o.cellLength(n[0]),u=o.cellLength(i[0]);return{rowDelta:t(0),colDelta:t(r-u)}},ch=function(n,t,i){var r=t.colDelta()<0?sut:dt;return(t.rowDelta()<0?out:dt)(r(n,Math.abs(t.colDelta()),i),Math.abs(t.rowDelta()),i)},cut=function(n,t,i,r){var u,f;if(0===n.length)return n;for(u=t.startRow();u<=t.finishRow();u++)for(f=t.startCol();f<=t.finishCol();f++)o.mutateCell(n[u],f,p.elementnew(r(),!1));return n},iw=function(n,t,i,r){for(var f,s,e=!0,u=0;u<n.length;u++)for(f=0;f<o.cellLength(n[0]);f++)s=i(o.getCellElement(n[u],f),t),!0===s&&!1===e?o.mutateCell(n[u],f,p.elementnew(r(),!0)):!0===s&&(e=!1);return n},lut=function(t,i,r,f){var e,s,h;return 0<i&&i<t.length&&(e=t[i-1].cells(),s=(h=r,ri(e,function(n,t){return or(n,function(n){return h(n.element(),t.element())})?n:n.concat([t])},[])),u(s,function(u){for(var s,c,h=n.none(),e=i;e<t.length;e++)for(s=0;s<o.cellLength(t[0]);s++)c=t[e].cells()[s],r(c.element(),u.element())&&(h.isNone()&&(h=n.some(f())),h.each(function(n){o.mutateCell(t[e],s,p.elementnew(n,!0))}))})),t},aut=function(n,t,i,r,u){return hut(n,t,i).map(function(f){var s=ch(t,f,r);return function(n,t,i,r,u){for(var c,d,g,s,h,f,k,y,l,v,w=n.row(),b=n.column(),nt=w+i.length,tt=b+o.cellLength(i[0]),a=w;a<nt;a++)for(c=b;c<tt;c++)s=t,h=a,f=c,k=u,l=y=void 0,y=o.getCell(s[h],f),l=e(k,y.element()),v=s[h],1<s.length&&1<o.cellLength(v)&&(0<f&&l(o.getCellElement(v,f-1))||f<v.length-1&&l(o.getCellElement(v,f+1))||0<h&&l(o.getCellElement(s[h-1],f))||h<s.length-1&&l(o.getCellElement(s[h+1],f)))&&iw(t,o.getCellElement(t[a],c),u,r.cell),d=o.getCellElement(i[a-w],c-b),g=r.replace(d),o.mutateCell(t[a],c,p.elementnew(g,!0));return t}(n,s,i,r,u)})},rw=function(n,t,i,r,u){lut(t,n,u,r.cell);var o=tw(i,t),e=ch(i,o,r),s=tw(t,e),f=ch(t,s,r);return f.slice(0,n).concat(e).concat(f.slice(n,f.length))},ve=function(n,t,i,r,u){var f=n.slice(0,t),e=n.slice(t),s=o.mapCells(n[i],function(i,f){return 0<t&&t<n.length&&r(o.getCellElement(n[t-1],f),o.getCellElement(n[t],f))?o.getCell(n[t],f):p.elementnew(u(i.element(),r),!0)});return f.concat([s]).concat(e)},ye=function(n,t,i,r,u){return s(n,function(n){var f=0<t&&t<o.cellLength(n)&&r(o.getCellElement(n,t-1),o.getCellElement(n,t))?o.getCell(n,t):p.elementnew(u(o.getCellElement(n,i),r),!0);return o.addCell(n,t,f)})},vut=function(n,t,i,r,u){var f=i+1;return s(n,function(n,e){var s=e===t?p.elementnew(u(o.getCellElement(n,i),r),!0):o.getCell(n,i);return o.addCell(n,f,s)})},yut=function(n,t,i,r,u){var f=t+1,e=n.slice(0,f),s=n.slice(f),h=o.mapCells(n[t],function(n,t){return t===i?p.elementnew(u(n.element(),r),!0):n});return e.concat([h]).concat(s)},put=function(n,t,i){return n.slice(0,t).concat(n.slice(i+1))},wut=function(n,t,i){var r=s(n,function(n){var r=n.cells().slice(0,t).concat(n.cells().slice(i+1));return p.rowcells(r,n.section())});return lt(r,function(n){return 0<n.cells().length})},uw=function(n,t,i,r){return s(n,function(n){return o.mapCells(n,function(n){return u=n,or(t,function(n){return i(u.element(),n.element())})?p.elementnew(r(n.element(),i),!0):n;var u})})},fw=function(n,t,i,r){return o.getCellElement(n[t],i)!==undefined&&0<t&&r(o.getCellElement(n[t-1],i),o.getCellElement(n[t],i))},ew=function(n,t,i){return 0<t&&i(o.getCellElement(n,t-1),o.getCellElement(n,t))},ow=function(n,t,i,r){var u=si(n,function(r,u){return fw(n,u,t,i)||ew(r,t,i)?[]:[o.getCell(r,t)]});return uw(n,u,i,r)},sw=function(n,t,i,r){var u=n[t],f=si(u.cells(),function(r,f){return fw(n,t,f,i)||ew(u,f,i)?[]:[r]});return uw(n,f,i,r)},ef=function(n){return{fold:n}},hw=function(){return ef(function(n){return n()})},but=function(n){return ef(function(t,i){return i(n)})},kut=function(n,t){return ef(function(i,r,u){return u(n,t)})},dut=function(n,t,i){return ef(function(r,u,f,e){return e(n,t,i)})},gut=function(n,t){return ef(function(i,r,u,f,e){return e(n,t)})},nft=function(n,i,r,u){var h,e,f=n.slice(0),l=(e=i,0===(h=n).length?hw():1===h.length?but(0):0===e?kut(0,1):e===h.length-1?gut(e-1,e):0<e&&e<h.length-1?dut(e-1,e,e+1):hw()),o=function(n){return s(n,t(0))},a=t(o(f)),c=function(n,t){var e,i,s;return 0<=r?(e=Math.max(u.minCellWidth(),f[t]-r),o(f.slice(0,n)).concat([r,e-f[t]]).concat(o(f.slice(t+1)))):(i=Math.max(u.minCellWidth(),f[n]+r),s=f[n]-i,o(f.slice(0,n)).concat([i-f[n],s]).concat(o(f.slice(t+1))))},v=c;return l.fold(a,function(n){return u.singleColumnWidth(f[n],r)},v,function(n,t,i){return c(t,i)},function(n,t){if(0<=r)return o(f.slice(0,t)).concat([r]);var i=Math.max(u.minCellWidth(),f[t]+r);return o(f.slice(0,t)).concat([i-f[t]])})},cw=function(n,t){return r.has(n,t)&&1<parseInt(r.get(n,t),10)},ti={hasColspan:function(n){return cw(n,"colspan")},hasRowspan:function(n){return cw(n,"rowspan")},minWidth:t(10),minHeight:t(10),getInt:function(n,t){return parseInt(v.get(n,t),10)}},lw=function(n,t,i){return v.getRaw(n,t).fold(function(){return i(n)+"px"},function(n){return n})},tft=function(n){return lw(n,"width",nt.getPixelWidth)},ift=function(n){return lw(n,"height",nt.getHeight)},lh=function(n,t,i,r,u){var f=up(n),e=s(f,function(n){return n.map(t.edge)});return s(f,function(n,t){return n.filter(eo(ti.hasColspan)).fold(function(){var n=ip(e,t);return r(n)},function(n){return i(n,u)})})},aw=function(n){return n.map(function(n){return n+"px"}).getOr("")},vw=function(n,t,i,r){var u=fp(n),f=s(u,function(n){return n.map(t.edge)});return s(u,function(n,t){return n.filter(eo(ti.hasRowspan)).fold(function(){var n=ip(f,t);return r(n)},function(n){return i(n)})})},ah={getRawWidths:function(n,t){return lh(n,t,tft,aw)},getPixelWidths:function(n,t,i){return lh(n,t,nt.getPixelWidth,function(n){return n.getOrThunk(i.minCellWidth)},i)},getPercentageWidths:function(n,t,i){return lh(n,t,nt.getPercentageWidth,function(n){return n.fold(function(){return i.minCellWidth()},function(n){return n/i.pixelWidth()*100})},i)},getPixelHeights:function(n,t){return vw(n,t,nt.getHeight,function(n){return n.getOrThunk(ti.minHeight)})},getRawHeights:function(n,t){return vw(n,t,ift,aw)}},yw=function(n,t,i){for(var u=0,r=n;r<t;r++)u+=i[r]!==undefined?i[r]:0;return u},pw=function(n,i){var r=b.justCells(n);return s(r,function(n){var r=yw(n.column(),n.column()+n.colspan(),i);return{element:n.element,width:t(r),colspan:n.colspan}})},rft=function(n,i){var r=b.justCells(n);return s(r,function(n){var r=yw(n.row(),n.row()+n.rowspan(),i);return{element:n.element,height:t(r),rowspan:n.rowspan}})},uft=function(n,i){return s(n.all(),function(n,r){return{element:n.element,height:t(i[r])}})},vh=function(n){var i=parseInt(n,10),r=dt;return{width:t(i),pixelWidth:t(i),getWidths:ah.getPixelWidths,getCellDelta:r,singleColumnWidth:function(n,t){return[Math.max(ti.minWidth(),n+t)-n]},minCellWidth:ti.minWidth,setElementWidth:nt.setPixelWidth,setTableWidth:function(n,t){var i=sr(t,function(n,t){return n+t},0);nt.setPixelWidth(n,i)}}},fft=function(n,i){var f,e,o,s,u,r,h;return nt.percentageBasedSizeRegex().test(i)?(f=nt.percentageBasedSizeRegex().exec(i),o=f[1],s=n,u=parseFloat(o),r=tr(s),{width:t(u),pixelWidth:t(r),getWidths:ah.getPercentageWidths,getCellDelta:function(n){return n/r*100},singleColumnWidth:function(n){return[100-n]},minCellWidth:function(){return ti.minWidth()/r*100},setElementWidth:nt.setPercentageWidth,setTableWidth:function(n,t,i){var r=u+i;nt.setPercentageWidth(n,r)}}):nt.pixelBasedSizeRegex().test(i)?(e=nt.pixelBasedSizeRegex().exec(i),vh(e[1])):(h=tr(n),vh(h))},ww=function(n){return nt.getRawWidth(n).fold(function(){var t=tr(n);return vh(t)},function(t){return fft(n,t)})},bw=function(n){return b.generate(n)},kw=function(n){var t=ci(n);return bw(t)},eft=function(n,t,i,r){var f=ww(n),o=f.getCellDelta(t),e=kw(n),h=f.getWidths(e,r,f),l=nft(h,i,o,f),c=s(l,function(n,t){return n+h[t]}),a=pw(e,c);u(a,function(n){f.setElementWidth(n.element(),n.width())});i===e.grid().columns()-1&&f.setTableWidth(n,c,o)},oft=function(n,t,i,r){var f=kw(n),h=ah.getPixelHeights(f,r),e=s(h,function(n,r){return i===r?Math.max(t+n,ti.minHeight()):n}),c=rft(f,e),l=uft(f,e),o;u(l,function(n){nt.setHeight(n.element(),n.height())});u(c,function(n){nt.setHeight(n.element(),n.height())});o=sr(e,function(n,t){return n+t},0);nt.setHeight(n,o)},sft=function(n,t,i){var r=ww(n),f=bw(t),e=r.getWidths(f,i,r),o=pw(f,e),s;u(o,function(n){r.setElementWidth(n.element(),n.width())});s=sr(e,function(n,t){return t+n},0);0<o.length&&r.setElementWidth(n,s)},dw=function(n){0===g.cells(n).length&&st.remove(n)},oi=y("grid","cursor"),of=function(n,t,i){return yh(n,t,i).orThunk(function(){return yh(n,0,0)})},yh=function(t,i,r){return n.from(t[i]).bind(function(t){return n.from(t.cells()[r]).bind(function(t){return n.from(t.element())})})},ht=function(n,t,i){return oi(n,yh(n,t,i))},ph=function(n){return ri(n,function(n,t){return or(n,function(n){return n.row()===t.row()})?n:n.concat([t])},[]).sort(function(n,t){return n.row()-t.row()})},wh=function(n){return ri(n,function(n,t){return or(n,function(n){return n.column()===t.column()})?n:n.concat([t])},[]).sort(function(n,t){return n.column()-t.column()})},gw=function(n,t,i){var r=hn(n,i),u=b.generate(r);return se(u,t,!0)},vi=sft,pt={insertRowBefore:d(function(n,t,i,r){var f=t.row(),u=t.row(),e=ve(n,u,f,i,r.getOrInit);return ht(e,u,t.column())},ni,f,f,et),insertRowsBefore:d(function(n,t,i,r){var f=t[0].row(),u=t[0].row(),e=ph(t),o=ri(e,function(n){return ve(n,u,f,i,r.getOrInit)},n);return ht(o,u,t[0].column())},ir,f,f,et),insertRowAfter:d(function(n,t,i,r){var f=t.row(),u=t.row()+t.rowspan(),e=ve(n,u,f,i,r.getOrInit);return ht(e,u,t.column())},ni,f,f,et),insertRowsAfter:d(function(n,t,i,r){var u=ph(t),e=u[u.length-1].row(),f=u[u.length-1].row()+u[u.length-1].rowspan(),o=ri(u,function(n){return ve(n,f,e,i,r.getOrInit)},n);return ht(o,f,t[0].column())},ir,f,f,et),insertColumnBefore:d(function(n,t,i,r){var f=t.column(),u=t.column(),e=ye(n,u,f,i,r.getOrInit);return ht(e,t.row(),u)},ni,vi,f,et),insertColumnsBefore:d(function(n,t,i,r){var u=wh(t),e=u[0].column(),f=u[0].column(),o=ri(u,function(n){return ye(n,f,e,i,r.getOrInit)},n);return ht(o,t[0].row(),f)},ir,vi,f,et),insertColumnAfter:d(function(n,t,i,r){var f=t.column(),u=t.column()+t.colspan(),e=ye(n,u,f,i,r.getOrInit);return ht(e,t.row(),u)},ni,vi,f,et),insertColumnsAfter:d(function(n,t,i,r){var f=t[t.length-1].column(),u=t[t.length-1].column()+t[t.length-1].colspan(),e=wh(t),o=ri(e,function(n){return ye(n,u,f,i,r.getOrInit)},n);return ht(o,t[0].row(),u)},ir,vi,f,et),splitCellIntoColumns:d(function(n,t,i,r){var u=vut(n,t.row(),t.column(),i,r.getOrInit);return ht(u,t.row(),t.column())},ni,vi,f,et),splitCellIntoRows:d(function(n,t,i,r){var u=yut(n,t.row(),t.column(),i,r.getOrInit);return ht(u,t.row(),t.column())},ni,f,f,et),eraseColumns:d(function(n,t){var i=wh(t),r=wut(n,i[0].column(),i[i.length-1].column()),u=of(r,t[0].row(),t[0].column());return oi(r,u)},ir,vi,dw,et),eraseRows:d(function(n,t){var i=ph(t),r=put(n,i[0].row(),i[i.length-1].row()),u=of(r,t[0].row(),t[0].column());return oi(r,u)},ir,f,dw,et),makeColumnHeader:d(function(n,t,i,r){var u=ow(n,t.column(),i,r.replaceOrInit);return ht(u,t.row(),t.column())},ni,f,f,oe("row","th")),unmakeColumnHeader:d(function(n,t,i,r){var u=ow(n,t.column(),i,r.replaceOrInit);return ht(u,t.row(),t.column())},ni,f,f,oe(null,"td")),makeRowHeader:d(function(n,t,i,r){var u=sw(n,t.row(),i,r.replaceOrInit);return ht(u,t.row(),t.column())},ni,f,f,oe("col","th")),unmakeRowHeader:d(function(n,t,i,r){var u=sw(n,t.row(),i,r.replaceOrInit);return ht(u,t.row(),t.column())},ni,f,f,oe(null,"td")),mergeCells:d(function(i,r,u){var f=r.cells(),e;return srt(f),e=cut(i,r.bounds(),u,t(f[0])),oi(e,n.from(f[0]))},fut,f,f,ky),unmergeCells:d(function(t,i,r,u){var f=sr(i,function(n,t){return iw(n,t,r,u.combine(t))},t);return oi(f,n.from(i[0]))},eut,vi,f,ky),pasteCells:d(function(t,i,r){var u,f,e,o,s=(u=i.clipboard(),f=i.generators(),e=ci(u),o=b.generate(e),se(o,f,!0)),h=p.address(i.row(),i.column());return aut(h,t,s,i.generators(),r).fold(function(){return oi(t,n.some(i.element()))},function(n){var t=of(n,i.row(),i.column());return oi(n,t)})},uut,vi,f,et),pasteRowsBefore:d(function(n,t,i){var u=n[t.cells[0].row()],f=t.cells[0].row(),e=gw(t.clipboard(),t.generators(),u),r=rw(f,n,e,t.generators(),i),o=of(r,t.cells[0].row(),t.cells[0].column());return oi(r,o)},dp,f,f,et),pasteRowsAfter:d(function(n,t,i){var u=n[t.cells[0].row()],f=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),e=gw(t.clipboard(),t.generators(),u),r=rw(f,n,e,t.generators(),i),o=of(r,t.cells[0].row(),t.cells[0].column());return oi(r,o)},dp,f,f,et)},rr=function(n){return i.fromDom(n.getBody())},pe=function(n){return n.getBoundingClientRect().width},nb=function(n){return n.getBoundingClientRect().height},tb=function(n){return function(t){return l.eq(t,rr(n))}},wt=function(n){return/^[0-9]+$/.test(n)&&(n+="px"),n},bh=function(n){var t=it.descendants(n,"td[data-mce-style],th[data-mce-style]");r.remove(n,"data-mce-style");u(t,function(n){r.remove(n,"data-mce-style")})},ib=function(n){return"rtl"===v.get(n,"direction")?"rtl":"ltr"},hft={onDirection:function(n,t){return function(i){return"rtl"===ib(i)?t:n}},getDirection:ib},cft={isRtl:t(!1)},lft={isRtl:t(!0)},kh={directionAt:function(n){return"rtl"===hft.getDirection(n)?lft:cft}},aft=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],vft={"border-collapse":"collapse",width:"100%"},yft={border:"1"},dh=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},gh=function(n){return n.getParam("table_row_advtab",!0,"boolean")},nc=function(n){return n.getParam("table_advtab",!0,"boolean")},tc=function(n){return n.getParam("table_style_by_css",!1,"boolean")},rb=function(n){return n.getParam("table_cell_class_list",[],"array")},ub=function(n){return n.getParam("table_row_class_list",[],"array")},fb=function(n){return n.getParam("table_class_list",[],"array")},eb=function(n){return!1===n.getParam("table_responsive_width")},ob=function(n,t){return n.fire("newrow",{node:t})},sb=function(n,t){return n.fire("newcell",{node:t})},hb=function(n,t,i,r){n.fire("ObjectResizeStart",{target:t,width:i,height:r})},cb=function(n,t,i,r){n.fire("ObjectResized",{target:t,width:i,height:r})},pft=function(t,r){var o,s=function(n){return"table"===c.name(rr(n))},h=(o=t.getParam("table_clone_elements"),er(o)?n.some(o.split(/[ ,]/)):Array.isArray(o)?n.some(o):n.none()),e=function(r,f,e,o){return function(s,c){bh(s);var l=o(),a=i.fromDom(t.getDoc()),v=py(kh.directionAt),y=uv(e,a,h);return f(s)?r(l,s,c,y,v).bind(function(n){return u(n.newRows(),function(n){ob(t,n.dom())}),u(n.newCells(),function(n){sb(t,n.dom())}),n.cursor().map(function(n){var i=t.dom.createRng();return i.setStart(n.dom(),0),i.setEnd(n.dom(),0),i})}):n.none()}};return{deleteRow:e(pt.eraseRows,function(n){var i=by(n);return!1===s(t)||1<i.rows()},f,r),deleteColumn:e(pt.eraseColumns,function(n){var i=by(n);return!1===s(t)||1<i.columns()},f,r),insertRowsBefore:e(pt.insertRowsBefore,ct,f,r),insertRowsAfter:e(pt.insertRowsAfter,ct,f,r),insertColumnsBefore:e(pt.insertColumnsBefore,ct,ey,r),insertColumnsAfter:e(pt.insertColumnsAfter,ct,ey,r),mergeCells:e(pt.mergeCells,ct,f,r),unmergeCells:e(pt.unmergeCells,ct,f,r),pasteRowsBefore:e(pt.pasteRowsBefore,ct,f,r),pasteRowsAfter:e(pt.pasteRowsAfter,ct,f,r),pasteCells:e(pt.pasteCells,ct,f,r)}},wft=function(n,t,i){var u=ci(n),r=b.generate(u);return ir(r,t).map(function(n){var t=se(r,i,!1).slice(n[0].row(),n[n.length-1].row()+n[n.length-1].rowspan()),u=rut(t,i);return vrt(u)})},k=tinymce.util.Tools.resolve("tinymce.util.Tools"),ic=function(n,t,i){i&&n.formatter.apply("align"+i,{},t)},bft=function(n,t,i){i&&n.formatter.apply("valign"+i,{},t)},rc=function(n,t){k.each("left center right".split(" "),function(i){n.formatter.remove("align"+i,{},t)})},kft=function(n,t){k.each("top middle bottom".split(" "),function(i){n.formatter.remove("valign"+i,{},t)})},lb=function(n,t,i){var r;return function(t,r){for(var f,u=0;u<r.length;u++)if(f=n.getStyle(r[u],i),void 0===t&&(t=f),t!==f)return"";return t}(r,n.select("td,th",t))},we=function(n,t){var u=n.dom,f=t.control.rootControl,i=f.toJSON(),r=u.parseStyle(i.style);r["border-style"]=i.borderStyle;r["border-color"]=i.borderColor;r["background-color"]=i.backgroundColor;r.width=i.width?wt(i.width):"";r.height=i.height?wt(i.height):"";f.find("#style").value(u.serializeStyle(u.parseStyle(u.serializeStyle(r))))},uc=function(n,t){var u=n.dom,i=t.control.rootControl,f=i.toJSON(),r=u.parseStyle(f.style);i.find("#borderStyle").value(r["border-style"]||"");i.find("#borderColor").value(r["border-color"]||"");i.find("#backgroundColor").value(r["background-color"]||"");i.find("#width").value(r.width||"");i.find("#height").value(r.height||"")},rt={createStyleForm:function(n){var t=function(){var t=n.getParam("color_picker_callback");if(t)return function(i){return t.call(n,function(n){i.control.value(n).fire("change")},i.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:e(we,n)},items:[{label:"Style",name:"style",type:"textbox",onchange:e(uc,n)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:e(we,n),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},buildListItems:function(n,t,i){var r=function(n,i){return i=i||[],k.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t&&t(u));i.push(u)}),i};return r(n,i||[])},updateStyleField:we,extractAdvancedStyles:function(n,t){var i=n.parseStyle(n.getAttrib(t,"style")),r={};return i["border-style"]&&(r.borderStyle=i["border-style"]),i["border-color"]&&(r.borderColor=i["border-color"]),i["background-color"]&&(r.backgroundColor=i["background-color"]),r.style=n.serializeStyle(i),r},updateAdvancedFields:uc,syncAdvancedStyleFields:function(n,t){t.control.rootControl.find("#style")[0].getEl().isEqualNode(document.activeElement)?uc(n,t):we(n,t)}},ab=function(n,t,i){function f(n,i,r){(1===t.length||r)&&u.setAttrib(n,i,r)}function e(n,i,r){(1===t.length||r)&&u.setStyle(n,i,r)}var r,u=n.dom;dh(n)&&rt.syncAdvancedStyleFields(n,i);r=i.control.rootControl.toJSON();n.undoManager.transact(function(){k.each(t,function(i){var o,s;f(i,"scope",r.scope);1===t.length?f(i,"style",r.style):(o=i,s=r.style,delete o.dataset.mceStyle,o.style.cssText+=";"+s);f(i,"class",r["class"]);e(i,"width",wt(r.width));e(i,"height",wt(r.height));r.type&&i.nodeName.toLowerCase()!==r.type&&(i=u.rename(i,r.type));1===t.length&&(rc(n,i),kft(n,i));r.align&&ic(n,i,r.align);r.valign&&bft(n,i,r.valign)});n.focus()})},dft=function(n){var r,o,c,u=[],s,t,i,f,h;(u=n.dom.select("td[data-mce-selected],th[data-mce-selected]"),r=n.dom.getParent(n.selection.getStart(),"td,th"),!u.length&&r&&u.push(r),r=r||u[0])&&(1<u.length?o={width:"",height:"",scope:"","class":"",align:"",valign:"",style:"",type:r.nodeName.toLowerCase()}:(t=r,i=(s=n).dom,f={width:i.getStyle(t,"width")||i.getAttrib(t,"width"),height:i.getStyle(t,"height")||i.getAttrib(t,"height"),scope:i.getAttrib(t,"scope"),"class":i.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""},k.each("left center right".split(" "),function(n){s.formatter.matchNode(t,"align"+n)&&(f.align=n)}),k.each("top middle bottom".split(" "),function(n){s.formatter.matchNode(t,"valign"+n)&&(f.valign=n)}),dh(s)&&k.extend(f,rt.extractAdvancedStyles(i,t)),o=f),0<rb(n).length&&(c={name:"class",type:"listbox",label:"Class",values:rt.buildListItems(rb(n),function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({block:"td",classes:[t.value]})})})}),h={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:e(rt.updateStyleField,n)},{label:"Height",name:"height",onchange:e(rt.updateStyleField,n)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},c]},dh(n)?n.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:o,body:[{title:"General",type:"form",items:h},rt.createStyleForm(n)],onsubmit:e(ab,n,u)}):n.windowManager.open({title:"Cell properties",data:o,body:h,onsubmit:e(ab,n,u)}))},gft=function(n){var l,a,o,v,i,s,h,t,r,f,c=n.dom,u=[];l=c.getParent(n.selection.getStart(),"table");a=c.getParent(n.selection.getStart(),"td,th");k.each(l.rows,function(n){k.each(n.cells,function(t){if(c.getAttrib(t,"data-mce-selected")||t===a)return u.push(n),!1})});(o=u[0])&&(1<u.length?i={height:"",scope:"",style:"","class":"",align:"",type:o.parentNode.nodeName.toLowerCase()}:(t=o,r=(h=n).dom,f={height:r.getStyle(t,"height")||r.getAttrib(t,"height"),scope:r.getAttrib(t,"scope"),"class":r.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()},k.each("left center right".split(" "),function(n){h.formatter.matchNode(t,"align"+n)&&(f.align=n)}),gh(h)&&k.extend(f,rt.extractAdvancedStyles(r,t)),i=f),0<ub(n).length&&(v={name:"class",type:"listbox",label:"Class",values:rt.buildListItems(ub(n),function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({block:"tr",classes:[t.value]})})})}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},v]},gh(n)?n.windowManager.open({title:"Row properties",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},rt.createStyleForm(n)],onsubmit:e(vb,n,u,i)}):n.windowManager.open({title:"Row properties",data:i,body:s,onsubmit:e(vb,n,u,i)}))},net=tinymce.util.Tools.resolve("tinymce.Env"),tet={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},iet=function(n,t,u,f,e){var s,l,a,h,y,c,o;for(void 0===e&&(e=tet),s=i.fromTag("table"),v.setAll(s,e.styles),r.setAll(s,e.attributes),l=i.fromTag("tbody"),w.append(s,l),a=[],h=0;h<n;h++){for(y=i.fromTag("tr"),c=0;c<t;c++)o=h<u||c<f?i.fromTag("th"):i.fromTag("td"),c<f&&r.set(o,"scope","row"),h<u&&r.set(o,"scope","col"),w.append(o,i.fromTag("br")),e.percentages&&v.set(o,"width",100/t+"%"),w.append(y,o);a.push(y)}return ki.append(l,a),s},ret=function(n){return n.dom().innerHTML},uet=function(n){var t=i.fromTag("div"),r=i.fromDom(n.dom().cloneNode(!0));return w.append(t,r),ret(t)},fet=function(n,t){n.selection.select(t.dom(),!0);n.selection.collapse(!0)},fc=function(n,t,i){var f,o,s=n.getParam("table_default_styles",vft,"object"),l={styles:s,attributes:(o=n,o.getParam("table_default_attributes",yft,"object")),percentages:(f=s.width,er(f)&&-1!==f.indexOf("%")&&!eb(n))},h=iet(i,t,0,0,l),c;return r.set(h,"data-mce-id","__mce"),c=uet(h),n.insertContent(c),a.descendant(rr(n),'table[data-mce-id="__mce"]').map(function(t){var i,f,o;return eb(n)&&v.set(t,"width",v.get(t,"width")),r.remove(t,"data-mce-id"),i=n,u(it.descendants(t,"tr"),function(n){ob(i,n.dom());u(it.descendants(n,"th,td"),function(n){sb(i,n.dom())})}),f=n,o=t,a.descendant(o,"td,th").each(e(fet,f)),t.dom()}).getOr(null)},pb=function(n,t,i){var u,r,f=n.dom;nc(n)&&rt.syncAdvancedStyleFields(n,i);!1===(r=i.control.rootControl.toJSON())["class"]&&delete r["class"];n.undoManager.transact(function(){t||(t=fc(n,r.cols||1,r.rows||1)),function(n,t,i){var o,u=n.dom,f={},r={},e;if(f["class"]=i["class"],r.height=wt(i.height),u.getAttrib(t,"width")&&!tc(n)?f.width=(o=i.width)?o.replace(/px$/,""):"":r.width=wt(i.width),tc(n)?(r["border-width"]=wt(i.border),r["border-spacing"]=wt(i.cellspacing),k.extend(f,{"data-mce-border-color":i.borderColor,"data-mce-cell-padding":i.cellpadding,"data-mce-border":i.border})):k.extend(f,{border:i.border,cellpadding:i.cellpadding,cellspacing:i.cellspacing}),tc(n)&&t.children)for(e=0;e<t.children.length;e++)yb(u,t.children[e],{"border-width":wt(i.border),"border-color":i.borderColor,padding:wt(i.cellpadding)});i.style?k.extend(r,u.parseStyle(i.style)):r=k.extend({},u.parseStyle(u.getAttrib(t,"style")),r);f.style=u.serializeStyle(r);u.setAttribs(t,f)}(n,t,r);(u=f.select("caption",t)[0])&&!r.caption&&f.remove(u);!u&&r.caption&&((u=f.create("caption")).innerHTML=net.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(u,t.firstChild));rc(n,t);r.align&&ic(n,t,r.align);n.focus();n.addVisual()})},wb=function(n,t){var o,h,c,a,l,f,i,r,s,v,y=n.dom,u={};!0===t?(o=y.getParent(n.selection.getStart(),"table"))&&(i=o,r=(f=n).dom,s={width:r.getStyle(i,"width")||r.getAttrib(i,"width"),height:r.getStyle(i,"height")||r.getAttrib(i,"height"),cellspacing:r.getStyle(i,"border-spacing")||r.getAttrib(i,"cellspacing"),cellpadding:r.getAttrib(i,"data-mce-cell-padding")||r.getAttrib(i,"cellpadding")||lb(f.dom,i,"padding"),border:r.getAttrib(i,"data-mce-border")||r.getAttrib(i,"border")||lb(f.dom,i,"border"),borderColor:r.getAttrib(i,"data-mce-border-color"),caption:!!r.select("caption",i)[0],"class":r.getAttrib(i,"class")},k.each("left center right".split(" "),function(n){f.formatter.matchNode(i,"align"+n)&&(s.align=n)}),nc(f)&&k.extend(s,rt.extractAdvancedStyles(r,i)),u=s):(h={label:"Cols",name:"cols"},c={label:"Rows",name:"rows"});0<fb(n).length&&(u["class"]&&(u["class"]=u["class"].replace(/\s*mce\-item\-table\s*/g,"")),a={name:"class",type:"listbox",label:"Class",values:rt.buildListItems(fb(n),function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({block:"table",classes:[t.value]})})})});l={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:(v=n,v.getParam("table_appearance_options",!0,"boolean")?[h,c,{label:"Width",name:"width",onchange:e(rt.updateStyleField,n)},{label:"Height",name:"height",onchange:e(rt.updateStyleField,n)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[h,c,{label:"Width",name:"width",onchange:e(rt.updateStyleField,n)},{label:"Height",name:"height",onchange:e(rt.updateStyleField,n)}])},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},a]};nc(n)?n.windowManager.open({title:"Table properties",data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},rt.createStyleForm(n)],onsubmit:e(pb,n,o)}):n.windowManager.open({title:"Table properties",data:u,body:l,onsubmit:e(pb,n,o)})},bb=k.each,eet=function(t,r,u,o,h){var l=tb(t),a=function(){return i.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"))},v=function(n){return g.table(n,l)},y=function(n){return{width:pe(n.dom()),height:pe(n.dom())}},c=function(n){var i=a();v(i).each(function(r){var f=kr.forMenu(o,r,i),e=y(r);n(r,f).each(function(n){var o,i,s,f;o=t;i=e;f=y(s=r);i.width===f.width&&i.height===f.height||(hb(o,s.dom(),i.width,i.height),cb(o,s.dom(),f.width,f.height));t.selection.setRng(n);t.focus();u.clear(r);bh(r)})})},p=function(){var r=a();return v(r).bind(function(u){var e=i.fromDom(t.getDoc()),s=kr.forMenu(o,u,r),h=uv(f,e,n.none());return wft(u,s,h)})},b=function(n){h.get().each(function(r){var e=s(r,function(n){return ls(n)}),f=a();v(f).bind(function(r){var s=i.fromDom(t.getDoc()),h=fv(s),c=kr.pasteRows(o,r,f,e,h);n(r,c).each(function(n){t.selection.setRng(n);t.focus();u.clear(r)})})})};bb({mceTableSplitCells:function(){c(r.unmergeCells)},mceTableMergeCells:function(){c(r.mergeCells)},mceTableInsertRowBefore:function(){c(r.insertRowsBefore)},mceTableInsertRowAfter:function(){c(r.insertRowsAfter)},mceTableInsertColBefore:function(){c(r.insertColumnsBefore)},mceTableInsertColAfter:function(){c(r.insertColumnsAfter)},mceTableDeleteCol:function(){c(r.deleteColumn)},mceTableDeleteRow:function(){c(r.deleteRow)},mceTableCutRow:function(){h.set(p());c(r.deleteRow)},mceTableCopyRow:function(){h.set(p())},mceTablePasteRowBefore:function(){b(r.pasteRowsBefore)},mceTablePasteRowAfter:function(){b(r.pasteRowsAfter)},mceTableDelete:function(){var n=i.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"));g.table(n,l).filter(eo(l)).each(function(n){var u=i.fromText(""),r;w.after(n,u);st.remove(n);r=t.dom.createRng();r.setStart(u.dom(),0);r.setEnd(u.dom(),0);t.selection.setRng(r)})}},function(n,i){t.addCommand(i,n)});bb({mceInsertTable:e(wb,t),mceTableProps:e(wb,t,!0),mceTableRowProps:e(gft,t),mceTableCellProps:e(dft,t)},function(n,i){t.addCommand(i,function(t,i){n(i)})})},kb=function(r){var u=n.from(r.dom().documentElement).map(i.fromDom).getOr(r);return{parent:t(u),view:t(r),origin:t(ai(0,0))}},oet=function(n,i){return{parent:t(i),view:t(n),origin:t(ai(0,0))}},nu={create:function(n){return{registry:lo(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:lo(n,function(n){return n.trigger})}}},ec={mode:ee(["compare","extract","mutate","sink"]),sink:ee(["element","start","stop","destroy"]),api:ee(["forceDrop","drop","move","delayDrop"])},db={resolve:ep("ephox-dragster").resolve},set=function(n,r){return function(u){if(n(u)){var f,e,o,s,h,c,l,y=i.fromDom(u.target),a=function(){u.stopPropagation()},v=function(){u.preventDefault()},p=fo(v,a),w=(f=y,e=u.clientX,o=u.clientY,s=a,h=v,c=p,l=u,{target:t(f),x:t(e),y:t(o),stop:s,prevent:h,kill:c,raw:t(l)});r(w)}}},gb=function(n,t,i,r,u){var f=set(i,r);return n.dom().addEventListener(t,f,u),{unbind:e(het,n,t,f,u)}},het=function(n,t,i,r){n.dom().removeEventListener(t,i,r)},cet=function(n,t,i,r){return gb(n,t,i,r,!1)},aet=function(n,t,i,r){return gb(n,t,i,r,!0)},nk=t(!0),tu={bind:function(n,t,i){return cet(n,t,nk,i)},capture:function(n,t,i){return aet(n,t,nk,i)}},vet=ec.mode({compare:function(n,t){return ai(t.left()-n.left(),t.top()-n.top())},extract:function(t){return n.some(ai(t.x(),t.y()))},sink:function(n,t){var e,o,f,u=(e=t,o=eh({layerClass:db.resolve("blocker")},e),f=i.fromTag("div"),r.set(f,"role","presentation"),v.setAll(f,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),at.add(f,db.resolve("blocker")),at.add(f,o.layerClass),{element:function(){return f},destroy:function(){st.remove(f)}}),s=tu.bind(u.element(),"mousedown",n.forceDrop),h=tu.bind(u.element(),"mouseup",n.drop),c=tu.bind(u.element(),"mousemove",n.move),l=tu.bind(u.element(),"mouseout",n.delayDrop);return ec.sink({element:u.element,start:function(n){w.append(n,u.element())},stop:function(){st.remove(u.element())},destroy:function(){u.destroy();h.unbind();c.unbind();l.unbind();s.unbind()}})},mutate:function(n,t){n.mutate(t.left(),t.top())}}),wet=function(n,t,i){var c,l,r,o=!1,s=nu.create({start:bt([]),stop:bt([])}),u=pet(),h=function(){f.stop();u.isOn()&&(u.off(),s.trigger.stop())},a=(c=h,l=200,r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==r&&clearTimeout(r);r=setTimeout(function(){c.apply(null,t);r=null},l)}}),e,f;return u.events.move.bind(function(i){t.mutate(n,i.info())}),e=function(n){return function(){var t=Array.prototype.slice.call(arguments,0);if(o)return n.apply(null,t)}},f=t.sink(ec.api({forceDrop:h,drop:e(h),move:e(function(n){a.cancel();u.onEvent(n,t)}),delayDrop:e(a.throttle)}),i),{element:f.element,go:function(n){f.start(n);u.on();s.trigger.start()},on:function(){o=!0},off:function(){o=!1},destroy:function(){f.destroy()},events:s.registry}},bet={transform:function(n,t){var i=t!==undefined?t:{},r=i.mode!==undefined?i.mode:vet;return wet(n,r,t)}},det={any:function(n){return a.first(n).isSome()},ancestor:function(n,t,i){return a.ancestor(n,t,i).isSome()},sibling:function(n,t){return a.sibling(n,t).isSome()},child:function(n,t){return a.child(n,t).isSome()},descendant:function(n,t){return a.descendant(n,t).isSome()},closest:function(n,t,i){return a.closest(n,t,i).isSome()}},get=ce.resolve("resizer-bar-dragging"),tot=function(n){return n.inline?oet(rr(n),(t=i.fromTag("div"),v.setAll(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),w.append(yr.body(),t),t)):kb(i.fromDom(n.getDoc()));var t},iot=function(n,t){n.inline&&st.remove(t.parent())},rot=function(t){var e,r,o=n.none(),u=n.none(),f=n.none(),s=/(\d+(\.\d+)?)%/,h=function(n){return"TABLE"===n.nodeName};return t.on("init",function(){var r,s=py(kh.directionAt),e=tot(t),i;(f=n.some(e),("table"===(r=t.getParam("object_resizing",!0))||r)&&t.getParam("table_resize_bars",!0,"boolean"))&&(i=not(e,s),i.on(),i.events.startDrag.bind(function(){o=n.some(t.selection.getRng())}),i.events.beforeResize.bind(function(n){var i=n.table().dom();hb(t,i,pe(i),nb(i))}),i.events.afterResize.bind(function(n){var r=n.table(),i=r.dom();bh(r);o.each(function(n){t.selection.setRng(n);t.focus()});cb(t,i,pe(i),nb(i));t.undoManager.add()}),u=n.some(i))}),t.on("ObjectResizeStart",function(n){var i,u=n.target;h(u)&&(e=n.width,i=u,r=t.dom.getStyle(i,"width")||t.dom.getAttrib(i,"width"))}),t.on("ObjectResized",function(n){var f=n.target,i,o,c,u;h(f)&&(i=f,s.test(r)?(o=parseFloat(s.exec(r)[1]),c=n.width*o/e,t.dom.setStyle(i,"width",c+"%")):(u=[],k.each(i.rows,function(n){k.each(n.cells,function(n){var i=t.dom.getStyle(n,"width",!0);u.push({cell:n,width:i})})}),k.each(u,function(n){t.dom.setStyle(n.cell,"width",n.width);t.dom.setAttrib(n.cell,"width",null)})))}),{lazyResize:function(){return u},lazyWire:function(){return f.getOr(kb(i.fromDom(t.getBody())))},destroy:function(){u.each(function(n){n.destroy()});f.each(function(n){iot(t,n)})}}},be=function(n){return{fold:n}},tk=function(n){return be(function(t){return t(n)})},uot=function(n){return be(function(t,i){return i(n)})},ik=function(n,t){return be(function(i,r,u){return u(n,t)})},fot=function(n){return be(function(t,i,r,u){return u(n)})},rk=function(n,i){return g.table(n,i).bind(function(i){var r=g.cells(i);return fi(r,function(t){return l.eq(n,t)}).map(function(n){return{index:t(n),all:t(r)}})})},eot=function(n,t){return rk(n,t).fold(function(){return tk(n)},function(t){return t.index()+1<t.all().length?ik(n,t.all()[t.index()+1]):fot(n)})},oot=function(n,t){return rk(n,t).fold(function(){return tk()},function(t){return 0<=t.index()-1?ik(n,t.all()[t.index()-1]):uot(n)})},oc=wr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),tt={before:oc.before,on:oc.on,after:oc.after,cata:function(n,t,i,r){return n.fold(t,i,r)},getStart:function(n){return n.fold(dt,dt,dt)}},ke=wr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),sot=y("start","soffset","finish","foffset"),kt={domRange:ke.domRange,relative:ke.relative,exact:ke.exact,exactFromRange:function(n){return ke.exact(n.start(),n.soffset(),n.finish(),n.foffset())},range:sot,getWin:function(n){var t=n.match({domRange:function(n){return i.fromDom(n.startContainer)},relative:function(n){return tt.getStart(n)},exact:function(n){return n}});return h.defaultView(t)}},hot=function(n,t,i,r){var u=h.owner(n).dom().createRange();return u.setStart(n.dom(),t),u.setEnd(i.dom(),r),u},cot=function(n,t,i,r){var u=hot(n,t,i,r),f=l.eq(n,i)&&t===r;return u.collapsed&&!f},uk=function(n,t){n.selectNodeContents(t.dom())},fk=function(n){n.deleteContents()},ek=function(n){return{left:t(n.left),top:t(n.top),right:t(n.right),bottom:t(n.bottom),width:t(n.width),height:t(n.height)}},yi={create:function(n){return n.document.createRange()},replaceWith:function(n,t){fk(n);n.insertNode(t.dom())},selectNodeContents:function(n,t){var i=n.document.createRange();return uk(i,t),i},selectNodeContentsUsing:uk,relativeToNative:function(n,t,i){var r,u,f=n.document.createRange();return r=f,t.fold(function(n){r.setStartBefore(n.dom())},function(n,t){r.setStart(n.dom(),t)},function(n){r.setStartAfter(n.dom())}),u=f,i.fold(function(n){u.setEndBefore(n.dom())},function(n,t){u.setEnd(n.dom(),t)},function(n){u.setEndAfter(n.dom())}),f},exactToNative:function(n,t,i,r,u){var f=n.document.createRange();return f.setStart(t.dom(),i),f.setEnd(r.dom(),u),f},deleteContents:fk,cloneFragment:function(n){var t=n.cloneContents();return i.fromDom(t)},getFirstRect:function(t){var r=t.getClientRects(),i=0<r.length?r[0]:t.getBoundingClientRect();return 0<i.width||0<i.height?n.some(i).map(ek):n.none()},getBounds:function(t){var i=t.getBoundingClientRect();return 0<i.width||0<i.height?n.some(i).map(ek):n.none()},isWithin:function(n,t){return t.compareBoundaryPoints(n.END_TO_START,n)<1&&-1<t.compareBoundaryPoints(n.START_TO_END,n)},toString:function(n){return n.toString()}},sf=wr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ok=function(n,t,r){return t(i.fromDom(r.startContainer),r.startOffset,i.fromDom(r.endContainer),r.endOffset)},sk=function(r,u){var f,o,e,s=(f=r,u.match({domRange:function(i){return{ltr:t(i),rtl:n.none}},relative:function(t,i){return{ltr:lr(function(){return yi.relativeToNative(f,t,i)}),rtl:lr(function(){return n.some(yi.relativeToNative(f,i,t))})}},exact:function(t,i,r,u){return{ltr:lr(function(){return yi.exactToNative(f,t,i,r,u)}),rtl:lr(function(){return n.some(yi.exactToNative(f,r,u,t,i))})}}}));return(e=(o=s).ltr()).collapsed?o.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return sf.rtl(i.fromDom(n.endContainer),n.endOffset,i.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return ok(0,sf.ltr,e)}):ok(0,sf.ltr,e)},hf={ltr:sf.ltr,rtl:sf.rtl,diagnose:sk,asLtrRange:function(n,t){return sk(n,t).match({ltr:function(t,i,r,u){var f=n.document.createRange();return f.setStart(t.dom(),i),f.setEnd(r.dom(),u),f},rtl:function(t,i,r,u){var f=n.document.createRange();return f.setStart(r.dom(),u),f.setEnd(t.dom(),i),f}})}},hk=function(n,t,i){return t>=n.left&&t<=n.right&&i>=n.top&&i<=n.bottom},lot=function(n,t,i,r,u){var o,f,e,s;if(0===u)return 0;if(t===r)return u-1;for(o=r,f=1;f<u;f++)if(e=n(f),s=Math.abs(t-e.left),i<=e.bottom){if(i<e.top||o<s)return f-1;o=s}return 0},aot={locate:function(t,i,r,u){var f=t.dom().createRange(),e;return f.selectNode(i.dom()),e=f.getClientRects(),dr(e,function(t){return hk(t,r,u)?n.some(t):n.none()}).map(function(n){return e=t,s=r,h=u,c=n,f=function(n){var t=e.dom().createRange();return t.setStart(o.dom(),n),t.collapse(!0),t},l=di.get(o=i).length,a=lot(function(n){return f(n).getBoundingClientRect()},s,h,c.right,l),f(a);var e,o,s,h,c,f,l,a})}},vot=function(t,i,r,u){var f=t.dom().createRange(),e=h.children(i);return dr(e,function(i){return f.selectNode(i.dom()),hk(f.getBoundingClientRect(),r,u)?ck(t,i,r,u):n.none()})},ck=function(n,t,i,r){return(c.isText(t)?aot.locate:vot)(n,t,i,r)},yot=function(n,t,i,r){var f=n.dom().createRange();f.selectNode(t.dom());var u=f.getBoundingClientRect(),e=Math.max(u.left,Math.min(u.right,i)),o=Math.max(u.top,Math.min(u.bottom,r));return ck(n,t,e,o)},lk=function(n,t){return t-n.left<n.right-t},ak=function(n,t,i){var r=n.dom().createRange();return r.selectNode(t.dom()),r.collapse(i),r},pot=function(n,t,i){var u=n.dom().createRange(),f,r;return u.selectNode(t.dom()),f=u.getBoundingClientRect(),r=lk(f,i),(!0===r?gi.first:gi.last)(t).map(function(t){return ak(n,t,r)})},wot=function(t,i,r){var u=i.dom().getBoundingClientRect(),f=lk(u,r);return n.some(ak(t,i,f))},bot=function(n,t,i){return(0===h.children(t).length?wot:pot)(n,t,i)},kot=document.caretPositionFromPoint?function(t,i,r){return n.from(t.dom().caretPositionFromPoint(i,r)).bind(function(i){if(null===i.offsetNode)return n.none();var r=t.dom().createRange();return r.setStart(i.offsetNode,i.offset),r.collapse(),n.some(r)})}:document.caretRangeFromPoint?function(t,i,r){return n.from(t.dom().caretRangeFromPoint(i,r))}:function(n,t,r){return i.fromPoint(n,t,r).bind(function(i){var u=function(){return bot(n,i,t)};return 0===h.children(i).length?u():function(n,t,i,r){var f=n.dom().createRange();f.selectNode(t.dom());var u=f.getBoundingClientRect(),e=Math.max(u.left,Math.min(u.right,i)),o=Math.max(u.top,Math.min(u.bottom,r));return yot(n,t,e,o)}(n,i,t,r).orThunk(u)})},dot=function(n,t,r){var u=i.fromDom(n.document);return kot(u,t,r).map(function(n){return kt.range(i.fromDom(n.startContainer),n.startOffset,i.fromDom(n.endContainer),n.endOffset)})},de=function(n,t){var i=c.name(n);return"input"===i?tt.after(n):ft(["br","img"],i)?0===t?tt.before(n):tt.after(n):tt.on(n,t)},vk=function(n,t){var i=n.fold(tt.before,de,tt.after),r=t.fold(tt.before,de,tt.after);return kt.relative(i,r)},sc=function(n,t,i,r){var u=de(n,t),f=de(i,r);return kt.relative(u,f)},got=function(n){return n.match({domRange:function(n){var t=i.fromDom(n.startContainer),r=i.fromDom(n.endContainer);return sc(t,n.startOffset,r,n.endOffset)},relative:vk,exact:sc})},nst=vk,tst=sc,yk=function(t,i){n.from(t.getSelection()).each(function(n){n.removeAllRanges();n.addRange(i)})},hc=function(n,t,i,r,u){var f=yi.exactToNative(n,t,i,r,u);yk(n,f)},pk=function(n,t){return hf.diagnose(n,t).match({ltr:function(t,i,r,u){hc(n,t,i,r,u)},rtl:function(t,i,r,u){var e,o,s,h,c,f=n.getSelection();if(f.setBaseAndExtent)f.setBaseAndExtent(t.dom(),i,r.dom(),u);else if(f.extend)try{o=t;s=i;h=r;c=u;(e=f).collapse(o.dom(),s);e.extend(h.dom(),c)}catch(l){hc(n,r,u,t,i)}else hc(n,r,u,t,i)}})},ist=function(t){var r=i.fromDom(t.anchorNode),u=i.fromDom(t.focusNode);return cot(r,t.anchorOffset,u,t.focusOffset)?n.some(kt.range(i.fromDom(t.anchorNode),t.anchorOffset,i.fromDom(t.focusNode),t.focusOffset)):function(t){if(0<t.rangeCount){var r=t.getRangeAt(0),u=t.getRangeAt(t.rangeCount-1);return n.some(kt.range(i.fromDom(r.startContainer),r.startOffset,i.fromDom(u.endContainer),u.endOffset))}return n.none()}(t)},rst=function(t){return n.from(t.getSelection()).filter(function(n){return 0<n.rangeCount}).bind(ist)},ust=function(n,t,i,r,u){var f=tst(t,i,r,u);pk(n,f)},fst=function(n){return rst(n).map(function(n){return kt.exact(n.start(),n.soffset(),n.finish(),n.foffset())})},est=function(n,t,i){var r=nst(t,i);pk(n,r)},ost=function(n){var t=kt.getWin(n).dom(),i=function(n,i,r,u){return yi.exactToNative(t,n,i,r,u)},r=got(n);return hf.diagnose(t,r).match({ltr:i,rtl:i})},sst=function(n,t){var i=yi.selectNodeContents(n,t);yk(n,i)},hst=function(n){n.getSelection().removeAllRanges()},cst=function(n,t){var i=hf.asLtrRange(n,t);return yi.getFirstRect(i)},lst=function(n,t,i){return dot(n,t,i)},ast=tinymce.util.Tools.resolve("tinymce.util.VK"),vst=function(n,t,i,r){return bk(n,t,eot(i),r)},yst=function(n,t,i,r){return bk(n,t,oot(i),r)},wk=function(n,t){var i=kt.exact(t,0,t,0);return ost(i)},pst=function(t,i){var r,u=it.descendants(i,"tr");return(r=u,0===r.length?n.none():n.some(r[r.length-1])).bind(function(n){return a.descendant(n,"td,th").map(function(n){return wk(0,n)})})},bk=function(t,i,r,u){return r.fold(n.none,n.none,function(n,t){return gi.first(t).map(function(n){return wk(0,n)})},function(n){return g.table(n,i).bind(function(i){var r=kr.noMenu(n);return t.undoManager.transact(function(){u.insertRowsAfter(i,r)}),pst(0,i)})})},wst=["table","li","dl"],bst=function(n,t,r,u){var o;if(n.keyCode===ast.TAB){var s=rr(t),f=function(n){var t=c.name(n);return l.eq(n,s)||ft(wst,t)},e=t.selection.getRng();e.collapsed&&(o=i.fromDom(e.startContainer),g.cell(o,f).each(function(i){n.preventDefault();(n.shiftKey?yst:vst)(t,f,i,r,u).each(function(n){t.selection.setRng(n)})}))}},iu={response:y("selection","kill")},ru=function(n){return function(t){return t===n}},kst=ru(38),dst=ru(40),yt={ltr:{isBackward:ru(37),isForward:ru(39)},rtl:{isBackward:ru(39),isForward:ru(37)},isUp:kst,isDown:dst,isNavigation:function(n){return 37<=n&&n<=40}},kk=function(n,r){var u=hf.asLtrRange(n,r);return{start:t(i.fromDom(u.startContainer)),soffset:t(u.startOffset),finish:t(i.fromDom(u.endContainer)),foffset:t(u.endOffset)}},ge=function(n,i,r,u){return{start:t(tt.on(n,i)),finish:t(tt.on(r,u))}},gst=(vr.detect().browser.isSafari(),function(n){var t=n!==undefined?n.dom():document,i=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return ai(i,r)}),nht=gst,tht=function(n,t,i){(i!==undefined?i.dom():document).defaultView.scrollBy(n,t)},gk=function(t,i,r,u,f){return l.eq(r,u)?n.none():vv(r,u,i).bind(function(i){var u=i.boxes().getOr([]);return 0<u.length?(f(t,u,i.start(),i.finish()),n.some(iu.response(n.some(ge(r,0,r,li(r))),!0))):n.none()})},cc={sync:function(t,i,r,u,f,e,o){return l.eq(r,f)&&u===e?n.none():a.closest(r,"td,th",i).bind(function(n){return a.closest(f,"td,th",i).bind(function(r){return gk(t,i,n,r,o)})})},detect:gk,update:function(n,t,i,r,u){return iit(r,n,t,u.firstSelectedSelector(),u.lastSelectedSelector()).map(function(n){return u.clear(i),u.selectRange(i,n.boxes(),n.start(),n.finish()),n.boxes()})}},uu=vo(["left","top","right","bottom"],[]),vt={nu:uu,moveUp:function(n,t){return uu({left:n.left(),top:n.top()-t,right:n.right(),bottom:n.bottom()-t})},moveDown:function(n,t){return uu({left:n.left(),top:n.top()+t,right:n.right(),bottom:n.bottom()+t})},moveBottomTo:function(n,t){var i=n.bottom()-n.top();return uu({left:n.left(),top:t-i,right:n.right(),bottom:t})},moveTopTo:function(n,t){var i=n.bottom()-n.top();return uu({left:n.left(),top:t,right:n.right(),bottom:t+i})},getTop:function(n){return n.top()},getBottom:function(n){return n.bottom()},translate:function(n,t,i){return uu({left:n.left()+t,top:n.top()+i,right:n.right()+t,bottom:n.bottom()+i})},toString:function(n){return"("+n.left()+", "+n.top()+") -> ("+n.right()+", "+n.bottom()+")"}},no=function(n){return vt.nu({left:n.left,top:n.top,right:n.right,bottom:n.bottom})},nd=function(t,i){return n.some(t.getRect(i))},td=function(t,i,r){return c.isElement(i)?nd(t,i).map(no):c.isText(i)?(e=t,f=i,u=r,0<=u&&u<li(f)?e.getRangedRect(f,u,f,u+1):0<u?e.getRangedRect(f,u-1,f,u):n.none()).map(no):n.none();var e,f,u},id=function(t,i){return c.isElement(i)?nd(t,i).map(no):c.isText(i)?t.getRangedRect(i,0,i,li(i)).map(no):n.none()},lc=y("item","mode"),ac=function(n,t,i,r){var u=r!==undefined?r:cf;return n.property().parent(t).map(function(n){return lc(n,u)})},cf=function(n,t,i,r){var u=r!==undefined?r:fu;return i.sibling(n,t).map(function(n){return lc(n,u)})},fu=function(n,t,i,r){var u=r!==undefined?r:fu,f=n.property().children(t);return i.first(f).map(function(n){return lc(n,u)})},iht=[{current:ac,next:cf,fallback:n.none()},{current:cf,next:fu,fallback:n.some(ac)},{current:fu,next:fu,fallback:n.some(cf)}],rd=function(n,t,i,r,u){return u=u!==undefined?u:iht,ui(u,function(n){return n.current===i}).bind(function(i){return i.current(n,t,r,i.next).orThunk(function(){return i.fallback.bind(function(i){return rd(n,t,i,r)})})})},ur={backtrack:ac,sidestep:cf,advance:fu,go:rd},to={left:function(){return{sibling:function(n,t){return n.query().prevSibling(t)},first:function(t){return 0<t.length?n.some(t[t.length-1]):n.none()}}},right:function(){return{sibling:function(n,t){return n.query().nextSibling(t)},first:function(t){return 0<t.length?n.some(t[0]):n.none()}}}},vc=function(t,i,r,u,f,e){return ur.go(t,i,u,f).bind(function(i){return e(i.item())?n.none():r(i.item())?n.some(i.item()):vc(t,i.item(),r,i.mode(),f,e)})},rht=function(n,t,i,r){return vc(n,t,i,ur.sidestep,to.left(),r)},uht=function(n,t,i,r){return vc(n,t,i,ur.sidestep,to.right(),r)},ud=function(n,t){return 0===n.property().children(t).length},fd=function(n,t,i,r){return rht(n,t,i,r)},ed=function(n,t,i,r){return uht(n,t,i,r)},fr={before:function(n,t,i){return fd(n,t,e(ud,n),i)},after:function(n,t,i){return ed(n,t,e(ud,n),i)},seekLeft:fd,seekRight:ed,walkers:function(){return{left:to.left,right:to.right}},walk:function(n,t,i,r,u){return ur.go(n,t,i,r,u)},backtrack:ur.backtrack,sidestep:ur.sidestep,advance:ur.advance},eu=ys(),ou={gather:function(n,t,i){return fr.gather(eu,n,t,i)},before:function(n,t){return fr.before(eu,n,t)},after:function(n,t){return fr.after(eu,n,t)},seekLeft:function(n,t,i){return fr.seekLeft(eu,n,t,i)},seekRight:function(n,t,i){return fr.seekRight(eu,n,t,i)},walkers:function(){return fr.walkers()},walk:function(n,t,i,r){return fr.walk(eu,n,t,i,r)}},ii=wr([{none:[]},{retry:["caret"]}]),od=function(n,i,r){return ei.closest(i,fh).fold(t(!1),function(t){return id(n,t).exists(function(n){return t=n,(i=r).left()<t.left()||Math.abs(t.right()-i.left())<1||i.left()>t.right();var i,t})})},fht={point:vt.getTop,adjuster:function(n,t,i,r,u){var f=vt.moveUp(u,5);return Math.abs(i.top()-r.top())<1?ii.retry(f):i.bottom()<u.top()?ii.retry(f):i.bottom()===u.top()?ii.retry(vt.moveUp(u,1)):od(n,t,u)?ii.retry(vt.translate(f,5,0)):ii.none()},move:vt.moveUp,gather:ou.before},eht={point:vt.getBottom,adjuster:function(n,t,i,r,u){var f=vt.moveDown(u,5);return Math.abs(i.bottom()-r.bottom())<1?ii.retry(f):i.top()>u.bottom()?ii.retry(f):i.top()===u.bottom()?ii.retry(vt.moveDown(u,1)):od(n,t,u)?ii.retry(vt.translate(f,5,0)):ii.none()},move:vt.moveDown,gather:ou.after},yc=function(t,i,r,u,f){return 0===f?n.some(u):(h=t,l=u.left(),a=i.point(u),h.elementFromPoint(l,a).filter(function(n){return"table"===c.name(n)}).isSome()?(o=u,s=f-1,yc(t,e=i,r,e.move(o,5),s)):t.situsFromPoint(u.left(),i.point(u)).bind(function(e){return e.start().fold(n.none,function(e,o){return id(t,e,o).bind(function(o){return i.adjuster(t,e,o,r,u).fold(n.none,function(n){return yc(t,i,r,n,f-1)})}).orThunk(function(){return n.some(u)})},n.none)}));var e,o,s,h,l,a},sd=function(t,i,r){var u,f,o,s=t.move(r,5),e=yc(i,t,r,s,100).getOr(s);return(u=t,f=e,o=i,u.point(f)>o.getInnerHeight()?n.some(u.point(f)-o.getInnerHeight()):u.point(f)<0?n.some(-u.point(f)):n.none()).fold(function(){return i.situsFromPoint(e.left(),t.point(e))},function(n){return i.scrollBy(0,n),i.situsFromPoint(e.left(),t.point(e)-n)})},lf={tryUp:e(sd,fht),tryDown:e(sd,eht),ieTryUp:function(n,t){return n.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(n,t){return n.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:t(5)},io=wr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),oht=function(n){return a.closest(n,"tr")},su={verify:function(n,t,i,r,u,f,e){return a.closest(r,"td,th",e).bind(function(i){return a.closest(t,"td,th",e).map(function(t){return l.eq(i,t)?l.eq(r,i)&&li(i)===u?f(t):io.none("in same cell"):ne.sharedOne(oht,[i,t]).fold(function(){return e=t,o=i,r=(u=n).getRect(e),(s=u.getRect(o)).right>r.left&&s.left<r.right?io.success():f(t);var u,e,o,r,s},function(){return f(t)})})}).getOr(io.none("default"))},cata:function(n,t,i,r,u){return n.fold(t,i,r,u)},adt:io},pc={point:y("element","offset"),delta:y("element","deltaOffset"),range:y("element","start","finish"),points:y("begin","end"),text:y("element","text")},sht=(y("ancestor","descendants","element","index"),y("parent","children","element","index")),hht=function(n,t){return fi(n,e(l.eq,t))},cht=function(n){return h.parent(n).bind(function(t){var i=h.children(t);return hht(i,n).map(function(r){return sht(t,i,n,r)})})},wc=function(n){return"br"===c.name(n)},bc=function(t,i,r){return i(t,r).bind(function(t){return c.isText(t)&&0===di.get(t).trim().length?bc(t,i,r):n.some(t)})},lht=function(n,t,i,r){return(u=t,f=i,h.child(u,f).filter(wc).orThunk(function(){return h.child(u,f-1).filter(wc)})).bind(function(t){return r.traverse(t).fold(function(){return bc(t,r.gather,n).map(r.relative)},function(n){return cht(n).map(function(n){return tt.on(n.parent(),n.index())})})});var u,f},aht=function(n,i,r,u){var o,f,e;return(wc(i)?(o=n,f=i,(e=u).traverse(f).orThunk(function(){return bc(f,e.gather,o)}).map(e.relative)):lht(n,i,r,u)).map(function(n){return{start:t(n),finish:t(n)}})},vht=function(t){return su.cata(t,function(){return n.none()},function(){return n.none()},function(t){return n.some(pc.point(t,0))},function(t){return n.some(pc.point(t,li(t)))})},af=vr.detect(),kc=function(t,i,r,u,f,e){return 0===e?n.none():yht(t,i,r,u,f).bind(function(o){var s=t.fromSitus(o),h=su.verify(t,r,u,s.finish(),s.foffset(),f.failure,i);return su.cata(h,function(){return n.none()},function(){return n.some(o)},function(n){return l.eq(r,n)&&0===u?hd(t,r,u,vt.moveUp,f):kc(t,i,n,0,f,e-1)},function(n){return l.eq(r,n)&&u===li(n)?hd(t,r,u,vt.moveDown,f):kc(t,i,n,li(n),f,e-1)})})},hd=function(n,t,i,r,u){return td(n,t,i).bind(function(t){return cd(n,u,r(t,lf.getJumpSize()))})},cd=function(t,i,r){return af.browser.isChrome()||af.browser.isSafari()||af.browser.isFirefox()||af.browser.isEdge()?i.otherRetry(t,r):af.browser.isIE()?i.ieRetry(t,r):n.none()},yht=function(n,t,i,r,u){return td(n,i,r).bind(function(t){return cd(n,u,t)})},pht=function(t,i,r){return(u=t,f=i,e=r,u.getSelection().bind(function(t){return aht(f,t.finish(),t.foffset(),e).fold(function(){return n.some(pc.point(t.finish(),t.foffset()))},function(n){var i=u.fromSitus(n),r=su.verify(u,t.finish(),t.foffset(),i.finish(),i.foffset(),e.failure,f);return vht(r)})})).bind(function(n){return kc(t,i,n.element(),n.offset(),r,20).map(t.fromSitus)});var u,f,e},wht=function(n,t,i){return ei.ancestor(n,t,i).isSome()},bht=vr.detect(),ld=function(i,r,u,f,e){return a.closest(f,"td,th",r).bind(function(f){return a.closest(f,"table",r).bind(function(o){return s=o,wht(e,function(n){return h.parent(n).exists(function(n){return l.eq(n,s)})})?pht(i,r,u).bind(function(n){return a.closest(n.finish(),"td,th",r).map(function(i){return{start:t(f),finish:t(i),range:t(n)}})}):n.none();var s})})},ad=function(t,i,r,u,f,e){return bht.browser.isIE()?n.none():e(u,i).orThunk(function(){return ld(t,i,r,u,f).map(function(t){var i=t.range();return iu.response(n.some(ge(i.start(),i.soffset(),i.finish(),i.foffset())),!0)})})},vd=function(n,t,i,r,u,f,e){return ld(n,i,r,u,f).bind(function(n){return cc.detect(t,i,n.start(),n.finish(),e)})},kht=function(t,i){return a.closest(t,"tr",i).bind(function(t){return a.closest(t,"table",i).bind(function(r){var u=it.descendants(r,"tr");return l.eq(t,u[0])?ou.seekLeft(r,function(n){return gi.last(n).isSome()},i).map(function(t){var i=li(t);return iu.response(n.some(ge(t,i,t,i)),!0)}):n.none()})})},dht=function(t,i){return a.closest(t,"tr",i).bind(function(t){return a.closest(t,"table",i).bind(function(r){var u=it.descendants(r,"tr");return l.eq(t,u[u.length-1])?ou.seekRight(r,function(n){return gi.first(n).isSome()},i).map(function(t){return iu.response(n.some(ge(t,0,t,0)),!0)}):n.none()})})},yd=function(n,t){return a.closest(n,"td,th",t)},ro={down:{traverse:h.nextSibling,gather:ou.after,relative:tt.before,otherRetry:lf.tryDown,ieRetry:lf.ieTryDown,failure:su.adt.failedDown},up:{traverse:h.prevSibling,gather:ou.before,relative:tt.before,otherRetry:lf.tryUp,ieRetry:lf.ieTryUp,failure:su.adt.failedUp}},hu=y("rows","cols"),pd={mouse:function(t,i,r,u){var c,e,o,s,f,a,v=dk(t),h=(c=v,e=i,o=r,s=u,f=n.none(),a=function(){f=n.none()},{mousedown:function(n){s.clear(e);f=yd(n.target(),o)},mouseover:function(n){f.each(function(t){s.clear(e);yd(n.target(),o).each(function(n){vv(t,n,o).each(function(i){var r=i.boxes().getOr([]);(1<r.length||1===r.length&&!l.eq(t,n))&&(s.selectRange(e,r,i.start(),i.finish()),c.selectContents(n))})})})},mouseup:function(){f.each(a)}});return{mousedown:h.mousedown,mouseover:h.mouseover,mouseup:h.mouseup}},keyboard:function(t,i,r,u){var f=dk(t),o=function(){return u.clear(i),n.none()};return{keydown:function(t,s,h,c,l,a){var v=t.raw().which,y=!0===t.raw().shiftKey;return ks(i,u.selectedSelector()).fold(function(){return yt.isDown(v)&&y?e(vd,f,i,r,ro.down,c,s,u.selectRange):yt.isUp(v)&&y?e(vd,f,i,r,ro.up,c,s,u.selectRange):yt.isDown(v)?e(ad,f,r,ro.down,c,s,dht):yt.isUp(v)?e(ad,f,r,ro.up,c,s,kht):n.none},function(t){var r=function(r){return function(){return dr(r,function(n){return cc.update(n.rows(),n.cols(),i,t,u)}).fold(function(){return yv(i,u.firstSelectedSelector(),u.lastSelectedSelector()).map(function(t){var r=yt.isDown(v)||a.isForward(v)?tt.after:tt.before;return f.setRelativeSelection(tt.on(t.first(),0),r(t.table())),u.clear(i),iu.response(n.none(),!0)})},function(){return n.some(iu.response(n.none(),!0))})}};return yt.isDown(v)&&y?r([hu(1,0)]):yt.isUp(v)&&y?r([hu(-1,0)]):a.isBackward(v)&&y?r([hu(0,-1),hu(-1,0)]):a.isForward(v)&&y?r([hu(0,1),hu(1,0)]):yt.isNavigation(v)&&!1===y?o:n.none})()},keyup:function(t,f,e,o,s){return ks(i,u.selectedSelector()).fold(function(){var h=t.raw().which;return 0==(!0===t.raw().shiftKey)?n.none():yt.isNavigation(h)?cc.sync(i,r,f,e,o,s,u.selectRange):n.none()},n.none)}}}},ght=function(n,t){u(t,function(t){at.remove(n,t)})},nct=function(n){return function(t){at.add(t,n)}},tct=function(n){return function(t){ght(t,n)}},ict={byClass:function(n){var i=nct(n.selected()),r=tct([n.selected(),n.lastSelected(),n.firstSelected()]),t=function(t){var i=it.descendants(t,n.selectedSelector());u(i,r)};return{clear:t,selectRange:function(r,f,e,o){t(r);u(f,i);at.add(e,n.firstSelected());at.add(o,n.lastSelected())},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},byAttr:function(n){var i=function(t){r.remove(t,n.selected());r.remove(t,n.firstSelected());r.remove(t,n.lastSelected())},f=function(t){r.set(t,n.selected(),"1")},t=function(t){var r=it.descendants(t,n.selectedSelector());u(r,i)};return{clear:t,selectRange:function(i,e,o,s){t(i);u(e,f);r.set(o,n.firstSelected(),"1");r.set(s,n.lastSelected(),"1")},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}},dc=function(n){return!1===at.has(i.fromDom(n.target),"ephox-snooker-resizer-bar")},uct=k.each,fct=function(n){function t(t){return function(){n.execCommand(t)}}var i=[];uct("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"===t?i.push({text:"-"}):i.push(n.menuItems[t])});n.addButton("table",{type:"menubutton",title:"Table",menu:i});n.addButton("tableprops",{title:"Table properties",onclick:t("mceTableProps"),icon:"table"});n.addButton("tabledelete",{title:"Delete table",onclick:t("mceTableDelete")});n.addButton("tablecellprops",{title:"Cell properties",onclick:t("mceTableCellProps")});n.addButton("tablemergecells",{title:"Merge cells",onclick:t("mceTableMergeCells")});n.addButton("tablesplitcells",{title:"Split cell",onclick:t("mceTableSplitCells")});n.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:t("mceTableInsertRowBefore")});n.addButton("tableinsertrowafter",{title:"Insert row after",onclick:t("mceTableInsertRowAfter")});n.addButton("tabledeleterow",{title:"Delete row",onclick:t("mceTableDeleteRow")});n.addButton("tablerowprops",{title:"Row properties",onclick:t("mceTableRowProps")});n.addButton("tablecutrow",{title:"Cut row",onclick:t("mceTableCutRow")});n.addButton("tablecopyrow",{title:"Copy row",onclick:t("mceTableCopyRow")});n.addButton("tablepasterowbefore",{title:"Paste row before",onclick:t("mceTablePasteRowBefore")});n.addButton("tablepasterowafter",{title:"Paste row after",onclick:t("mceTablePasteRowAfter")});n.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:t("mceTableInsertColBefore")});n.addButton("tableinsertcolafter",{title:"Insert column after",onclick:t("mceTableInsertColAfter")});n.addButton("tabledeletecol",{title:"Delete column",onclick:t("mceTableDeleteCol")})},ect=function(n){var t,i=""===(t=n.getParam("table_toolbar",aft))||!1===t?[]:er(t)?t.split(/[ ,]/):yf(t)?t:[];0<i.length&&n.addContextToolbar(function(t){return n.dom.is(t,"table")&&n.getBody().contains(t)},i.join(" "))},oct=function(t,r){function f(n){return function(){t.execCommand(n)}}var s=n.none(),c=[],l=[],a=[],v=[],o=function(n){n.disabled(!0)},h=function(n){n.disabled(!1)},p=function(){var n=this;c.push(n);s.fold(function(){o(n)},function(){h(n)})},e=function(){var n=this;l.push(n);s.fold(function(){o(n)},function(){h(n)})},y,w;t.on("init",function(){t.on("nodechange",function(){var f=n.from(t.dom.getParent(t.selection.getStart(),"th,td"));(s=f.bind(function(n){var t=i.fromDom(n);return g.table(t).map(function(n){return kr.forMenu(r,n,t)})})).fold(function(){u(c,o);u(l,o);u(a,o);u(v,o)},function(n){u(c,h);u(l,h);u(a,function(t){t.disabled(n.mergable().isNone())});u(v,function(t){t.disabled(n.unmergable().isNone())})})})});y=function(n,t,i,r){var u,f,s,e,o,h=r.getEl().getElementsByTagName("table")[0],c=r.isRtl()||"tl-tr"===r.parent().rel;for(h.nextSibling.innerHTML=t+1+" x "+(i+1),c&&(t=9-t),f=0;f<10;f++)for(u=0;u<10;u++)e=h.rows[f].childNodes[u].firstChild,o=(c?t<=u:u<=t)&&f<=i,n.dom.toggleClass(e,"mce-active",o),o&&(s=e);return s.parentNode};w=!1===t.getParam("table_grid",!0,"boolean")?{text:"Table",icon:"table",context:"table",onclick:f("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(n){n.aria&&(this.parent().hideAll(),n.stopImmediatePropagation(),t.execCommand("mceInsertTable"))},onshow:function(){y(t,0,0,this.menu.items()[0])},onhide:function(){var n=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(n,"mce-active");t.dom.addClass(n[0],"mce-active")},menu:[{type:"container",html:function(){for(var n="",i,n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',t=0;t<10;t++){for(n+="<tr>",i=0;i<10;i++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+i)+'" href="#" data-mce-x="'+i+'" data-mce-y="'+t+'"><\/a><\/td>';n+="<\/tr>"}return n+="<\/table>",n+'<div class="mce-text-center" role="presentation">1 x 1<\/div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(n){var i,r,u=n.target;"A"===u.tagName.toUpperCase()&&(i=parseInt(u.getAttribute("data-mce-x"),10),r=parseInt(u.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(i=9-i),i===this.lastX&&r===this.lastY||(y(t,i,r,n.control),this.lastX=i,this.lastY=r))},onclick:function(n){var i=this;"A"===n.target.tagName.toUpperCase()&&(n.preventDefault(),n.stopPropagation(),i.parent().cancel(),t.undoManager.transact(function(){fc(t,i.lastX+1,i.lastY+1)}),t.addVisual())}}]};var b={text:"Table properties",context:"table",onPostRender:p,onclick:f("mceTableProps")},k={text:"Delete table",context:"table",onPostRender:p,cmd:"mceTableDelete"},d={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:f("mceTableInsertRowBefore"),onPostRender:e},{text:"Insert row after",onclick:f("mceTableInsertRowAfter"),onPostRender:e},{text:"Delete row",onclick:f("mceTableDeleteRow"),onPostRender:e},{text:"Row properties",onclick:f("mceTableRowProps"),onPostRender:e},{text:"-"},{text:"Cut row",onclick:f("mceTableCutRow"),onPostRender:e},{text:"Copy row",onclick:f("mceTableCopyRow"),onPostRender:e},{text:"Paste row before",onclick:f("mceTablePasteRowBefore"),onPostRender:e},{text:"Paste row after",onclick:f("mceTablePasteRowAfter"),onPostRender:e}]},nt={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:f("mceTableInsertColBefore"),onPostRender:e},{text:"Insert column after",onclick:f("mceTableInsertColAfter"),onPostRender:e},{text:"Delete column",onclick:f("mceTableDeleteCol"),onPostRender:e}]},tt={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:f("mceTableCellProps"),onPostRender:e},{text:"Merge cells",onclick:f("mceTableMergeCells"),onPostRender:function(){var n=this;a.push(n);s.fold(function(){o(n)},function(t){n.disabled(t.mergable().isNone())})}},{text:"Split cell",onclick:f("mceTableSplitCells"),onPostRender:function(){var n=this;v.push(n);s.fold(function(){o(n)},function(t){n.disabled(t.unmergable().isNone())})}}]};t.addMenuItem("inserttable",w);t.addMenuItem("tableprops",b);t.addMenuItem("deletetable",k);t.addMenuItem("row",d);t.addMenuItem("column",nt);t.addMenuItem("cell",tt)},sct=function(t,r){return{insertTable:function(n,i){return fc(t,n,i)},setClipboardRows:function(t){return u=r,f=s(t,i.fromDom),void u.set(n.from(f));var u,f},getClipboardRows:function(){return r.get().fold(function(){},function(n){return s(n,function(n){return n.dom()})})}}};wd.add("table",function(t){var i,r=rot(t),u=rct(t,r.lazyResize),f=pft(t,r.lazyWire),e=(i=t,{get:function(){var n=rr(i);return rit(n,nr.selectedSelector()).fold(function(){return i.selection.getStart()===undefined?br.none():br.single(i.selection)},function(n){return br.multiple(n)})}}),o=uf(n.none());return eet(t,f,u,e,o),sit(t,e,f,u),oct(t,e),fct(t),ect(t),t.on("PreInit",function(){t.serializer.addTempAttr(nr.firstSelected());t.serializer.addTempAttr(nr.lastSelected())}),t.getParam("table_tab_navigation",!0,"boolean")&&t.on("keydown",function(n){bst(n,t,f,r.lazyWire)}),t.on("remove",function(){r.destroy();u.destroy()}),sct(t,o)})}();!function(){"use strict";var a=tinymce.util.Tools.resolve("tinymce.PluginManager"),v=function(n,t){var i;return n.dom.getParents(n.selection.getStart(),function(n){var r;(r=n.style["forecolor"===t?"color":"background-color"])&&(i=i||r)}),i},y=function(n){for(var i=[],t=0;t<n.length;t+=2)i.push({text:n[t+1],color:"#"+n[t]});return i},p=function(n,t,i){n.undoManager.transact(function(){n.focus();n.formatter.apply(t,{value:i});n.nodeChanged()})},w=function(n,t){n.undoManager.transact(function(){n.focus();n.formatter.remove(t,{value:null},null,!0);n.nodeChanged()})},b=function(n){n.addCommand("mceApplyTextcolor",function(t,i){p(n,t,i)});n.addCommand("mceRemoveTextcolor",function(t){w(n,t)})},n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],i=function(n){return n.getParam("textcolor_map",d)},r=function(n){return n.getParam("textcolor_rows",5)},u=function(n){return n.getParam("textcolor_cols",8)},f=function(n){return n.getParam("color_picker_callback",null)},g=function(n){return n.getParam("forecolor_map",i(n))},nt=function(n){return n.getParam("backcolor_map",i(n))},tt=function(n){return n.getParam("forecolor_rows",r(n))},it=function(n){return n.getParam("backcolor_rows",r(n))},e=function(n){return n.getParam("forecolor_cols",u(n))},o=function(n){return n.getParam("backcolor_cols",u(n))},rt=f,ut=function(n){return"function"==typeof f(n)},t=tinymce.util.Tools.resolve("tinymce.util.I18n"),ft=function(i,r,u,f){var h,l,e,a,o,s,v,w=0,c=n.DOM.uniqueId("mcearia"),p=function(n,i){var r="transparent"===n;return'<td class="mce-grid-cell'+(r?" mce-colorbtn-trans":"")+'"><div id="'+c+"-"+w+++'" data-mce-color="'+(n||"")+'" role="option" tabIndex="-1" style="'+(n?"background-color: "+n:"")+'" title="'+t.translate(i)+'">'+(r?"&#215;":"")+"<\/div><\/td>"};for((h=y(u)).push({text:t.translate("No color"),color:"transparent"}),e='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=h.length-1,s=0;s<r;s++){for(e+="<tr>",o=0;o<i;o++)e+=a<(v=s*i+o)?"<td><\/td>":p((l=h[v]).color,l.text);e+="<\/tr>"}if(f){for(e+='<tr><td colspan="'+i+'" class="mce-custom-color-btn"><div id="'+c+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+c+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+t.translate("Custom...")+"<\/button><\/div><\/td><\/tr>",e+="<tr>",o=0;o<i;o++)e+=p("","Custom color");e+="<\/tr>"}return e+"<\/tbody><\/table>"},s=function(n,t){n.style.background=t;n.setAttribute("data-mce-color",t)},h=function(n){return function(t){var i=t.control;i._color?n.execCommand("mceApplyTextcolor",i.settings.format,i._color):n.execCommand("mceRemoveTextcolor",i.settings.format)}},c=function(t,i){return function(r){var f,u=this.parent(),o=v(t,u.settings.format),e=function(n){t.execCommand("mceApplyTextcolor",u.settings.format,n);u.hidePanel();u.color(n)};n.DOM.getParent(r.target,".mce-custom-color-btn")&&(u.hidePanel(),rt(t).call(t,function(n){for(var f,o=u.panel.getEl().getElementsByTagName("table")[0],r=k.map(o.rows[o.rows.length-1].childNodes,function(n){return n.firstChild}),t=0;t<r.length&&(f=r[t]).getAttribute("data-mce-color");t++);if(t===i)for(t=0;t<i-1;t++)s(r[t],r[t+1].getAttribute("data-mce-color"));s(f,n);e(n)},o));(f=r.target.getAttribute("data-mce-color"))?(this.lastId&&n.DOM.get(this.lastId).setAttribute("aria-selected","false"),r.target.setAttribute("aria-selected",!0),this.lastId=r.target.id,"transparent"===f?(t.execCommand("mceRemoveTextcolor",u.settings.format),u.hidePanel(),u.resetColor()):e(f)):null!==f&&u.hidePanel()}},l=function(n,t){return function(){var i=t?e(n):o(n),r=t?tt(n):it(n),u=t?g(n):nt(n),f=ut(n);return ft(i,r,u,f)}},et=function(n){n.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:l(n,!0),onclick:c(n,e(n))},onclick:h(n)});n.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:l(n,!1),onclick:c(n,o(n))},onclick:h(n)})};a.add("textcolor",function(n){b(n);et(n)})}();!function(){"use strict";var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Color"),t=function(n,t){n.find("#preview")[0].getEl().style.background=t},n=function(n,i){var u=r(i),f=u.toRgb();n.fromJSON({r:f.r,g:f.g,b:f.b,hex:u.toHex().substr(1)});t(n,u.toHex())},u=function(i,r,u){var f=i.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:u,onchange:function(){var n=this.rgb();f&&(f.find("#r").value(n.r),f.find("#g").value(n.g),f.find("#b").value(n.b),f.find("#hex").value(this.value().substr(1)),t(f,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var i,t,r=f.find("colorpicker")[0];if(i=this.name(),t=this.value(),"hex"===i)return n(f,t="#"+t),void r.value(t);t={r:f.find("#r").value(),g:f.find("#g").value(),b:f.find("#b").value()};r.value(t);n(f,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){r("#"+f.toJSON().hex)}});n(f,u)};i.add("colorpicker",function(n){n.settings.color_picker_callback||(n.settings.color_picker_callback=function(t,i){u(n,t,i)})})}()